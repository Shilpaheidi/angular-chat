"use strict";(self.webpackChunkangular_chat=self.webpackChunkangular_chat||[]).push([[179],{6304:(yt,ke,V)=>{V.d(ke,{Dh:()=>Oe,GT:()=>re,cc:()=>Me,hO:()=>Fe,on:()=>G,pX:()=>ce,xv:()=>ve});var l=V(5879),ne=V(120),U=V(2793);yt=V.hmd(yt);const te=["ngOnDestroy"],ce=(Le,Dt,bt,le={})=>new Proxy(Le,{get:(Ue,ue)=>bt.runOutsideAngular(()=>{var Te;if(Le[ue])return!(null===(Te=le?.spy)||void 0===Te)&&Te.get&&le.spy.get(ue,Le[ue]),Le[ue];if(te.indexOf(ue)>-1)return()=>{};const $e=Dt.toPromise().then(he=>{const je=he&&he[ue];return"function"==typeof je?je.bind(he):je&&je.then?je.then(it=>bt.run(()=>it)):bt.run(()=>je)});return new Proxy(()=>{},{get:(he,je)=>$e[je],apply:(he,je,it)=>$e.then(Pt=>{var Un;const Xn=Pt&&Pt(...it);return!(null===(Un=le?.spy)||void 0===Un)&&Un.apply&&le.spy.apply(ue,it,Xn),Xn})})})}),re=(Le,Dt)=>{Dt.forEach(bt=>{Object.getOwnPropertyNames(bt.prototype||bt).forEach(le=>{Object.defineProperty(Le.prototype,le,Object.getOwnPropertyDescriptor(bt.prototype||bt,le))})})};class xe{constructor(Dt){return Dt}}const Oe=new l.OlP("angularfire2.app.options"),ve=new l.OlP("angularfire2.app.name");function G(Le,Dt,bt){const Ue="object"==typeof bt&&bt||{};Ue.name=Ue.name||"string"==typeof bt&&bt||"[DEFAULT]";const Te=ne.Z.apps.filter($e=>$e&&$e.name===Ue.name)[0]||Dt.runOutsideAngular(()=>ne.Z.initializeApp(Le,Ue));try{JSON.stringify(Le)!==JSON.stringify(Te.options)&&Z("error",`${Te.name} Firebase App already initialized with different options${yt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new xe(Te)}const Z=(Le,...Dt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[Le](...Dt)},oe={provide:xe,useFactory:G,deps:[Oe,l.R0b,[new l.FiY,ve]]};let Fe=(()=>{class Le{constructor(bt){ne.Z.registerVersion("angularfire",U.q4.full,"core"),ne.Z.registerVersion("angularfire",U.q4.full,"app-compat"),ne.Z.registerVersion("angular",l.q4F.full,bt.toString())}static initializeApp(bt,le){return{ngModule:Le,providers:[{provide:Oe,useValue:bt},{provide:ve,useValue:le}]}}}return Le.\u0275fac=function(bt){return new(bt||Le)(l.LFG(l.Lbi))},Le.\u0275mod=l.oAB({type:Le}),Le.\u0275inj=l.cJS({providers:[oe]}),Le})();function Me(Le,Dt,bt,le,Ue){const[,ue,Te]=globalThis.\u0275AngularfireInstanceCache.find($e=>$e[0]===Le)||[];if(ue)return function tt(Le,Dt){try{return Le.toString()===Dt.toString()}catch{return Le===Dt}}(Ue,Te)||(et("error",`${Dt} was already initialized on the ${bt} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),et("warn",{is:Ue,was:Te})),ue;{const $e=le();return globalThis.\u0275AngularfireInstanceCache.push([Le,$e,Ue]),$e}}const Ve=!!yt.hot,et=(Le,...Dt)=>{(0,l.X6Q)()&&typeof console<"u"&&console[Le](...Dt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(yt,ke,V)=>{V.d(ke,{q4:()=>No,iC:()=>Vh,fc:()=>hc,HU:()=>vf,vb:()=>dc,JM:()=>lc});var l=V(5879),ne=V(4097),U=V(5861),te=V(4303),ce=V(9058),re=V(4537),xe=V(7879);const Oe=(k,T)=>T.some(O=>k instanceof O);let ve,G;const Fe=new WeakMap,Me=new WeakMap,tt=new WeakMap,Ve=new WeakMap,et=new WeakMap;let bt={get(k,T,O){if(k instanceof IDBTransaction){if("done"===T)return Me.get(k);if("objectStoreNames"===T)return k.objectStoreNames||tt.get(k);if("store"===T)return O.objectStoreNames[1]?void 0:O.objectStore(O.objectStoreNames[0])}return Te(k[T])},set:(k,T,O)=>(k[T]=O,!0),has:(k,T)=>k instanceof IDBTransaction&&("done"===T||"store"===T)||T in k};function ue(k){return"function"==typeof k?function Ue(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function oe(){return G||(G=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...T){return k.apply($e(this),T),Te(Fe.get(this))}:function(...T){return Te(k.apply($e(this),T))}:function(T,...O){const B=k.call($e(this),T,...O);return tt.set(B,T.sort?T.sort():[T]),Te(B)}}(k):(k instanceof IDBTransaction&&function Dt(k){if(Me.has(k))return;const T=new Promise((O,B)=>{const W=()=>{k.removeEventListener("complete",se),k.removeEventListener("error",_e),k.removeEventListener("abort",_e)},se=()=>{O(),W()},_e=()=>{B(k.error||new DOMException("AbortError","AbortError")),W()};k.addEventListener("complete",se),k.addEventListener("error",_e),k.addEventListener("abort",_e)});Me.set(k,T)}(k),Oe(k,function Z(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,bt):k)}function Te(k){if(k instanceof IDBRequest)return function Le(k){const T=new Promise((O,B)=>{const W=()=>{k.removeEventListener("success",se),k.removeEventListener("error",_e)},se=()=>{O(Te(k.result)),W()},_e=()=>{B(k.error),W()};k.addEventListener("success",se),k.addEventListener("error",_e)});return T.then(O=>{O instanceof IDBCursor&&Fe.set(O,k)}).catch(()=>{}),et.set(T,k),T}(k);if(Ve.has(k))return Ve.get(k);const T=ue(k);return T!==k&&(Ve.set(k,T),et.set(T,k)),T}const $e=k=>et.get(k),it=["get","getKey","getAll","getAllKeys","count"],Pt=["put","add","delete","clear"],Un=new Map;function Xn(k,T){var O;if(!(k instanceof IDBDatabase)||T in k||"string"!=typeof T)return;if(Un.get(T))return Un.get(T);const B=T.replace(/FromIndex$/,""),W=T!==B,se=Pt.includes(B);if(!(B in(W?IDBIndex:IDBObjectStore).prototype)||!se&&!it.includes(B))return;const _e=function(qe){return(O=O||(0,U.Z)(function*(at,...wt){const kt=this.transaction(at,se?"readwrite":"readonly");let Zt=kt.store;return W&&(Zt=Zt.index(wt.shift())),(yield Promise.all([Zt[B](...wt),se&&kt.done]))[0]})).apply(this,arguments)};return Un.set(T,_e),_e}var Yn,Pi,wi,Qr,fe,pe,Ee,ye,We,He,dt,Je,xi,St,_n,Gt;!function le(k){bt=k(bt)}(k=>({...k,get:(T,O,B)=>Xn(T,O)||k.get(T,O,B),has:(T,O)=>!!Xn(T,O)||k.has(T,O)}));const hn="@firebase/installations",Nn="0.6.4",Oi=1e4,mr=`w:${Nn}`,Rs="FIS_v2",Ps="https://firebaseinstallations.googleapis.com/v1",Qs=36e5,Ut=new ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function en(k){return k instanceof ce.ZR&&k.code.includes("request-failed")}function Pn({projectId:k}){return`${Ps}/projects/${k}/installations`}function fr(k){return{token:k.token,requestStatus:2,expiresIn:An(k.expiresIn),creationTime:Date.now()}}function tr(k,T){return(Yn=Yn||(0,U.Z)(function*(O,B){const se=(yield B.json()).error;return Ut.create("request-failed",{requestName:O,serverCode:se.code,serverMessage:se.message,serverStatus:se.status})})).apply(this,arguments)}function On({apiKey:k}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":k})}function Xs(k){return(Pi=Pi||(0,U.Z)(function*(T){const O=yield T();return O.status>=500&&O.status<600?T():O})).apply(this,arguments)}function An(k){return Number(k.replace("s","000"))}function fs(k){return new Promise(T=>{setTimeout(T,k)})}const Eo=/^[cdef][\w-]{21}$/,ps="";function Ka(){try{const k=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(k),k[0]=112+k[0]%16;const O=function Be(k){return function Js(k){return btoa(String.fromCharCode(...k)).replace(/\+/g,"-").replace(/\//g,"_")}(k).substr(0,22)}(k);return Eo.test(O)?O:ps}catch{return ps}}function X(k){return`${k.appName}!${k.appId}`}const Ce=new Map;function Qe(k,T){const O=X(k);Bn(O,T),function K(k,T){const O=function J(){return!Y&&"BroadcastChannel"in self&&(Y=new BroadcastChannel("[Firebase] FID Change"),Y.onmessage=k=>{Bn(k.data.key,k.data.fid)}),Y}();O&&O.postMessage({key:k,fid:T}),function Se(){0===Ce.size&&Y&&(Y.close(),Y=null)}()}(O,T)}function Bn(k,T){const O=Ce.get(k);if(O)for(const B of O)B(T)}let Y=null;const me="firebase-installations-database",ht=1,Bt="firebase-installations-store";let qt=null;function Ni(){return qt||(qt=function he(k,T,{blocked:O,upgrade:B,blocking:W,terminated:se}={}){const _e=indexedDB.open(k,T),Ne=Te(_e);return B&&_e.addEventListener("upgradeneeded",qe=>{B(Te(_e.result),qe.oldVersion,qe.newVersion,Te(_e.transaction))}),O&&_e.addEventListener("blocked",()=>O()),Ne.then(qe=>{se&&qe.addEventListener("close",()=>se()),W&&qe.addEventListener("versionchange",()=>W())}).catch(()=>{}),Ne}(me,ht,{upgrade:(k,T)=>{0===T&&k.createObjectStore(Bt)}})),qt}function Yt(k,T){return(Qr=Qr||(0,U.Z)(function*(O,B){const W=X(O),_e=(yield Ni()).transaction(Bt,"readwrite"),Ne=_e.objectStore(Bt),qe=yield Ne.get(W);return yield Ne.put(B,W),yield _e.done,(!qe||qe.fid!==B.fid)&&Qe(O,B.fid),B})).apply(this,arguments)}function Ir(k){return(fe=fe||(0,U.Z)(function*(T){const O=X(T),W=(yield Ni()).transaction(Bt,"readwrite");yield W.objectStore(Bt).delete(O),yield W.done})).apply(this,arguments)}function Xt(k,T){return(pe=pe||(0,U.Z)(function*(O,B){const W=X(O),_e=(yield Ni()).transaction(Bt,"readwrite"),Ne=_e.objectStore(Bt),qe=yield Ne.get(W),at=B(qe);return void 0===at?yield Ne.delete(W):yield Ne.put(at,W),yield _e.done,at&&(!qe||qe.fid!==at.fid)&&Qe(O,at.fid),at})).apply(this,arguments)}function pr(k){return(Ee=Ee||(0,U.Z)(function*(T){let O;const B=yield Xt(T.appConfig,W=>{const se=function Xo(k){return Os(k||{fid:Ka(),registrationStatus:0})}(W),_e=function oh(k,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Ut.create("app-offline"))};const O={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function h_(k,T){return(ye=ye||(0,U.Z)(function*(O,B){try{const W=yield function yn(k,T){return(wi=wi||(0,U.Z)(function*({appConfig:O,heartbeatServiceProvider:B},{fid:W}){const se=Pn(O),_e=On(O),Ne=B.getImmediate({optional:!0});if(Ne){const kt=yield Ne.getHeartbeatsHeader();kt&&_e.append("x-firebase-client",kt)}const at={method:"POST",headers:_e,body:JSON.stringify({fid:W,authVersion:Rs,appId:O.appId,sdkVersion:mr})},wt=yield Xs(()=>fetch(se,at));if(wt.ok){const kt=yield wt.json();return{fid:kt.fid||W,registrationStatus:2,refreshToken:kt.refreshToken,authToken:fr(kt.authToken)}}throw yield tr("Create Installation",wt)})).apply(this,arguments)}(O,B);return Yt(O.appConfig,W)}catch(W){throw en(W)&&409===W.customData.serverCode?yield Ir(O.appConfig):yield Yt(O.appConfig,{fid:B.fid,registrationStatus:0}),W}})).apply(this,arguments)}(k,O);return{installationEntry:O,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Io(k)}:{installationEntry:T}}(T,se);return O=_e.registrationPromise,_e.installationEntry});return B.fid===ps?{installationEntry:yield O}:{installationEntry:B,registrationPromise:O}})).apply(this,arguments)}function Io(k){return(We=We||(0,U.Z)(function*(T){let O=yield Uc(T.appConfig);for(;1===O.registrationStatus;)yield fs(100),O=yield Uc(T.appConfig);if(0===O.registrationStatus){const{installationEntry:B,registrationPromise:W}=yield pr(T);return W||B}return O})).apply(this,arguments)}function Uc(k){return Xt(k,T=>{if(!T)throw Ut.create("installation-not-found");return Os(T)})}function Os(k){return function Do(k){return 1===k.registrationStatus&&k.registrationTime+Oi<Date.now()}(k)?{fid:k.fid,registrationStatus:0}:k}function gn(k,T){return(He=He||(0,U.Z)(function*({appConfig:O,heartbeatServiceProvider:B},W){const se=function hi(k,{fid:T}){return`${Pn(k)}/${T}/authTokens:generate`}(O,W),_e=function Ci(k,{refreshToken:T}){const O=On(k);return O.append("Authorization",function Qo(k){return`${Rs} ${k}`}(T)),O}(O,W),Ne=B.getImmediate({optional:!0});if(Ne){const kt=yield Ne.getHeartbeatsHeader();kt&&_e.append("x-firebase-client",kt)}const at={method:"POST",headers:_e,body:JSON.stringify({installation:{sdkVersion:mr,appId:O.appId}})},wt=yield Xs(()=>fetch(se,at));if(wt.ok)return fr(yield wt.json());throw yield tr("Generate Auth Token",wt)})).apply(this,arguments)}function mi(k){return(dt=dt||(0,U.Z)(function*(T,O=!1){let B;const W=yield Xt(T.appConfig,_e=>{if(!Ye(_e))throw Ut.create("not-registered");const Ne=_e.authToken;if(!O&&function _s(k){return 2===k.requestStatus&&!function gs(k){const T=Date.now();return T<k.creationTime||k.creationTime+k.expiresIn<T+Qs}(k)}(Ne))return _e;if(1===Ne.requestStatus)return B=function Fl(k,T){return(Je=Je||(0,U.Z)(function*(O,B){let W=yield Ca(O.appConfig);for(;1===W.authToken.requestStatus;)yield fs(100),W=yield Ca(O.appConfig);const se=W.authToken;return 0===se.requestStatus?mi(O,B):se})).apply(this,arguments)}(T,O),_e;{if(!navigator.onLine)throw Ut.create("app-offline");const qe=function Qa(k){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},k),{authToken:T})}(_e);return B=function ko(k,T){return(xi=xi||(0,U.Z)(function*(O,B){try{const W=yield gn(O,B),se=Object.assign(Object.assign({},B),{authToken:W});return yield Yt(O.appConfig,se),W}catch(W){if(!en(W)||401!==W.customData.serverCode&&404!==W.customData.serverCode){const se=Object.assign(Object.assign({},B),{authToken:{requestStatus:0}});yield Yt(O.appConfig,se)}else yield Ir(O.appConfig);throw W}})).apply(this,arguments)}(T,qe),qe}});return B?yield B:W.authToken})).apply(this,arguments)}function Ca(k){return Xt(k,T=>{if(!Ye(T))throw Ut.create("not-registered");return function Gd(k){return 1===k.requestStatus&&k.requestTime+Oi<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Ye(k){return void 0!==k&&2===k.registrationStatus}function Hn(k){return Ut.create("missing-app-config-values",{valueName:k})}const Hc="installations",f_=k=>{const T=k.getProvider("app").getImmediate(),O=function vn(k){if(!k||!k.options)throw Hn("App Configuration");if(!k.name)throw Hn("App Name");const T=["projectId","apiKey","appId"];for(const O of T)if(!k.options[O])throw Hn(O);return{appName:k.name,projectId:k.options.projectId,apiKey:k.options.apiKey,appId:k.options.appId}}(T);return{app:T,appConfig:O,heartbeatServiceProvider:(0,te._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},jm=k=>{const T=k.getProvider("app").getImmediate(),O=(0,te._getProvider)(T,Hc).getImmediate();return{getId:()=>function $d(k){return(St=St||(0,U.Z)(function*(T){const O=T,{installationEntry:B,registrationPromise:W}=yield pr(O);return W?W.catch(console.error):mi(O).catch(console.error),B.fid})).apply(this,arguments)}(O),getToken:W=>function Ll(k){return(_n=_n||(0,U.Z)(function*(T,O=!1){const B=T;return yield function ah(k){return(Gt=Gt||(0,U.Z)(function*(T){const{registrationPromise:O}=yield pr(T);O&&(yield O)})).apply(this,arguments)}(B),(yield mi(B,O)).token})).apply(this,arguments)}(O,W)}};var Dr;(function Bl(){(0,te._registerComponent)(new re.wA(Hc,f_,"PUBLIC")),(0,te._registerComponent)(new re.wA("installations-internal",jm,"PRIVATE"))})(),(0,te.registerVersion)(hn,Nn),(0,te.registerVersion)(hn,Nn,"esm2017");const lh="@firebase/remote-config",Ei=new ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xr{constructor(T,O,B,W){this.client=T,this.storage=O,this.storageCache=B,this.logger=W}isCachedDataFresh(T,O){if(!O)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-O,W=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${W}.`),W}fetch(T){var O=this;return(0,U.Z)(function*(){const[B,W]=yield Promise.all([O.storage.getLastSuccessfulFetchTimestampMillis(),O.storage.getLastSuccessfulFetchResponse()]);if(W&&O.isCachedDataFresh(T.cacheMaxAgeMillis,B))return W;T.eTag=W&&W.eTag;const se=yield O.client.fetch(T),_e=[O.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&_e.push(O.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(_e),se})()}}function Ea(k=navigator){return k.languages&&k.languages[0]||k.language}class vr{constructor(T,O,B,W,se,_e){this.firebaseInstallations=T,this.sdkVersion=O,this.namespace=B,this.projectId=W,this.apiKey=se,this.appId=_e}fetch(T){var O=this;return(0,U.Z)(function*(){const[B,W]=yield Promise.all([O.firebaseInstallations.getId(),O.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${O.projectId}/namespaces/${O.namespace}:fetch?key=${O.apiKey}`,Ne={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},qe={sdk_version:O.sdkVersion,app_instance_id:B,app_instance_id_token:W,app_id:O.appId,language_code:Ea()},at={method:"POST",headers:Ne,body:JSON.stringify(qe)},wt=fetch(_e,at),kt=new Promise((Lt,ws)=>{T.signal.addEventListener(()=>{const qi=new Error("The operation was aborted.");qi.name="AbortError",ws(qi)})});let Zt;try{yield Promise.race([wt,kt]),Zt=yield wt}catch(Lt){let ws="fetch-client-network";throw"AbortError"===Lt?.name&&(ws="fetch-timeout"),Ei.create(ws,{originalErrorMessage:Lt?.message})}let pi=Zt.status;const Jn=Zt.headers.get("ETag")||void 0;let Dn,ar;if(200===Zt.status){let Lt;try{Lt=yield Zt.json()}catch(ws){throw Ei.create("fetch-client-parse",{originalErrorMessage:ws?.message})}Dn=Lt.entries,ar=Lt.state}if("INSTANCE_STATE_UNSPECIFIED"===ar?pi=500:"NO_CHANGE"===ar?pi=304:("NO_TEMPLATE"===ar||"EMPTY_CONFIG"===ar)&&(Dn={}),304!==pi&&200!==pi)throw Ei.create("fetch-status",{httpStatus:pi});return{status:pi,eTag:Jn,config:Dn}})()}}class bs{constructor(T,O){this.client=T,this.storage=O}fetch(T){var O=this;return(0,U.Z)(function*(){const B=(yield O.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return O.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:O,backoffCount:B}){var W=this;return(0,U.Z)(function*(){yield function jc(k,T){return new Promise((O,B)=>{const W=Math.max(T-Date.now(),0),se=setTimeout(O,W);k.addEventListener(()=>{clearTimeout(se),B(Ei.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,O);try{const se=yield W.client.fetch(T);return yield W.storage.deleteThrottleMetadata(),se}catch(se){if(!function $t(k){if(!(k instanceof ce.ZR&&k.customData))return!1;const T=Number(k.customData.httpStatus);return 429===T||500===T||503===T||504===T}(se))throw se;const _e={throttleEndTimeMillis:Date.now()+(0,ce.$s)(B),backoffCount:B+1};return yield W.storage.setThrottleMetadata(_e),W.attemptFetch(T,_e)}})()}}class So{constructor(T,O,B,W,se){this.app=T,this._client=O,this._storageCache=B,this._storage=W,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ul(k,T){const O=k.target.error||void 0;return Ei.create(T,{originalErrorMessage:O&&O?.message})}const Vr="app_namespace_store";class eo{constructor(T,O,B,W=function zl(){return new Promise((k,T)=>{try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=B=>{T(Ul(B,"storage-open"))},O.onsuccess=B=>{k(B.target.result)},O.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(Vr,{keyPath:"compositeKey"})}}catch(O){T(Ei.create("storage-open",{originalErrorMessage:O?.message}))}})}()){this.appId=T,this.appName=O,this.namespace=B,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var O=this;return(0,U.Z)(function*(){const B=yield O.openDbPromise;return new Promise((W,se)=>{const Ne=B.transaction([Vr],"readonly").objectStore(Vr),qe=O.createCompositeKey(T);try{const at=Ne.get(qe);at.onerror=wt=>{se(Ul(wt,"storage-get"))},at.onsuccess=wt=>{const kt=wt.target.result;W(kt?kt.value:void 0)}}catch(at){se(Ei.create("storage-get",{originalErrorMessage:at?.message}))}})})()}set(T,O){var B=this;return(0,U.Z)(function*(){const W=yield B.openDbPromise;return new Promise((se,_e)=>{const qe=W.transaction([Vr],"readwrite").objectStore(Vr),at=B.createCompositeKey(T);try{const wt=qe.put({compositeKey:at,value:O});wt.onerror=kt=>{_e(Ul(kt,"storage-set"))},wt.onsuccess=()=>{se()}}catch(wt){_e(Ei.create("storage-set",{originalErrorMessage:wt?.message}))}})})()}delete(T){var O=this;return(0,U.Z)(function*(){const B=yield O.openDbPromise;return new Promise((W,se)=>{const Ne=B.transaction([Vr],"readwrite").objectStore(Vr),qe=O.createCompositeKey(T);try{const at=Ne.delete(qe);at.onerror=wt=>{se(Ul(wt,"storage-delete"))},at.onsuccess=()=>{W()}}catch(at){se(Ei.create("storage-delete",{originalErrorMessage:at?.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class jl{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,U.Z)(function*(){const O=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),W=T.storage.getActiveConfig(),se=yield O;se&&(T.lastFetchStatus=se);const _e=yield B;_e&&(T.lastSuccessfulFetchTimestampMillis=_e);const Ne=yield W;Ne&&(T.activeConfig=Ne)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Ao(){return(Dr=Dr||(0,U.Z)(function*(){if(!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}!function mh(){(0,te._registerComponent)(new re.wA("remote-config",function k(T,{instanceIdentifier:O}){const B=T.getProvider("app").getImmediate(),W=T.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Ei.create("registration-window");if(!(0,ce.hl)())throw Ei.create("indexed-db-unavailable");const{projectId:se,apiKey:_e,appId:Ne}=B.options;if(!se)throw Ei.create("registration-project-id");if(!_e)throw Ei.create("registration-api-key");if(!Ne)throw Ei.create("registration-app-id");const qe=new eo(Ne,B.name,O=O||"firebase"),at=new jl(qe),wt=new xe.Yd(lh);wt.logLevel=xe.in.ERROR;const kt=new vr(W,te.SDK_VERSION,O,se,_e,Ne),Zt=new bs(kt,qe),pi=new Xr(Zt,qe,at,wt),Jn=new So(B,pi,at,qe,wt);return function zc(k){const T=(0,ce.m9)(k);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(Jn),Jn},"PUBLIC").setMultipleInstances(!0)),(0,te.registerVersion)(lh,"0.4.4"),(0,te.registerVersion)(lh,"0.4.4","esm2017")}();const Gl=(k,T)=>T.some(O=>k instanceof O);let Ia,on;const ph=new WeakMap,Ur=new WeakMap,Gc=new WeakMap,Jr=new WeakMap,nc=new WeakMap;let kr={get(k,T,O){if(k instanceof IDBTransaction){if("done"===T)return Ur.get(k);if("objectStoreNames"===T)return k.objectStoreNames||Gc.get(k);if("store"===T)return O.objectStoreNames[1]?void 0:O.objectStore(O.objectStoreNames[0])}return Fs(k[T])},set:(k,T,O)=>(k[T]=O,!0),has:(k,T)=>k instanceof IDBTransaction&&("done"===T||"store"===T)||T in k};function Da(k){return"function"==typeof k?function _h(k){return k!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function fh(){return on||(on=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(k)?function(...T){return k.apply(Ls(this),T),Fs(ph.get(this))}:function(...T){return Fs(k.apply(Ls(this),T))}:function(T,...O){const B=k.call(Ls(this),T,...O);return Gc.set(B,T.sort?T.sort():[T]),Fs(B)}}(k):(k instanceof IDBTransaction&&function Li(k){if(Ur.has(k))return;const T=new Promise((O,B)=>{const W=()=>{k.removeEventListener("complete",se),k.removeEventListener("error",_e),k.removeEventListener("abort",_e)},se=()=>{O(),W()},_e=()=>{B(k.error||new DOMException("AbortError","AbortError")),W()};k.addEventListener("complete",se),k.addEventListener("error",_e),k.addEventListener("abort",_e)});Ur.set(k,T)}(k),Gl(k,function g_(){return Ia||(Ia=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(k,kr):k)}function Fs(k){if(k instanceof IDBRequest)return function br(k){const T=new Promise((O,B)=>{const W=()=>{k.removeEventListener("success",se),k.removeEventListener("error",_e)},se=()=>{O(Fs(k.result)),W()},_e=()=>{B(k.error),W()};k.addEventListener("success",se),k.addEventListener("error",_e)});return T.then(O=>{O instanceof IDBCursor&&ph.set(O,k)}).catch(()=>{}),nc.set(T,k),T}(k);if(Jr.has(k))return Jr.get(k);const T=Da(k);return T!==k&&(Jr.set(k,T),nc.set(T,k)),T}const Ls=k=>nc.get(k);function $l(k,T,{blocked:O,upgrade:B,blocking:W,terminated:se}={}){const _e=indexedDB.open(k,T),Ne=Fs(_e);return B&&_e.addEventListener("upgradeneeded",qe=>{B(Fs(_e.result),qe.oldVersion,qe.newVersion,Fs(_e.transaction))}),O&&_e.addEventListener("blocked",()=>O()),Ne.then(qe=>{se&&qe.addEventListener("close",()=>se()),W&&qe.addEventListener("versionchange",()=>W())}).catch(()=>{}),Ne}function gh(k,{blocked:T}={}){const O=indexedDB.deleteDatabase(k);return T&&O.addEventListener("blocked",()=>T()),Fs(O).then(()=>{})}const $c=["get","getKey","getAll","getAllKeys","count"],Ib=["put","add","delete","clear"],vh=new Map;function qm(k,T){var O;if(!(k instanceof IDBDatabase)||T in k||"string"!=typeof T)return;if(vh.get(T))return vh.get(T);const B=T.replace(/FromIndex$/,""),W=T!==B,se=Ib.includes(B);if(!(B in(W?IDBIndex:IDBObjectStore).prototype)||!se&&!$c.includes(B))return;const _e=function(qe){return(O=O||(0,U.Z)(function*(at,...wt){const kt=this.transaction(at,se?"readwrite":"readonly");let Zt=kt.store;return W&&(Zt=Zt.index(wt.shift())),(yield Promise.all([Zt[B](...wt),se&&kt.done]))[0]})).apply(this,arguments)};return vh.set(T,_e),_e}var bh,qd,Db,Ym,oi,kb,Tb,Sb,Yd,ka,Ab,na,yh,Zm,Mb,Rb,Km,es,ia,wh;!function Hr(k){kr=k(kr)}(k=>({...k,get:(T,O,B)=>qm(T,O)||k.get(T,O,B),has:(T,O)=>!!qm(T,O)||k.has(T,O)}));const Wl="/firebase-messaging-sw.js",Si="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wc="https://fcmregistrations.googleapis.com/v1",xh="google.c.a.c_id",Ch="google.c.a.c_l",ql="google.c.a.ts";var qc=function(k){return k.PUSH_RECEIVED="push-received",k.NOTIFICATION_CLICKED="notification-clicked",k}(qc||{});function Bs(k){const T=new Uint8Array(k);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Qm(k){const O=(k+"=".repeat((4-k.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(O),W=new Uint8Array(B.length);for(let se=0;se<B.length;++se)W[se]=B.charCodeAt(se);return W}const Yc="fcm_token_details_db",ts=5,Zc="fcm_token_object_Store",b_="firebase-messaging-database",Kd=1,Sa="firebase-messaging-store";let ic=null;function Yl(){return ic||(ic=$l(b_,Kd,{upgrade:(k,T)=>{0===T&&k.createObjectStore(Sa)}})),ic}function y_(k){return(qd=qd||(0,U.Z)(function*(T){const O=Eh(T),W=yield(yield Yl()).transaction(Sa).objectStore(Sa).get(O);if(W)return W;{const se=yield function Kc(k){return(bh=bh||(0,U.Z)(function*(T){var O;if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ne=>Ne.name).includes(Yc))return null;let B=null;return(yield $l(Yc,ts,{upgrade:function(_e,Ne,qe,at){return(O=O||(0,U.Z)(function*(wt,kt,Zt,pi){var Jn;if(kt<2||!wt.objectStoreNames.contains(Zc))return;const Dn=pi.objectStore(Zc),ar=yield Dn.index("fcmSenderId").get(T);if(yield Dn.clear(),ar)if(2===kt){const Lt=ar;if(!Lt.auth||!Lt.p256dh||!Lt.endpoint)return;B={token:Lt.fcmToken,createTime:null!==(Jn=Lt.createTime)&&void 0!==Jn?Jn:Date.now(),subscriptionOptions:{auth:Lt.auth,p256dh:Lt.p256dh,endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:"string"==typeof Lt.vapidKey?Lt.vapidKey:Bs(Lt.vapidKey)}}}else if(3===kt){const Lt=ar;B={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Bs(Lt.auth),p256dh:Bs(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Bs(Lt.vapidKey)}}}else if(4===kt){const Lt=ar;B={token:Lt.fcmToken,createTime:Lt.createTime,subscriptionOptions:{auth:Bs(Lt.auth),p256dh:Bs(Lt.p256dh),endpoint:Lt.endpoint,swScope:Lt.swScope,vapidKey:Bs(Lt.vapidKey)}}}})).apply(this,arguments)}})).close(),yield gh(Yc),yield gh("fcm_vapid_details_db"),yield gh("undefined"),function Zd(k){if(!k||!k.subscriptionOptions)return!1;const{subscriptionOptions:T}=k;return"number"==typeof k.createTime&&k.createTime>0&&"string"==typeof k.token&&k.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}(B)?B:null})).apply(this,arguments)}(T.appConfig.senderId);if(se)return yield Qd(T,se),se}})).apply(this,arguments)}function Qd(k,T){return(Db=Db||(0,U.Z)(function*(O,B){const W=Eh(O),_e=(yield Yl()).transaction(Sa,"readwrite");return yield _e.objectStore(Sa).put(B,W),yield _e.done,B})).apply(this,arguments)}function Eh({appConfig:k}){return k.appId}const zr=new ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function lx(k,T){return(oi=oi||(0,U.Z)(function*(O,B){const W=yield Mo(O),se=Xc(B),_e={method:"POST",headers:W,body:JSON.stringify(se)};let Ne;try{Ne=yield(yield fetch(Qc(O.appConfig),_e)).json()}catch(qe){throw zr.create("token-subscribe-failed",{errorInfo:qe?.toString()})}if(Ne.error)throw zr.create("token-subscribe-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw zr.create("token-subscribe-no-token");return Ne.token})).apply(this,arguments)}function Xd(k,T){return(Tb=Tb||(0,U.Z)(function*(O,B){const se={method:"DELETE",headers:yield Mo(O)};try{const Ne=yield(yield fetch(`${Qc(O.appConfig)}/${B}`,se)).json();if(Ne.error)throw zr.create("token-unsubscribe-failed",{errorInfo:Ne.error.message})}catch(_e){throw zr.create("token-unsubscribe-failed",{errorInfo:_e?.toString()})}})).apply(this,arguments)}function Qc({projectId:k}){return`${Wc}/projects/${k}/registrations`}function Mo(k){return(Sb=Sb||(0,U.Z)(function*({appConfig:T,installations:O}){const B=yield O.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function Xc({p256dh:k,auth:T,endpoint:O,vapidKey:B}){const W={web:{endpoint:O,auth:T,p256dh:k}};return B!==no&&(W.web.applicationPubKey=B),W}const w_=6048e5;function Jd(k){return(Yd=Yd||(0,U.Z)(function*(T){const O=yield function ef(k,T){return(yh=yh||(0,U.Z)(function*(O,B){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Qm(B)})})).apply(this,arguments)}(T.swRegistration,T.vapidKey),B={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:O.endpoint,auth:Bs(O.getKey("auth")),p256dh:Bs(O.getKey("p256dh"))},W=yield y_(T.firebaseDependencies);if(W){if(function tf(k,T){return T.vapidKey===k.vapidKey&&T.endpoint===k.endpoint&&T.auth===k.auth&&T.p256dh===k.p256dh}(W.subscriptionOptions,B))return Date.now()>=W.createTime+w_?function Xm(k,T){return(Ab=Ab||(0,U.Z)(function*(O,B){try{const W=yield function Aa(k,T){return(kb=kb||(0,U.Z)(function*(O,B){const W=yield Mo(O),se=Xc(B.subscriptionOptions),_e={method:"PATCH",headers:W,body:JSON.stringify(se)};let Ne;try{Ne=yield(yield fetch(`${Qc(O.appConfig)}/${B.token}`,_e)).json()}catch(qe){throw zr.create("token-update-failed",{errorInfo:qe?.toString()})}if(Ne.error)throw zr.create("token-update-failed",{errorInfo:Ne.error.message});if(!Ne.token)throw zr.create("token-update-no-token");return Ne.token})).apply(this,arguments)}(O.firebaseDependencies,B),se=Object.assign(Object.assign({},B),{token:W,createTime:Date.now()});return yield Qd(O.firebaseDependencies,se),W}catch(W){throw yield function Dh(k){return(ka=ka||(0,U.Z)(function*(T){const O=yield y_(T.firebaseDependencies);O&&(yield Xd(T.firebaseDependencies,O.token),yield function Zl(k){return(Ym=Ym||(0,U.Z)(function*(T){const O=Eh(T),W=(yield Yl()).transaction(Sa,"readwrite");yield W.objectStore(Sa).delete(O),yield W.done})).apply(this,arguments)}(T.firebaseDependencies));const B=yield T.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()})).apply(this,arguments)}(O),W}})).apply(this,arguments)}(T,{token:W.token,createTime:Date.now(),subscriptionOptions:B}):W.token;try{yield Xd(T.firebaseDependencies,W.token)}catch(se){console.warn(se)}return Jm(T.firebaseDependencies,B)}return Jm(T.firebaseDependencies,B)})).apply(this,arguments)}function Jm(k,T){return(na=na||(0,U.Z)(function*(O,B){const se={token:yield lx(O,B),createTime:Date.now(),subscriptionOptions:B};return yield Qd(O,se),se.token})).apply(this,arguments)}function Kl(k){const T={from:k.from,collapseKey:k.collapse_key,messageId:k.fcmMessageId};return function eu(k,T){if(!T.notification)return;k.notification={};const O=T.notification.title;O&&(k.notification.title=O);const B=T.notification.body;B&&(k.notification.body=B);const W=T.notification.image;W&&(k.notification.image=W);const se=T.notification.icon;se&&(k.notification.icon=se)}(T,k),function nf(k,T){T.data&&(k.data=T.data)}(T,k),function kh(k,T){var O,B,W,se,_e;if(!(T.fcmOptions||null!==(O=T.notification)&&void 0!==O&&O.click_action))return;k.fcmOptions={};const Ne=null!==(W=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==W?W:null===(se=T.notification)||void 0===se?void 0:se.click_action;Ne&&(k.fcmOptions.link=Ne);const qe=null===(_e=T.fcmOptions)||void 0===_e?void 0:_e.analytics_label;qe&&(k.fcmOptions.analyticsLabel=qe)}(T,k),T}function nu(k,T){const O=[];for(let B=0;B<k.length;B++)O.push(k.charAt(B)),B<T.length&&O.push(T.charAt(B));return O.join("")}function Ql(k){return zr.create("missing-app-config-values",{valueName:k})}nu("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),nu("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class C_{constructor(T,O,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function x_(k){if(!k||!k.options)throw Ql("App Configuration Object");if(!k.name)throw Ql("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:O}=k;for(const B of T)if(!O[B])throw Ql(B);return{appName:k.name,projectId:O.projectId,apiKey:O.apiKey,appId:O.appId,senderId:O.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:W,installations:O,analyticsProvider:B}}_delete(){return Promise.resolve()}}function In(k,T){return(Km=Km||(0,U.Z)(function*(O,B){if(!navigator)throw zr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw zr.create("permission-blocked");return yield function rf(k,T){return(Rb=Rb||(0,U.Z)(function*(O,B){B?O.vapidKey=B:O.vapidKey||(O.vapidKey=no)})).apply(this,arguments)}(O,B?.vapidKey),yield function Th(k,T){return(Mb=Mb||(0,U.Z)(function*(O,B){if(!B&&!O.swRegistration&&(yield function io(k){return(Zm=Zm||(0,U.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Wl,{scope:Si}),T.swRegistration.update().catch(()=>{})}catch(O){throw zr.create("failed-service-worker-registration",{browserErrorMessage:O?.message})}})).apply(this,arguments)}(O)),B||!O.swRegistration){if(!(B instanceof ServiceWorkerRegistration))throw zr.create("invalid-sw-registration");O.swRegistration=B}})).apply(this,arguments)}(O,B?.serviceWorkerRegistration),Jd(O)})).apply(this,arguments)}function ns(k,T){return(ia=ia||(0,U.Z)(function*(O,B){const W=B.data;if(!W.isFirebaseMessaging)return;O.onMessageHandler&&W.messageType===qc.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(Kl(W)):O.onMessageHandler.next(Kl(W)));const se=W.data;(function tu(k){return"object"==typeof k&&!!k&&xh in k})(se)&&"1"===se["google.c.a.e"]&&(yield function Jc(k,T,O){return(es=es||(0,U.Z)(function*(B,W,se){const _e=function el(k){switch(k){case qc.NOTIFICATION_CLICKED:return"notification_open";case qc.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(W);(yield B.firebaseDependencies.analyticsProvider.get()).logEvent(_e,{message_id:se[xh],message_name:se[Ch],message_time:se[ql],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}(O,W.messageType,se))})).apply(this,arguments)}const E_="@firebase/messaging",tl=k=>{const T=new C_(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),k.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",O=>ns(T,O)),T},is=k=>{const T=k.getProvider("messaging").getImmediate();return{getToken:B=>In(T,B)}};function sf(){return(wh=wh||(0,U.Z)(function*(){try{yield(0,ce.eu)()}catch{return!1}return typeof window<"u"&&(0,ce.hl)()&&(0,ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}var Ro,Sh,Vt,Ah,D_,cf,ru,Rh,k_;!function I_(){(0,te._registerComponent)(new re.wA("messaging",tl,"PUBLIC")),(0,te._registerComponent)(new re.wA("messaging-internal",is,"PRIVATE")),(0,te.registerVersion)(E_,"0.12.4"),(0,te.registerVersion)(E_,"0.12.4","esm2017")}();const Re="analytics",wn="firebase_id",Vs="origin",T_=6e4,ai="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",il="https://www.googletagmanager.com/gtag/js",fi=new xe.Yd("@firebase/analytics"),Sr=new ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Ai(k){if(!k.startsWith(il)){const T=Sr.create("invalid-gtag-resource",{gtagURL:k});return fi.warn(T.message),""}return k}function hf(k){return Promise.all(k.map(T=>T.catch(O=>O)))}const sc=30,ed=new class Ob{constructor(T={},O=1e3){this.throttleMetadata=T,this.intervalMillis=O}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,O){this.throttleMetadata[T]=O}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ph(k){return new Headers({Accept:"application/json","x-goog-api-key":k})}function Oh(k){return(Ah=Ah||(0,U.Z)(function*(T,O=ed,B){const{appId:W,apiKey:se,measurementId:_e}=T.options;if(!W)throw Sr.create("no-app-id");if(!se){if(_e)return{measurementId:_e,appId:W};throw Sr.create("no-api-key")}const Ne=O.getThrottleMetadata(W)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new nr;return setTimeout((0,U.Z)(function*(){qe.abort()}),void 0!==B?B:T_),R_({appId:W,apiKey:se,measurementId:_e},Ne,qe,O)})).apply(this,arguments)}function R_(k,T,O){return(D_=D_||(0,U.Z)(function*(B,{throttleEndTimeMillis:W,backoffCount:se},_e,Ne=ed){var qe;const{appId:at,measurementId:wt}=B;try{yield function P_(k,T){return new Promise((O,B)=>{const W=Math.max(T-Date.now(),0),se=setTimeout(O,W);k.addEventListener(()=>{clearTimeout(se),B(Sr.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(_e,W)}catch(kt){if(wt)return fi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${kt?.message}]`),{appId:at,measurementId:wt};throw kt}try{const kt=yield function M_(k){return(Vt=Vt||(0,U.Z)(function*(T){var O;const{appId:B,apiKey:W}=T,se={method:"GET",headers:Ph(W)},_e=ai.replace("{app-id}",B),Ne=yield fetch(_e,se);if(200!==Ne.status&&304!==Ne.status){let qe="";try{const at=yield Ne.json();null!==(O=at.error)&&void 0!==O&&O.message&&(qe=at.error.message)}catch{}throw Sr.create("config-fetch-failed",{httpStatus:Ne.status,responseMessage:qe})}return Ne.json()})).apply(this,arguments)}(B);return Ne.deleteThrottleMetadata(at),kt}catch(kt){const Zt=kt;if(!function Bi(k){if(!(k instanceof ce.ZR&&k.customData))return!1;const T=Number(k.customData.httpStatus);return 429===T||500===T||503===T||504===T}(Zt)){if(Ne.deleteThrottleMetadata(at),wt)return fi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${wt} provided in the "measurementId" field in the local Firebase config. [${Zt?.message}]`),{appId:at,measurementId:wt};throw kt}const pi=503===Number(null===(qe=Zt?.customData)||void 0===qe?void 0:qe.httpStatus)?(0,ce.$s)(se,Ne.intervalMillis,sc):(0,ce.$s)(se,Ne.intervalMillis),Jn={throttleEndTimeMillis:Date.now()+pi,backoffCount:se+1};return Ne.setThrottleMetadata(at,Jn),fi.debug(`Calling attemptFetch again in ${pi} millis`),R_(B,Jn,_e,Ne)}})).apply(this,arguments)}class nr{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let oc,ra;function Ct(k,T,O,B,W,se,_e){return(Rh=Rh||(0,U.Z)(function*(Ne,qe,at,wt,kt,Zt,pi){var Jn;const Dn=Oh(Ne);Dn.then($r=>{at[$r.measurementId]=$r.appId,Ne.options.measurementId&&$r.measurementId!==Ne.options.measurementId&&fi.warn(`The measurement ID in the local Firebase config (${Ne.options.measurementId}) does not match the measurement ID fetched from the server (${$r.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch($r=>fi.error($r)),qe.push(Dn);const ar=function nd(){return(ru=ru||(0,U.Z)(function*(){if(!(0,ce.hl)())return fi.warn(Sr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ce.eu)()}catch(k){return fi.warn(Sr.create("indexeddb-unavailable",{errorInfo:k?.toString()}).message),!1}return!0})).apply(this,arguments)}().then($r=>{if($r)return wt.getId()}),[Lt,ws]=yield Promise.all([Dn,ar]);(function ff(k){const T=window.document.getElementsByTagName("script");for(const O of Object.values(T))if(O.src&&O.src.includes(il)&&O.src.includes(k))return O;return null})(Zt)||function A_(k,T){const O=function S_(k,T){let O;return window.trustedTypes&&(O=window.trustedTypes.createPolicy(k,T)),O}("firebase-js-sdk-policy",{createScriptURL:Ai}),B=document.createElement("script"),W=`${il}?l=${k}&id=${T}`;B.src=O?O?.createScriptURL(W):W,B.async=!0,document.head.appendChild(B)}(Zt,Lt.measurementId),ra&&(kt("consent","default",ra),function ii(k){ra=k}(void 0)),kt("js",new Date);const qi=null!==(Jn=pi?.config)&&void 0!==Jn?Jn:{};return qi[Vs]="firebase",qi.update=!0,null!=ws&&(qi[wn]=ws),kt("config",Lt.measurementId,qi),oc&&(kt("set",oc),function td(k){oc=k}(void 0)),Lt.measurementId})).apply(this,arguments)}class N_{constructor(T){this.app=T}_delete(){return delete ro[this.app.options.appId],Promise.resolve()}}let ro={},id=[];const so={};let rd,ir,Us="dataLayer",rl=!1;function Ra(k,T,O){!function pf(){const k=[];if((0,ce.ru)()&&k.push("This is a browser extension environment."),(0,ce.zI)()||k.push("Cookies are not available."),k.length>0){const T=k.map((B,W)=>`(${W+1}) ${B}`).join(" "),O=Sr.create("invalid-analytics-context",{errorInfo:T});fi.warn(O.message)}}();const B=k.options.appId;if(!B)throw Sr.create("no-app-id");if(!k.options.apiKey){if(!k.options.measurementId)throw Sr.create("no-api-key");fi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${k.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ro[B])throw Sr.create("already-exists",{id:B});if(!rl){!function rs(k){let T=[];Array.isArray(window[k])?T=window[k]:window[k]=T}(Us);const{wrappedGtag:se,gtagCore:_e}=function ss(k,T,O,B,W){let se=function(..._e){window[B].push(arguments)};return window[W]&&"function"==typeof window[W]&&(se=window[W]),window[W]=function Xl(k,T,O,B){var W;return function se(_e){return(W=W||(0,U.Z)(function*(Ne,...qe){try{if("event"===Ne){const[at,wt]=qe;yield function mf(k,T,O,B,W){return(Sh=Sh||(0,U.Z)(function*(se,_e,Ne,qe,at){try{let wt=[];if(at&&at.send_to){let kt=at.send_to;Array.isArray(kt)||(kt=[kt]);const Zt=yield hf(Ne);for(const pi of kt){const Jn=Zt.find(ar=>ar.measurementId===pi),Dn=Jn&&_e[Jn.appId];if(!Dn){wt=[];break}wt.push(Dn)}}0===wt.length&&(wt=Object.values(_e)),yield Promise.all(wt),se("event",qe,at||{})}catch(wt){fi.error(wt)}})).apply(this,arguments)}(k,T,O,at,wt)}else if("config"===Ne){const[at,wt]=qe;yield function Ma(k,T,O,B,W,se){return(Ro=Ro||(0,U.Z)(function*(_e,Ne,qe,at,wt,kt){const Zt=at[wt];try{if(Zt)yield Ne[Zt];else{const Jn=(yield hf(qe)).find(Dn=>Dn.measurementId===wt);Jn&&(yield Ne[Jn.appId])}}catch(pi){fi.error(pi)}_e("config",wt,kt)})).apply(this,arguments)}(k,T,O,B,at,wt)}else if("consent"===Ne){const[at]=qe;k("consent","update",at)}else if("get"===Ne){const[at,wt,kt]=qe;k("get",at,wt,kt)}else if("set"===Ne){const[at]=qe;k("set",at)}else k(Ne,...qe)}catch(at){fi.error(at)}})).apply(this,arguments)}}(se,k,T,O),{gtagCore:se,wrappedGtag:window[W]}}(ro,id,so,Us,"gtag");ir=se,rd=_e,rl=!0}return ro[B]=Ct(k,id,so,T,rd,Us,O),new N_(k)}function Gr(){return(k_=k_||(0,U.Z)(function*(){if((0,ce.ru)()||!(0,ce.zI)()||!(0,ce.hl)())return!1;try{return yield(0,ce.eu)()}catch{return!1}})).apply(this,arguments)}const sl="@firebase/analytics";!function ri(){(0,te._registerComponent)(new re.wA(Re,(T,{options:O})=>Ra(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),O),"PUBLIC")),(0,te._registerComponent)(new re.wA("analytics-internal",function k(T){try{const O=T.getProvider(Re).getImmediate();return{logEvent:(B,W,se)=>function yr(k,T,O,B){k=(0,ce.m9)(k),function zn(k,T,O,B,W){return(cf=cf||(0,U.Z)(function*(se,_e,Ne,qe,at){if(at&&at.global)se("event",Ne,qe);else{const wt=yield _e;se("event",Ne,Object.assign(Object.assign({},qe),{send_to:wt}))}})).apply(this,arguments)}(ir,ro[k.app.options.appId],T,O,B).catch(W=>fi.error(W))}(O,B,W,se)}}catch(O){throw Sr.create("interop-component-reg-failed",{reason:O})}},"PRIVATE")),(0,te.registerVersion)(sl,"0.10.0"),(0,te.registerVersion)(sl,"0.10.0","esm2017")}();var Mn=V(1954),Kn=V(2631);const sd=new class sr extends Kn.v{}(class wr extends Mn.o{constructor(T,O){super(T,O),this.scheduler=T,this.work=O}schedule(T,O=0){return O>0?super.schedule(T,O):(this.delay=O,this.state=T,this.scheduler.flush(this),this)}execute(T,O){return O>0||this.closed?super.execute(T,O):this._execute(T,O)}requestAsyncId(T,O,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,O,B):(T.flush(this),0)}});var gf=V(6321),or=V(9397),ac=V(3093),si=V(5137);const No=new l.GfV("7.6.1"),lu="__angularfire_symbol__analyticsIsSupportedValue",oo="__angularfire_symbol__analyticsIsSupported",cc="__angularfire_symbol__remoteConfigIsSupportedValue",Lh="__angularfire_symbol__remoteConfigIsSupported",Pa="__angularfire_symbol__messagingIsSupportedValue",Oa="__angularfire_symbol__messagingIsSupported";function lc(k,T,O){if(T){if(1===T.length)return T[0];const se=T.filter(_e=>_e.app===O);if(1===se.length)return se[0]}return O.container.getProvider(k).getImmediate({optional:!0})}globalThis[oo]||(globalThis[oo]=Gr().then(k=>globalThis[lu]=k).catch(()=>globalThis[lu]=!1)),globalThis[Oa]||(globalThis[Oa]=sf().then(k=>globalThis[Pa]=k).catch(()=>globalThis[Pa]=!1)),globalThis[Lh]||(globalThis[Lh]=Ao().then(k=>globalThis[cc]=k).catch(()=>globalThis[cc]=!1));const dc=(k,T)=>{const O=T?[T]:(0,ne.C6)(),B=[];return O.forEach(W=>{W.container.getProvider(k).instances.forEach(_e=>{B.includes(_e)||B.push(_e)})}),B};function uc(){}class Bh{constructor(T,O=sd){this.zone=T,this.delegate=O}now(){return this.delegate.now()}schedule(T,O,B){const W=this.zone;return this.delegate.schedule(function(_e){W.runGuarded(()=>{T.apply(this,[_e])})},O,B)}}class os{constructor(T){this.zone=T,this.task=null}call(T,O){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uc,{},uc,uc)),O.pipe((0,or.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let vf=(()=>{class k{constructor(O){this.ngZone=O,this.outsideAngular=O.runOutsideAngular(()=>new Bh(Zone.current)),this.insideAngular=O.run(()=>new Bh(Zone.current,gf.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return k.\u0275fac=function(O){return new(O||k)(l.LFG(l.R0b))},k.\u0275prov=l.Yz7({token:k,factory:k.\u0275fac,providedIn:"root"}),k})();function Ii(){const k=globalThis.\u0275AngularFireScheduler;if(!k)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return k}function hc(k){return k.pipe((0,ac.Q)(Ii().outsideAngular))}function Vh(k){return Ii(),function du(k){return function(O){return(O=O.lift(new os(k.ngZone))).pipe((0,si.R)(k.outsideAngular),(0,ac.Q)(k.insideAngular))}}(Ii())(k)}},9058:(yt,ke,V)=>{V.d(ke,{$s:()=>Qe,BH:()=>ue,DV:()=>Oi,Dv:()=>Xs,G6:()=>Qr,GJ:()=>hn,L:()=>ve,LL:()=>He,P0:()=>bt,Pz:()=>Ue,Sg:()=>Te,UG:()=>je,UI:()=>Rs,US:()=>re,Wj:()=>yn,Wl:()=>St,Yr:()=>wi,ZB:()=>oe,ZR:()=>We,aH:()=>le,b$:()=>Un,cI:()=>xi,dS:()=>Js,eu:()=>pe,g5:()=>U,gK:()=>An,gQ:()=>en,h$:()=>Oe,hl:()=>fe,hu:()=>ne,jU:()=>it,lb:()=>fs,m9:()=>Bn,ne:()=>Pn,p$:()=>Z,pd:()=>Ut,r3:()=>Nn,ru:()=>Pt,tV:()=>G,uI:()=>he,ug:()=>Eo,vZ:()=>Ps,w1:()=>Yn,w9:()=>ui,xO:()=>xa,xb:()=>mr,z$:()=>$e,zI:()=>Ee,zd:()=>Ft});const l={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ne=function(K,Y){if(!K)throw U(Y)},U=function(K){return new Error("Firebase Database ("+l.SDK_VERSION+") INTERNAL ASSERT FAILED: "+K)},te=function(K){const Y=[];let J=0;for(let Se=0;Se<K.length;Se++){let me=K.charCodeAt(Se);me<128?Y[J++]=me:me<2048?(Y[J++]=me>>6|192,Y[J++]=63&me|128):55296==(64512&me)&&Se+1<K.length&&56320==(64512&K.charCodeAt(Se+1))?(me=65536+((1023&me)<<10)+(1023&K.charCodeAt(++Se)),Y[J++]=me>>18|240,Y[J++]=me>>12&63|128,Y[J++]=me>>6&63|128,Y[J++]=63&me|128):(Y[J++]=me>>12|224,Y[J++]=me>>6&63|128,Y[J++]=63&me|128)}return Y},re={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,Y){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const J=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,Se=[];for(let me=0;me<K.length;me+=3){const ht=K[me],Bt=me+1<K.length,qt=Bt?K[me+1]:0,Ni=me+2<K.length,Yt=Ni?K[me+2]:0;let pr=(15&qt)<<2|Yt>>6,Xo=63&Yt;Ni||(Xo=64,Bt||(pr=64)),Se.push(J[ht>>2],J[(3&ht)<<4|qt>>4],J[pr],J[Xo])}return Se.join("")},encodeString(K,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa(K):this.encodeByteArray(te(K),Y)},decodeString(K,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob(K):function(K){const Y=[];let J=0,Se=0;for(;J<K.length;){const me=K[J++];if(me<128)Y[Se++]=String.fromCharCode(me);else if(me>191&&me<224){const ht=K[J++];Y[Se++]=String.fromCharCode((31&me)<<6|63&ht)}else if(me>239&&me<365){const Ni=((7&me)<<18|(63&K[J++])<<12|(63&K[J++])<<6|63&K[J++])-65536;Y[Se++]=String.fromCharCode(55296+(Ni>>10)),Y[Se++]=String.fromCharCode(56320+(1023&Ni))}else{const ht=K[J++],Bt=K[J++];Y[Se++]=String.fromCharCode((15&me)<<12|(63&ht)<<6|63&Bt)}}return Y.join("")}(this.decodeStringToByteArray(K,Y))},decodeStringToByteArray(K,Y){this.init_();const J=Y?this.charToByteMapWebSafe_:this.charToByteMap_,Se=[];for(let me=0;me<K.length;){const ht=J[K.charAt(me++)],qt=me<K.length?J[K.charAt(me)]:0;++me;const Yt=me<K.length?J[K.charAt(me)]:64;++me;const Xt=me<K.length?J[K.charAt(me)]:64;if(++me,null==ht||null==qt||null==Yt||null==Xt)throw new xe;Se.push(ht<<2|qt>>4),64!==Yt&&(Se.push(qt<<4&240|Yt>>2),64!==Xt&&Se.push(Yt<<6&192|Xt))}return Se},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}};class xe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Oe=function(K){const Y=te(K);return re.encodeByteArray(Y,!0)},ve=function(K){return Oe(K).replace(/\./g,"")},G=function(K){try{return re.decodeString(K,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function Z(K){return oe(void 0,K)}function oe(K,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===K&&(K={});break;case Array:K=[];break;default:return Y}for(const J in Y)!Y.hasOwnProperty(J)||!Fe(J)||(K[J]=oe(K[J],Y[J]));return K}function Fe(K){return"__proto__"!==K}const Le=()=>{try{return function Me(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if(typeof document>"u")return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const Y=K&&G(K[1]);return Y&&JSON.parse(Y)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},bt=K=>{const Y=(K=>{var Y,J;return null===(J=null===(Y=Le())||void 0===Y?void 0:Y.emulatorHosts)||void 0===J?void 0:J[K]})(K);if(!Y)return;const J=Y.lastIndexOf(":");if(J<=0||J+1===Y.length)throw new Error(`Invalid host ${Y} with no separate hostname and port!`);const Se=parseInt(Y.substring(J+1),10);return"["===Y[0]?[Y.substring(1,J-1),Se]:[Y.substring(0,J),Se]},le=()=>{var K;return null===(K=Le())||void 0===K?void 0:K.config},Ue=K=>{var Y;return null===(Y=Le())||void 0===Y?void 0:Y[`_${K}`]};class ue{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,J)=>{this.resolve=Y,this.reject=J})}wrapCallback(Y){return(J,Se)=>{J?this.reject(J):this.resolve(Se),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(J):Y(J,Se))}}}function Te(K,Y){if(K.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Se=Y||"demo-project",me=K.iat||0,ht=K.sub||K.user_id;if(!ht)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Bt=Object.assign({iss:`https://securetoken.google.com/${Se}`,aud:Se,iat:me,exp:me+3600,auth_time:me,sub:ht,user_id:ht,firebase:{sign_in_provider:"custom",identities:{}}},K);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(Bt)),""].join(".")}function $e(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function he(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($e())}function je(){var K;const Y=null===(K=Le())||void 0===K?void 0:K.forceEnvironment;if("node"===Y)return!0;if("browser"===Y)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function it(){return"object"==typeof self&&self.self===self}function Pt(){const K="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof K&&void 0!==K.id}function Un(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Yn(){const K=$e();return K.indexOf("MSIE ")>=0||K.indexOf("Trident/")>=0}function wi(){return!0===l.NODE_CLIENT||!0===l.NODE_ADMIN}function Qr(){return!je()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fe(){try{return"object"==typeof indexedDB}catch{return!1}}function pe(){return new Promise((K,Y)=>{try{let J=!0;const Se="validate-browser-context-for-indexeddb-analytics-module",me=self.indexedDB.open(Se);me.onsuccess=()=>{me.result.close(),J||self.indexedDB.deleteDatabase(Se),K(!0)},me.onupgradeneeded=()=>{J=!1},me.onerror=()=>{var ht;Y((null===(ht=me.error)||void 0===ht?void 0:ht.message)||"")}}catch(J){Y(J)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class We extends Error{constructor(Y,J,Se){super(J),this.code=Y,this.customData=Se,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,He.prototype.create)}}class He{constructor(Y,J,Se){this.service=Y,this.serviceName=J,this.errors=Se}create(Y,...J){const Se=J[0]||{},me=`${this.service}/${Y}`,ht=this.errors[Y],Bt=ht?function dt(K,Y){return K.replace(Je,(J,Se)=>{const me=Y[Se];return null!=me?String(me):`<${Se}?>`})}(ht,Se):"Error";return new We(me,`${this.serviceName}: ${Bt} (${me}).`,Se)}}const Je=/\{\$([^}]+)}/g;function xi(K){return JSON.parse(K)}function St(K){return JSON.stringify(K)}const _n=function(K){let Y={},J={},Se={},me="";try{const ht=K.split(".");Y=xi(G(ht[0])||""),J=xi(G(ht[1])||""),me=ht[2],Se=J.d||{},delete J.d}catch{}return{header:Y,claims:J,data:Se,signature:me}},ui=function(K){const J=_n(K).claims;return!!J&&"object"==typeof J&&J.hasOwnProperty("iat")},hn=function(K){const Y=_n(K).claims;return"object"==typeof Y&&!0===Y.admin};function Nn(K,Y){return Object.prototype.hasOwnProperty.call(K,Y)}function Oi(K,Y){if(Object.prototype.hasOwnProperty.call(K,Y))return K[Y]}function mr(K){for(const Y in K)if(Object.prototype.hasOwnProperty.call(K,Y))return!1;return!0}function Rs(K,Y,J){const Se={};for(const me in K)Object.prototype.hasOwnProperty.call(K,me)&&(Se[me]=Y.call(J,K[me],me,K));return Se}function Ps(K,Y){if(K===Y)return!0;const J=Object.keys(K),Se=Object.keys(Y);for(const me of J){if(!Se.includes(me))return!1;const ht=K[me],Bt=Y[me];if(Qs(ht)&&Qs(Bt)){if(!Ps(ht,Bt))return!1}else if(ht!==Bt)return!1}for(const me of Se)if(!J.includes(me))return!1;return!0}function Qs(K){return null!==K&&"object"==typeof K}function xa(K){const Y=[];for(const[J,Se]of Object.entries(K))Array.isArray(Se)?Se.forEach(me=>{Y.push(encodeURIComponent(J)+"="+encodeURIComponent(me))}):Y.push(encodeURIComponent(J)+"="+encodeURIComponent(Se));return Y.length?"&"+Y.join("&"):""}function Ft(K){const Y={};return K.replace(/^\?/,"").split("&").forEach(Se=>{if(Se){const[me,ht]=Se.split("=");Y[decodeURIComponent(me)]=decodeURIComponent(ht)}}),Y}function Ut(K){const Y=K.indexOf("?");if(!Y)return"";const J=K.indexOf("#",Y);return K.substring(Y,J>0?J:void 0)}class en{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,J){J||(J=0);const Se=this.W_;if("string"==typeof Y)for(let Xt=0;Xt<16;Xt++)Se[Xt]=Y.charCodeAt(J)<<24|Y.charCodeAt(J+1)<<16|Y.charCodeAt(J+2)<<8|Y.charCodeAt(J+3),J+=4;else for(let Xt=0;Xt<16;Xt++)Se[Xt]=Y[J]<<24|Y[J+1]<<16|Y[J+2]<<8|Y[J+3],J+=4;for(let Xt=16;Xt<80;Xt++){const pr=Se[Xt-3]^Se[Xt-8]^Se[Xt-14]^Se[Xt-16];Se[Xt]=4294967295&(pr<<1|pr>>>31)}let Yt,Ir,me=this.chain_[0],ht=this.chain_[1],Bt=this.chain_[2],qt=this.chain_[3],Ni=this.chain_[4];for(let Xt=0;Xt<80;Xt++){Xt<40?Xt<20?(Yt=qt^ht&(Bt^qt),Ir=1518500249):(Yt=ht^Bt^qt,Ir=1859775393):Xt<60?(Yt=ht&Bt|qt&(ht|Bt),Ir=2400959708):(Yt=ht^Bt^qt,Ir=3395469782);const pr=(me<<5|me>>>27)+Yt+Ni+Ir+Se[Xt]&4294967295;Ni=qt,qt=Bt,Bt=4294967295&(ht<<30|ht>>>2),ht=me,me=pr}this.chain_[0]=this.chain_[0]+me&4294967295,this.chain_[1]=this.chain_[1]+ht&4294967295,this.chain_[2]=this.chain_[2]+Bt&4294967295,this.chain_[3]=this.chain_[3]+qt&4294967295,this.chain_[4]=this.chain_[4]+Ni&4294967295}update(Y,J){if(null==Y)return;void 0===J&&(J=Y.length);const Se=J-this.blockSize;let me=0;const ht=this.buf_;let Bt=this.inbuf_;for(;me<J;){if(0===Bt)for(;me<=Se;)this.compress_(Y,me),me+=this.blockSize;if("string"==typeof Y){for(;me<J;)if(ht[Bt]=Y.charCodeAt(me),++Bt,++me,Bt===this.blockSize){this.compress_(ht),Bt=0;break}}else for(;me<J;)if(ht[Bt]=Y[me],++Bt,++me,Bt===this.blockSize){this.compress_(ht),Bt=0;break}}this.inbuf_=Bt,this.total_+=J}digest(){const Y=[];let J=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let me=this.blockSize-1;me>=56;me--)this.buf_[me]=255&J,J/=256;this.compress_(this.buf_);let Se=0;for(let me=0;me<5;me++)for(let ht=24;ht>=0;ht-=8)Y[Se]=this.chain_[me]>>ht&255,++Se;return Y}}function Pn(K,Y){const J=new fr(K,Y);return J.subscribe.bind(J)}class fr{constructor(Y,J){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=J,this.task.then(()=>{Y(this)}).catch(Se=>{this.error(Se)})}next(Y){this.forEachObserver(J=>{J.next(Y)})}error(Y){this.forEachObserver(J=>{J.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,J,Se){let me;if(void 0===Y&&void 0===J&&void 0===Se)throw new Error("Missing Observer.");me=function On(K,Y){if("object"!=typeof K||null===K)return!1;for(const J of Y)if(J in K&&"function"==typeof K[J])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:J,complete:Se},void 0===me.next&&(me.next=Ci),void 0===me.error&&(me.error=Ci),void 0===me.complete&&(me.complete=Ci);const ht=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?me.error(this.finalError):me.complete()}catch{}}),this.observers.push(me),ht}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let J=0;J<this.observers.length;J++)this.sendOne(J,Y)}sendOne(Y,J){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{J(this.observers[Y])}catch(Se){typeof console<"u"&&console.error&&console.error(Se)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ci(){}const Xs=function(K,Y,J,Se){let me;if(Se<Y?me="at least "+Y:Se>J&&(me=0===J?"none":"no more than "+J),me)throw new Error(K+" failed: Was called with "+Se+(1===Se?" argument.":" arguments.")+" Expects "+me+".")};function An(K,Y){return`${K} failed: ${Y} argument `}function yn(K,Y,J,Se){if((!Se||J)&&"function"!=typeof J)throw new Error(An(K,Y)+"must be a valid function.")}function fs(K,Y,J,Se){if((!Se||J)&&("object"!=typeof J||null===J))throw new Error(An(K,Y)+"must be a valid context object.")}const Js=function(K){const Y=[];let J=0;for(let Se=0;Se<K.length;Se++){let me=K.charCodeAt(Se);if(me>=55296&&me<=56319){const ht=me-55296;Se++,ne(Se<K.length,"Surrogate pair missing trail surrogate."),me=65536+(ht<<10)+(K.charCodeAt(Se)-56320)}me<128?Y[J++]=me:me<2048?(Y[J++]=me>>6|192,Y[J++]=63&me|128):me<65536?(Y[J++]=me>>12|224,Y[J++]=me>>6&63|128,Y[J++]=63&me|128):(Y[J++]=me>>18|240,Y[J++]=me>>12&63|128,Y[J++]=me>>6&63|128,Y[J++]=63&me|128)}return Y},Eo=function(K){let Y=0;for(let J=0;J<K.length;J++){const Se=K.charCodeAt(J);Se<128?Y++:Se<2048?Y+=2:Se>=55296&&Se<=56319?(Y+=4,J++):Y+=3}return Y},Ka=1e3,Be=2,X=144e5,Ce=.5;function Qe(K,Y=Ka,J=Be){const Se=Y*Math.pow(J,K),me=Math.round(Ce*Se*(Math.random()-.5)*2);return Math.min(X,Se+me)}function Bn(K){return K&&K._delegate?K._delegate:K}},1183:(yt,ke,V)=>{var l=V(5879);let ne=null;function U(){return ne}class ce{}const re=new l.OlP("DocumentToken");let xe=(()=>{var i;class e{historyGo(t){throw new Error("Not implemented")}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return(0,l.f3M)(ve)},providedIn:"platform"}),e})();const Oe=new l.OlP("Location Initialized");let ve=(()=>{var i;class e extends xe{constructor(){super(),this._doc=(0,l.f3M)(re),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=U().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,s){this._history.pushState(t,r,s)}replaceState(t,r,s){this._history.replaceState(t,r,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return new i},providedIn:"platform"}),e})();function G(i,e){if(0==i.length)return e;if(0==e.length)return i;let n=0;return i.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?i+e.substring(1):1==n?i+e:i+"/"+e}function Z(i){const e=i.match(/#|\?|$/),n=e&&e.index||i.length;return i.slice(0,n-("/"===i[n-1]?1:0))+i.slice(n)}function oe(i){return i&&"?"!==i[0]?"?"+i:i}let Fe=(()=>{var i;class e{historyGo(t){throw new Error("Not implemented")}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return(0,l.f3M)(tt)},providedIn:"root"}),e})();const Me=new l.OlP("appBaseHref");let tt=(()=>{var i;class e extends Fe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,l.f3M)(re).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return G(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+oe(this._platformLocation.search),s=this._platformLocation.hash;return s&&t?`${r}${s}`:r}pushState(t,r,s,o){const d=this.prepareExternalUrl(s+oe(o));this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,o){const d=this.prepareExternalUrl(s+oe(o));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(xe),l.LFG(Me,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Ve=(()=>{var i;class e extends Fe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=G(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,s,o){let d=this.prepareExternalUrl(s+oe(o));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,s,o){let d=this.prepareExternalUrl(s+oe(o));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(xe),l.LFG(Me,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})(),et=(()=>{var i;class e{constructor(t){this._subject=new l.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function le(i){if(new RegExp("^(https?:)?//").test(i)){const[,n]=i.split(/\/\/[^\/]+/);return n}return i}(Z(bt(r))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oe(r))}normalize(t){return e.stripTrailingSlash(function Dt(i,e){if(!i||!e.startsWith(i))return e;const n=e.substring(i.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,bt(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",s=null){this._locationStrategy.pushState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oe(r)),s)}replaceState(t,r="",s=null){this._locationStrategy.replaceState(s,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oe(r)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(s=>s(t,r))}subscribe(t,r,s){return this._subject.subscribe({next:t,error:r,complete:s})}}return(i=e).normalizeQueryParams=oe,i.joinWithSlash=G,i.stripTrailingSlash=Z,i.\u0275fac=function(t){return new(t||i)(l.LFG(Fe))},i.\u0275prov=l.Yz7({token:i,factory:function(){return function Le(){return new et((0,l.LFG)(Fe))}()},providedIn:"root"}),e})();function bt(i){return i.replace(/\/index.html$/,"")}var $e=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}($e||{}),he=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}(he||{}),je=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}(je||{}),it=function(i){return i[i.Decimal=0]="Decimal",i[i.Group=1]="Group",i[i.List=2]="List",i[i.PercentSign=3]="PercentSign",i[i.PlusSign=4]="PlusSign",i[i.MinusSign=5]="MinusSign",i[i.Exponential=6]="Exponential",i[i.SuperscriptingExponent=7]="SuperscriptingExponent",i[i.PerMille=8]="PerMille",i[i.Infinity=9]="Infinity",i[i.NaN=10]="NaN",i[i.TimeSeparator=11]="TimeSeparator",i[i.CurrencyDecimal=12]="CurrencyDecimal",i[i.CurrencyGroup=13]="CurrencyGroup",i}(it||{});function pe(i,e){return Nn((0,l.cg1)(i)[l.wAp.DateFormat],e)}function Ee(i,e){return Nn((0,l.cg1)(i)[l.wAp.TimeFormat],e)}function ye(i,e){return Nn((0,l.cg1)(i)[l.wAp.DateTimeFormat],e)}function We(i,e){const n=(0,l.cg1)(i),t=n[l.wAp.NumberSymbols][e];if(typeof t>"u"){if(e===it.CurrencyDecimal)return n[l.wAp.NumberSymbols][it.Decimal];if(e===it.CurrencyGroup)return n[l.wAp.NumberSymbols][it.Group]}return t}function Gt(i){if(!i[l.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[l.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Nn(i,e){for(let n=e;n>-1;n--)if(typeof i[n]<"u")return i[n];throw new Error("Locale data API: locale data undefined")}function Oi(i){const[e,n]=i.split(":");return{hours:+e,minutes:+n}}const Qs=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,er={},xa=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ft=function(i){return i[i.Short=0]="Short",i[i.ShortGMT=1]="ShortGMT",i[i.Long=2]="Long",i[i.Extended=3]="Extended",i}(Ft||{}),Ut=function(i){return i[i.FullYear=0]="FullYear",i[i.Month=1]="Month",i[i.Date=2]="Date",i[i.Hours=3]="Hours",i[i.Minutes=4]="Minutes",i[i.Seconds=5]="Seconds",i[i.FractionalSeconds=6]="FractionalSeconds",i[i.Day=7]="Day",i}(Ut||{}),en=function(i){return i[i.DayPeriods=0]="DayPeriods",i[i.Days=1]="Days",i[i.Months=2]="Months",i[i.Eras=3]="Eras",i}(en||{});function Pn(i,e,n,t){let r=function Y(i){if(Se(i))return i;if("number"==typeof i&&!isNaN(i))return new Date(i);if("string"==typeof i){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){const[r,s=1,o=1]=i.split("-").map(d=>+d);return fr(r,s-1,o)}const n=parseFloat(i);if(!isNaN(i-n))return new Date(n);let t;if(t=i.match(Qs))return function J(i){const e=new Date(0);let n=0,t=0;const r=i[8]?e.setUTCFullYear:e.setFullYear,s=i[8]?e.setUTCHours:e.setHours;i[9]&&(n=Number(i[9]+i[10]),t=Number(i[9]+i[11])),r.call(e,Number(i[1]),Number(i[2])-1,Number(i[3]));const o=Number(i[4]||0)-n,d=Number(i[5]||0)-t,m=Number(i[6]||0),f=Math.floor(1e3*parseFloat("0."+(i[7]||0)));return s.call(e,o,d,m,f),e}(t)}const e=new Date(i);if(!Se(e))throw new Error(`Unable to convert "${i}" into a date`);return e}(i);e=tr(n,e)||e;let d,o=[];for(;e;){if(d=xa.exec(e),!d){o.push(e);break}{o=o.concat(d.slice(1));const b=o.pop();if(!b)break;e=b}}let m=r.getTimezoneOffset();t&&(m=_t(t,m),r=function K(i,e,n){const t=n?-1:1,r=i.getTimezoneOffset();return function Bn(i,e){return(i=new Date(i.getTime())).setMinutes(i.getMinutes()+e),i}(i,t*(_t(e,r)-r))}(r,t,!0));let f="";return o.forEach(b=>{const w=function st(i){if(Qe[i])return Qe[i];let e;switch(i){case"G":case"GG":case"GGG":e=yn(en.Eras,he.Abbreviated);break;case"GGGG":e=yn(en.Eras,he.Wide);break;case"GGGGG":e=yn(en.Eras,he.Narrow);break;case"y":e=An(Ut.FullYear,1,0,!1,!0);break;case"yy":e=An(Ut.FullYear,2,0,!0,!0);break;case"yyy":e=An(Ut.FullYear,3,0,!1,!0);break;case"yyyy":e=An(Ut.FullYear,4,0,!1,!0);break;case"Y":e=Ce(1);break;case"YY":e=Ce(2,!0);break;case"YYY":e=Ce(3);break;case"YYYY":e=Ce(4);break;case"M":case"L":e=An(Ut.Month,1,1);break;case"MM":case"LL":e=An(Ut.Month,2,1);break;case"MMM":e=yn(en.Months,he.Abbreviated);break;case"MMMM":e=yn(en.Months,he.Wide);break;case"MMMMM":e=yn(en.Months,he.Narrow);break;case"LLL":e=yn(en.Months,he.Abbreviated,$e.Standalone);break;case"LLLL":e=yn(en.Months,he.Wide,$e.Standalone);break;case"LLLLL":e=yn(en.Months,he.Narrow,$e.Standalone);break;case"w":e=X(1);break;case"ww":e=X(2);break;case"W":e=X(1,!0);break;case"d":e=An(Ut.Date,1);break;case"dd":e=An(Ut.Date,2);break;case"c":case"cc":e=An(Ut.Day,1);break;case"ccc":e=yn(en.Days,he.Abbreviated,$e.Standalone);break;case"cccc":e=yn(en.Days,he.Wide,$e.Standalone);break;case"ccccc":e=yn(en.Days,he.Narrow,$e.Standalone);break;case"cccccc":e=yn(en.Days,he.Short,$e.Standalone);break;case"E":case"EE":case"EEE":e=yn(en.Days,he.Abbreviated);break;case"EEEE":e=yn(en.Days,he.Wide);break;case"EEEEE":e=yn(en.Days,he.Narrow);break;case"EEEEEE":e=yn(en.Days,he.Short);break;case"a":case"aa":case"aaa":e=yn(en.DayPeriods,he.Abbreviated);break;case"aaaa":e=yn(en.DayPeriods,he.Wide);break;case"aaaaa":e=yn(en.DayPeriods,he.Narrow);break;case"b":case"bb":case"bbb":e=yn(en.DayPeriods,he.Abbreviated,$e.Standalone,!0);break;case"bbbb":e=yn(en.DayPeriods,he.Wide,$e.Standalone,!0);break;case"bbbbb":e=yn(en.DayPeriods,he.Narrow,$e.Standalone,!0);break;case"B":case"BB":case"BBB":e=yn(en.DayPeriods,he.Abbreviated,$e.Format,!0);break;case"BBBB":e=yn(en.DayPeriods,he.Wide,$e.Format,!0);break;case"BBBBB":e=yn(en.DayPeriods,he.Narrow,$e.Format,!0);break;case"h":e=An(Ut.Hours,1,-12);break;case"hh":e=An(Ut.Hours,2,-12);break;case"H":e=An(Ut.Hours,1);break;case"HH":e=An(Ut.Hours,2);break;case"m":e=An(Ut.Minutes,1);break;case"mm":e=An(Ut.Minutes,2);break;case"s":e=An(Ut.Seconds,1);break;case"ss":e=An(Ut.Seconds,2);break;case"S":e=An(Ut.FractionalSeconds,1);break;case"SS":e=An(Ut.FractionalSeconds,2);break;case"SSS":e=An(Ut.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Js(Ft.Short);break;case"ZZZZZ":e=Js(Ft.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Js(Ft.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Js(Ft.Long);break;default:return null}return Qe[i]=e,e}(b);f+=w?w(r,n,m):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),f}function fr(i,e,n){const t=new Date(0);return t.setFullYear(i,e,n),t.setHours(0,0,0),t}function tr(i,e){const n=function Un(i){return(0,l.cg1)(i)[l.wAp.LocaleId]}(i);if(er[n]=er[n]||{},er[n][e])return er[n][e];let t="";switch(e){case"shortDate":t=pe(i,je.Short);break;case"mediumDate":t=pe(i,je.Medium);break;case"longDate":t=pe(i,je.Long);break;case"fullDate":t=pe(i,je.Full);break;case"shortTime":t=Ee(i,je.Short);break;case"mediumTime":t=Ee(i,je.Medium);break;case"longTime":t=Ee(i,je.Long);break;case"fullTime":t=Ee(i,je.Full);break;case"short":const r=tr(i,"shortTime"),s=tr(i,"shortDate");t=On(ye(i,je.Short),[r,s]);break;case"medium":const o=tr(i,"mediumTime"),d=tr(i,"mediumDate");t=On(ye(i,je.Medium),[o,d]);break;case"long":const m=tr(i,"longTime"),f=tr(i,"longDate");t=On(ye(i,je.Long),[m,f]);break;case"full":const b=tr(i,"fullTime"),w=tr(i,"fullDate");t=On(ye(i,je.Full),[b,w])}return t&&(er[n][e]=t),t}function On(i,e){return e&&(i=i.replace(/\{([^}]+)}/g,function(n,t){return null!=e&&t in e?e[t]:n})),i}function Ci(i,e,n="-",t,r){let s="";(i<0||r&&i<=0)&&(r?i=1-i:(i=-i,s=n));let o=String(i);for(;o.length<e;)o="0"+o;return t&&(o=o.slice(o.length-e)),s+o}function An(i,e,n=0,t=!1,r=!1){return function(s,o){let d=function Qo(i,e){switch(i){case Ut.FullYear:return e.getFullYear();case Ut.Month:return e.getMonth();case Ut.Date:return e.getDate();case Ut.Hours:return e.getHours();case Ut.Minutes:return e.getMinutes();case Ut.Seconds:return e.getSeconds();case Ut.FractionalSeconds:return e.getMilliseconds();case Ut.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}(i,s);if((n>0||d>-n)&&(d+=n),i===Ut.Hours)0===d&&-12===n&&(d=12);else if(i===Ut.FractionalSeconds)return function Xs(i,e){return Ci(i,3).substring(0,e)}(d,e);const m=We(o,it.MinusSign);return Ci(d,e,m,t,r)}}function yn(i,e,n=$e.Format,t=!1){return function(r,s){return function fs(i,e,n,t,r,s){switch(n){case en.Months:return function Pi(i,e,n){const t=(0,l.cg1)(i),s=Nn([t[l.wAp.MonthsFormat],t[l.wAp.MonthsStandalone]],e);return Nn(s,n)}(e,r,t)[i.getMonth()];case en.Days:return function Yn(i,e,n){const t=(0,l.cg1)(i),s=Nn([t[l.wAp.DaysFormat],t[l.wAp.DaysStandalone]],e);return Nn(s,n)}(e,r,t)[i.getDay()];case en.DayPeriods:const o=i.getHours(),d=i.getMinutes();if(s){const f=function Zn(i){const e=(0,l.cg1)(i);return Gt(e),(e[l.wAp.ExtraData][2]||[]).map(t=>"string"==typeof t?Oi(t):[Oi(t[0]),Oi(t[1])])}(e),b=function ui(i,e,n){const t=(0,l.cg1)(i);Gt(t);const s=Nn([t[l.wAp.ExtraData][0],t[l.wAp.ExtraData][1]],e)||[];return Nn(s,n)||[]}(e,r,t),w=f.findIndex(I=>{if(Array.isArray(I)){const[S,F]=I,z=o>=S.hours&&d>=S.minutes,q=o<F.hours||o===F.hours&&d<F.minutes;if(S.hours<F.hours){if(z&&q)return!0}else if(z||q)return!0}else if(I.hours===o&&I.minutes===d)return!0;return!1});if(-1!==w)return b[w]}return function Xn(i,e,n){const t=(0,l.cg1)(i),s=Nn([t[l.wAp.DayPeriodsFormat],t[l.wAp.DayPeriodsStandalone]],e);return Nn(s,n)}(e,r,t)[o<12?0:1];case en.Eras:return function wi(i,e){return Nn((0,l.cg1)(i)[l.wAp.Eras],e)}(e,t)[i.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(r,s,i,e,n,t)}}function Js(i){return function(e,n,t){const r=-1*t,s=We(n,it.MinusSign),o=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case Ft.Short:return(r>=0?"+":"")+Ci(o,2,s)+Ci(Math.abs(r%60),2,s);case Ft.ShortGMT:return"GMT"+(r>=0?"+":"")+Ci(o,1,s);case Ft.Long:return"GMT"+(r>=0?"+":"")+Ci(o,2,s)+":"+Ci(Math.abs(r%60),2,s);case Ft.Extended:return 0===t?"Z":(r>=0?"+":"")+Ci(o,2,s)+":"+Ci(Math.abs(r%60),2,s);default:throw new Error(`Unknown zone width "${i}"`)}}}const Eo=0,ps=4;function Be(i){return fr(i.getFullYear(),i.getMonth(),i.getDate()+(ps-i.getDay()))}function X(i,e=!1){return function(n,t){let r;if(e){const s=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,o=n.getDate();r=1+Math.floor((o+s)/7)}else{const s=Be(n),o=function Ka(i){const e=fr(i,Eo,1).getDay();return fr(i,0,1+(e<=ps?ps:ps+7)-e)}(s.getFullYear()),d=s.getTime()-o.getTime();r=1+Math.round(d/6048e5)}return Ci(r,i,We(t,it.MinusSign))}}function Ce(i,e=!1){return function(n,t){return Ci(Be(n).getFullYear(),i,We(t,it.MinusSign),e)}}const Qe={};function _t(i,e){i=i.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(n)?e:n}function Se(i){return i instanceof Date&&!isNaN(i.valueOf())}class Ll{constructor(e,n,t,r){this.$implicit=e,this.ngForOf=n,this.index=t,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ah=(()=>{var i;class e{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,s){this._viewContainer=t,this._template=r,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((s,o,d)=>{if(null==s.previousIndex)r.createEmbeddedView(this._template,new Ll(s.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===o?void 0:o);else if(null!==o){const m=r.get(o);r.move(m,d),Xa(m,s)}});for(let s=0,o=r.length;s<o;s++){const m=r.get(s).context;m.index=s,m.count=o,m.ngForOf=this._ngForOf}t.forEachIdentityChange(s=>{Xa(r.get(s.currentIndex),s)})}static ngTemplateContextGuard(t,r){return!0}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},i.\u0275dir=l.lG2({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),e})();function Xa(i,e){i.context.$implicit=e.item}let To=(()=>{var i;class e{constructor(t,r){this._viewContainer=t,this._context=new Eb,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m_("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m_("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.s_b),l.Y36(l.Rgc))},i.\u0275dir=l.lG2({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),e})();class Eb{constructor(){this.$implicit=null,this.ngIf=null}}function m_(i,e){if(e&&!e.createEmbeddedView)throw new Error(`${i} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}class vn{constructor(e,n){this._viewContainerRef=e,this._templateRef=n,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let Hn=(()=>{var i;class e{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),e})(),Hc=(()=>{var i;class e{constructor(t,r,s){this.ngSwitch=s,s._addCase(),this._view=new vn(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(Hn,9))},i.\u0275dir=l.lG2({type:i,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),e})(),Wd=(()=>{var i;class e{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:s,ngTemplateOutletContext:o,ngTemplateOutletInjector:d}=this;this._viewRef=r.createEmbeddedView(s,o,d?{injector:d}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.s_b))},i.\u0275dir=l.lG2({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[l.TTD]}),e})();const _r=new l.OlP("DATE_PIPE_DEFAULT_TIMEZONE"),gr=new l.OlP("DATE_PIPE_DEFAULT_OPTIONS");let Ja=(()=>{var i;class e{constructor(t,r,s){this.locale=t,this.defaultTimezone=r,this.defaultOptions=s}transform(t,r,s,o){if(null==t||""===t||t!=t)return null;try{return Pn(t,r??this.defaultOptions?.dateFormat??"mediumDate",o||this.locale,s??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(d){throw function Dr(i,e){return new l.vHH(2100,!1)}()}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.soG,16),l.Y36(_r,24),l.Y36(gr,24))},i.\u0275pipe=l.Yjl({name:"date",type:i,pure:!0,standalone:!0}),e})(),$t=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const bs="browser";function Vr(i){return"server"===i}let eo=(()=>{var i;class e{}return(i=e).\u0275prov=(0,l.Yz7)({token:i,providedIn:"root",factory:()=>new jl((0,l.LFG)(re),window)}),e})();class jl{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function mh(i,e){const n=i.getElementById(e)||i.getElementsByName(e)[0];if(n)return n;if("function"==typeof i.createTreeWalker&&i.body&&"function"==typeof i.body.attachShadow){const t=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT);let r=t.currentNode;for(;r;){const s=r.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}r=t.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.supportsScrolling()&&(this.window.history.scrollRestoration=e)}scrollToElement(e){const n=e.getBoundingClientRect(),t=n.left+this.window.pageXOffset,r=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(t-s[0],r-s[1])}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}class Qc extends ce{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Mo extends Qc{static makeCurrent(){!function te(i){ne||(ne=i)}(new Mo)}onAndCancel(e,n,t){return e.addEventListener(n,t),()=>{e.removeEventListener(n,t)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function w_(){return Xc=Xc||document.querySelector("base"),Xc?Xc.getAttribute("href"):null}();return null==n?null:function Dh(i){Jd=Jd||document.createElement("a"),Jd.setAttribute("href",i);const e=Jd.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Xc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ye(i,e){e=encodeURIComponent(e);for(const n of i.split(";")){const t=n.indexOf("="),[r,s]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let Jd,Xc=null,Jm=(()=>{var i;class e{build(){return new XMLHttpRequest}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const ef=new l.OlP("EventManagerPlugins");let tf=(()=>{var i;class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,s){return this._findPluginFor(r).addEventListener(t,r,s)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new l.vHH(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(ef),l.LFG(l.R0b))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();class Kl{constructor(e){this._doc=e}}const eu="ng-app-id";let nf=(()=>{var i;class e{constructor(t,r,s,o={}){this.doc=t,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Vr(o),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(s=>s.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${eu}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(s=>{null!=s.textContent&&r.set(s.textContent,s)}),r}return null}changeUsageCount(t,r){const s=this.styleRef;if(s.has(t)){const o=s.get(t);return o.usage+=r,o.usage}return s.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===t)return s.delete(r),o.removeAttribute(eu),o;{const d=this.doc.createElement("style");return this.nonce&&d.setAttribute("nonce",this.nonce),d.textContent=r,this.platformIsServer&&d.setAttribute(eu,this.appId),d}}addStyleToHost(t,r){const s=this.getStyleElement(t,r);t.appendChild(s);const o=this.styleRef,d=o.get(r)?.elements;d?d.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re),l.LFG(l.AFp),l.LFG(l.Ojb,8),l.LFG(l.Lbi))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const kh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},tu=/%COMP%/g,io=new l.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function In(i,e){return e.map(n=>n.replace(tu,i))}let Jc=(()=>{var i;class e{constructor(t,r,s,o,d,m,f,b=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=d,this.platformId=m,this.ngZone=f,this.nonce=b,this.rendererByCompId=new Map,this.platformIsServer=Vr(m),this.defaultRenderer=new el(t,d,f,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===l.ifc.ShadowDom&&(r={...r,encapsulation:l.ifc.Emulated});const s=this.getOrCreateRenderer(t,r);return s instanceof I_?s.applyToHost(t):s instanceof is&&s.applyStyles(),s}getOrCreateRenderer(t,r){const s=this.rendererByCompId;let o=s.get(r.id);if(!o){const d=this.doc,m=this.ngZone,f=this.eventManager,b=this.sharedStylesHost,w=this.removeStylesOnCompDestroy,I=this.platformIsServer;switch(r.encapsulation){case l.ifc.Emulated:o=new I_(f,b,r,this.appId,w,d,m,I);break;case l.ifc.ShadowDom:return new tl(f,b,t,r,d,m,this.nonce,I);default:o=new is(f,b,r,w,d,m,I)}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(tf),l.LFG(nf),l.LFG(l.AFp),l.LFG(io),l.LFG(re),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(l.Ojb))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();class el{constructor(e,n,t,r){this.eventManager=e,this.doc=n,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(kh[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(iu(e)?e.content:e).appendChild(n)}insertBefore(e,n,t){e&&(iu(e)?e.content:e).insertBefore(n,t)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let t="string"==typeof e?this.doc.querySelector(e):e;if(!t)throw new l.vHH(-5104,!1);return n||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,t,r){if(r){n=r+":"+n;const s=kh[r];s?e.setAttributeNS(s,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)}removeAttribute(e,n,t){if(t){const r=kh[t];r?e.removeAttributeNS(r,n):e.removeAttribute(`${t}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,t,r){r&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(n,t,r&l.JOm.Important?"important":""):e.style[n]=t}removeStyle(e,n,t){t&l.JOm.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,t){e[n]=t}setValue(e,n){e.nodeValue=n}listen(e,n,t){if("string"==typeof e&&!(e=U().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(t))}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))&&n.preventDefault()}}}function iu(i){return"TEMPLATE"===i.tagName&&void 0!==i.content}class tl extends el{constructor(e,n,t,r,s,o,d,m){super(e,s,o,m),this.sharedStylesHost=n,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const f=In(r.id,r.styles);for(const b of f){const w=document.createElement("style");d&&w.setAttribute("nonce",d),w.textContent=b,this.shadowRoot.appendChild(w)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,t){return super.insertBefore(this.nodeOrShadowRoot(e),n,t)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class is extends el{constructor(e,n,t,r,s,o,d,m){super(e,s,o,d),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=m?In(m,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class I_ extends is{constructor(e,n,t,r,s,o,d,m){const f=r+"-"+t.id;super(e,n,t,s,o,d,m,f),this.contentAttr=function Th(i){return"_ngcontent-%COMP%".replace(tu,i)}(f),this.hostAttr=function rf(i){return"_nghost-%COMP%".replace(tu,i)}(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const t=super.createElement(e,n);return super.setAttribute(t,this.contentAttr,""),t}}let sf=(()=>{var i;class e extends Kl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,s){return t.addEventListener(r,s,!1),()=>this.removeEventListener(t,r,s)}removeEventListener(t,r,s){return t.removeEventListener(r,s)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const af=["alt","control","meta","shift"],rc={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pb={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey};let dx=(()=>{var i;class e extends Kl{constructor(t){super(t)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,r,s){const o=e.parseEventName(r),d=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,o.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),s=r.shift();if(0===r.length||"keydown"!==s&&"keyup"!==s)return null;const o=e._normalizeKey(r.pop());let d="",m=r.indexOf("code");if(m>-1&&(r.splice(m,1),d="code."),af.forEach(b=>{const w=r.indexOf(b);w>-1&&(r.splice(w,1),d+=b+".")}),d+=o,0!=r.length||0===o.length)return null;const f={};return f.domEventName=s,f.fullKey=d,f}static matchEventFullKeyCode(t,r){let s=rc[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(s=t.code,o="code."),!(null==s||!s)&&(s=s.toLowerCase()," "===s?s="space":"."===s&&(s="dot"),af.forEach(d=>{d!==s&&(0,Pb[d])(t)&&(o+=d+".")}),o+=s,o===r)}static eventCallback(t,r,s){return o=>{e.matchEventFullKeyCode(o,t)&&s.runGuarded(()=>r(o))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const lf=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:bs},{provide:l.g9A,useValue:function Vt(){Mo.makeCurrent()},multi:!0},{provide:re,useFactory:function D_(){return(0,l.RDi)(document),document},deps:[]}]),df=new l.OlP(""),nl=[{provide:l.rWj,useClass:class Xm{addToWindow(e){l.dqk.getAngularTestability=(t,r=!0)=>{const s=e.findTestabilityInTree(t,r);if(null==s)throw new l.vHH(5103,!1);return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(t=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,o=!1;const d=function(m){o=o||m,s--,0==s&&t(o)};r.forEach(m=>{m.whenStable(d)})})}findTestabilityInTree(e,n,t){return null==n?null:e.getTestability(n)??(t?U().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:l.lri,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b,l.eoX,l.rWj]}],Po=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Ah(){return new l.qLn},deps:[]},{provide:ef,useClass:sf,multi:!0,deps:[re,l.R0b,l.Lbi]},{provide:ef,useClass:dx,multi:!0,deps:[re]},Jc,nf,tf,{provide:l.FYo,useExisting:Jc},{provide:class Ao{},useClass:Jm,deps:[]},[]];let Mh=(()=>{var i;class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:l.AFp,useValue:t.appId}]}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(df,12))},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[...Po,...nl],imports:[$t,l.hGG]}),e})(),Re=(()=>{var i;class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:function(t){let r=null;return r=t?new t:function uf(){return new Re((0,l.LFG)(re))}(),r},providedIn:"root"}),e})();typeof window<"u"&&window;let ss=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(t){let r=null;return r=t?new(t||i):l.LFG(sc),r},providedIn:"root"}),e})(),sc=(()=>{var i;class e extends ss{constructor(t){super(),this._doc=t}sanitize(t,r){if(null==r)return null;switch(t){case l.q3G.NONE:return r;case l.q3G.HTML:return(0,l.qzn)(r,"HTML")?(0,l.z3N)(r):(0,l.EiD)(this._doc,String(r)).toString();case l.q3G.STYLE:return(0,l.qzn)(r,"Style")?(0,l.z3N)(r):r;case l.q3G.SCRIPT:if((0,l.qzn)(r,"Script"))return(0,l.z3N)(r);throw new l.vHH(5200,!1);case l.q3G.URL:return(0,l.qzn)(r,"URL")?(0,l.z3N)(r):(0,l.mCW)(String(r));case l.q3G.RESOURCE_URL:if((0,l.qzn)(r,"ResourceURL"))return(0,l.z3N)(r);throw new l.vHH(5201,!1);default:throw new l.vHH(5202,!1)}}bypassSecurityTrustHtml(t){return(0,l.JVY)(t)}bypassSecurityTrustStyle(t){return(0,l.L6k)(t)}bypassSecurityTrustScript(t){return(0,l.eBb)(t)}bypassSecurityTrustUrl(t){return(0,l.LAX)(t)}bypassSecurityTrustResourceUrl(t){return(0,l.pB0)(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:function(t){let r=null;return r=t?new t:function ff(i){return new sc(i.get(re))}(l.LFG(l.zs3)),r},providedIn:"root"}),e})();var Bi=V(5592),nr=V(4674);var zn=V(2459),ft=V(2096),Ar=V(5619);const{isArray:O_}=Array,{getPrototypeOf:su,prototype:jr,keys:ra}=Object;function ii(i){if(1===i.length){const e=i[0];if(O_(e))return{args:e,keys:null};if(function td(i){return i&&"object"==typeof i&&su(i)===jr}(e)){const n=ra(e);return{args:n.map(t=>e[t]),keys:n}}}return{args:i,keys:null}}var nd=V(2737),Ct=V(7398);const{isArray:N_}=Array;function id(i){return(0,Ct.U)(e=>function ro(i,e){return N_(e)?i(...e):i(e)}(i,e))}var so=V(9940);function Us(i,e){return i.reduce((n,t,r)=>(n[t]=e[r],n),{})}var Mi=V(8251),rd=V(7103);function ir(...i){const e=(0,so.yG)(i),n=(0,so.jO)(i),{args:t,keys:r}=ii(i);if(0===t.length)return(0,zn.D)([],e);const s=new Bi.y(function rl(i,e,n=nd.y){return t=>{Nh(e,()=>{const{length:r}=i,s=new Array(r);let o=r,d=r;for(let m=0;m<r;m++)Nh(e,()=>{const f=(0,zn.D)(i[m],e);let b=!1;f.subscribe((0,Mi.x)(t,w=>{s[m]=w,b||(b=!0,d--),d||t.next(n(s.slice()))},()=>{--o||t.complete()}))},t)},t)}}(t,e,r?o=>Us(r,o):nd.y));return n?s.pipe(id(n)):s}function Nh(i,e,n){i?(0,rd.f)(n,i,e):e()}const Ra=(0,V(2306).d)(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});var ou=V(7537);function Gr(...i){return function Oo(){return(0,ou.J)(1)}()((0,zn.D)(i,(0,so.yG)(i)))}var sa=V(4829);function Fh(i){return new Bi.y(e=>{(0,sa.Xf)(i()).subscribe(e)})}var _f=V(8407);function au(i,e){const n=(0,nr.m)(i)?i:()=>i,t=r=>r.error(n());return new Bi.y(e?r=>e.schedule(t,0,r):t)}var oa=V(6232),rr=V(7394),yr=V(9360);function F_(){return(0,yr.e)((i,e)=>{let n=null;i._refCount++;const t=(0,Mi.x)(e,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount)return void(n=null);const r=i._connection,s=n;n=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});i.subscribe(t),t.closed||(n=i.connect())})}class sl extends Bi.y{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,(0,yr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new rr.w0;const n=this.getSubject();e.add(this.source.subscribe((0,Mi.x)(n,void 0,()=>{this._teardown(),n.complete()},t=>{this._teardown(),n.error(t)},()=>this._teardown()))),e.closed&&(this._connection=null,e=rr.w0.EMPTY)}return e}refCount(){return F_()(this)}}var Xe=V(8645),ri=V(4664);function Mn(i){return i<=0?()=>oa.E:(0,yr.e)((e,n)=>{let t=0;e.subscribe((0,Mi.x)(n,r=>{++t<=i&&(n.next(r),i<=t&&n.complete())}))})}function wr(...i){const e=(0,so.yG)(i);return(0,yr.e)((n,t)=>{(e?Gr(i,n,e):Gr(i,n)).subscribe(t)})}function Kn(i,e){return(0,yr.e)((n,t)=>{let r=0;n.subscribe((0,Mi.x)(t,s=>i.call(e,s,r++)&&t.next(s)))})}var sr=V(1631);function sd(i){return(0,yr.e)((e,n)=>{let t=!1;e.subscribe((0,Mi.x)(n,r=>{t=!0,n.next(r)},()=>{t||n.next(i),n.complete()}))})}function cu(i=gf){return(0,yr.e)((e,n)=>{let t=!1;e.subscribe((0,Mi.x)(n,r=>{t=!0,n.next(r)},()=>t?n.complete():n.error(i())))})}function gf(){return new Ra}function or(i,e){const n=arguments.length>=2;return t=>t.pipe(i?Kn((r,s)=>i(r,s,t)):nd.y,Mn(1),n?sd(e):cu(()=>new Ra))}function ac(i,e){return(0,nr.m)(e)?(0,sr.z)(i,e,1):(0,sr.z)(i,1)}var si=V(9397);function No(i){return(0,yr.e)((e,n)=>{let s,t=null,r=!1;t=e.subscribe((0,Mi.x)(n,void 0,void 0,o=>{s=(0,sa.Xf)(i(o,No(i)(e))),t?(t.unsubscribe(),t=null,s.subscribe(n)):r=!0})),r&&(t.unsubscribe(),t=null,s.subscribe(n))})}function oo(i,e){return(0,yr.e)(function lu(i,e,n,t,r){return(s,o)=>{let d=n,m=e,f=0;s.subscribe((0,Mi.x)(o,b=>{const w=f++;m=d?i(m,b,w):(d=!0,b),t&&o.next(m)},r&&(()=>{d&&o.next(m),o.complete()})))}}(i,e,arguments.length>=2,!0))}function cc(i){return i<=0?()=>oa.E:(0,yr.e)((e,n)=>{let t=[];e.subscribe((0,Mi.x)(n,r=>{t.push(r),i<t.length&&t.shift()},()=>{for(const r of t)n.next(r);n.complete()},void 0,()=>{t=null}))})}function Oa(i){return(0,yr.e)((e,n)=>{try{e.subscribe(n)}finally{n.add(i)}})}var ol=V(2420);function xn(i){return(0,yr.e)((e,n)=>{(0,sa.Xf)(i).subscribe((0,Mi.x)(n,()=>n.complete(),ol.Z)),!n.closed&&e.subscribe(n)})}const Jt="primary",Na=Symbol("RouteTitle");class lc{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function dc(i){return new lc(i)}function uc(i,e,n){const t=n.path.split("/");if(t.length>i.length||"full"===n.pathMatch&&(e.hasChildren()||t.length<i.length))return null;const r={};for(let s=0;s<t.length;s++){const o=t[s],d=i[s];if(o.startsWith(":"))r[o.substring(1)]=d;else if(o!==d.path)return null}return{consumed:i.slice(0,t.length),posParams:r}}function os(i,e){const n=i?Object.keys(i):void 0,t=e?Object.keys(e):void 0;if(!n||!t||n.length!=t.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!vf(i[r],e[r]))return!1;return!0}function vf(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;const n=[...i].sort(),t=[...e].sort();return n.every((r,s)=>t[s]===r)}return i===e}function Ii(i){return i.length>0?i[i.length-1]:null}function aa(i){return function oc(i){return!!i&&(i instanceof Bi.y||(0,nr.m)(i.lift)&&(0,nr.m)(i.subscribe))}(i)?i:(0,l.QGY)(i)?(0,zn.D)(Promise.resolve(i)):(0,ft.of)(i)}const Fa={exact:function du(i,e,n){if(!_e(i.segments,e.segments)||!T(i.segments,e.segments,n)||i.numberOfChildren!==e.numberOfChildren)return!1;for(const t in e.children)if(!i.children[t]||!du(i.children[t],e.children[t],n))return!1;return!0},subset:cl},hc={exact:function Vh(i,e){return os(i,e)},subset:function al(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(n=>vf(i[n],e[n]))},ignored:()=>!0};function L_(i,e,n){return Fa[n.paths](i.root,e.root,n.matrixParams)&&hc[n.queryParams](i.queryParams,e.queryParams)&&!("exact"===n.fragment&&i.fragment!==e.fragment)}function cl(i,e,n){return k(i,e,e.segments,n)}function k(i,e,n,t){if(i.segments.length>n.length){const r=i.segments.slice(0,n.length);return!(!_e(r,n)||e.hasChildren()||!T(r,n,t))}if(i.segments.length===n.length){if(!_e(i.segments,n)||!T(i.segments,n,t))return!1;for(const r in e.children)if(!i.children[r]||!cl(i.children[r],e.children[r],t))return!1;return!0}{const r=n.slice(0,i.segments.length),s=n.slice(i.segments.length);return!!(_e(i.segments,r)&&T(i.segments,r,t)&&i.children[Jt])&&k(i.children[Jt],e,s,t)}}function T(i,e,n){return e.every((t,r)=>hc[n](i[r].parameters,t.parameters))}class O{constructor(e=new B([],{}),n={},t=null){this.root=e,this.queryParams=n,this.fragment=t}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dc(this.queryParams)),this._queryParamMap}toString(){return wt.serialize(this)}}class B{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return kt(this)}}class W{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=dc(this.parameters)),this._parameterMap}toString(){return qi(this)}}function _e(i,e){return i.length===e.length&&i.every((n,t)=>n.path===e[t].path)}let qe=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return new at},providedIn:"root"}),e})();class at{parse(e){const n=new uu(e);return new O(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Zt(e.root,!0)}`,t=function Nb(i){const e=Object.keys(i).map(n=>{const t=i[n];return Array.isArray(t)?t.map(r=>`${Jn(n)}=${Jn(r)}`).join("&"):`${Jn(n)}=${Jn(t)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${t}${"string"==typeof e.fragment?`#${function Dn(i){return encodeURI(i)}(e.fragment)}`:""}`}}const wt=new at;function kt(i){return i.segments.map(e=>qi(e)).join("/")}function Zt(i,e){if(!i.hasChildren())return kt(i);if(e){const n=i.children[Jt]?Zt(i.children[Jt],!1):"",t=[];return Object.entries(i.children).forEach(([r,s])=>{r!==Jt&&t.push(`${r}:${Zt(s,!1)}`)}),t.length>0?`${n}(${t.join("//")})`:n}{const n=function Ne(i,e){let n=[];return Object.entries(i.children).forEach(([t,r])=>{t===Jt&&(n=n.concat(e(r,t)))}),Object.entries(i.children).forEach(([t,r])=>{t!==Jt&&(n=n.concat(e(r,t)))}),n}(i,(t,r)=>r===Jt?[Zt(i.children[Jt],!1)]:[`${r}:${Zt(t,!1)}`]);return 1===Object.keys(i.children).length&&null!=i.children[Jt]?`${kt(i)}/${n[0]}`:`${kt(i)}/(${n.join("//")})`}}function pi(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Jn(i){return pi(i).replace(/%3B/gi,";")}function ar(i){return pi(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lt(i){return decodeURIComponent(i)}function ws(i){return Lt(i.replace(/\+/g,"%20"))}function qi(i){return`${ar(i.path)}${function $r(i){return Object.keys(i).map(e=>`;${ar(e)}=${ar(i[e])}`).join("")}(i.parameters)}`}const B_=/^[^\/()?;#]+/;function mc(i){const e=i.match(B_);return e?e[0]:""}const Fb=/^[^\/()?;=#]+/,Lb=/^[^=?&#]+/,ao=/^[^&#]+/;class uu{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new B([],{}):new B([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(t[Jt]=new B(e,n)),t}parseSegment(){const e=mc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new l.vHH(4009,!1);return this.capture(e),new W(Lt(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function V_(i){const e=i.match(Fb);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let t="";if(this.consumeOptional("=")){const r=mc(this.remaining);r&&(t=r,this.capture(t))}e[Lt(n)]=Lt(t)}parseQueryParam(e){const n=function mx(i){const e=i.match(Lb);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let t="";if(this.consumeOptional("=")){const o=function U_(i){const e=i.match(ao);return e?e[0]:""}(this.remaining);o&&(t=o,this.capture(t))}const r=ws(n),s=ws(t);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const t=mc(this.remaining),r=this.remaining[t.length];if("/"!==r&&")"!==r&&";"!==r)throw new l.vHH(4010,!1);let s;t.indexOf(":")>-1?(s=t.slice(0,t.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Jt);const o=this.parseChildren();n[s]=1===Object.keys(o).length?o[Jt]:new B([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new l.vHH(4011,!1)}}function fx(i){return i.segments.length>0?new B([],{[Jt]:i}):i}function H_(i){const e={};for(const t of Object.keys(i.children)){const s=H_(i.children[t]);if(t===Jt&&0===s.segments.length&&s.hasChildren())for(const[o,d]of Object.entries(s.children))e[o]=d;else(s.segments.length>0||s.hasChildren())&&(e[t]=s)}return function Bb(i){if(1===i.numberOfChildren&&i.children[Jt]){const e=i.children[Jt];return new B(i.segments.concat(e.segments),e.children)}return i}(new B(i.segments,e))}function od(i){return i instanceof O}function z_(i){let e;const r=fx(function n(s){const o={};for(const m of s.children){const f=n(m);o[m.outlet]=f}const d=new B(s.url,o);return s===i&&(e=d),d}(i.root));return e??r}function j_(i,e,n,t){let r=i;for(;r.parent;)r=r.parent;if(0===e.length)return ad(r,r,r,n,t);const s=function px(i){if("string"==typeof i[0]&&1===i.length&&"/"===i[0])return new Hh(!0,0,i);let e=0,n=!1;const t=i.reduce((r,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Object.entries(s.outlets).forEach(([m,f])=>{d[m]="string"==typeof f?f.split("/"):f}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===o?(s.split("/").forEach((d,m)=>{0==m&&"."===d||(0==m&&""===d?n=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new Hh(n,e,t)}(e);if(s.toRoot())return ad(r,r,new B([],{}),n,t);const o=function _x(i,e,n){if(i.isAbsolute)return new cd(e,!0,0);if(!n)return new cd(e,!1,NaN);if(null===n.parent)return new cd(n,!0,0);const t=Uh(i.commands[0])?0:1;return function Vb(i,e,n){let t=i,r=e,s=n;for(;s>r;){if(s-=r,t=t.parent,!t)throw new l.vHH(4005,!1);r=t.segments.length}return new cd(t,!1,r-s)}(n,n.segments.length-1+t,i.numberOfDoubleDots)}(s,r,i),d=o.processChildren?hu(o.segmentGroup,o.index,s.commands):zh(o.segmentGroup,o.index,s.commands);return ad(r,o.segmentGroup,d,n,t)}function Uh(i){return"object"==typeof i&&null!=i&&!i.outlets&&!i.segmentPath}function ll(i){return"object"==typeof i&&null!=i&&i.outlets}function ad(i,e,n,t,r){let o,s={};t&&Object.entries(t).forEach(([m,f])=>{s[m]=Array.isArray(f)?f.map(b=>`${b}`):`${f}`}),o=i===e?n:dl(i,e,n);const d=fx(H_(o));return new O(d,s,r)}function dl(i,e,n){const t={};return Object.entries(i.children).forEach(([r,s])=>{t[r]=s===e?n:dl(s,e,n)}),new B(i.segments,t)}class Hh{constructor(e,n,t){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=t,e&&t.length>0&&Uh(t[0]))throw new l.vHH(4003,!1);const r=t.find(ll);if(r&&r!==Ii(t))throw new l.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class cd{constructor(e,n,t){this.segmentGroup=e,this.processChildren=n,this.index=t}}function zh(i,e,n){if(i||(i=new B([],{})),0===i.segments.length&&i.hasChildren())return hu(i,e,n);const t=function gx(i,e,n){let t=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(t>=n.length)return s;const o=i.segments[r],d=n[t];if(ll(d))break;const m=`${d}`,f=t<n.length-1?n[t+1]:null;if(r>0&&void 0===m)break;if(m&&f&&"object"==typeof f&&void 0===f.outlets){if(!W_(m,f,o))return s;t+=2}else{if(!W_(m,{},o))return s;t++}r++}return{match:!0,pathIndex:r,commandIndex:t}}(i,e,n),r=n.slice(t.commandIndex);if(t.match&&t.pathIndex<i.segments.length){const s=new B(i.segments.slice(0,t.pathIndex),{});return s.children[Jt]=new B(i.segments.slice(t.pathIndex),i.children),hu(s,0,r)}return t.match&&0===r.length?new B(i.segments,{}):t.match&&!i.hasChildren()?$_(i,e,n):t.match?hu(i,0,r):$_(i,e,n)}function hu(i,e,n){if(0===n.length)return new B(i.segments,{});{const t=function G_(i){return ll(i[0])?i[0].outlets:{[Jt]:i}}(n),r={};if(Object.keys(t).some(s=>s!==Jt)&&i.children[Jt]&&1===i.numberOfChildren&&0===i.children[Jt].segments.length){const s=hu(i.children[Jt],e,n);return new B(i.segments,s.children)}return Object.entries(t).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(r[s]=zh(i.children[s],e,o))}),Object.entries(i.children).forEach(([s,o])=>{void 0===t[s]&&(r[s]=o)}),new B(i.segments,r)}}function $_(i,e,n){const t=i.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(ll(s)){const m=mu(s.outlets);return new B(t,m)}if(0===r&&Uh(n[0])){t.push(new W(i.segments[e].path,fu(n[0]))),r++;continue}const o=ll(s)?s.outlets[Jt]:`${s}`,d=r<n.length-1?n[r+1]:null;o&&d&&Uh(d)?(t.push(new W(o,fu(d))),r+=2):(t.push(new W(o,{})),r++)}return new B(t,{})}function mu(i){const e={};return Object.entries(i).forEach(([n,t])=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=$_(new B([],{}),0,t))}),e}function fu(i){const e={};return Object.entries(i).forEach(([n,t])=>e[n]=`${t}`),e}function W_(i,e,n){return i==n.path&&os(e,n.parameters)}const bf="imperative";class ca{constructor(e,n){this.id=e,this.url=n}}class pu extends ca{constructor(e,n,t="imperative",r=null){super(e,n),this.type=0,this.navigationTrigger=t,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class fc extends ca{constructor(e,n,t){super(e,n),this.urlAfterRedirects=t,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class jh extends ca{constructor(e,n,t,r){super(e,n),this.reason=t,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class _u extends ca{constructor(e,n,t,r){super(e,n),this.reason=t,this.code=r,this.type=16}}class ld extends ca{constructor(e,n,t,r){super(e,n),this.error=t,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Gh extends ca{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ub extends ca{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vx extends ca{constructor(e,n,t,r,s){super(e,n),this.urlAfterRedirects=t,this.state=r,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class q_ extends ca{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cT extends ca{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Y_{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class bx{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Hb{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yx{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Z_{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lT{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $h{constructor(e,n,t){this.routerEvent=e,this.position=n,this.anchor=t,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Wh{}class K_{constructor(e){this.url=e}}class dT{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yf,this.attachRef=null}}let yf=(()=>{var i;class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const s=this.getOrCreateContext(t);s.outlet=r,this.contexts.set(t,s)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new dT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class wx{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=wf(e,this._root);return n?n.children.map(t=>t.value):[]}firstChild(e){const n=wf(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=ul(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return ul(e,this._root).map(n=>n.value)}}function wf(i,e){if(i===e.value)return e;for(const n of e.children){const t=wf(i,n);if(t)return t}return null}function ul(i,e){if(i===e.value)return[e];for(const n of e.children){const t=ul(i,n);if(t.length)return t.unshift(e),t}return[]}class Hs{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function hl(i){const e={};return i&&i.children.forEach(n=>e[n.value.outlet]=n),e}class Q_ extends wx{constructor(e,n){super(e),this.snapshot=n,Ef(this,e)}toString(){return this.snapshot.toString()}}function X_(i,e){const n=function Mr(i,e){const o=new pc([],{},{},"",{},Jt,e,null,{});return new qh("",new Hs(o,[]))}(0,e),t=new Ar.X([new W("",{})]),r=new Ar.X({}),s=new Ar.X({}),o=new Ar.X({}),d=new Ar.X(""),m=new la(t,r,o,d,s,Jt,e,n.root);return m.snapshot=n.root,new Q_(new Hs(m,[]),n)}class la{constructor(e,n,t,r,s,o,d,m){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=t,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=d,this._futureSnapshot=m,this.title=this.dataSubject?.pipe((0,Ct.U)(f=>f[Na]))??(0,ft.of)(void 0),this.url=e,this.params=n,this.queryParams=t,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ct.U)(e=>dc(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ct.U)(e=>dc(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xf(i,e="emptyOnly"){const n=i.pathFromRoot;let t=0;if("always"!==e)for(t=n.length-1;t>=1;){const r=n[t],s=n[t-1];if(r.routeConfig&&""===r.routeConfig.path)t--;else{if(s.component)break;t--}}return function Cf(i){return i.reduce((e,n)=>({params:{...e.params,...n.params},data:{...e.data,...n.data},resolve:{...n.data,...e.resolve,...n.routeConfig?.data,...n._resolvedData}}),{params:{},data:{},resolve:{}})}(n.slice(t))}class pc{get title(){return this.data?.[Na]}constructor(e,n,t,r,s,o,d,m,f){this.url=e,this.params=n,this.queryParams=t,this.fragment=r,this.data=s,this.outlet=o,this.component=d,this.routeConfig=m,this._resolve=f}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=dc(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=dc(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class qh extends wx{constructor(e,n){super(n),this.url=e,Ef(this,n)}toString(){return zb(this._root)}}function Ef(i,e){e.value._routerState=i,e.children.forEach(n=>Ef(i,n))}function zb(i){const e=i.children.length>0?` { ${i.children.map(zb).join(", ")} } `:"";return`${i.value}${e}`}function La(i){if(i.snapshot){const e=i.snapshot,n=i._futureSnapshot;i.snapshot=n,os(e.queryParams,n.queryParams)||i.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&i.fragmentSubject.next(n.fragment),os(e.params,n.params)||i.paramsSubject.next(n.params),function Bh(i,e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;++n)if(!os(i[n],e[n]))return!1;return!0}(e.url,n.url)||i.urlSubject.next(n.url),os(e.data,n.data)||i.dataSubject.next(n.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function Yh(i,e){const n=os(i.params,e.params)&&function se(i,e){return _e(i,e)&&i.every((n,t)=>os(n.parameters,e[t].parameters))}(i.url,e.url);return n&&!(!i.parent!=!e.parent)&&(!i.parent||Yh(i.parent,e.parent))}let Zh=(()=>{var i;class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=Jt,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.parentContexts=(0,l.f3M)(yf),this.location=(0,l.f3M)(l.s_b),this.changeDetector=(0,l.f3M)(l.sBO),this.environmentInjector=(0,l.f3M)(l.lqb),this.inputBinder=(0,l.f3M)(If,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:s}=t.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new l.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new l.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new l.vHH(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new l.vHH(4013,!1);this._activatedRoute=t;const s=this.location,d=t.snapshot.component,m=this.parentContexts.getOrCreateContext(this.name).children,f=new xx(t,m,s.injector);this.activated=s.createComponent(d,{index:s.length,injector:f,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[l.TTD]}),e})();class xx{constructor(e,n,t){this.route=e,this.childContexts=n,this.parent=t}get(e,n){return e===la?this.route:e===yf?this.childContexts:this.parent.get(e,n)}}const If=new l.OlP("");let J_=(()=>{var i;class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,s=ir([r.queryParams,r.params,r.data]).pipe((0,ri.w)(([o,d,m],f)=>(m={...o,...d,...m},0===f?(0,ft.of)(m):Promise.resolve(m)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const d=(0,l.qFp)(r.component);if(d)for(const{templateName:m}of d.inputs)t.activatedComponentRef.setInput(m,o[m]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,s)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();function dd(i,e,n){if(n&&i.shouldReuseRoute(e.value,n.value.snapshot)){const t=n.value;t._futureSnapshot=e.value;const r=function Cx(i,e,n){return e.children.map(t=>{for(const r of n.children)if(i.shouldReuseRoute(t.value,r.value.snapshot))return dd(i,t,r);return dd(i,t)})}(i,e,n);return new Hs(t,r)}{if(i.shouldAttach(e.value)){const s=i.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(d=>dd(i,d)),o}}const t=function Vi(i){return new la(new Ar.X(i.url),new Ar.X(i.params),new Ar.X(i.queryParams),new Ar.X(i.fragment),new Ar.X(i.data),i.outlet,i.component,i)}(e.value),r=e.children.map(s=>dd(i,s));return new Hs(t,r)}}const _c="ngNavigationCancelingError";function Df(i,e){const{redirectTo:n,navigationBehaviorOptions:t}=od(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Kh(!1,0,e);return r.url=n,r.navigationBehaviorOptions=t,r}function Kh(i,e,n){const t=new Error("NavigationCancelingError: "+(i||""));return t[_c]=!0,t.cancellationCode=e,n&&(t.url=n),t}function ml(i){return i&&i[_c]}let eg=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l.Xpm({type:i,selectors:[["ng-component"]],standalone:!0,features:[l.jDz],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[Zh],encapsulation:2}),e})();function H(i){const e=i.children&&i.children.map(H),n=e?{...i,children:e}:{...i};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Jt&&(n.component=eg),n}function $(i){return i.outlet||Jt}function be(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){const n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}class It{constructor(e,n,t,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=t,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){const n=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,t,e),La(this.futureState.root),this.activateChildRoutes(n,t,e)}deactivateChildRoutes(e,n,t){const r=hl(n);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,r[o],t),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,t)})}deactivateRoutes(e,n,t){const r=e.value,s=n?n.value:null;if(r===s)if(r.component){const o=t.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,t);else s&&this.deactivateRouteAndItsChildren(n,t)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const t=n.getContext(e.value.outlet),r=t&&e.value.component?t.children:n,s=hl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);if(t&&t.outlet){const o=t.outlet.detach(),d=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:d})}}deactivateRouteAndOutlet(e,n){const t=n.getContext(e.value.outlet),r=t&&e.value.component?t.children:n,s=hl(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],r);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,n,t){const r=hl(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],t),this.forwardEvent(new lT(s.value.snapshot))}),e.children.length&&this.forwardEvent(new yx(e.value.snapshot))}activateRoutes(e,n,t){const r=e.value,s=n?n.value:null;if(La(r),r===s)if(r.component){const o=t.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,t);else if(r.component){const o=t.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(d.contexts),o.attachRef=d.componentRef,o.route=d.route.value,o.outlet&&o.outlet.attach(d.componentRef,d.route.value),La(d.route.value),this.activateChildRoutes(e,null,o.children)}else{const d=be(r.snapshot);o.attachRef=null,o.route=r,o.injector=d,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,t)}}class tn{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class jn{constructor(e,n){this.component=e,this.route=n}}function Yi(i,e,n){const t=i._root;return fl(t,e?e._root:null,n,[t.value])}function Fo(i,e){const n=Symbol(),t=e.get(i,n);return t===n?"function"!=typeof i||(0,l.Z0I)(i)?e.get(i):i:t}function fl(i,e,n,t,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=hl(e);return i.children.forEach(o=>{(function gu(i,e,n,t,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=i.value,o=e?e.value:null,d=n?n.getContext(i.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const m=function Gb(i,e,n){if("function"==typeof n)return n(i,e);switch(n){case"pathParamsChange":return!_e(i.url,e.url);case"pathParamsOrQueryParamsChange":return!_e(i.url,e.url)||!os(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Yh(i,e)||!os(i.queryParams,e.queryParams);default:return!Yh(i,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);m?r.canActivateChecks.push(new tn(t)):(s.data=o.data,s._resolvedData=o._resolvedData),fl(i,e,s.component?d?d.children:null:n,t,r),m&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new jn(d.outlet.component,o))}else o&&vu(e,d,r),r.canActivateChecks.push(new tn(t)),fl(i,null,s.component?d?d.children:null:n,t,r)})(o,s[o.value.outlet],n,t.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,d])=>vu(d,n.getContext(o),r)),r}function vu(i,e,n){const t=hl(i),r=i.value;Object.entries(t).forEach(([s,o])=>{vu(o,r.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new jn(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function ud(i){return"function"==typeof i}function mT(i){return i instanceof Ra||"EmptyError"===i?.name}const kf=Symbol("INITIAL_VALUE");function Qh(){return(0,ri.w)(i=>ir(i.map(e=>e.pipe(Mn(1),wr(kf)))).pipe((0,Ct.U)(e=>{for(const n of e)if(!0!==n){if(n===kf)return kf;if(!1===n||n instanceof O)return n}return!0}),Kn(e=>e!==kf),Mn(1)))}function kx(i){return(0,_f.z)((0,si.b)(e=>{if(od(e))throw Df(0,e)}),(0,Ct.U)(e=>!0===e))}class ng{constructor(e){this.segmentGroup=e||null}}class ig{constructor(e){this.urlTree=e}}function pl(i){return au(new ng(i))}function Sx(i){return au(new ig(i))}class vT{constructor(e,n){this.urlSerializer=e,this.urlTree=n}noMatchError(e){return new l.vHH(4002,!1)}lineralizeSegments(e,n){let t=[],r=n.root;for(;;){if(t=t.concat(r.segments),0===r.numberOfChildren)return(0,ft.of)(t);if(r.numberOfChildren>1||!r.children[Jt])return au(new l.vHH(4e3,!1));r=r.children[Jt]}}applyRedirectCommands(e,n,t){return this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,t)}applyRedirectCreateUrlTree(e,n,t,r){const s=this.createSegmentGroup(e,n.root,t,r);return new O(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const t={};return Object.entries(e).forEach(([r,s])=>{if("string"==typeof s&&s.startsWith(":")){const d=s.substring(1);t[r]=n[d]}else t[r]=s}),t}createSegmentGroup(e,n,t,r){const s=this.createSegments(e,n.segments,t,r);let o={};return Object.entries(n.children).forEach(([d,m])=>{o[d]=this.createSegmentGroup(e,m,t,r)}),new B(s,o)}createSegments(e,n,t,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,t))}findPosParam(e,n,t){const r=t[n.path.substring(1)];if(!r)throw new l.vHH(4001,!1);return r}findOrReturn(e,n){let t=0;for(const r of n){if(r.path===e.path)return n.splice(t),r;t++}return e}}const rg={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function sg(i,e,n,t,r){const s=Mx(i,e,n);return s.matched?(t=function jb(i,e){return i.providers&&!i._injector&&(i._injector=(0,l.MMx)(i.providers,e,`Route: ${i.path}`)),i._injector??e}(e,t),function Tx(i,e,n,t){const r=e.canMatch;if(!r||0===r.length)return(0,ft.of)(!0);const s=r.map(o=>{const d=Fo(o,i);return aa(function Dx(i){return i&&ud(i.canMatch)}(d)?d.canMatch(e,n):i.runInContext(()=>d(e,n)))});return(0,ft.of)(s).pipe(Qh(),kx())}(t,e,n).pipe((0,Ct.U)(o=>!0===o?s:{...rg}))):(0,ft.of)(s)}function Mx(i,e,n){if(""===e.path)return"full"===e.pathMatch&&(i.hasChildren()||n.length>0)?{...rg}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const r=(e.matcher||uc)(n,i,e);if(!r)return{...rg};const s={};Object.entries(r.posParams??{}).forEach(([d,m])=>{s[d]=m.path});const o=r.consumed.length>0?{...s,...r.consumed[r.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Rx(i,e,n,t){return n.length>0&&function ON(i,e,n){return n.some(t=>og(i,e,t)&&$(t)!==Jt)}(i,n,t)?{segmentGroup:new B(e,PN(t,new B(n,i.children))),slicedSegments:[]}:0===n.length&&function bT(i,e,n){return n.some(t=>og(i,e,t))}(i,n,t)?{segmentGroup:new B(i.segments,RN(i,0,n,t,i.children)),slicedSegments:n}:{segmentGroup:new B(i.segments,i.children),slicedSegments:n}}function RN(i,e,n,t,r){const s={};for(const o of t)if(og(i,n,o)&&!r[$(o)]){const d=new B([],{});s[$(o)]=d}return{...r,...s}}function PN(i,e){const n={};n[Jt]=e;for(const t of i)if(""===t.path&&$(t)!==Jt){const r=new B([],{});n[$(t)]=r}return n}function og(i,e,n){return(!(i.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class NN{constructor(e,n,t,r,s,o,d){this.injector=e,this.configLoader=n,this.rootComponentType=t,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=d,this.allowRedirects=!0,this.applyRedirects=new vT(this.urlSerializer,this.urlTree)}noMatchError(e){return new l.vHH(4002,!1)}recognize(){const e=Rx(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Jt).pipe(No(n=>{if(n instanceof ig)return this.allowRedirects=!1,this.urlTree=n.urlTree,this.match(n.urlTree);throw n instanceof ng?this.noMatchError(n):n}),(0,Ct.U)(n=>{const t=new pc([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,{}),r=new Hs(t,n),s=new qh("",r),o=function aT(i,e,n=null,t=null){return j_(z_(i),e,n,t)}(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,Jt).pipe(No(t=>{throw t instanceof ng?this.noMatchError(t):t}))}inheritParamsAndData(e){const n=e.value,t=xf(n,this.paramsInheritanceStrategy);n.params=Object.freeze(t.params),n.data=Object.freeze(t.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,n,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,n,t):this.processSegment(e,n,t,t.segments,r,!0)}processChildren(e,n,t){const r=[];for(const s of Object.keys(t.children))"primary"===s?r.unshift(s):r.push(s);return(0,zn.D)(r).pipe(ac(s=>{const o=t.children[s],d=function ae(i,e){const n=i.filter(t=>$(t)===e);return n.push(...i.filter(t=>$(t)!==e)),n}(n,s);return this.processSegmentGroup(e,d,o,s)}),oo((s,o)=>(s.push(...o),s)),sd(null),function Lh(i,e){const n=arguments.length>=2;return t=>t.pipe(i?Kn((r,s)=>i(r,s,t)):nd.y,cc(1),n?sd(e):cu(()=>new Ra))}(),(0,sr.z)(s=>{if(null===s)return pl(t);const o=yT(s);return function FN(i){i.sort((e,n)=>e.value.outlet===Jt?-1:n.value.outlet===Jt?1:e.value.outlet.localeCompare(n.value.outlet))}(o),(0,ft.of)(o)}))}processSegment(e,n,t,r,s,o){return(0,zn.D)(n).pipe(ac(d=>this.processSegmentAgainstRoute(d._injector??e,n,d,t,r,s,o).pipe(No(m=>{if(m instanceof ng)return(0,ft.of)(null);throw m}))),or(d=>!!d),No(d=>{if(mT(d))return function Px(i,e,n){return 0===e.length&&!i.children[n]}(t,r,s)?(0,ft.of)([]):pl(t);throw d}))}processSegmentAgainstRoute(e,n,t,r,s,o,d){return function Kb(i,e,n,t){return!!($(i)===t||t!==Jt&&og(e,n,i))&&("**"===i.path||Mx(e,i,n).matched)}(t,r,s,o)?void 0===t.redirectTo?this.matchSegmentAgainstRoute(e,r,t,s,o,d):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,t,s,o):pl(r):pl(r)}expandSegmentAgainstRouteUsingRedirect(e,n,t,r,s,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,r,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,t,r){const s=this.applyRedirects.applyRedirectCommands([],t.redirectTo,{});return t.redirectTo.startsWith("/")?Sx(s):this.applyRedirects.lineralizeSegments(t,s).pipe((0,sr.z)(o=>{const d=new B(o,{});return this.processSegment(e,n,d,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,t,r,s,o){const{matched:d,consumedSegments:m,remainingSegments:f,positionalParamSegments:b}=Mx(n,r,s);if(!d)return pl(n);const w=this.applyRedirects.applyRedirectCommands(m,r.redirectTo,b);return r.redirectTo.startsWith("/")?Sx(w):this.applyRedirects.lineralizeSegments(r,w).pipe((0,sr.z)(I=>this.processSegment(e,t,n,I.concat(f),o,!1)))}matchSegmentAgainstRoute(e,n,t,r,s,o){let d;if("**"===t.path){const m=r.length>0?Ii(r).parameters:{},f=new pc(r,m,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xT(t),$(t),t.component??t._loadedComponent??null,t,Jh(t));d=(0,ft.of)({snapshot:f,consumedSegments:[],remainingSegments:[]}),n.children={}}else d=sg(n,t,r,e).pipe((0,Ct.U)(({matched:m,consumedSegments:f,remainingSegments:b,parameters:w})=>m?{snapshot:new pc(f,w,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,xT(t),$(t),t.component??t._loadedComponent??null,t,Jh(t)),consumedSegments:f,remainingSegments:b}:null));return d.pipe((0,ri.w)(m=>null===m?pl(n):this.getChildConfig(e=t._injector??e,t,r).pipe((0,ri.w)(({routes:f})=>{const b=t._loadedInjector??e,{snapshot:w,consumedSegments:I,remainingSegments:S}=m,{segmentGroup:F,slicedSegments:z}=Rx(n,I,S,f);if(0===z.length&&F.hasChildren())return this.processChildren(b,f,F).pipe((0,Ct.U)(we=>null===we?null:[new Hs(w,we)]));if(0===f.length&&0===z.length)return(0,ft.of)([new Hs(w,[])]);const q=$(t)===s;return this.processSegment(b,f,F,z,q?Jt:s,!0).pipe((0,Ct.U)(we=>[new Hs(w,we)]))}))))}getChildConfig(e,n,t){return n.children?(0,ft.of)({routes:n.children,injector:e}):n.loadChildren?void 0!==n._loadedRoutes?(0,ft.of)({routes:n._loadedRoutes,injector:n._loadedInjector}):function gT(i,e,n,t){const r=e.canLoad;if(void 0===r||0===r.length)return(0,ft.of)(!0);const s=r.map(o=>{const d=Fo(o,i);return aa(function Ix(i){return i&&ud(i.canLoad)}(d)?d.canLoad(e,n):i.runInContext(()=>d(e,n)))});return(0,ft.of)(s).pipe(Qh(),kx())}(e,n,t).pipe((0,sr.z)(r=>r?this.configLoader.loadChildren(e,n).pipe((0,si.b)(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):function Zb(i){return au(Kh(!1,3))}())):(0,ft.of)({routes:[],injector:e})}}function Sz(i){const e=i.value.routeConfig;return e&&""===e.path}function yT(i){const e=[],n=new Set;for(const t of i){if(!Sz(t)){e.push(t);continue}const r=e.find(s=>t.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...t.children),n.add(r)):e.push(t)}for(const t of n){const r=yT(t.children);e.push(new Hs(t.value,r))}return e.filter(t=>!n.has(t))}function xT(i){return i.data||{}}function Jh(i){return i.resolve||{}}function Ox(i,e){return(0,sr.z)(n=>{const{targetSnapshot:t,guards:{canActivateChecks:r}}=n;if(!r.length)return(0,ft.of)(n);let s=0;return(0,zn.D)(r).pipe(ac(o=>function CT(i,e,n,t){const r=i.routeConfig,s=i._resolve;return void 0!==r?.title&&!DT(r)&&(s[Na]=r.title),function ET(i,e,n,t){const r=function IT(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}(i);if(0===r.length)return(0,ft.of)({});const s={};return(0,zn.D)(r).pipe((0,sr.z)(o=>function em(i,e,n,t){const r=be(e)??t,s=Fo(i,r);return aa(s.resolve?s.resolve(e,n):r.runInContext(()=>s(e,n)))}(i[o],e,n,t).pipe(or(),(0,si.b)(d=>{s[o]=d}))),cc(1),function Pa(i){return(0,Ct.U)(()=>i)}(s),No(o=>mT(o)?oa.E:au(o)))}(s,i,e,t).pipe((0,Ct.U)(o=>(i._resolvedData=o,i.data=xf(i,n).resolve,r&&DT(r)&&(i.data[Na]=r.title),null)))}(o.route,t,i,e)),(0,si.b)(()=>s++),cc(1),(0,sr.z)(o=>s===r.length?(0,ft.of)(n):oa.E))})}function DT(i){return"string"==typeof i.title||null===i.title}function Nx(i){return(0,ri.w)(e=>{const n=i(e);return n?(0,zn.D)(n).pipe((0,Ct.U)(()=>e)):(0,ft.of)(e)})}const Sf=new l.OlP("ROUTES");let Fx=(()=>{var i;class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,l.f3M)(l.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return(0,ft.of)(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=aa(t.loadComponent()).pipe((0,Ct.U)(_l),(0,si.b)(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Oa(()=>{this.componentLoaders.delete(t)})),s=new sl(r,()=>new Xe.x).pipe(F_());return this.componentLoaders.set(t,s),s}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return(0,ft.of)({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const o=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Ct.U)(m=>{this.onLoadEndListener&&this.onLoadEndListener(r);let f,b;return Array.isArray(m)?b=m:(f=m.create(t).injector,b=f.get(Sf,[],l.XFs.Self|l.XFs.Optional).flat()),{routes:b.map(H),injector:f}}),Oa(()=>{this.childrenLoaders.delete(r)})),d=new sl(o,()=>new Xe.x).pipe(F_());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return aa(t()).pipe((0,Ct.U)(_l),(0,sr.z)(r=>r instanceof l.YKP||Array.isArray(r)?(0,ft.of)(r):(0,zn.D)(this.compiler.compileModuleAsync(r))))}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function _l(i){return function LN(i){return i&&"object"==typeof i&&"default"in i}(i)?i.default:i}let hd=(()=>{var i;class e{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Xe.x,this.transitionAbortSubject=new Xe.x,this.configLoader=(0,l.f3M)(Fx),this.environmentInjector=(0,l.f3M)(l.lqb),this.urlSerializer=(0,l.f3M)(qe),this.rootContexts=(0,l.f3M)(yf),this.inputBindingEnabled=null!==(0,l.f3M)(If,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,ft.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=s=>this.events.next(new bx(s)),this.configLoader.onLoadStartListener=s=>this.events.next(new Y_(s))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t,r,s){return this.transitions=new Ar.X({id:0,currentUrlTree:r,currentRawUrl:r,currentBrowserUrl:r,extractedUrl:t.urlHandlingStrategy.extract(r),urlAfterRedirects:t.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:bf,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Kn(o=>0!==o.id),(0,Ct.U)(o=>({...o,extractedUrl:t.urlHandlingStrategy.extract(o.rawUrl)})),(0,ri.w)(o=>{this.currentTransition=o;let d=!1,m=!1;return(0,ft.of)(o).pipe((0,si.b)(f=>{this.currentNavigation={id:f.id,initialUrl:f.rawUrl,extractedUrl:f.extractedUrl,trigger:f.source,extras:f.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,ri.w)(f=>{const b=f.currentBrowserUrl.toString(),w=!t.navigated||f.extractedUrl.toString()!==b||b!==f.currentUrlTree.toString();if(!w&&"reload"!==(f.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const S="";return this.events.next(new _u(f.id,this.urlSerializer.serialize(f.rawUrl),S,0)),f.resolve(null),oa.E}if(t.urlHandlingStrategy.shouldProcessUrl(f.rawUrl))return(0,ft.of)(f).pipe((0,ri.w)(S=>{const F=this.transitions?.getValue();return this.events.next(new pu(S.id,this.urlSerializer.serialize(S.extractedUrl),S.source,S.restoredState)),F!==this.transitions?.getValue()?oa.E:Promise.resolve(S)}),function Qb(i,e,n,t,r,s){return(0,sr.z)(o=>function Tf(i,e,n,t,r,s,o="emptyOnly"){return new NN(i,e,n,t,r,o,s).recognize()}(i,e,n,t,o.extractedUrl,r,s).pipe((0,Ct.U)(({state:d,tree:m})=>({...o,targetSnapshot:d,urlAfterRedirects:m}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,si.b)(S=>{o.targetSnapshot=S.targetSnapshot,o.urlAfterRedirects=S.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects};const F=new Gh(S.id,this.urlSerializer.serialize(S.extractedUrl),this.urlSerializer.serialize(S.urlAfterRedirects),S.targetSnapshot);this.events.next(F)}));if(w&&t.urlHandlingStrategy.shouldProcessUrl(f.currentRawUrl)){const{id:S,extractedUrl:F,source:z,restoredState:q,extras:we}=f,Ae=new pu(S,this.urlSerializer.serialize(F),z,q);this.events.next(Ae);const De=X_(0,this.rootComponentType).snapshot;return this.currentTransition=o={...f,targetSnapshot:De,urlAfterRedirects:F,extras:{...we,skipLocationChange:!1,replaceUrl:!1}},(0,ft.of)(o)}{const S="";return this.events.next(new _u(f.id,this.urlSerializer.serialize(f.extractedUrl),S,1)),f.resolve(null),oa.E}}),(0,si.b)(f=>{const b=new Ub(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(b)}),(0,Ct.U)(f=>(this.currentTransition=o={...f,guards:Yi(f.targetSnapshot,f.currentSnapshot,this.rootContexts)},o)),function Xh(i,e){return(0,sr.z)(n=>{const{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,ft.of)({...n,guardsResult:!0}):function fT(i,e,n,t){return(0,zn.D)(i).pipe((0,sr.z)(r=>function _T(i,e,n,t,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,ft.of)(!0);const o=s.map(d=>{const m=be(e)??r,f=Fo(d,m);return aa(function qb(i){return i&&ud(i.canDeactivate)}(f)?f.canDeactivate(i,e,n,t):m.runInContext(()=>f(i,e,n,t))).pipe(or())});return(0,ft.of)(o).pipe(Qh())}(r.component,r.route,n,e,t)),or(r=>!0!==r,!0))}(o,t,r,i).pipe((0,sr.z)(d=>d&&function $b(i){return"boolean"==typeof i}(d)?function pT(i,e,n,t){return(0,zn.D)(e).pipe(ac(r=>Gr(function Tz(i,e){return null!==i&&e&&e(new Hb(i)),(0,ft.of)(!0)}(r.route.parent,t),function AN(i,e){return null!==i&&e&&e(new Z_(i)),(0,ft.of)(!0)}(r.route,t),function MN(i,e,n){const t=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Wr(i){const e=i.routeConfig?i.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:i,guards:e}:null}(o)).filter(o=>null!==o).map(o=>Fh(()=>{const d=o.guards.map(m=>{const f=be(o.node)??n,b=Fo(m,f);return aa(function Wb(i){return i&&ud(i.canActivateChild)}(b)?b.canActivateChild(t,i):f.runInContext(()=>b(t,i))).pipe(or())});return(0,ft.of)(d).pipe(Qh())}));return(0,ft.of)(s).pipe(Qh())}(i,r.path,n),function Yb(i,e,n){const t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||0===t.length)return(0,ft.of)(!0);const r=t.map(s=>Fh(()=>{const o=be(e)??n,d=Fo(s,o);return aa(function tg(i){return i&&ud(i.canActivate)}(d)?d.canActivate(e,i):o.runInContext(()=>d(e,i))).pipe(or())}));return(0,ft.of)(r).pipe(Qh())}(i,r.route,n))),or(r=>!0!==r,!0))}(t,s,i,e):(0,ft.of)(d)),(0,Ct.U)(d=>({...n,guardsResult:d})))})}(this.environmentInjector,f=>this.events.next(f)),(0,si.b)(f=>{if(o.guardsResult=f.guardsResult,od(f.guardsResult))throw Df(0,f.guardsResult);const b=new vx(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot,!!f.guardsResult);this.events.next(b)}),Kn(f=>!!f.guardsResult||(this.cancelNavigationTransition(f,"",3),!1)),Nx(f=>{if(f.guards.canActivateChecks.length)return(0,ft.of)(f).pipe((0,si.b)(b=>{const w=new q_(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(w)}),(0,ri.w)(b=>{let w=!1;return(0,ft.of)(b).pipe(Ox(t.paramsInheritanceStrategy,this.environmentInjector),(0,si.b)({next:()=>w=!0,complete:()=>{w||this.cancelNavigationTransition(b,"",2)}}))}),(0,si.b)(b=>{const w=new cT(b.id,this.urlSerializer.serialize(b.extractedUrl),this.urlSerializer.serialize(b.urlAfterRedirects),b.targetSnapshot);this.events.next(w)}))}),Nx(f=>{const b=w=>{const I=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&I.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,si.b)(S=>{w.component=S}),(0,Ct.U)(()=>{})));for(const S of w.children)I.push(...b(S));return I};return ir(b(f.targetSnapshot.root)).pipe(sd(),Mn(1))}),Nx(()=>this.afterPreactivation()),(0,Ct.U)(f=>{const b=function xs(i,e,n){const t=dd(i,e._root,n?n._root:void 0);return new Q_(t,e)}(t.routeReuseStrategy,f.targetSnapshot,f.currentRouterState);return this.currentTransition=o={...f,targetRouterState:b},o}),(0,si.b)(()=>{this.events.next(new Wh)}),((i,e,n,t)=>(0,Ct.U)(r=>(new It(e,r.targetRouterState,r.currentRouterState,n,t).activate(i),r)))(this.rootContexts,t.routeReuseStrategy,f=>this.events.next(f),this.inputBindingEnabled),Mn(1),(0,si.b)({next:f=>{d=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new fc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects))),t.titleStrategy?.updateTitle(f.targetRouterState.snapshot),f.resolve(!0)},complete:()=>{d=!0}}),xn(this.transitionAbortSubject.pipe((0,si.b)(f=>{throw f}))),Oa(()=>{d||m||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),No(f=>{if(m=!0,ml(f))this.events.next(new jh(o.id,this.urlSerializer.serialize(o.extractedUrl),f.message,f.cancellationCode)),function as(i){return ml(i)&&od(i.url)}(f)?this.events.next(new K_(f.url)):o.resolve(!1);else{this.events.next(new ld(o.id,this.urlSerializer.serialize(o.extractedUrl),f,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(f))}catch(b){o.reject(b)}}return oa.E}))}))}cancelNavigationTransition(t,r,s){const o=new jh(t.id,this.urlSerializer.serialize(t.extractedUrl),r,s);this.events.next(o),t.resolve(!1)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function kT(i){return i!==bf}let TT=(()=>{var i;class e{buildTitle(t){let r,s=t.root;for(;void 0!==s;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===Jt);return r}getResolvedTitleForRoute(t){return t.data[Na]}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return(0,l.f3M)(BN)},providedIn:"root"}),e})(),BN=(()=>{var i;class e extends TT{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),VN=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return(0,l.f3M)(HN)},providedIn:"root"}),e})();class UN{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}let HN=(()=>{var i;class e extends UN{}return(i=e).\u0275fac=function(){let n;return function(r){return(n||(n=l.n5z(i)))(r||i)}}(),i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const ag=new l.OlP("",{providedIn:"root",factory:()=>({})});let zN=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:function(){return(0,l.f3M)(jN)},providedIn:"root"}),e})(),jN=(()=>{var i;class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();var cg=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(cg||{});function ST(i,e){i.events.pipe(Kn(n=>n instanceof fc||n instanceof jh||n instanceof ld||n instanceof _u),(0,Ct.U)(n=>n instanceof fc||n instanceof _u?cg.COMPLETE:n instanceof jh&&(0===n.code||1===n.code)?cg.REDIRECTING:cg.FAILED),Kn(n=>n!==cg.REDIRECTING),Mn(1)).subscribe(()=>{e()})}function Xb(i){throw i}function md(i,e,n){return e.parse("/")}const lg={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},AT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let co=(()=>{var i;class e{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.location.getState()?.\u0275routerPageId??this.currentPageId}get events(){return this._events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,l.f3M)(l.c2e),this.isNgZoneEnabled=!1,this._events=new Xe.x,this.options=(0,l.f3M)(ag,{optional:!0})||{},this.pendingTasks=(0,l.f3M)(l.HDt),this.errorHandler=this.options.errorHandler||Xb,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||md,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,l.f3M)(zN),this.routeReuseStrategy=(0,l.f3M)(VN),this.titleStrategy=(0,l.f3M)(TT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,l.f3M)(Sf,{optional:!0})?.flat()??[],this.navigationTransitions=(0,l.f3M)(hd),this.urlSerializer=(0,l.f3M)(qe),this.location=(0,l.f3M)(et),this.componentInputBindingEnabled=!!(0,l.f3M)(If,{optional:!0}),this.eventsSubscription=new rr.w0,this.isNgZoneEnabled=(0,l.f3M)(l.R0b)instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new O,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=X_(0,null),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const t=this.navigationTransitions.events.subscribe(r=>{try{const{currentTransition:s}=this.navigationTransitions;if(null===s)return void(GN(r)&&this._events.next(r));if(r instanceof pu)kT(s.source)&&(this.browserUrlTree=s.extractedUrl);else if(r instanceof _u)this.rawUrlTree=s.rawUrl;else if(r instanceof Gh){if("eager"===this.urlUpdateStrategy){if(!s.extras.skipLocationChange){const o=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl);this.setBrowserUrl(o,s)}this.browserUrlTree=s.urlAfterRedirects}}else if(r instanceof Wh)this.currentUrlTree=s.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(s.urlAfterRedirects,s.rawUrl),this.routerState=s.targetRouterState,"deferred"===this.urlUpdateStrategy&&(s.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,s),this.browserUrlTree=s.urlAfterRedirects);else if(r instanceof jh)0!==r.code&&1!==r.code&&(this.navigated=!0),(3===r.code||2===r.code)&&this.restoreHistory(s);else if(r instanceof K_){const o=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),d={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||kT(s.source)};this.scheduleNavigation(o,bf,null,d,{resolve:s.resolve,reject:s.reject,promise:s.promise})}r instanceof ld&&this.restoreHistory(s,!0),r instanceof fc&&(this.navigated=!0),GN(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),bf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,s){const o={replaceUrl:!0},d=s?.navigationId?s:null;if(s){const f={...s};delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(o.state=f)}const m=this.parseUrl(t);this.scheduleNavigation(m,r,d,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(H),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){const{relativeTo:s,queryParams:o,fragment:d,queryParamsHandling:m,preserveFragment:f}=r,b=f?this.currentUrlTree.fragment:d;let I,w=null;switch(m){case"merge":w={...this.currentUrlTree.queryParams,...o};break;case"preserve":w=this.currentUrlTree.queryParams;break;default:w=o||null}null!==w&&(w=this.removeEmptyProps(w));try{I=z_(s?s.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),I=this.currentUrlTree.root}return j_(I,t,w,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const s=od(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,bf,null,r)}navigate(t,r={skipLocationChange:!1}){return function MT(i){for(let e=0;e<i.length;e++)if(null==i[e])throw new l.vHH(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(s){r=this.malformedUriErrorHandler(s,this.urlSerializer,t)}return r}isActive(t,r){let s;if(s=!0===r?{...lg}:!1===r?{...AT}:r,od(t))return L_(this.currentUrlTree,t,s);const o=this.parseUrl(t);return L_(this.currentUrlTree,o,s)}removeEmptyProps(t){return Object.keys(t).reduce((r,s)=>{const o=t[s];return null!=o&&(r[s]=o),r},{})}scheduleNavigation(t,r,s,o,d){if(this.disposed)return Promise.resolve(!1);let m,f,b;d?(m=d.resolve,f=d.reject,b=d.promise):b=new Promise((I,S)=>{m=I,f=S});const w=this.pendingTasks.add();return ST(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(w))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,currentBrowserUrl:this.browserUrlTree,rawUrl:t,extras:o,resolve:m,reject:f,promise:b,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),b.catch(I=>Promise.reject(I))}setBrowserUrl(t,r){const s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){const d={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(s,"",d)}else{const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId+1)};this.location.go(s,"",o)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-this.browserPageId;0!==o?this.location.historyGo(o):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function GN(i){return!(i instanceof Wh||i instanceof K_)}let Af=(()=>{var i;class e{constructor(t,r,s,o,d,m){this.router=t,this.route=r,this.tabIndexAttribute=s,this.renderer=o,this.el=d,this.locationStrategy=m,this.href=null,this.commands=null,this.onChanges=new Xe.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const f=d.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===f||"area"===f,this.isAnchorElement?this.subscription=t.events.subscribe(b=>{b instanceof fc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,s,o,d){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||s||o||d||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,l.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const s=this.renderer,o=this.el.nativeElement;null!==r?s.setAttribute(o,t,r):s.removeAttribute(o,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(co),l.Y36(la),l.$8M("tabindex"),l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(Fe))},i.\u0275dir=l.lG2({type:i,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&l.NdJ("click",function(o){return r.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),2&t&&l.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",l.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",l.VuI],replaceUrl:["replaceUrl","replaceUrl",l.VuI],routerLink:"routerLink"},standalone:!0,features:[l.Xq5,l.TTD]}),e})();class Jb{}let RT=(()=>{var i;class e{constructor(t,r,s,o,d){this.router=t,this.injector=s,this.preloadingStrategy=o,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(Kn(t=>t instanceof fc),ac(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const s=[];for(const o of r){o.providers&&!o._injector&&(o._injector=(0,l.MMx)(o.providers,t,`Route: ${o.path}`));const d=o._injector??t,m=o._loadedInjector??d;(o.loadChildren&&!o._loadedRoutes&&void 0===o.canLoad||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(d,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(m,o.children??o._loadedRoutes))}return(0,zn.D)(s).pipe((0,ou.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let s;s=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):(0,ft.of)(null);const o=s.pipe((0,sr.z)(d=>null===d?(0,ft.of)(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,zn.D)([o,d]).pipe((0,ou.J)())}return o})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(co),l.LFG(l.Sil),l.LFG(l.lqb),l.LFG(Jb),l.LFG(Fx))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const Bx=new l.OlP("");let PT=(()=>{var i;class e{constructor(t,r,s,o,d={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=s,this.zone=o,this.options=d,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},d.scrollPositionRestoration=d.scrollPositionRestoration||"disabled",d.anchorScrolling=d.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof pu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof fc?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof _u&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $h&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new $h(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return(i=e).\u0275fac=function(t){l.$Z()},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();function gl(i,e){return{\u0275kind:i,\u0275providers:e}}function bu(){const i=(0,l.f3M)(l.zs3);return e=>{const n=i.get(l.z2F);if(e!==n.components[0])return;const t=i.get(co),r=i.get(FT);1===i.get(Vx)&&t.initialNavigation(),i.get(BT,null,l.XFs.Optional)?.setUpPreloading(),i.get(Bx,null,l.XFs.Optional)?.init(),t.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}const FT=new l.OlP("",{factory:()=>new Xe.x}),Vx=new l.OlP("",{providedIn:"root",factory:()=>1}),BT=new l.OlP("");function WN(i){return gl(0,[{provide:BT,useExisting:RT},{provide:Jb,useExisting:i}])}const Gn=new l.OlP("ROUTER_FORROOT_GUARD"),dg=[et,{provide:qe,useClass:at},co,yf,{provide:la,useFactory:function OT(i){return i.routerState.root},deps:[co]},Fx,[]];function VT(){return new l.PXZ("Router",co)}let Hx=(()=>{var i;class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[dg,[],{provide:Sf,multi:!0,useValue:t},{provide:Gn,useFactory:HT,deps:[[co,new l.FiY,new l.tp0]]},{provide:ag,useValue:r||{}},r?.useHash?{provide:Fe,useClass:Ve}:{provide:Fe,useClass:tt},{provide:Bx,useFactory:()=>{const i=(0,l.f3M)(eo),e=(0,l.f3M)(l.R0b),n=(0,l.f3M)(ag),t=(0,l.f3M)(hd),r=(0,l.f3M)(qe);return n.scrollOffset&&i.setOffset(n.scrollOffset),new PT(r,t,i,e,n)}},r?.preloadingStrategy?WN(r.preloadingStrategy).\u0275providers:[],{provide:l.PXZ,multi:!0,useFactory:VT},r?.initialNavigation?zT(r):[],r?.bindToComponentInputs?gl(8,[J_,{provide:If,useExisting:J_}]).\u0275providers:[],[{provide:ug,useFactory:bu},{provide:l.tb,multi:!0,useExisting:ug}]]}}static forChild(t){return{ngModule:e,providers:[{provide:Sf,multi:!0,useValue:t}]}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Gn,8))},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();function HT(i){return"guarded"}function zT(i){return["disabled"===i.initialNavigation?gl(3,[{provide:l.ip1,multi:!0,useFactory:()=>{const e=(0,l.f3M)(co);return()=>{e.setUpLocationChangeListener()}}},{provide:Vx,useValue:2}]).\u0275providers:[],"enabledBlocking"===i.initialNavigation?gl(2,[{provide:Vx,useValue:0},{provide:l.ip1,multi:!0,deps:[l.zs3],useFactory:e=>{const n=e.get(Oe,Promise.resolve());return()=>n.then(()=>new Promise(t=>{const r=e.get(co),s=e.get(FT);ST(r,()=>{t(!0)}),e.get(hd).afterPreactivation=()=>(t(!0),s.closed?(0,ft.of)(void 0):s),r.initialNavigation()}))}}]).\u0275providers:[]]}const ug=new l.OlP("");var gc,mg,ny,jx,qT,YT,ZT,iy,Gx,KT,$x,cy,ee=V(5861),R=V(9058),cn=V(4303),Cs=V(7879),hg=V(7582),cs=V(4537);const oF=function CS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},IS=new R.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),bg=new Cs.Yd("@firebase/auth");function vy(i,...e){bg.logLevel<=Cs.in.ERROR&&bg.error(`Auth (${cn.SDK_VERSION}): ${i}`,...e)}function lo(i,...e){throw oC(i,...e)}function vc(i,...e){return oC(i,...e)}function oC(i,...e){if("string"!=typeof i){const n=e[0],t=[...e.slice(1)];return t[0]&&(t[0].appName=i.name),i._errorFactory.create(n,...t)}return IS.create(i,...e)}function rt(i,e,...n){if(!i)throw oC(e,...n)}function uo(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vy(e),new Error(e)}function zs(i,e){i||uo(e)}function SS(){var i;return typeof self<"u"&&(null===(i=self.location)||void 0===i?void 0:i.protocol)||null}class pd{constructor(e,n){this.shortDelay=e,this.longDelay=n,zs(n>e,"Short delay should be less than long delay!"),this.isMobile=(0,R.uI)()||(0,R.b$)()}get(){return function AS(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(function aC(){return"http:"===SS()||"https:"===SS()}()||(0,R.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}class aF{static initialize(e,n,t){this.fetchImpl=e,n&&(this.headersImpl=n),t&&(this.responseImpl=t)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void uo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void uo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void uo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const lC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Lf=new pd(3e4,6e4);function _i(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}function Ui(i,e,n,t){return(gc=gc||(0,ee.Z)(function*(r,s,o,d,m={}){return dC(r,m,(0,ee.Z)(function*(){let f={},b={};d&&("GET"===s?b=d:f={body:JSON.stringify(d)});const w=(0,R.xO)(Object.assign({key:r.config.apiKey},b)).slice(1),I=yield r._getAdditionalHeaders();return I["Content-Type"]="application/json",r.languageCode&&(I["X-Firebase-Locale"]=r.languageCode),aF.fetch()(MS(r,r.config.apiHost,o,w),Object.assign({method:s,headers:I,referrerPolicy:"no-referrer"},f))}))})).apply(this,arguments)}function dC(i,e,n){return(mg=mg||(0,ee.Z)(function*(t,r,s){t._canInitEmulator=!1;const o=Object.assign(Object.assign({},lC),r);try{const d=new cF(t),m=yield Promise.race([s(),d.promise]);d.clearNetworkTimeout();const f=yield m.json();if("needConfirmation"in f)throw yg(t,"account-exists-with-different-credential",f);if(m.ok&&!("errorMessage"in f))return f;{const b=m.ok?f.errorMessage:f.error.message,[w,I]=b.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===w)throw yg(t,"credential-already-in-use",f);if("EMAIL_EXISTS"===w)throw yg(t,"email-already-in-use",f);if("USER_DISABLED"===w)throw yg(t,"user-disabled",f);const S=o[w]||w.toLowerCase().replace(/[_\s]+/g,"-");if(I)throw function TS(i,e,n){const t=Object.assign(Object.assign({},oF()),{[e]:n});return new R.LL("auth","Firebase",t).create(e,{appName:i.name})}(t,S,I);lo(t,S)}}catch(d){if(d instanceof R.ZR)throw d;lo(t,"network-request-failed",{message:String(d)})}})).apply(this,arguments)}function MS(i,e,n,t){const r=`${e}${n}?${t}`;return i.config.emulator?function by(i,e){zs(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}(i.config,r):`${i.config.apiScheme}://${r}`}class cF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,t)=>{this.timer=setTimeout(()=>t(vc(this.auth,"network-request-failed")),Lf.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function yg(i,e,n){const t={appName:i.name};n.email&&(t.email=n.email),n.phoneNumber&&(t.phoneNumber=n.phoneNumber);const r=vc(i,e,t);return r.customData._tokenResponse=n,r}function Bf(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Vf(i){return 1e3*Number(i)}function uC(i){const[e,n,t]=i.split(".");if(void 0===e||void 0===n||void 0===t)return vy("JWT malformed, contained fewer than 3 sections"),null;try{const r=(0,R.tV)(n);return r?JSON.parse(r):(vy("Failed to decode base64 JWT payload"),null)}catch(r){return vy("Caught error parsing JWT payload as JSON",r?.toString()),null}}function bl(i,e){return(ZT=ZT||(0,ee.Z)(function*(n,t,r=!1){if(r)return t;try{return yield t}catch(s){throw s instanceof R.ZR&&function hF({code:i}){return"auth/user-disabled"===i||"auth/user-token-expired"===i}(s)&&n.auth.currentUser===n&&(yield n.auth.signOut()),s}})).apply(this,arguments)}class OS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const r=(null!==(n=this.user.stsTokenManager.expirationTime)&&void 0!==n?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){var n=this;if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((0,ee.Z)(function*(){yield n.iteration()}),t)}iteration(){var e=this;return(0,ee.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(n){return void("auth/network-request-failed"===n?.code&&e.schedule(!0))}e.schedule()})()}}class hC{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bf(this.lastLoginAt),this.creationTime=Bf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Wt(i){return(iy=iy||(0,ee.Z)(function*(e){var n;const t=e.auth,r=yield e.getIdToken(),s=yield bl(e,function Hz(i,e){return(qT=qT||(0,ee.Z)(function*(n,t){return Ui(n,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}(t,{idToken:r}));rt(s?.users.length,t,"internal-error");const o=s.users[0];e._notifyReloadListener(o);const d=null!==(n=o.providerUserInfo)&&void 0!==n&&n.length?function Uf(i){return i.map(e=>{var{providerId:n}=e,t=(0,hg._T)(e,["providerId"]);return{providerId:n,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}})}(o.providerUserInfo):[],m=function FS(i,e){return[...i.filter(t=>!e.some(r=>r.providerId===t.providerId)),...e]}(e.providerData,d),w=!!e.isAnonymous&&!(e.email&&o.passwordHash||m?.length),I={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:m,metadata:new hC(o.createdAt,o.lastLoginAt),isAnonymous:w};Object.assign(e,I)})).apply(this,arguments)}class wg{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){rt(e.idToken,"internal-error"),rt(typeof e.idToken<"u","internal-error"),rt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):function PS(i){const e=uC(i);return rt(e,"internal-error"),rt(typeof e.exp<"u","internal-error"),rt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}getToken(e,n=!1){var t=this;return(0,ee.Z)(function*(){return rt(!t.accessToken||t.refreshToken,e,"user-token-expired"),n||!t.accessToken||t.isExpired?t.refreshToken?(yield t.refresh(e,t.refreshToken),t.accessToken):null:t.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,n){var t=this;return(0,ee.Z)(function*(){const{accessToken:r,refreshToken:s,expiresIn:o}=yield function LS(i,e){return(KT=KT||(0,ee.Z)(function*(n,t){const r=yield dC(n,{},(0,ee.Z)(function*(){const s=(0,R.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:o,apiKey:d}=n.config,m=MS(n,o,"/v1/token",`key=${d}`),f=yield n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",aF.fetch()(m,{method:"POST",headers:f,body:s})}));return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}})).apply(this,arguments)}(e,n);t.updateTokensAndExpiration(r,s,Number(o))})()}updateTokensAndExpiration(e,n,t){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*t}static fromJSON(e,n){const{refreshToken:t,accessToken:r,expirationTime:s}=n,o=new wg;return t&&(rt("string"==typeof t,"internal-error",{appName:e}),o.refreshToken=t),r&&(rt("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),s&&(rt("number"==typeof s,"internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wg,this.toJSON())}_performRefresh(){return uo("not implemented")}}function bc(i,e){rt("string"==typeof i||typeof i>"u","internal-error",{appName:e})}class Va{constructor(e){var{uid:n,auth:t,stsTokenManager:r}=e,s=(0,hg._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hC(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){var n=this;return(0,ee.Z)(function*(){const t=yield bl(n,n.stsTokenManager.getToken(n.auth,e));return rt(t,n.auth,"internal-error"),n.accessToken!==t&&(n.accessToken=t,yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)),t})()}getIdTokenResult(e){return function zz(i){return(YT=YT||(0,ee.Z)(function*(e,n=!1){const t=(0,R.m9)(e),r=yield t.getIdToken(n),s=uC(r);rt(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,d=o?.sign_in_provider;return{claims:s,token:r,authTime:Bf(Vf(s.auth_time)),issuedAtTime:Bf(Vf(s.iat)),expirationTime:Bf(Vf(s.exp)),signInProvider:d||null,signInSecondFactor:o?.sign_in_second_factor||null}})).apply(this,arguments)}(this,e)}reload(){return function NS(i){return(Gx=Gx||(0,ee.Z)(function*(e){const n=(0,R.m9)(e);yield Wt(n),yield n.auth._persistUserIfCurrent(n),n.auth._notifyListenersIfCurrent(n)})).apply(this,arguments)}(this)}_assign(e){this!==e&&(rt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Va(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){var t=this;return(0,ee.Z)(function*(){let r=!1;e.idToken&&e.idToken!==t.stsTokenManager.accessToken&&(t.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield Wt(t)),yield t.auth._persistUserIfCurrent(t),r&&t.auth._notifyListenersIfCurrent(t)})()}delete(){var e=this;return(0,ee.Z)(function*(){const n=yield e.getIdToken();return yield bl(e,function dF(i,e){return(jx=jx||(0,ee.Z)(function*(n,t){return Ui(n,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}(e.auth,{idToken:n})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var t,r,s,o,d,m,f,b;const w=null!==(t=n.displayName)&&void 0!==t?t:void 0,I=null!==(r=n.email)&&void 0!==r?r:void 0,S=null!==(s=n.phoneNumber)&&void 0!==s?s:void 0,F=null!==(o=n.photoURL)&&void 0!==o?o:void 0,z=null!==(d=n.tenantId)&&void 0!==d?d:void 0,q=null!==(m=n._redirectEventId)&&void 0!==m?m:void 0,we=null!==(f=n.createdAt)&&void 0!==f?f:void 0,Ae=null!==(b=n.lastLoginAt)&&void 0!==b?b:void 0,{uid:De,emailVerified:Pe,isAnonymous:gt,providerData:Nt,stsTokenManager:un}=n;rt(De&&un,e,"internal-error");const di=wg.fromJSON(this.name,un);rt("string"==typeof De,e,"internal-error"),bc(w,e.name),bc(I,e.name),rt("boolean"==typeof Pe,e,"internal-error"),rt("boolean"==typeof gt,e,"internal-error"),bc(S,e.name),bc(F,e.name),bc(z,e.name),bc(q,e.name),bc(we,e.name),bc(Ae,e.name);const ki=new Va({uid:De,auth:e,email:I,emailVerified:Pe,displayName:w,isAnonymous:gt,photoURL:F,phoneNumber:S,tenantId:z,stsTokenManager:di,createdAt:we,lastLoginAt:Ae});return Nt&&Array.isArray(Nt)&&(ki.providerData=Nt.map(Bc=>Object.assign({},Bc))),q&&(ki._redirectEventId=q),ki}static _fromIdTokenResponse(e,n,t=!1){return(0,ee.Z)(function*(){const r=new wg;r.updateFromServerResponse(n);const s=new Va({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:t});return yield Wt(s),s})()}}const yy=new Map;function da(i){zs(i instanceof Function,"Expected a class definition");let e=yy.get(i);return e?(zs(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,yy.set(i,e),e)}const wy=(()=>{class i{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,ee.Z)(function*(){return!0})()}_set(n,t){var r=this;return(0,ee.Z)(function*(){r.storage[n]=t})()}_get(n){var t=this;return(0,ee.Z)(function*(){const r=t.storage[n];return void 0===r?null:r})()}_remove(n){var t=this;return(0,ee.Z)(function*(){delete t.storage[n]})()}_addListener(n,t){}_removeListener(n,t){}}return i.type="NONE",i})();function Hf(i,e,n){return`firebase:${i}:${e}:${n}`}class yu{constructor(e,n,t){this.persistence=e,this.auth=n,this.userKey=t;const{config:r,name:s}=this.auth;this.fullUserKey=Hf(this.userKey,r.apiKey,s),this.fullPersistenceKey=Hf("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,ee.Z)(function*(){const n=yield e.persistence._get(e.fullUserKey);return n?Va._fromJSON(e.auth,n):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var n=this;return(0,ee.Z)(function*(){if(n.persistence===e)return;const t=yield n.getCurrentUser();return yield n.removeCurrentUser(),n.persistence=e,t?n.setCurrentUser(t):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,t="authUser"){return(0,ee.Z)(function*(){var r,s;if(!n.length)return new yu(da(wy),e,t);const o=(yield Promise.all(n.map(function(w){return(r=r||(0,ee.Z)(function*(I){if(yield I._isAvailable())return I})).apply(this,arguments)}))).filter(w=>w);let d=o[0]||da(wy);const m=Hf(t,e.config.apiKey,e.name);let f=null;for(const w of n)try{const I=yield w._get(m);if(I){const S=Va._fromJSON(e,I);w!==d&&(f=S),d=w;break}}catch{}const b=o.filter(w=>w._shouldAllowMigration);return d._shouldAllowMigration&&b.length?(d=b[0],f&&(yield d._set(m,f.toJSON())),yield Promise.all(n.map(function(w){return(s=s||(0,ee.Z)(function*(I){if(I!==d)try{yield I._remove(m)}catch{}})).apply(this,arguments)})),new yu(d,e,t)):new yu(d,e,t)})()}}function mC(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(function VS(i=(0,R.z$)()){return/iemobile/i.test(i)}(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(function xy(i=(0,R.z$)()){return/firefox\//i.test(i)}(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(function US(i=(0,R.z$)()){return/blackberry/i.test(i)}(e))return"Blackberry";if(function HS(i=(0,R.z$)()){return/webos/i.test(i)}(e))return"Webos";if(function fC(i=(0,R.z$)()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}(e))return"Safari";if((e.includes("chrome/")||function BS(i=(0,R.z$)()){return/crios\//i.test(i)}(e))&&!e.includes("edge/"))return"Chrome";if(function pC(i=(0,R.z$)()){return/android/i.test(i)}(e))return"Android";{const t=i.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===t?.length)return t[1]}return"Other"}function Lo(i,e=[]){let n;switch(i){case"Browser":n=mC((0,R.z$)());break;case"Worker":n=`${mC((0,R.z$)())}-${i}`;break;default:n=i}const t=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${cn.SDK_VERSION}/${t}`}class _F{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const t=s=>new Promise((o,d)=>{try{o(e(s))}catch(m){d(m)}});t.onAbort=n,this.queue.push(t);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){var n=this;return(0,ee.Z)(function*(){if(n.auth.currentUser===e)return;const t=[];try{for(const r of n.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw n.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})()}}class _C{constructor(e){var n,t,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(t=e.allowedNonAlphanumericCharacters)||void 0===t?void 0:t.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,t,r,s,o,d;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=null===(n=m.meetsMinPasswordLength)||void 0===n||n),m.isValid&&(m.isValid=null===(t=m.meetsMaxPasswordLength)||void 0===t||t),m.isValid&&(m.isValid=null===(r=m.containsLowercaseLetter)||void 0===r||r),m.isValid&&(m.isValid=null===(s=m.containsUppercaseLetter)||void 0===s||s),m.isValid&&(m.isValid=null===(o=m.containsNumericCharacter)||void 0===o||o),m.isValid&&(m.isValid=null===(d=m.containsNonAlphanumericCharacter)||void 0===d||d),m}validatePasswordLengthOptions(e,n){const t=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;t&&(n.meetsMinPasswordLength=e.length>=t),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){let t;this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);for(let r=0;r<e.length;r++)t=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,t>="a"&&t<="z",t>="A"&&t<="Z",t>="0"&&t<="9",this.allowedNonAlphanumericCharacters.includes(t))}updatePasswordCharacterOptionsStatuses(e,n,t,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=t)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class jS{constructor(e,n,t,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=t,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GS(this),this.idTokenSubscription=new GS(this),this.beforeStateQueue=new _F(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=IS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){var t=this;return n&&(this._popupRedirectResolver=da(n)),this._initializationPromise=this.queue((0,ee.Z)(function*(){var r,s;if(!t._deleted&&(t.persistenceManager=yield yu.create(t,e),!t._deleted)){if(null!==(r=t._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{yield t._popupRedirectResolver._initialize(t)}catch{}yield t.initializeCurrentUser(n),t.lastNotifiedUid=(null===(s=t.currentUser)||void 0===s?void 0:s.uid)||null,!t._deleted&&(t._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,ee.Z)(function*(){if(e._deleted)return;const n=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||n){if(e.currentUser&&n&&e.currentUser.uid===n.uid)return e._currentUser._assign(n),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(n,!0)}})()}initializeCurrentUser(e){var n=this;return(0,ee.Z)(function*(){var t;const r=yield n.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&n.config.authDomain){yield n.getOrInitRedirectPersistenceManager();const d=null===(t=n.redirectUser)||void 0===t?void 0:t._redirectEventId,m=s?._redirectEventId,f=yield n.tryRedirectSignIn(e);(!d||d===m)&&f?.user&&(s=f.user,o=!0)}if(!s)return n.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{yield n.beforeStateQueue.runMiddleware(s)}catch(d){s=r,n._popupRedirectResolver._overrideRedirectResult(n,()=>Promise.reject(d))}return s?n.reloadAndSetCurrentUserOrClear(s):n.directlySetCurrentUser(null)}return rt(n._popupRedirectResolver,n,"argument-error"),yield n.getOrInitRedirectPersistenceManager(),n.redirectUser&&n.redirectUser._redirectEventId===s._redirectEventId?n.directlySetCurrentUser(s):n.reloadAndSetCurrentUserOrClear(s)})()}tryRedirectSignIn(e){var n=this;return(0,ee.Z)(function*(){let t=null;try{t=yield n._popupRedirectResolver._completeRedirectFn(n,e,!0)}catch{yield n._setRedirectUser(null)}return t})()}reloadAndSetCurrentUserOrClear(e){var n=this;return(0,ee.Z)(function*(){try{yield Wt(e)}catch(t){if("auth/network-request-failed"!==t?.code)return n.directlySetCurrentUser(null)}return n.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function cC(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}()}_delete(){var e=this;return(0,ee.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var n=this;return(0,ee.Z)(function*(){const t=e?(0,R.m9)(e):null;return t&&rt(t.auth.config.apiKey===n.config.apiKey,n,"invalid-user-token"),n._updateCurrentUser(t&&t._clone(n))})()}_updateCurrentUser(e,n=!1){var t=this;return(0,ee.Z)(function*(){if(!t._deleted)return e&&rt(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),n||(yield t.beforeStateQueue.runMiddleware(e)),t.queue((0,ee.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,ee.Z)(function*(){return yield e.beforeStateQueue.runMiddleware(null),(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null,!0)})()}setPersistence(e){var n=this;return this.queue((0,ee.Z)(function*(){yield n.assertedPersistence.setPersistence(da(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){var n=this;return(0,ee.Z)(function*(){n._getPasswordPolicyInternal()||(yield n._updatePasswordPolicy());const t=n._getPasswordPolicyInternal();return t.schemaVersion!==n.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(n._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var e=this;return(0,ee.Z)(function*(){const n=yield function gF(i){return($x=$x||(0,ee.Z)(function*(e,n={}){return Ui(e,"GET","/v2/passwordPolicy",_i(e,n))})).apply(this,arguments)}(e),t=new _C(n);null===e.tenantId?e._projectPasswordPolicy=t:e._tenantPasswordPolicies[e.tenantId]=t})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new R.LL("auth","Firebase",e())}onAuthStateChanged(e,n,t){return this.registerStateListener(this.authStateSubscription,e,n,t)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,t){return this.registerStateListener(this.idTokenSubscription,e,n,t)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const t=this.onAuthStateChanged(()=>{t(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,n){var t=this;return(0,ee.Z)(function*(){const r=yield t.getOrInitRedirectPersistenceManager(n);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var n=this;return(0,ee.Z)(function*(){if(!n.redirectPersistenceManager){const t=e&&da(e)||n._popupRedirectResolver;rt(t,n,"argument-error"),n.redirectPersistenceManager=yield yu.create(n,[da(t._redirectPersistence)],"redirectUser"),n.redirectUser=yield n.redirectPersistenceManager.getCurrentUser()}return n.redirectPersistenceManager})()}_redirectUserForId(e){var n=this;return(0,ee.Z)(function*(){var t,r;return n._isInitialized&&(yield n.queue((0,ee.Z)(function*(){}))),(null===(t=n._currentUser)||void 0===t?void 0:t._redirectEventId)===e?n._currentUser:(null===(r=n.redirectUser)||void 0===r?void 0:r._redirectEventId)===e?n.redirectUser:null})()}_persistUserIfCurrent(e){var n=this;return(0,ee.Z)(function*(){if(e===n.currentUser)return n.queue((0,ee.Z)(function*(){return n.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const t=null!==(n=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==n?n:null;this.lastNotifiedUid!==t&&(this.lastNotifiedUid=t,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,t,r){if(this._deleted)return()=>{};const s="function"==typeof n?n:n.next.bind(n);let o=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(rt(d,this,"internal-error"),d.then(()=>{o||s(this.currentUser)}),"function"==typeof n){const m=e.addObserver(n,t,r);return()=>{o=!0,m()}}{const m=e.addObserver(n);return()=>{o=!0,m()}}}directlySetCurrentUser(e){var n=this;return(0,ee.Z)(function*(){n.currentUser&&n.currentUser!==e&&n._currentUser._stopProactiveRefresh(),e&&n.isProactiveRefreshEnabled&&e._startProactiveRefresh(),n.currentUser=e,e?yield n.assertedPersistence.setCurrentUser(e):yield n.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,ee.Z)(function*(){var n;const t={"X-Client-Version":e.clientVersion};e.app.options.appId&&(t["X-Firebase-gmpid"]=e.app.options.appId);const r=yield null===(n=e.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);const s=yield e._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t})()}_getAppCheckToken(){var e=this;return(0,ee.Z)(function*(){var n;const t=yield null===(n=e.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===n?void 0:n.getToken();return t?.error&&function kS(i,...e){bg.logLevel<=Cs.in.WARN&&bg.warn(`Auth (${cn.SDK_VERSION}): ${i}`,...e)}(`Error while retrieving App Check token: ${t.error}`),t?.token})()}}class GS{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,R.ne)(n=>this.observer=n)}get next(){return rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}class QS{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return uo("not implemented")}_getIdTokenResponse(e){return uo("not implemented")}_linkToIdToken(e,n){return uo("not implemented")}_getReauthenticationResolver(e){return uo("not implemented")}}function vd(i,e){return(cy=cy||(0,ee.Z)(function*(n,t){return function _d(i,e,n,t){return(ny=ny||(0,ee.Z)(function*(r,s,o,d,m={}){const f=yield Ui(r,s,o,d,m);return"mfaPendingCredential"in f&&lo(r,"multi-factor-auth-required",{_serverResponse:f}),f})).apply(this,arguments)}(n,"POST","/v1/accounts:signInWithIdp",_i(n,t))})).apply(this,arguments)}class zf extends QS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zf(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):lo("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n="string"==typeof e?JSON.parse(e):e,{providerId:t,signInMethod:r}=n,s=(0,hg._T)(n,["providerId","signInMethod"]);if(!t||!r)return null;const o=new zf(t,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return vd(e,this.buildRequest())}_linkToIdToken(e,n){const t=this.buildRequest();return t.idToken=n,vd(e,t)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,vd(e,n)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=(0,R.xO)(n)}return e}}class bd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class jf extends bd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}let iA=(()=>{class i extends jf{constructor(){super("google.com"),this.addScope("profile")}static credential(n,t){return zf._fromParams({providerId:i.PROVIDER_ID,signInMethod:i.GOOGLE_SIGN_IN_METHOD,idToken:n,accessToken:t})}static credentialFromResult(n){return i.credentialFromTaggedObject(n)}static credentialFromError(n){return i.credentialFromTaggedObject(n.customData||{})}static credentialFromTaggedObject({_tokenResponse:n}){if(!n)return null;const{oauthIdToken:t,oauthAccessToken:r}=n;if(!t&&!r)return null;try{return i.credential(t,r)}catch{return null}}}return i.GOOGLE_SIGN_IN_METHOD="google.com",i.PROVIDER_ID="google.com",i})();(function $S(i){return`__${i}${Math.floor(1e6*Math.random())}`})("rcb"),new pd(3e4,6e4),new pd(2e3,1e4),new pd(3e4,6e4),new pd(5e3,15e3),encodeURIComponent("fac");var WA="@firebase/auth";class xL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var n=this;return(0,ee.Z)(function*(){return n.assertAuthConfigured(),yield n.auth._initializationPromise,n.auth.currentUser?{accessToken:yield n.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(t=>{e(t?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,R.Pz)("authIdTokenMaxAge"),function EL(i){(0,cn._registerComponent)(new cs.wA("auth",(e,{options:n})=>{const t=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:d}=t.options;rt(o&&!o.includes(":"),"invalid-api-key",{appName:t.name});const m={apiKey:o,authDomain:d,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lo(i)},f=new jS(t,r,s,m);return function yl(i,e){const n=e?.persistence||[],t=(Array.isArray(n)?n:[n]).map(da);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(t,e?.popupRedirectResolver)}(f,n),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,t)=>{e.getProvider("auth-internal").initialize()})),(0,cn._registerComponent)(new cs.wA("auth-internal",e=>{const n=function Rr(i){return(0,R.m9)(i)}(e.getProvider("auth").getImmediate());return new xL(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,cn.registerVersion)(WA,"1.3.0",function CL(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(i)),(0,cn.registerVersion)(WA,"1.3.0","esm2017")}("Browser");const JC_firebase={apiKey:"AIzaSyBclBALKdMzg6fMWarkPCU-sfadpXAqqgo",authDomain:"angular-chat-69f2f.firebaseapp.com",databaseURL:"https://angular-chat-69f2f-default-rtdb.firebaseio.com",projectId:"angular-chat-69f2f",storageBucket:"angular-chat-69f2f.appspot.com",messagingSenderId:"496065011838",appId:"1:496065011838:web:f309e0291b847e3564b82f",measurementId:"G-WME5CWM7XZ"};(0,cn.registerVersion)("firebase","10.3.1","app");const ZA="@firebase/database";let eE="";class AL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Wl)(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:(0,R.cI)(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class XA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tE=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new AL(e)}}catch{}return new XA},Eu=tE("localStorage"),Ky=tE("sessionStorage"),lm=new Cs.Yd("@firebase/database"),nE=function(){let i=1;return function(){return i++}}(),iE=function(i){const e=(0,R.dS)(i),n=new R.gQ;n.update(e);const t=n.digest();return R.US.encodeByteArray(t)},Qf=function(...i){let e="";for(let n=0;n<i.length;n++){const t=i[n];Array.isArray(t)||t&&"object"==typeof t&&"number"==typeof t.length?e+=Qf.apply(null,t):e+="object"==typeof t?(0,R.Wl)(t):t,e+=" "}return e};let Iu=null,Qy=!0;const Hi=function(...i){if(!0===Qy&&(Qy=!1,null===Iu&&!0===Ky.get("logging_enabled")&&function(i,e){(0,R.hu)(!e||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(lm.logLevel=Cs.in.VERBOSE,Iu=lm.log.bind(lm),e&&Ky.set("logging_enabled",!0)):"function"==typeof i?Iu=i:(Iu=null,Ky.remove("logging_enabled"))}(!0)),Iu){const e=Qf.apply(null,i);Iu(e)}},zg=function(i){return function(...e){Hi(i,...e)}},sE=function(...i){const e="FIREBASE INTERNAL ERROR: "+Qf(...i);lm.error(e)},mo=function(...i){const e=`FIREBASE FATAL ERROR: ${Qf(...i)}`;throw lm.error(e),new Error(e)},fo=function(...i){const e="FIREBASE WARNING: "+Qf(...i);lm.warn(e)},aE=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},Cd="[MIN_NAME]",Du="[MAX_NAME]",Ha=function(i,e){if(i===e)return 0;if(i===Cd||e===Du)return-1;if(e===Cd||i===Du)return 1;{const n=lE(i),t=lE(e);return null!==n?null!==t?n-t==0?i.length-e.length:n-t:-1:null!==t?1:i<e?-1:1}},ML=function(i,e){return i===e?0:i<e?-1:1},jg=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+(0,R.Wl)(e))},cE=function(i){if("object"!=typeof i||null===i)return(0,R.Wl)(i);const e=[];for(const t in i)e.push(t);e.sort();let n="{";for(let t=0;t<e.length;t++)0!==t&&(n+=","),n+=(0,R.Wl)(e[t]),n+=":",n+=cE(i[e[t]]);return n+="}",n},dm=function(i,e){const n=i.length;if(n<=e)return[i];const t=[];for(let r=0;r<n;r+=e)t.push(i.substring(r,r+e>n?n:r+e));return t};function ds(i,e){for(const n in i)i.hasOwnProperty(n)&&e(n,i[n])}const Gg=function(i){(0,R.hu)(!aE(i),"Invalid JSON number");const t=1023;let r,s,o,d,m;0===i?(s=0,o=0,r=1/i==-1/0?1:0):(r=i<0,(i=Math.abs(i))>=Math.pow(2,1-t)?(d=Math.min(Math.floor(Math.log(i)/Math.LN2),t),s=d+t,o=Math.round(i*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,o=Math.round(i/Math.pow(2,-1074))));const f=[];for(m=52;m;m-=1)f.push(o%2?1:0),o=Math.floor(o/2);for(m=11;m;m-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(r?1:0),f.reverse();const b=f.join("");let w="";for(m=0;m<64;m+=8){let I=parseInt(b.substr(m,8),2).toString(16);1===I.length&&(I="0"+I),w+=I}return w.toLowerCase()},eM=new RegExp("^-?(0*)\\d{1,10}$"),lE=function(i){if(eM.test(i)){const e=Number(i);if(e>=-2147483648&&e<=2147483647)return e}return null},um=function(i){try{i()}catch(e){setTimeout(()=>{throw fo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Xf=function(i,e){const n=setTimeout(i,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class PL{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(t=>this.appCheck=t)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,t)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,t):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){fo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class OL{constructor(e,n,t){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Hi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,t)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,t):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',fo(e)}}let $g=(()=>{class i{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const dE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Jf="websocket",ep="long_polling";class fE{constructor(e,n,t,r,s=!1,o="",d=!1,m=!1){this.secure=n,this.namespace=t,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Eu.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Eu.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function oM(i,e,n){let t;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof n,"typeof params must == object"),e===Jf)t=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(e!==ep)throw new Error("Unknown connection type: "+e);t=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function NL(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(n.ns=i.namespace);const r=[];return ds(n,(s,o)=>{r.push(s+"="+o)}),t+r.join("&")}class aM{constructor(){this.counters_={}}incrementCounter(e,n=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return(0,R.p$)(this.counters_)}}const Jy={},e0={};function pE(i){const e=i.toString();return Jy[e]||(Jy[e]=new aM),Jy[e]}class FL{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<t.length;++r)t[r]&&um(()=>{this.onMessage_(t[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Ed{constructor(e,n,t,r,s,o,d){this.connId=e,this.repoInfo=n,this.applicationId=t,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=zg(e),this.stats_=pE(n),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),oM(n,ep,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new FL(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,R.Yr)()||"complete"===document.readyState)i();else{let e=!1;const n=function(){document.body?e||(e=!0,i()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gE((...s)=>{const[o,d,m,f,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=d,this.password=m;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,d)},()=>{this.onClosed_()},this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&dE.test(location.hostname)&&(t.r="f");const r=this.urlFn(t);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ed.forceAllow_=!0}static forceDisallow(){Ed.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!Ed.forceAllow_&&(Ed.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=(0,R.Wl)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const t=(0,R.h$)(n),r=dm(t,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const t={dframe:"t"};t.id=e,t.pw=n,this.myDisconnFrame.src=this.urlFn(t),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=(0,R.Wl)(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class gE{constructor(e,n,t,r){if(this.onDisconnect=t,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=nE(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=gE.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(d){Hi("frame writing exception"),d.stack&&Hi(d.stack),Hi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Hi("No IE domain setting required")}catch{const t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),t="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+t.length<=1870;){const o=this.pendingSegs.shift();t=t+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return n+=t,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,t){this.pendingSegs.push({seg:e,ts:n,d:t}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const t=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(t,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),t()})}addTag(e,n){(0,R.Yr)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const t=this.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){const r=t.readyState;(!r||"loaded"===r||"complete"===r)&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),n())},t.onerror=()=>{Hi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(t)}catch{}},Math.floor(1))}}let t0=null;typeof MozWebSocket<"u"?t0=MozWebSocket:typeof WebSocket<"u"&&(t0=WebSocket);let hm=(()=>{class i{constructor(n,t,r,s,o,d,m){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=zg(this.connId),this.stats_=pE(t),this.connURL=i.connectionURL_(t,d,m,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(n,t,r,s,o){const d={v:"5"};return!(0,R.Yr)()&&typeof location<"u"&&location.hostname&&dE.test(location.hostname)&&(d.r="f"),t&&(d.s=t),r&&(d.ls=r),s&&(d.ac=s),o&&(d.p=o),oM(n,Jf,d)}open(n,t){this.onDisconnect=t,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Eu.set("previous_websocket_failure",!0);try{let r;if((0,R.Yr)()){r={headers:{"User-Agent":`Firebase/5/${eE}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,d=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new t0(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&null!==t0&&!i.forceDisallow_}static previouslyFailed(){return Eu.isInMemoryStorage||!0===Eu.get("previous_websocket_failure")}markConnectionHealthy(){Eu.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=(0,R.cI)(t);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),n.length<=6){const t=Number(n);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const t=n.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);null!==r&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();const t=(0,R.Wl)(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=dm(t,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),mM=(()=>{class i{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[Ed,hm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const t=hm&&hm.isAvailable();let r=t&&!hm.previouslyFailed();if(n.webSocketOnly&&(t||fo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[hm];else{const s=this.transports_=[];for(const o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class xM{constructor(e,n,t,r,s,o,d,m,f,b){this.id=e,this.repoInfo_=n,this.applicationId_=t,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=d,this.onDisconnect_=m,this.onKill_=f,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=zg("c:"+this.id+":"),this.transportManager_=new mM(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),t=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,t)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Xf(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=jg("t",e),t=jg("d",e);if("c"===n)this.onSecondaryControl_(t);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(t)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=jg("t",e),t=jg("d",e);"c"===n?this.onControl_(t):"d"===n&&this.onDataMessage_(t)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=jg("t",e);if("d"in e){const t=e.d;if("h"===n){const r=Object.assign({},t);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(t):"r"===n?this.onReset_(t):"e"===n?sE("Server Error: "+t):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):sE("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,t=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==t&&fo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Xf(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Xf(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Eu.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class CM{put(e,n,t,r){}merge(e,n,t,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,t){}onDisconnectMerge(e,n,t){}onDisconnectCancel(e,n){}reportStats(e){}}class EM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const t=[...this.listeners_[e]];for(let r=0;r<t.length;r++)t[r].callback.apply(t[r].context,n)}}on(e,n,t){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:t});const r=this.getInitialEvent(e);r&&n.apply(t,r)}off(e,n,t){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!t||t===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class r0 extends EM{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new r0}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ei{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let t=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[t]=this.pieces_[r],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function $n(){return new ei("")}function mn(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Id(i){return i.pieces_.length-i.pieceNum_}function gi(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new ei(i.pieces_,e)}function bE(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Qg(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function TM(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)e.push(i.pieces_[n]);return new ei(e,0)}function zi(i,e){const n=[];for(let t=i.pieceNum_;t<i.pieces_.length;t++)n.push(i.pieces_[t]);if(e instanceof ei)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{const t=e.split("/");for(let r=0;r<t.length;r++)t[r].length>0&&n.push(t[r])}return new ei(n,0)}function bn(i){return i.pieceNum_>=i.pieces_.length}function Is(i,e){const n=mn(i),t=mn(e);if(null===n)return e;if(n===t)return Is(gi(i),gi(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function s0(i,e){if(Id(i)!==Id(e))return!1;for(let n=i.pieceNum_,t=e.pieceNum_;n<=i.pieces_.length;n++,t++)if(i.pieces_[n]!==e.pieces_[t])return!1;return!0}function Uo(i,e){let n=i.pieceNum_,t=e.pieceNum_;if(Id(i)>Id(e))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==e.pieces_[t])return!1;++n,++t}return!0}class qL{constructor(e,n){this.errorPrefix_=n,this.parts_=Qg(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=(0,R.ug)(this.parts_[t]);SM(this)}}function SM(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tu(i))}function Tu(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class Dd extends EM{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new Dd}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const tp=1e3;let np,Su=(()=>{class i extends CM{constructor(n,t,r,s,o,d,m,f){if(super(),this.repoInfo_=n,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=f,this.id=i.nextPersistentConnectionId_++,this.log_=zg("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=tp,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Dd.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&r0.getInstance().on("online",this.onOnline_,this)}sendRequest(n,t,r){const s=++this.requestNumber_,o={r:s,a:n,b:t};this.log_((0,R.Wl)(o)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();const t=new R.BH,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:d=>{const m=d.d;"ok"===d.s?t.resolve(m):t.reject(m)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),t.promise}listen(n,t,r,s){this.initConnection_();const o=n._queryIdentifier,d=n._path.toString();this.log_("Listen called for "+d+" "+o),this.listens.has(d)||this.listens.set(d,new Map),(0,R.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(d).has(o),"listen() called twice for same path/queryId.");const m={onComplete:s,hashFn:t,query:n,tag:r};this.listens.get(d).set(o,m),this.connected_&&this.sendListen_(m)}sendGet_(n){const t=this.outstandingGets_[n];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(n){const t=n.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};n.tag&&(o.q=t._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,m=>{const f=m.d,b=m.s;i.warnOnListenWarnings_(f,t),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(r,s),n.onComplete&&n.onComplete(b,f))})}static warnOnListenWarnings_(n,t){if(n&&"object"==typeof n&&(0,R.r3)(n,"w")){const r=(0,R.DV)(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();fo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,R.GJ)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,t=(0,R.w9)(n)?"auth":"gauth",r={cred:n};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,d=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const t=n.s,r=n.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(n,t){const r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,R.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,t)}sendUnlisten_(n,t,r,s){this.log_("Unlisten on "+n+" for "+t);const o={p:n};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,t,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:t,onComplete:r})}onDisconnectMerge(n,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,t,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:t,onComplete:r})}onDisconnectCancel(n,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,t):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(n,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(n,t,r,s){this.putInternal("p",n,t,r,s)}merge(n,t,r,s){this.putInternal("m",n,t,r,s)}putInternal(n,t,r,s,o){this.initConnection_();const d={p:t,d:r};void 0!==o&&(d.h=o),this.outstandingPuts_.push({action:n,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(n){const t=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const t={c:n};this.log_("reportStats",t),this.sendRequest("s",t,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,R.Wl)(n));const t=n.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,t){this.log_("handleServerMessage",n,t),"d"===n?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===n?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===n?this.onListenRevoked_(t.p,t.q):"ac"===n?this.onAuthRevoked_(t.s,t.d):"apc"===n?this.onAppCheckRevoked_(t.s,t.d):"sd"===n?this.onSecurityDebugPacket_(t):sE("Unrecognized action received from server: "+(0,R.Wl)(n)+"\nAre you using the latest client?")}onReady_(n,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=tp,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=tp,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=tp),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-n);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,ee.Z)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const t=n.onDataMessage_.bind(n),r=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+i.nextConnectionId_++,d=n.lastSessionId;let m=!1,f=null;const b=function(){f?f.close():(m=!0,s())};n.realtime_={close:b,sendRequest:function(S){(0,R.hu)(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(S)}};const I=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[S,F]=yield Promise.all([n.authTokenProvider_.getToken(I),n.appCheckTokenProvider_.getToken(I)]);m?Hi("getToken() completed but was canceled"):(Hi("getToken() completed. Creating connection."),n.authToken_=S&&S.accessToken,n.appCheckToken_=F&&F.token,f=new xM(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,t,r,s,z=>{fo(z+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},d))}catch(S){n.log_("Failed to get token: "+S),m||(n.repoInfo_.nodeAdmin&&fo(S),b())}}})()}interrupt(n){Hi("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Hi("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=tp,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const t=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const t=this.outstandingPuts_[n];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,t){let r;r=t?t.map(o=>cE(o)).join("$"):"default";const s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,t){const r=new ei(n).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,t){Hi("Auth token revoked: "+n+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,t){Hi("App check token revoked: "+n+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const t of n.values())this.sendListen_(t);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let t="js";(0,R.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+t+"."+eE.replace(/\./g,"-")]=1,(0,R.uI)()?n["framework.cordova"]=1:(0,R.b$)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=r0.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&n}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Cn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Cn(e,n)}}class Xg{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const t=new Cn(Cd,e),r=new Cn(Cd,n);return 0!==this.compare(t,r)}minPost(){return Cn.MIN}}class IE extends Xg{static get __EMPTY_NODE(){return np}static set __EMPTY_NODE(e){np=e}compare(e,n){return Ha(e.name,n.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Cn.MIN}maxPost(){return new Cn(Du,np)}makePost(e,n){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Cn(e,np)}toString(){return".key"}}const Cc=new IE;class Jg{constructor(e,n,t,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?t(e.key,n):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let o0,za=(()=>{class i{constructor(n,t,r,s,o){this.key=n,this.value=t,this.color=r??i.RED,this.left=s??Ho.EMPTY_NODE,this.right=o??Ho.EMPTY_NODE}copy(n,t,r,s,o){return new i(n??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,t,r){let s=this;const o=r(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,t,r),null):0===o?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(n,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ho.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,t){let r,s;if(r=this,t(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===t(n,r.key)){if(r.right.isEmpty())return Ho.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,t)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Ho{constructor(e,n=Ho.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ho(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,za.BLACK,null,null))}remove(e){return new Ho(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,za.BLACK,null,null))}get(e){let n,t=this.root_;for(;!t.isEmpty();){if(n=this.comparator_(e,t.key),0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}getPredecessorKey(e){let n,t=this.root_,r=null;for(;!t.isEmpty();){if(n=this.comparator_(e,t.key),0===n){if(t.left.isEmpty())return r?r.key:null;for(t=t.left;!t.right.isEmpty();)t=t.right;return t.key}n<0?t=t.left:n>0&&(r=t,t=t.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Jg(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Jg(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Jg(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Jg(this.root_,null,this.comparator_,!0,e)}}function JL(i,e){return Ha(i.name,e.name)}function DE(i,e){return Ha(i,e)}Ho.EMPTY_NODE=new class XL{copy(e,n,t,r,s){return this}insert(e,n,t){return new za(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const kE=function(i){return"number"==typeof i?"number:"+Gg(i):"string:"+i},AM=function(i){if(i.isLeafNode()){const e=i.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(i===o0||i.isEmpty(),"priority of unexpected type.");(0,R.hu)(i===o0||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let MM,RM,PM,ev=(()=>{class i{constructor(n,t=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=t,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AM(this.priorityNode_)}static set __childrenNodeConstructor(n){MM=n}static get __childrenNodeConstructor(){return MM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new i(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return bn(n)?this:".priority"===mn(n)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,t){return null}updateImmediateChild(n,t){return".priority"===n?this.updatePriority(t):t.isEmpty()&&".priority"!==n?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,t).updatePriority(this.priorityNode_)}updateChild(n,t){const r=mn(n);return null===r?t:t.isEmpty()&&".priority"!==r?this:((0,R.hu)(".priority"!==r||1===Id(n),".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(gi(n),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,t){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+kE(this.priorityNode_.val())+":");const t=typeof this.value_;n+=t+":",n+="number"===t?Gg(this.value_):this.value_,this.lazyHash_=iE(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===i.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof i.__childrenNodeConstructor?-1:((0,R.hu)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const t=typeof n.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(t),o=i.VALUE_TYPE_ORDER.indexOf(r);return(0,R.hu)(s>=0,"Unknown leaf type: "+t),(0,R.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const Di=new class n2 extends Xg{compare(e,n){const t=e.node.getPriority(),r=n.node.getPriority(),s=t.compareTo(r);return 0===s?Ha(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Cn.MIN}maxPost(){return new Cn(Du,new ev("[PRIORITY-POST]",PM))}makePost(e,n){const t=RM(e);return new Cn(n,new ev("[PRIORITY-POST]",t))}toString(){return".priority"}},r2=Math.log(2);class s2{constructor(e){this.count=parseInt(Math.log(e+1)/r2,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const a0=function(i,e,n,t){i.sort(e);const r=function(m,f){const b=f-m;let w,I;if(0===b)return null;if(1===b)return w=i[m],I=n?n(w):w,new za(I,w.node,za.BLACK,null,null);{const S=parseInt(b/2,10)+m,F=r(m,S),z=r(S+1,f);return w=i[S],I=n?n(w):w,new za(I,w.node,za.BLACK,F,z)}},d=function(m){let f=null,b=null,w=i.length;const I=function(F,z){const q=w-F,we=w;w-=F;const Ae=r(q+1,we),De=i[q],Pe=n?n(De):De;S(new za(Pe,De.node,z,null,Ae))},S=function(F){f?(f.left=F,f=F):(b=F,f=F)};for(let F=0;F<m.count;++F){const z=m.nextBitIsOne(),q=Math.pow(2,m.count-(F+1));z?I(q,za.BLACK):(I(q,za.BLACK),I(q,za.RED))}return b}(new s2(i.length));return new Ho(t||e,d)};let TE;const ip={};class kd{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return(0,R.hu)(ip&&Di,"ChildrenNode.ts has not been loaded"),TE=TE||new kd({".priority":ip},{".priority":Di}),TE}get(e){const n=(0,R.DV)(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ho?n:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,n){(0,R.hu)(e!==Cc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const t=[];let r=!1;const s=n.getIterator(Cn.Wrap);let d,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),t.push(o),o=s.getNext();d=r?a0(t,e.getCompare()):ip;const m=e.toString(),f=Object.assign({},this.indexSet_);f[m]=e;const b=Object.assign({},this.indexes_);return b[m]=d,new kd(b,f)}addToIndexes(e,n){const t=(0,R.UI)(this.indexes_,(r,s)=>{const o=(0,R.DV)(this.indexSet_,s);if((0,R.hu)(o,"Missing index implementation for "+s),r===ip){if(o.isDefinedOn(e.node)){const d=[],m=n.getIterator(Cn.Wrap);let f=m.getNext();for(;f;)f.name!==e.name&&d.push(f),f=m.getNext();return d.push(e),a0(d,o.getCompare())}return ip}{const d=n.get(e.name);let m=r;return d&&(m=m.remove(new Cn(e.name,d))),m.insert(e,e.node)}});return new kd(t,this.indexSet_)}removeFromIndexes(e,n){const t=(0,R.UI)(this.indexes_,r=>{if(r===ip)return r;{const s=n.get(e.name);return s?r.remove(new Cn(e.name,s)):r}});return new kd(t,this.indexSet_)}}let Td,nn=(()=>{class i{constructor(n,t,r){this.children_=n,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&AM(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Td||(Td=new i(new Ho(DE),null,kd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Td}updatePriority(n){return this.children_.isEmpty()?this:new i(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const t=this.children_.get(n);return null===t?Td:t}}getChild(n){const t=mn(n);return null===t?this:this.getImmediateChild(t).getChild(gi(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,t){if((0,R.hu)(t,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(t);{const r=new Cn(n,t);let s,o;t.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,t),o=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Td:this.priorityNode_;return new i(s,d,o)}}updateChild(n,t){const r=mn(n);if(null===r)return t;{(0,R.hu)(".priority"!==mn(n)||1===Id(n),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(gi(n),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild(Di,(d,m)=>{t[d]=m.val(n),r++,o&&i.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):o=!1}),!n&&o&&s<2*r){const d=[];for(const m in t)d[m]=t[m];return d}return n&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+kE(this.getPriority().val())+":"),this.forEachChild(Di,(t,r)=>{const s=r.hash();""!==s&&(n+=":"+t+":"+s)}),this.lazyHash_=""===n?"":iE(n)}return this.lazyHash_}getPredecessorChildName(n,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Cn(n,t));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const t=this.resolveIndex_(n);if(t){const r=t.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(n){const t=this.getFirstChildName(n);return t?new Cn(t,this.children_.get(t)):null}getLastChildName(n){const t=this.resolveIndex_(n);if(t){const r=t.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(n){const t=this.getLastChildName(n);return t?new Cn(t,this.children_.get(t)):null}forEachChild(n,t){const r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,Cn.Wrap);let o=s.peek();for(;null!=o&&t.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,Cn.Wrap);let o=s.peek();for(;null!=o&&t.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===rp?-1:0}withIndex(n){if(n===Cc||this.indexMap_.hasIndex(n))return this;{const t=this.indexMap_.addIndex(n,this.children_);return new i(this.children_,this.priorityNode_,t)}}isIndexed(n){return n===Cc||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const t=n;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const r=this.getIterator(Di),s=t.getIterator(Di);let o=r.getNext(),d=s.getNext();for(;o&&d;){if(o.name!==d.name||!o.node.equals(d.node))return!1;o=r.getNext(),d=s.getNext()}return null===o&&null===d}return!1}return!1}}resolveIndex_(n){return n===Cc?null:this.indexMap_.get(n.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const rp=new class OM extends nn{constructor(){super(new Ho(DE),nn.EMPTY_NODE,kd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return nn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Cn,{MIN:{value:new Cn(Cd,nn.EMPTY_NODE)},MAX:{value:new Cn(Du,rp)}}),IE.__EMPTY_NODE=nn.EMPTY_NODE,ev.__childrenNodeConstructor=nn,function Ij(i){o0=i}(rp),function t2(i){PM=i}(rp);const NM=!0;function ji(i,e=null){if(null===i)return nn.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(e=i[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new ev(i,ji(e));if(i instanceof Array||!NM){let n=nn.EMPTY_NODE;return ds(i,(t,r)=>{if((0,R.r3)(i,t)&&"."!==t.substring(0,1)){const s=ji(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(t,s))}}),n.updatePriority(ji(e))}{const n=[];let t=!1;if(ds(i,(o,d)=>{if("."!==o.substring(0,1)){const m=ji(d);m.isEmpty()||(t=t||!m.getPriority().isEmpty(),n.push(new Cn(o,m)))}}),0===n.length)return nn.EMPTY_NODE;const s=a0(n,JL,o=>o.name,DE);if(t){const o=a0(n,Di.getCompare());return new nn(s,ji(e),new kd({".priority":o},{".priority":Di}))}return new nn(s,ji(e),kd.Default)}}!function e2(i){RM=i}(ji);class c0 extends Xg{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!bn(e)&&".priority"!==mn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const t=this.extractChild(e.node),r=this.extractChild(n.node),s=t.compareTo(r);return 0===s?Ha(e.name,n.name):s}makePost(e,n){const t=ji(e),r=nn.EMPTY_NODE.updateChild(this.indexPath_,t);return new Cn(n,r)}maxPost(){const e=nn.EMPTY_NODE.updateChild(this.indexPath_,rp);return new Cn(Du,e)}toString(){return Qg(this.indexPath_,0).join("/")}}const FM=new class o2 extends Xg{compare(e,n){const t=e.node.compareTo(n.node);return 0===t?Ha(e.name,n.name):t}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Cn.MIN}maxPost(){return Cn.MAX}makePost(e,n){const t=ji(e);return new Cn(n,t)}toString(){return".value"}};function a2(i){return{type:"value",snapshotNode:i}}function sp(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function op(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function tv(i,e,n){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:n}}class SE{constructor(e){this.index_=e}updateChild(e,n,t,r,s,o){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(n);return d.getChild(r).equals(t.getChild(r))&&d.isEmpty()===t.isEmpty()||(null!=o&&(t.isEmpty()?e.hasChild(n)?o.trackChildChange(op(n,d)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?o.trackChildChange(sp(n,t)):o.trackChildChange(tv(n,t,d))),e.isLeafNode()&&t.isEmpty())?e:e.updateImmediateChild(n,t).withIndex(this.index_)}updateFullNode(e,n,t){return null!=t&&(e.isLeafNode()||e.forEachChild(Di,(r,s)=>{n.hasChild(r)||t.trackChildChange(op(r,s))}),n.isLeafNode()||n.forEachChild(Di,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||t.trackChildChange(tv(r,s,o))}else t.trackChildChange(sp(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?nn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Sd{constructor(e){this.indexedFilter_=new SE(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Sd.getStartPost_(e),this.endPost_=Sd.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,t=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&t}updateChild(e,n,t,r,s,o){return this.matches(new Cn(n,t))||(t=nn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,t,r,s,o)}updateFullNode(e,n,t){n.isLeafNode()&&(n=nn.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(nn.EMPTY_NODE);const s=this;return n.forEachChild(Di,(o,d)=>{s.matches(new Cn(o,d))||(r=r.updateImmediateChild(o,nn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,t)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class l2{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=n=>{const t=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Sd(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,t,r,s,o){return this.rangedFilter_.matches(new Cn(n,t))||(t=nn.EMPTY_NODE),e.getImmediateChild(n).equals(t)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,t,r,s,o):this.fullLimitUpdateChild_(e,n,t,s,o)}updateFullNode(e,n,t){let r;if(n.isLeafNode()||n.isEmpty())r=nn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;r=nn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),o++}}}else{let s;r=n.withIndex(this.index_),r=r.updatePriority(nn.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const d=s.getNext();o<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?o++:r=r.updateImmediateChild(d.name,nn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,t)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,t,r,s){let o;if(this.reverse_){const w=this.index_.getCompare();o=(I,S)=>w(S,I)}else o=this.index_.getCompare();const d=e;(0,R.hu)(d.numChildren()===this.limit_,"");const m=new Cn(n,t),f=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(d.hasChild(n)){const w=d.getImmediateChild(n);let I=r.getChildAfterChild(this.index_,f,this.reverse_);for(;null!=I&&(I.name===n||d.hasChild(I.name));)I=r.getChildAfterChild(this.index_,I,this.reverse_);const S=null==I?1:o(I,m);if(b&&!t.isEmpty()&&S>=0)return s?.trackChildChange(tv(n,t,w)),d.updateImmediateChild(n,t);{s?.trackChildChange(op(n,w));const z=d.updateImmediateChild(n,nn.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(s?.trackChildChange(sp(I.name,I.node)),z.updateImmediateChild(I.name,I.node)):z}}return t.isEmpty()?e:b&&o(f,m)>=0?(null!=s&&(s.trackChildChange(op(f.name,f.node)),s.trackChildChange(sp(n,t))),d.updateImmediateChild(n,t).updateImmediateChild(f.name,nn.EMPTY_NODE)):e}}class ap{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Di}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Du}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Di}copy(){const e=new ap;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iv(i){const e={};if(i.isDefault())return e;let n;if(i.index_===Di?n="$priority":i.index_===FM?n="$value":i.index_===Cc?n="$key":((0,R.hu)(i.index_ instanceof c0,"Unrecognized index type!"),n=i.index_.toString()),e.orderBy=(0,R.Wl)(n),i.startSet_){const t=i.startAfterSet_?"startAfter":"startAt";e[t]=(0,R.Wl)(i.indexStartValue_),i.startNameSet_&&(e[t]+=","+(0,R.Wl)(i.indexStartName_))}if(i.endSet_){const t=i.endBeforeSet_?"endBefore":"endAt";e[t]=(0,R.Wl)(i.indexEndValue_),i.endNameSet_&&(e[t]+=","+(0,R.Wl)(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function ME(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let n=i.viewFrom_;""===n&&(n=i.isViewFromLeft()?"l":"r"),e.vf=n}return i.index_!==Di&&(e.i=i.index_.toString()),e}class d0 extends CM{constructor(e,n,t,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=t,this.appCheckTokenProvider_=r,this.log_=zg("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,t,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=d0.getListenId_(e,t),d={};this.listens_[o]=d;const m=iv(e._queryParams);this.restRequest_(s+".json",m,(f,b)=>{let w=b;if(404===f&&(w=null,f=null),null===f&&this.onDataUpdate_(s,w,!1,t),(0,R.DV)(this.listens_,o)===d){let I;I=f?401===f?"permission_denied":"rest_error:"+f:"ok",r(I,null)}})}unlisten(e,n){const t=d0.getListenId_(e,n);delete this.listens_[t]}get(e){const n=iv(e._queryParams),t=e._path.toString(),r=new R.BH;return this.restRequest_(t+".json",n,(s,o)=>{let d=o;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(t,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},t){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(n);this.log_("Sending REST request for "+o);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(t&&4===d.readyState){this.log_("REST Response for "+o+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=(0,R.cI)(d.responseText)}catch{fo("Failed to parse JSON response for "+o+": "+d.responseText)}t(null,m)}else 401!==d.status&&404!==d.status&&fo("Got unsuccessful REST response for "+o+" Status: "+d.status),t(d.status);t=null}},d.open("GET",o,!0),d.send()})}}class BM{constructor(){this.rootNode_=nn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function mm(){return{value:null,children:new Map}}function cp(i,e,n){if(bn(e))i.value=n,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(e,n);else{const t=mn(e);i.children.has(t)||i.children.set(t,mm()),cp(i.children.get(t),e=gi(e),n)}}function u0(i,e,n){null!==i.value?n(e,i.value):function m2(i,e){i.children.forEach((n,t)=>{e(t,n)})}(i,(t,r)=>{u0(r,new ei(e.toString()+"/"+t),n)})}class f2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&ds(this.last_,(t,r)=>{n[t]=n[t]-r}),this.last_=e,n}}class _2{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new f2(e);const t=1e4+2e4*Math.random();Xf(this.reportStats_.bind(this),Math.floor(t))}reportStats_(){const e=this.statsListener_.get(),n={};let t=!1;ds(e,(r,s)=>{s>0&&(0,R.r3)(this.statsToReport_,r)&&(n[r]=s,t=!0)}),t&&this.server_.reportStats(n),Xf(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ec=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(Ec||{});function f0(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class p0{constructor(e,n,t){this.path=e,this.affectedTree=n,this.revert=t,this.type=Ec.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(bn(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new ei(e));return new p0($n(),n,this.revert)}}return(0,R.hu)(mn(this.path)===e,"operationForChild called for unrelated child."),new p0(gi(this.path),this.affectedTree,this.revert)}}class lp{constructor(e,n){this.source=e,this.path=n,this.type=Ec.LISTEN_COMPLETE}operationForChild(e){return bn(this.path)?new lp(this.source,$n()):new lp(this.source,gi(this.path))}}class Au{constructor(e,n,t){this.source=e,this.path=n,this.snap=t,this.type=Ec.OVERWRITE}operationForChild(e){return bn(this.path)?new Au(this.source,$n(),this.snap.getImmediateChild(e)):new Au(this.source,gi(this.path),this.snap)}}class dp{constructor(e,n,t){this.source=e,this.path=n,this.children=t,this.type=Ec.MERGE}operationForChild(e){if(bn(this.path)){const n=this.children.subtree(new ei(e));return n.isEmpty()?null:n.value?new Au(this.source,$n(),n.value):new dp(this.source,$n(),n)}return(0,R.hu)(mn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new dp(this.source,gi(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Mu{constructor(e,n,t){this.node_=e,this.fullyInitialized_=n,this.filtered_=t}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(bn(e))return this.isFullyInitialized()&&!this.filtered_;const n=mn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class OE{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function up(i,e,n,t,r,s){const o=t.filter(d=>d.type===n);o.sort((d,m)=>function LE(i,e,n){if(null==e.childName||null==n.childName)throw(0,R.g5)("Should only compare child_ events.");const t=new Cn(e.childName,e.snapshotNode),r=new Cn(n.childName,n.snapshotNode);return i.index_.compare(t,r)}(i,d,m)),o.forEach(d=>{const m=function FE(i,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}(i,d,s);r.forEach(f=>{f.respondsTo(d.type)&&e.push(f.createEvent(m,i.query_))})})}function _0(i,e){return{eventCache:i,serverCache:e}}function sv(i,e,n,t){return _0(new Mu(e,n,t),i.serverCache)}function VM(i,e,n,t){return _0(i.eventCache,new Mu(e,n,t))}function g0(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Ru(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let ov;class vi{constructor(e,n=(()=>(ov||(ov=new Ho(ML)),ov))()){this.value=e,this.children=n}static fromObject(e){let n=new vi(null);return ds(e,(t,r)=>{n=n.set(new ei(t),r)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:$n(),value:this.value};if(bn(e))return null;{const t=mn(e),r=this.children.get(t);if(null!==r){const s=r.findRootMostMatchingPathAndValue(gi(e),n);return null!=s?{path:zi(new ei(t),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(bn(e))return this;{const n=mn(e),t=this.children.get(n);return null!==t?t.subtree(gi(e)):new vi(null)}}set(e,n){if(bn(e))return new vi(n,this.children);{const t=mn(e),s=(this.children.get(t)||new vi(null)).set(gi(e),n),o=this.children.insert(t,s);return new vi(this.value,o)}}remove(e){if(bn(e))return this.children.isEmpty()?new vi(null):new vi(null,this.children);{const n=mn(e),t=this.children.get(n);if(t){const r=t.remove(gi(e));let s;return s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&s.isEmpty()?new vi(null):new vi(this.value,s)}return this}}get(e){if(bn(e))return this.value;{const n=mn(e),t=this.children.get(n);return t?t.get(gi(e)):null}}setTree(e,n){if(bn(e))return n;{const t=mn(e),s=(this.children.get(t)||new vi(null)).setTree(gi(e),n);let o;return o=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),new vi(this.value,o)}}fold(e){return this.fold_($n(),e)}fold_(e,n){const t={};return this.children.inorderTraversal((r,s)=>{t[r]=s.fold_(zi(e,r),n)}),n(e,this.value,t)}findOnPath(e,n){return this.findOnPath_(e,$n(),n)}findOnPath_(e,n,t){const r=!!this.value&&t(n,this.value);if(r)return r;if(bn(e))return null;{const s=mn(e),o=this.children.get(s);return o?o.findOnPath_(gi(e),zi(n,s),t):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$n(),n)}foreachOnPath_(e,n,t){if(bn(e))return this;{this.value&&t(n,this.value);const r=mn(e),s=this.children.get(r);return s?s.foreachOnPath_(gi(e),zi(n,r),t):new vi(null)}}foreach(e){this.foreach_($n(),e)}foreach_(e,n){this.children.inorderTraversal((t,r)=>{r.foreach_(zi(e,t),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,t)=>{t.value&&e(n,t.value)})}}class ja{constructor(e){this.writeTree_=e}static empty(){return new ja(new vi(null))}}function hp(i,e,n){if(bn(e))return new ja(new vi(n));{const t=i.writeTree_.findRootMostValueAndPath(e);if(null!=t){const r=t.path;let s=t.value;const o=Is(r,e);return s=s.updateChild(o,n),new ja(i.writeTree_.set(r,s))}{const r=new vi(n),s=i.writeTree_.setTree(e,r);return new ja(s)}}}function BE(i,e,n){let t=i;return ds(n,(r,s)=>{t=hp(t,zi(e,r),s)}),t}function VE(i,e){if(bn(e))return ja.empty();{const n=i.writeTree_.setTree(e,new vi(null));return new ja(n)}}function v0(i,e){return null!=fm(i,e)}function fm(i,e){const n=i.writeTree_.findRootMostValueAndPath(e);return null!=n?i.writeTree_.get(n.path).getChild(Is(n.path,e)):null}function UE(i){const e=[],n=i.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Di,(t,r)=>{e.push(new Cn(t,r))}):i.writeTree_.children.inorderTraversal((t,r)=>{null!=r.value&&e.push(new Cn(t,r.value))}),e}function Ad(i,e){if(bn(e))return i;{const n=fm(i,e);return new ja(null!=n?new vi(n):i.writeTree_.subtree(e))}}function Ds(i){return i.writeTree_.isEmpty()}function Ic(i,e){return HM($n(),i.writeTree_,e)}function HM(i,e,n){if(null!=e.value)return n.updateChild(i,e.value);{let t=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,R.hu)(null!==s.value,"Priority writes must always be leaf nodes"),t=s.value):n=HM(zi(i,r),s,n)}),!n.getChild(i).isEmpty()&&null!==t&&(n=n.updateChild(zi(i,".priority"),t)),n}}function b0(i,e){return qM(e,i)}function Sj(i,e){if(i.snap)return Uo(i.path,e);for(const n in i.children)if(i.children.hasOwnProperty(n)&&Uo(zi(i.path,n),e))return!0;return!1}function Mj(i){return i.visible}function mp(i,e,n){let t=ja.empty();for(let r=0;r<i.length;++r){const s=i[r];if(e(s)){const o=s.path;let d;if(s.snap)Uo(n,o)?(d=Is(n,o),t=hp(t,d,s.snap)):Uo(o,n)&&(d=Is(o,n),t=hp(t,$n(),s.snap.getChild(d)));else{if(!s.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(Uo(n,o))d=Is(n,o),t=BE(t,d,s.children);else if(Uo(o,n))if(d=Is(o,n),bn(d))t=BE(t,$n(),s.children);else{const m=(0,R.DV)(s.children,mn(d));if(m){const f=m.getChild(gi(d));t=hp(t,$n(),f)}}}}}return t}function jM(i,e,n,t,r){if(t||r){const s=Ad(i.visibleWrites,e);return!r&&Ds(s)?n:r||null!=n||v0(s,$n())?Ic(mp(i.allWrites,function(f){return(f.visible||r)&&(!t||!~t.indexOf(f.writeId))&&(Uo(f.path,e)||Uo(e,f.path))},e),n||nn.EMPTY_NODE):null}{const s=fm(i.visibleWrites,e);if(null!=s)return s;{const o=Ad(i.visibleWrites,e);return Ds(o)?n:null!=n||v0(o,$n())?Ic(o,n||nn.EMPTY_NODE):null}}}function fp(i,e,n,t){return jM(i.writeTree,i.treePath,e,n,t)}function y0(i,e){return function zE(i,e,n){let t=nn.EMPTY_NODE;const r=fm(i.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Di,(s,o)=>{t=t.updateImmediateChild(s,o)}),t;if(n){const s=Ad(i.visibleWrites,e);return n.forEachChild(Di,(o,d)=>{const m=Ic(Ad(s,new ei(o)),d);t=t.updateImmediateChild(o,m)}),UE(s).forEach(o=>{t=t.updateImmediateChild(o.name,o.node)}),t}return UE(Ad(i.visibleWrites,e)).forEach(o=>{t=t.updateImmediateChild(o.name,o.node)}),t}(i.writeTree,i.treePath,e)}function $M(i,e,n,t){return function g2(i,e,n,t,r){(0,R.hu)(t||r,"Either existingEventSnap or existingServerSnap must exist");const s=zi(e,n);if(v0(i.visibleWrites,s))return null;{const o=Ad(i.visibleWrites,s);return Ds(o)?r.getChild(n):Ic(o,r.getChild(n))}}(i.writeTree,i.treePath,e,n,t)}function pm(i,e){return function v2(i,e){return fm(i.visibleWrites,e)}(i.writeTree,zi(i.treePath,e))}function WM(i,e,n){return function GM(i,e,n,t){const r=zi(e,n),s=fm(i.visibleWrites,r);return null!=s?s:t.isCompleteForChild(n)?Ic(Ad(i.visibleWrites,r),t.getNode().getImmediateChild(n)):null}(i.writeTree,i.treePath,e,n)}function GE(i,e){return qM(zi(i.treePath,e),i.writeTree)}function qM(i,e){return{treePath:i,writeTree:e}}class YM{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,t=e.childName;(0,R.hu)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==t,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(t);if(r){const s=r.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(t,tv(t,e.snapshotNode,r.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(t);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(t,op(t,r.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(t,sp(t,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(t,tv(t,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(t,e)}getChanges(){return Array.from(this.changeMap.values())}}const ZM=new class pp{getCompleteChild(e){return null}getChildAfterChild(e,n,t){return null}};class w0{constructor(e,n,t=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=t}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Mu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return WM(this.writes_,e,t)}}getChildAfterChild(e,n,t){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ru(this.viewCache_),s=function jE(i,e,n,t,r,s){return function b2(i,e,n,t,r,s,o){let d;const m=Ad(i.visibleWrites,e),f=fm(m,$n());if(null!=f)d=f;else{if(null==n)return[];d=Ic(m,n)}if(d=d.withIndex(o),d.isEmpty()||d.isLeafNode())return[];{const b=[],w=o.getCompare(),I=s?d.getReverseIteratorFrom(t,o):d.getIteratorFrom(t,o);let S=I.getNext();for(;S&&b.length<r;)0!==w(S,t)&&b.push(S),S=I.getNext();return b}}(i.writeTree,i.treePath,e,n,t,r,s)}(this.writes_,r,n,1,t,e);return 0===s.length?null:s[0]}}function KM(i,e,n,t,r,s){const o=e.eventCache;if(null!=pm(t,n))return e;{let d,m;if(bn(n))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=Ru(e),w=y0(t,f instanceof nn?f:nn.EMPTY_NODE);d=i.filter.updateFullNode(e.eventCache.getNode(),w,s)}else{const f=fp(t,Ru(e));d=i.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=mn(n);if(".priority"===f){(0,R.hu)(1===Id(n),"Can't have a priority with additional path components");const b=o.getNode();m=e.serverCache.getNode();const w=$M(t,n,b,m);d=null!=w?i.filter.updatePriority(b,w):o.getNode()}else{const b=gi(n);let w;if(o.isCompleteForChild(f)){m=e.serverCache.getNode();const I=$M(t,n,o.getNode(),m);w=null!=I?o.getNode().getImmediateChild(f).updateChild(b,I):o.getNode().getImmediateChild(f)}else w=WM(t,f,e.serverCache);d=null!=w?i.filter.updateChild(o.getNode(),f,w,b,r,s):o.getNode()}}return sv(e,d,o.isFullyInitialized()||bn(n),i.filter.filtersNodes())}}function x0(i,e,n,t,r,s,o,d){const m=e.serverCache;let f;const b=o?i.filter:i.filter.getIndexedFilter();if(bn(n))f=b.updateFullNode(m.getNode(),t,null);else if(b.filtersNodes()&&!m.isFiltered()){const S=m.getNode().updateChild(n,t);f=b.updateFullNode(m.getNode(),S,null)}else{const S=mn(n);if(!m.isCompleteForPath(n)&&Id(n)>1)return e;const F=gi(n),q=m.getNode().getImmediateChild(S).updateChild(F,t);f=".priority"===S?b.updatePriority(m.getNode(),q):b.updateChild(m.getNode(),S,q,F,ZM,null)}const w=VM(e,f,m.isFullyInitialized()||bn(n),b.filtersNodes());return KM(i,w,n,r,new w0(r,w,s),d)}function WE(i,e,n,t,r,s,o){const d=e.eventCache;let m,f;const b=new w0(r,e,s);if(bn(n))f=i.filter.updateFullNode(e.eventCache.getNode(),t,o),m=sv(e,f,!0,i.filter.filtersNodes());else{const w=mn(n);if(".priority"===w)f=i.filter.updatePriority(e.eventCache.getNode(),t),m=sv(e,f,d.isFullyInitialized(),d.isFiltered());else{const I=gi(n),S=d.getNode().getImmediateChild(w);let F;if(bn(I))F=t;else{const z=b.getCompleteChild(w);F=null!=z?".priority"===bE(I)&&z.getChild(TM(I)).isEmpty()?z:z.updateChild(I,t):nn.EMPTY_NODE}m=S.equals(F)?e:sv(e,i.filter.updateChild(d.getNode(),w,F,I,b,o),d.isFullyInitialized(),i.filter.filtersNodes())}}return m}function qE(i,e){return i.eventCache.isCompleteForChild(e)}function XM(i,e,n){return n.foreach((t,r)=>{e=e.updateChild(t,r)}),e}function C0(i,e,n,t,r,s,o,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f,m=e;f=bn(n)?t:new vi(null).setTree(n,t);const b=e.serverCache.getNode();return f.children.inorderTraversal((w,I)=>{if(b.hasChild(w)){const F=XM(0,e.serverCache.getNode().getImmediateChild(w),I);m=x0(i,m,new ei(w),F,r,s,o,d)}}),f.children.inorderTraversal((w,I)=>{const S=!e.serverCache.isCompleteForChild(w)&&null===I.value;if(!b.hasChild(w)&&!S){const z=XM(0,e.serverCache.getNode().getImmediateChild(w),I);m=x0(i,m,new ei(w),z,r,s,o,d)}}),m}class e1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const t=this.query_._queryParams,r=new SE(t.getIndex()),s=function d2(i){return i.loadsAllData()?new SE(i.getIndex()):i.hasLimit()?new l2(i):new Sd(i)}(t);this.processor_=function $E(i){return{filter:i}}(s);const o=n.serverCache,d=n.eventCache,m=r.updateFullNode(nn.EMPTY_NODE,o.getNode(),null),f=s.updateFullNode(nn.EMPTY_NODE,d.getNode(),null),b=new Mu(m,o.isFullyInitialized(),r.filtersNodes()),w=new Mu(f,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=_0(w,b),this.eventGenerator_=new OE(this.query_)}get query(){return this.query_}}function n1(i,e){const n=Ru(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!bn(e)&&!n.getImmediateChild(mn(e)).isEmpty())?n.getChild(e):null}function YE(i){return 0===i.eventRegistrations_.length}function s1(i,e,n){const t=[];if(n){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const r=i.query._path;i.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&t.push(o)})}if(e){let r=[];for(let s=0;s<i.eventRegistrations_.length;++s){const o=i.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(i.eventRegistrations_.slice(s+1));break}}else r.push(o)}i.eventRegistrations_=r}else i.eventRegistrations_=[];return t}function o1(i,e,n,t){e.type===Ec.MERGE&&null!==e.source.queryId&&((0,R.hu)(Ru(i.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(g0(i.viewCache_),"Missing event cache, even though we have a server cache"));const r=i.viewCache_,s=function w2(i,e,n,t,r){const s=new YM;let o,d;if(n.type===Ec.OVERWRITE){const f=n;f.source.fromUser?o=WE(i,e,f.path,f.snap,t,r,s):((0,R.hu)(f.source.fromServer,"Unknown source."),d=f.source.tagged||e.serverCache.isFiltered()&&!bn(f.path),o=x0(i,e,f.path,f.snap,t,r,d,s))}else if(n.type===Ec.MERGE){const f=n;f.source.fromUser?o=function QM(i,e,n,t,r,s,o){let d=e;return t.foreach((m,f)=>{const b=zi(n,m);qE(e,mn(b))&&(d=WE(i,d,b,f,r,s,o))}),t.foreach((m,f)=>{const b=zi(n,m);qE(e,mn(b))||(d=WE(i,d,b,f,r,s,o))}),d}(i,e,f.path,f.children,t,r,s):((0,R.hu)(f.source.fromServer,"Unknown source."),d=f.source.tagged||e.serverCache.isFiltered(),o=C0(i,e,f.path,f.children,t,r,d,s))}else if(n.type===Ec.ACK_USER_WRITE){const f=n;o=f.revert?function C2(i,e,n,t,r,s){let o;if(null!=pm(t,n))return e;{const d=new w0(t,e,r),m=e.eventCache.getNode();let f;if(bn(n)||".priority"===mn(n)){let b;if(e.serverCache.isFullyInitialized())b=fp(t,Ru(e));else{const w=e.serverCache.getNode();(0,R.hu)(w instanceof nn,"serverChildren would be complete if leaf node"),b=y0(t,w)}f=i.filter.updateFullNode(m,b,s)}else{const b=mn(n);let w=WM(t,b,e.serverCache);null==w&&e.serverCache.isCompleteForChild(b)&&(w=m.getImmediateChild(b)),f=null!=w?i.filter.updateChild(m,b,w,gi(n),d,s):e.eventCache.getNode().hasChild(b)?i.filter.updateChild(m,b,nn.EMPTY_NODE,gi(n),d,s):m,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=fp(t,Ru(e)),o.isLeafNode()&&(f=i.filter.updateFullNode(f,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=pm(t,$n()),sv(e,f,o,i.filter.filtersNodes())}}(i,e,f.path,t,r,s):function JM(i,e,n,t,r,s,o){if(null!=pm(r,n))return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(null!=t.value){if(bn(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return x0(i,e,n,m.getNode().getChild(n),r,s,d,o);if(bn(n)){let f=new vi(null);return m.getNode().forEachChild(Cc,(b,w)=>{f=f.set(new ei(b),w)}),C0(i,e,n,f,r,s,d,o)}return e}{let f=new vi(null);return t.foreach((b,w)=>{const I=zi(n,b);m.isCompleteForPath(I)&&(f=f.set(b,m.getNode().getChild(I)))}),C0(i,e,n,f,r,s,d,o)}}(i,e,f.path,f.affectedTree,t,r,s)}else{if(n.type!==Ec.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+n.type);o=function x2(i,e,n,t,r){const s=e.serverCache;return KM(i,VM(e,s.getNode(),s.isFullyInitialized()||bn(n),s.isFiltered()),n,t,ZM,r)}(i,e,n.path,t,s)}const m=s.getChanges();return function Pj(i,e,n){const t=e.eventCache;if(t.isFullyInitialized()){const r=t.getNode().isLeafNode()||t.getNode().isEmpty(),s=g0(i);(n.length>0||!i.eventCache.isFullyInitialized()||r&&!t.getNode().equals(s)||!t.getNode().getPriority().equals(s.getPriority()))&&n.push(a2(g0(e)))}}(e,o,m),{viewCache:o,changes:m}}(i.processor_,r,e,n,t);return function Rj(i,e){(0,R.hu)(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,s.viewCache),(0,R.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,ZE(i,s.changes,s.viewCache.eventCache.getNode(),null)}function ZE(i,e,n,t){return function NE(i,e,n,t){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function c2(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}(o.childName,o.snapshotNode))}),up(i,r,"child_removed",e,t,n),up(i,r,"child_added",e,t,n),up(i,r,"child_moved",s,t,n),up(i,r,"child_changed",e,t,n),up(i,r,"value",e,t,n),r}(i.eventGenerator_,e,n,t?[t]:i.eventRegistrations_)}let KE,JE;class I2{constructor(){this.views=new Map}}function a1(i,e,n,t){const r=e.source.queryId;if(null!==r){const s=i.views.get(r);return(0,R.hu)(null!=s,"SyncTree gave us an op for an invalid query."),o1(s,e,n,t)}{let s=[];for(const o of i.views.values())s=s.concat(o1(o,e,n,t));return s}}function Bj(i,e,n,t,r,s){const o=function D2(i,e,n,t,r){const o=i.views.get(e._queryIdentifier);if(!o){let d=fp(n,r?t:null),m=!1;d?m=!0:t instanceof nn?(d=y0(n,t),m=!1):(d=nn.EMPTY_NODE,m=!1);const f=_0(new Mu(d,m,!1),new Mu(t,r,!1));return new e1(e,f)}return o}(i,e,t,r,s);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,o),function r1(i,e){i.eventRegistrations_.push(e)}(o,n),function Oj(i,e){const n=i.viewCache_.eventCache,t=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Di,(s,o)=>{t.push(sp(s,o))}),n.isFullyInitialized()&&t.push(a2(n.getNode())),ZE(i,t,n.getNode(),e)}(o,n)}function QE(i){const e=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function xl(i,e){let n=null;for(const t of i.views.values())n=n||n1(t,e);return n}function XE(i,e){return e._queryParams.loadsAllData()?E0(i):i.views.get(e._queryIdentifier)}function c1(i,e){return null!=XE(i,e)}function Dc(i){return null!=E0(i)}function E0(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let l1=1;class d1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new vi(null),this.pendingWriteTree_=function y2(){return{visibleWrites:ja.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eI(i,e,n,t,r){return function kj(i,e,n,t,r){(0,R.hu)(t>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),i.allWrites.push({path:e,snap:n,writeId:t,visible:r}),r&&(i.visibleWrites=hp(i.visibleWrites,e,n)),i.lastWriteId=t}(i.pendingWriteTree_,e,n,t,r),r?_p(i,new Au({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function _m(i,e,n=!1){const t=function zM(i,e){for(let n=0;n<i.allWrites.length;n++){const t=i.allWrites[n];if(t.writeId===e)return t}return null}(i.pendingWriteTree_,e);if(function HE(i,e){const n=i.allWrites.findIndex(d=>d.writeId===e);(0,R.hu)(n>=0,"removeWrite called with nonexistent writeId.");const t=i.allWrites[n];i.allWrites.splice(n,1);let r=t.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){const d=i.allWrites[o];d.visible&&(o>=n&&Sj(d,t.path)?r=!1:Uo(t.path,d.path)&&(s=!0)),o--}return!!r&&(s?(function Aj(i){i.visibleWrites=mp(i.allWrites,Mj,$n()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(t.snap?i.visibleWrites=VE(i.visibleWrites,t.path):ds(t.children,m=>{i.visibleWrites=VE(i.visibleWrites,zi(t.path,m))}),!0))}(i.pendingWriteTree_,e)){let s=new vi(null);return null!=t.snap?s=s.set($n(),!0):ds(t.children,o=>{s=s.set(new ei(o),!0)}),_p(i,new p0(t.path,s,n))}return[]}function av(i,e,n){return _p(i,new Au({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function D0(i,e,n,t,r=!1){const s=e._path,o=i.syncPointTree_.get(s);let d=[];if(o&&("default"===e._queryIdentifier||c1(o,e))){const m=function Vj(i,e,n,t){const r=e._queryIdentifier,s=[];let o=[];const d=Dc(i);if("default"===r)for(const[m,f]of i.views.entries())o=o.concat(s1(f,n,t)),YE(f)&&(i.views.delete(m),f.query._queryParams.loadsAllData()||s.push(f.query));else{const m=i.views.get(r);m&&(o=o.concat(s1(m,n,t)),YE(m)&&(i.views.delete(r),m.query._queryParams.loadsAllData()||s.push(m.query)))}return d&&!Dc(i)&&s.push(new(function Fj(){return(0,R.hu)(KE,"Reference.ts has not been loaded"),KE}())(e._repo,e._path)),{removed:s,events:o}}(o,e,n,t);(function Lj(i){return 0===i.views.size})(o)&&(i.syncPointTree_=i.syncPointTree_.remove(s));const f=m.removed;if(d=m.events,!r){const b=-1!==f.findIndex(I=>I._queryParams.loadsAllData()),w=i.syncPointTree_.findOnPath(s,(I,S)=>Dc(S));if(b&&!w){const I=i.syncPointTree_.subtree(s);if(!I.isEmpty()){const S=function p1(i){return i.fold((e,n,t)=>{if(n&&Dc(n))return[E0(n)];{let r=[];return n&&(r=QE(n)),ds(t,(s,o)=>{r=r.concat(o)}),r}})}(I);for(let F=0;F<S.length;++F){const z=S[F],q=z.query,we=f1(i,z);i.listenProvider_.startListening(gm(q),lv(i,q),we.hashFn,we.onComplete)}}}!w&&f.length>0&&!t&&(b?i.listenProvider_.stopListening(gm(e),null):f.forEach(I=>{const S=i.queryToTagMap.get(T0(I));i.listenProvider_.stopListening(gm(I),S)}))}!function M2(i,e){for(let n=0;n<e.length;++n){const t=e[n];if(!t._queryParams.loadsAllData()){const r=T0(t),s=i.queryToTagMap.get(r);i.queryToTagMap.delete(r),i.tagToQueryMap.delete(s)}}}(i,f)}return d}function tI(i,e,n,t=!1){const r=e._path;let s=null,o=!1;i.syncPointTree_.foreachOnPath(r,(I,S)=>{const F=Is(I,r);s=s||xl(S,F),o=o||Dc(S)});let m,d=i.syncPointTree_.get(r);d?(o=o||Dc(d),s=s||xl(d,$n())):(d=new I2,i.syncPointTree_=i.syncPointTree_.set(r,d)),null!=s?m=!0:(m=!1,s=nn.EMPTY_NODE,i.syncPointTree_.subtree(r).foreachChild((S,F)=>{const z=xl(F,$n());z&&(s=s.updateImmediateChild(S,z))}));const f=c1(d,e);if(!f&&!e._queryParams.loadsAllData()){const I=T0(e);(0,R.hu)(!i.queryToTagMap.has(I),"View does not exist, but we have a tag");const S=function R2(){return l1++}();i.queryToTagMap.set(I,S),i.tagToQueryMap.set(S,I)}let w=Bj(d,e,n,b0(i.pendingWriteTree_,r),s,m);if(!f&&!o&&!t){const I=XE(d,e);w=w.concat(function _1(i,e,n){const t=e._path,r=lv(i,e),s=f1(i,n),o=i.listenProvider_.startListening(gm(e),r,s.hashFn,s.onComplete),d=i.syncPointTree_.subtree(t);if(r)(0,R.hu)(!Dc(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((f,b,w)=>{if(!bn(f)&&b&&Dc(b))return[E0(b).query];{let I=[];return b&&(I=I.concat(QE(b).map(S=>S.query))),ds(w,(S,F)=>{I=I.concat(F)}),I}});for(let f=0;f<m.length;++f){const b=m[f];i.listenProvider_.stopListening(gm(b),lv(i,b))}}return o}(i,e,I))}return w}function k0(i,e,n){const r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(e,(o,d)=>{const f=xl(d,Is(o,e));if(f)return f});return jM(r,e,s,n,!0)}function _p(i,e){return h1(e,i.syncPointTree_,null,b0(i.pendingWriteTree_,$n()))}function h1(i,e,n,t){if(bn(i.path))return m1(i,e,n,t);{const r=e.get($n());null==n&&null!=r&&(n=xl(r,$n()));let s=[];const o=mn(i.path),d=i.operationForChild(o),m=e.children.get(o);if(m&&d){const f=n?n.getImmediateChild(o):null,b=GE(t,o);s=s.concat(h1(d,m,f,b))}return r&&(s=s.concat(a1(r,i,t,n))),s}}function m1(i,e,n,t){const r=e.get($n());null==n&&null!=r&&(n=xl(r,$n()));let s=[];return e.children.inorderTraversal((o,d)=>{const m=n?n.getImmediateChild(o):null,f=GE(t,o),b=i.operationForChild(o);b&&(s=s.concat(m1(b,d,m,f)))}),r&&(s=s.concat(a1(r,i,t,n))),s}function f1(i,e){const n=e.query,t=lv(i,n);return{hashFn:()=>(function E2(i){return i.viewCache_.serverCache.getNode()}(e)||nn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return t?function S2(i,e,n){const t=iI(i,n);if(t){const r=rI(t),s=r.path,o=r.queryId,d=Is(s,e);return sI(i,s,new lp(f0(o),d))}return[]}(i,n._path,t):function I0(i,e){return _p(i,new lp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(i,n._path);{const s=function yj(i,e){let n="Unknown Error";"too_big"===i?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?n="Client doesn't have permission to access the desired data.":"unavailable"===i&&(n="The service is unavailable");const t=new Error(i+" at "+e._path.toString()+": "+n);return t.code=i.toUpperCase(),t}(r,n);return D0(i,n,null,s)}}}}function lv(i,e){const n=T0(e);return i.queryToTagMap.get(n)}function T0(i){return i._path.toString()+"$"+i._queryIdentifier}function iI(i,e){return i.tagToQueryMap.get(e)}function rI(i){const e=i.indexOf("$");return(0,R.hu)(-1!==e&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new ei(i.substr(0,e))}}function sI(i,e,n){const t=i.syncPointTree_.get(e);return(0,R.hu)(t,"Missing sync point for query tag that we're tracking"),a1(t,n,b0(i.pendingWriteTree_,e),null)}function gm(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function k2(){return(0,R.hu)(JE,"Reference.ts has not been loaded"),JE}())(i._repo,i._path):i}class S0{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new S0(n)}node(){return this.node_}}class g1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=zi(this.path_,e);return new g1(this.syncTree_,n)}node(){return k0(this.syncTree_,this.path_)}}const zo=function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i},oI=function(i,e,n){return i&&"object"==typeof i?((0,R.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?v1(i[".sv"],e,n):"object"==typeof i[".sv"]?P2(i[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},v1=function(i,e,n){if("timestamp"===i)return n.timestamp;(0,R.hu)(!1,"Unexpected server value: "+i)},P2=function(i,e,n){i.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const t=i.increment;"number"!=typeof t&&(0,R.hu)(!1,"Unexpected increment value: "+t);const r=e.node();if((0,R.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return t;const o=r.getValue();return"number"!=typeof o?t:o+t},aI=function(i,e,n,t){return dv(e,new g1(n,i),t)},cI=function(i,e,n){return dv(i,new S0(e),n)};function dv(i,e,n){const t=i.getPriority().val(),r=oI(t,e.getImmediateChild(".priority"),n);let s;if(i.isLeafNode()){const o=i,d=oI(o.getValue(),e,n);return d!==o.getValue()||r!==o.getPriority().val()?new ev(d,ji(r)):i}{const o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new ev(r))),o.forEachChild(Di,(d,m)=>{const f=dv(m,e.getImmediateChild(d),n);f!==m&&(s=s.updateImmediateChild(d,f))}),s}}class Cl{constructor(e="",n=null,t={children:{},childCount:0}){this.name=e,this.parent=n,this.node=t}}function uv(i,e){let n=e instanceof ei?e:new ei(e),t=i,r=mn(n);for(;null!==r;){const s=(0,R.DV)(t.node.children,r)||{children:{},childCount:0};t=new Cl(r,t,s),n=gi(n),r=mn(n)}return t}function Md(i){return i.node.value}function hv(i,e){i.node.value=e,lI(i)}function b1(i){return i.node.childCount>0}function mv(i,e){ds(i.node.children,(n,t)=>{e(new Cl(n,i,t))})}function y1(i,e,n,t){n&&!t&&e(i),mv(i,r=>{y1(r,e,!0,t)}),n&&t&&e(i)}function fv(i){return new ei(null===i.parent?i.name:fv(i.parent)+"/"+i.name)}function lI(i){null!==i.parent&&function w1(i,e,n){const t=function Hj(i){return void 0===Md(i)&&!b1(i)}(n),r=(0,R.r3)(i.node.children,e);t&&r?(delete i.node.children[e],i.node.childCount--,lI(i)):!t&&!r&&(i.node.children[e]=n.node,i.node.childCount++,lI(i))}(i.parent,i.name,i)}const zj=/[\[\].#$\/\u0000-\u001F\u007F]/,x1=/[\[\].#$\u0000-\u001F\u007F]/,dI=10485760,pv=function(i){return"string"==typeof i&&0!==i.length&&!zj.test(i)},N2=function(i){return"string"==typeof i&&0!==i.length&&!x1.test(i)},_v=function(i,e,n){const t=n instanceof ei?new qL(n,i):n;if(void 0===e)throw new Error(i+"contains undefined "+Tu(t));if("function"==typeof e)throw new Error(i+"contains a function "+Tu(t)+" with contents = "+e.toString());if(aE(e))throw new Error(i+"contains "+e.toString()+" "+Tu(t));if("string"==typeof e&&e.length>dI/3&&(0,R.ug)(e)>dI)throw new Error(i+"contains a string greater than "+dI+" utf8 bytes "+Tu(t)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(ds(e,(o,d)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!pv(o)))throw new Error(i+" contains an invalid key ("+o+") "+Tu(t)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function YL(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=(0,R.ug)(e),SM(i)})(t,o),_v(i,d,t),function wE(i){const e=i.parts_.pop();i.byteLength_-=(0,R.ug)(e),i.parts_.length>0&&(i.byteLength_-=1)}(t)}),r&&s)throw new Error(i+' contains ".value" child '+Tu(t)+" in addition to actual children.")}},A0=function(i,e,n,t){if(!(t&&void 0===n||N2(n)))throw new Error((0,R.gK)(i,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},E1=function(i,e,n,t){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),A0(i,e,n,t)};class jj{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function gv(i,e){let n=null;for(let t=0;t<e.length;t++){const r=e[t],s=r.getPath();null!==n&&!s0(s,n.path)&&(i.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&i.eventLists_.push(n)}function D1(i,e,n){gv(i,n),F2(i,t=>s0(t,e))}function ua(i,e,n){gv(i,n),F2(i,t=>Uo(t,e)||Uo(e,t))}function F2(i,e){i.recursionDepth_++;let n=!0;for(let t=0;t<i.eventLists_.length;t++){const r=i.eventLists_[t];r&&(e(r.path)?(Gj(i.eventLists_[t]),i.eventLists_[t]=null):n=!1)}n&&(i.eventLists_=[]),i.recursionDepth_--}function Gj(i){for(let e=0;e<i.events.length;e++){const n=i.events[e];if(null!==n){i.events[e]=null;const t=n.getEventRunner();Iu&&Hi("event: "+n.toString()),um(t)}}}const k1=25;class B2{constructor(e,n,t,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=t,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new jj,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=mm(),this.transactionQueueTree_=new Cl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function T1(i){const n=i.infoData_.getNode(new ei(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function M0(i){return zo({timestamp:T1(i)})}function U2(i,e,n,t,r){i.dataUpdateCount++;const s=new ei(e);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(t){const m=(0,R.UI)(n,f=>ji(f));o=function A2(i,e,n,t){const r=iI(i,t);if(r){const s=rI(r),o=s.path,d=s.queryId,m=Is(o,e),f=vi.fromObject(n);return sI(i,o,new dp(f0(d),m,f))}return[]}(i.serverSyncTree_,s,m,r)}else{const m=ji(n);o=function u1(i,e,n,t){const r=iI(i,t);if(null!=r){const s=rI(r),o=s.path,d=s.queryId,m=Is(o,e);return sI(i,o,new Au(f0(d),m,n))}return[]}(i.serverSyncTree_,s,m,r)}else if(t){const m=(0,R.UI)(n,f=>ji(f));o=function cv(i,e,n){const t=vi.fromObject(n);return _p(i,new dp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}(i.serverSyncTree_,s,m)}else{const m=ji(n);o=av(i.serverSyncTree_,s,m)}let d=s;o.length>0&&(d=vp(i,s)),ua(i.eventQueue_,d,o)}function H2(i,e){S1(i,"connected",e),!1===e&&function A1(i){bv(i,"onDisconnectEvents");const e=M0(i),n=mm();u0(i.onDisconnect_,$n(),(r,s)=>{const o=aI(r,s,i.serverSyncTree_,e);cp(n,r,o)});let t=[];u0(n,$n(),(r,s)=>{t=t.concat(av(i.serverSyncTree_,r,s));const o=yI(i,r);vp(i,o)}),i.onDisconnect_=mm(),ua(i.eventQueue_,$n(),t)}(i)}function S1(i,e,n){const t=new ei("/.info/"+e),r=ji(n);i.infoData_.updateSnapshot(t,r);const s=av(i.infoSyncTree_,t,r);ua(i.eventQueue_,t,s)}function R0(i){return i.nextWriteId_++}function mI(i,e,n,t,r){bv(i,"set",{path:e.toString(),value:n,priority:t});const s=M0(i),o=ji(n,t),d=k0(i.serverSyncTree_,e),m=cI(o,d,s),f=R0(i),b=eI(i.serverSyncTree_,e,m,f,!0);gv(i.eventQueue_,b),i.server_.put(e.toString(),o.val(!0),(I,S)=>{const F="ok"===I;F||fo("set at "+e+" failed: "+I);const z=_m(i.serverSyncTree_,f,!F);ua(i.eventQueue_,e,z),function bm(i,e,n,t){e&&um(()=>{if("ok"===n)e(null);else{const r=(n||"error").toUpperCase();let s=r;t&&(s+=": "+t);const o=new Error(s);o.code=r,e(o)}})}(0,r,I,S)});const w=yI(i,e);vp(i,w),ua(i.eventQueue_,w,[])}function vv(i,e,n){let t;t=".info"===mn(e._path)?D0(i.infoSyncTree_,e,n):D0(i.serverSyncTree_,e,n),D1(i.eventQueue_,e._path,t)}function bv(i,...e){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),Hi(n,...e)}function F0(i,e,n){return k0(i.serverSyncTree_,e,n)||nn.EMPTY_NODE}function L0(i,e=i.transactionQueueTree_){if(e||B0(i,e),Md(e)){const n=vI(i,e);(0,R.hu)(n.length>0,"Sending zero length transaction queue"),n.every(r=>0===r.status)&&function G2(i,e,n){const t=n.map(f=>f.currentWriteId),r=F0(i,e,t);let s=r;const o=r.hash();for(let f=0;f<n.length;f++){const b=n[f];(0,R.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const w=Is(e,b.path);s=s.updateChild(w,b.currentOutputSnapshotRaw)}const d=s.val(!0),m=e;i.server_.put(m.toString(),d,f=>{bv(i,"transaction put response",{path:m.toString(),status:f});let b=[];if("ok"===f){const w=[];for(let I=0;I<n.length;I++)n[I].status=2,b=b.concat(_m(i.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&w.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();B0(i,uv(i.transactionQueueTree_,e)),L0(i,i.transactionQueueTree_),ua(i.eventQueue_,e,b);for(let I=0;I<w.length;I++)um(w[I])}else{if("datastale"===f)for(let w=0;w<n.length;w++)n[w].status=3===n[w].status?4:0;else{fo("transaction at "+m.toString()+" failed: "+f);for(let w=0;w<n.length;w++)n[w].status=4,n[w].abortReason=f}vp(i,e)}},o)}(i,fv(e),n)}else b1(e)&&mv(e,n=>{L0(i,n)})}function vp(i,e){const n=gI(i,e),t=fv(n);return function $2(i,e,n){if(0===e.length)return;const t=[];let r=[];const o=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],f=Is(n,m.path);let w,b=!1;if((0,R.hu)(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,w=m.abortReason,r=r.concat(_m(i.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=k1)b=!0,w="maxretry",r=r.concat(_m(i.serverSyncTree_,m.currentWriteId,!0));else{const I=F0(i,m.path,o);m.currentInputSnapshot=I;const S=e[d].update(I.val());if(void 0!==S){_v("transaction failed: Data returned ",S,m.path);let F=ji(S);"object"==typeof S&&null!=S&&(0,R.r3)(S,".priority")||(F=F.updatePriority(I.getPriority()));const q=m.currentWriteId,we=M0(i),Ae=cI(F,I,we);m.currentOutputSnapshotRaw=F,m.currentOutputSnapshotResolved=Ae,m.currentWriteId=R0(i),o.splice(o.indexOf(q),1),r=r.concat(eI(i.serverSyncTree_,m.path,Ae,m.currentWriteId,m.applyLocally)),r=r.concat(_m(i.serverSyncTree_,q,!0))}else b=!0,w="nodata",r=r.concat(_m(i.serverSyncTree_,m.currentWriteId,!0))}ua(i.eventQueue_,n,r),r=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&t.push("nodata"===w?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(w),!1,null)))}B0(i,i.transactionQueueTree_);for(let d=0;d<t.length;d++)um(t[d]);L0(i,i.transactionQueueTree_)}(i,vI(i,n),t),t}function gI(i,e){let n,t=i.transactionQueueTree_;for(n=mn(e);null!==n&&void 0===Md(t);)t=uv(t,n),n=mn(e=gi(e));return t}function vI(i,e){const n=[];return bI(i,e,n),n.sort((t,r)=>t.order-r.order),n}function bI(i,e,n){const t=Md(e);if(t)for(let r=0;r<t.length;r++)n.push(t[r]);mv(e,r=>{bI(i,r,n)})}function B0(i,e){const n=Md(e);if(n){let t=0;for(let r=0;r<n.length;r++)2!==n[r].status&&(n[t]=n[r],t++);n.length=t,hv(e,n.length>0?n:void 0)}mv(e,t=>{B0(i,t)})}function yI(i,e){const n=fv(gI(i,e)),t=uv(i.transactionQueueTree_,e);return function O2(i,e,n){let t=n?i:i.parent;for(;null!==t;){if(e(t))return!0;t=t.parent}}(t,r=>{V0(i,r)}),V0(i,t),y1(t,r=>{V0(i,r)}),n}function V0(i,e){const n=Md(e);if(n){const t=[];let r=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?((0,R.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):((0,R.hu)(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(_m(i.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&t.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?hv(e,void 0):n.length=s+1,ua(i.eventQueue_,fv(e),r);for(let o=0;o<t.length;o++)um(t[o])}}const U0=function(i,e){const n=xI(i),t=n.namespace;return"firebase.com"===n.domain&&mo(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!t||"undefined"===t)&&"localhost"!==n.domain&&mo("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&fo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new fE(n.host,n.secure,t,"ws"===n.scheme||"wss"===n.scheme,e,"",t!==n.subdomain),path:new ei(n.pathString)}},xI=function(i){let e="",n="",t="",r="",s="",o=!0,d="https",m=443;if("string"==typeof i){let f=i.indexOf("//");f>=0&&(d=i.substring(0,f-1),i=i.substring(f+2));let b=i.indexOf("/");-1===b&&(b=i.length);let w=i.indexOf("?");-1===w&&(w=i.length),e=i.substring(0,Math.min(b,w)),b<w&&(r=function wI(i){let e="";const n=i.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let r=n[t];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(i.substring(b,w)));const I=function qj(i){const e={};"?"===i.charAt(0)&&(i=i.substring(1));for(const n of i.split("&")){if(0===n.length)continue;const t=n.split("=");2===t.length?e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]):fo(`Invalid query segment '${n}' in query '${i}'`)}return e}(i.substring(Math.min(i.length,w)));f=e.indexOf(":"),f>=0?(o="https"===d||"wss"===d,m=parseInt(e.substring(f+1),10)):f=e.length;const S=e.slice(0,f);if("localhost"===S.toLowerCase())n="localhost";else if(S.split(".").length<=2)n=S;else{const F=e.indexOf(".");t=e.substring(0,F).toLowerCase(),n=e.substring(F+1),s=t}"ns"in I&&(s=I.ns)}return{host:e,port:m,domain:n,subdomain:t,secure:o,scheme:d,pathString:r,namespace:s}};class q2{constructor(e,n,t,r){this.eventType=e,this.eventRegistration=n,this.snapshot=t,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Wl)(this.snapshot.exportVal())}}class Y2{constructor(e,n,t){this.eventRegistration=e,this.error=n,this.path=t}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class CI{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class ha{constructor(e,n,t,r){this._repo=e,this._path=n,this._queryParams=t,this._orderByCalled=r}get key(){return bn(this._path)?null:bE(this._path)}get ref(){return new Tc(this._repo,this._path)}get _queryIdentifier(){const e=ME(this._queryParams),n=cE(e);return"{}"===n?"default":n}get _queryObject(){return ME(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof ha))return!1;const n=this._repo===e._repo,t=s0(this._path,e._path);return n&&t&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function kM(i){let e="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)""!==i.pieces_[n]&&(e+="/"+encodeURIComponent(String(i.pieces_[n])));return e||"/"}(this._path)}}class Tc extends ha{constructor(e,n){super(e,n,new ap,!1)}get parent(){const e=TM(this._path);return null===e?null:new Tc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Nu{constructor(e,n,t){this._node=e,this.ref=n,this._index=t}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new ei(e),t=bp(this.ref,e);return new Nu(this._node.getChild(n),t,Di)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,r)=>e(new Nu(r,bp(this.ref,t),Di)))}hasChild(e){const n=new ei(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function wv(i,e){return(i=(0,R.m9)(i))._checkNotDeleted("ref"),void 0!==e?bp(i._root,e):i._root}function bp(i,e){return null===mn((i=(0,R.m9)(i))._path)?E1("child","path",e,!1):A0("child","path",e,!1),new Tc(i._repo,zi(i._path,e))}function z0(i,e){(function(i,e){if(".info"===mn(e))throw new Error(i+" failed = Can't modify data under /.info/")})("set",(i=(0,R.m9)(i))._path),function(i,e,n,t){t&&void 0===e||_v((0,R.gK)(i,"value"),e,n)}("set",e,i._path,!1);const n=new R.BH;return mI(i._repo,i._path,e,null,n.wrapCallback(()=>{})),n.promise}class yp{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const t=n._queryParams.getIndex();return new q2("value",this,new Nu(e.snapshotNode,new Tc(n._repo,n._path),t))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Y2(this,e,n):null}matches(e){return e instanceof yp&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class II{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new Y2(this,e,n):null}createEvent(e,n){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const t=bp(new Tc(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new q2(e.type,this,new Nu(e.snapshotNode,t,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof II&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function J2(i,e,n,t){return function xv(i,e,n,t,r){let s;if("object"==typeof t&&(s=void 0,r=t),"function"==typeof t&&(s=t),r&&r.onlyOnce){const m=n,f=(b,w)=>{vv(i._repo,i,d),m(b,w)};f.userCallback=n.userCallback,f.context=n.context,n=f}const o=new CI(n,s||void 0),d="value"===e?new yp(o):new II(e,o);return function j2(i,e,n){let t;t=".info"===mn(e._path)?tI(i.infoSyncTree_,e,n):tI(i.serverSyncTree_,e,n),D1(i.eventQueue_,e._path,t)}(i._repo,i,d),()=>vv(i._repo,i,d)}(i,"value",e,n,t)}(function Nj(i){(0,R.hu)(!KE,"__referenceConstructor has already been defined"),KE=i})(Tc),function Uj(i){(0,R.hu)(!JE,"__referenceConstructor has already been defined"),JE=i}(Tc);const Q={};function Ze(i,e,n,t,r){let s=t||i.options.databaseURL;void 0===s&&(i.options.projectId||mo("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hi("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let m,f,o=U0(s,r),d=o.repoInfo;typeof process<"u"&&process.env&&(f=process.env.FIREBASE_DATABASE_EMULATOR_HOST),f?(m=!0,s=`http://${f}?ns=${d.namespace}`,o=U0(s,r),d=o.repoInfo):m=!o.repoInfo.secure;const b=r&&m?new $g($g.OWNER):new OL(i.name,i.options,e);(function(i,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!pv(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),N2(i)}(n))throw new Error((0,R.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",o),bn(o.path)||mo("Database URL must point to the root of a Firebase Database (not including a child path).");const w=function Mt(i,e,n,t){let r=Q[e.name];r||(r={},Q[e.name]=r);let s=r[i.toURLString()];return s&&mo("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new B2(i,false,n,t),r[i.toURLString()]=s,s}(d,i,b,new PL(i.name,n));return new Kt(w,i)}class Kt{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function V2(i,e,n){if(i.stats_=pE(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new d0(i.repoInfo_,(t,r,s,o)=>{U2(i,t,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>H2(i,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Wl)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}i.persistentConnection_=new Su(i.repoInfo_,e,(t,r,s,o)=>{U2(i,t,r,s,o)},t=>{H2(i,t)},t=>{!function $j(i,e){ds(e,(n,t)=>{S1(i,n,t)})}(i,t)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(t=>{i.server_.refreshAuthToken(t)}),i.appCheckProvider_.addTokenChangeListener(t=>{i.server_.refreshAppCheckToken(t.token)}),i.statsReporter_=function cM(i,e){const n=i.toString();return e0[n]||(e0[n]=e()),e0[n]}(i.repoInfo_,()=>new _2(i.stats_,i.server_)),i.infoData_=new BM,i.infoSyncTree_=new d1({startListening:(t,r,s,o)=>{let d=[];const m=i.infoData_.getNode(t._path);return m.isEmpty()||(d=av(i.infoSyncTree_,t._path,m),setTimeout(()=>{o("ok")},0)),d},stopListening:()=>{}}),S1(i,"connected",!1),i.serverSyncTree_=new d1({startListening:(t,r,s,o)=>(i.server_.listen(t,s,r,(d,m)=>{const f=o(d,m);ua(i.eventQueue_,t._path,f)}),[]),stopListening:(t,r)=>{i.server_.unlisten(t,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Tc(this._repo,$n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function ct(i,e){const n=Q[e];(!n||n[i.key]!==i)&&mo(`Database ${e}(${i.repoInfo_}) has already been deleted.`),function O0(i){i.persistentConnection_&&i.persistentConnection_.interrupt("repo_interrupt")}(i),delete n[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&mo("Cannot call "+e+" on a deleted database.")}}function Il(i=(0,cn.getApp)(),e){const n=(0,cn._getProvider)(i,"database").getImmediate({identifier:e});if(!n._instanceStarted){const t=(0,R.P0)("database");t&&function wp(i,e,n,t={}){(i=(0,R.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&mo("Cannot call useEmulator() after instance has already been initialized.");const r=i._repoInternal;let s;if(r.repoInfo_.nodeAdmin)t.mockUserToken&&mo('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new $g($g.OWNER);else if(t.mockUserToken){const o="string"==typeof t.mockUserToken?t.mockUserToken:(0,R.Sg)(t.mockUserToken,i.app.options.projectId);s=new $g(o)}!function Ie(i,e,n,t){i.repoInfo_=new fE(`${e}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),t&&(i.authTokenProvider_=t)}(r,e,n,s)}(n,...t)}return n}Su.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)},Su.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)},function Cee(i){(function QA(i){eE=i})(cn.SDK_VERSION),(0,cn._registerComponent)(new cs.wA("database",(e,{instanceIdentifier:n})=>Ze(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,cn.registerVersion)(ZA,"1.0.1",i),(0,cn.registerVersion)(ZA,"1.0.1","esm2017")}();const s6={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let N1;const Dee=new Uint8Array(16);function kee(){if(!N1&&(N1=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!N1))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return N1(Dee)}const po=[];for(let i=0;i<256;++i)po.push((i+256).toString(16).slice(1));const a6=function Tee(i,e,n){if(s6.randomUUID&&!e&&!i)return s6.randomUUID();const t=(i=i||{}).random||(i.rng||kee)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=t[r];return e}return function o6(i,e=0){return(po[i[e+0]]+po[i[e+1]]+po[i[e+2]]+po[i[e+3]]+"-"+po[i[e+4]]+po[i[e+5]]+"-"+po[i[e+6]]+po[i[e+7]]+"-"+po[i[e+8]]+po[i[e+9]]+"-"+po[i[e+10]]+po[i[e+11]]+po[i[e+12]]+po[i[e+13]]+po[i[e+14]]+po[i[e+15]]).toLowerCase()}(t)};var Cv=V(6321),ti=V(2793);function nB(){return(0,yr.e)((i,e)=>{let n,t=!1;i.subscribe((0,Mi.x)(e,r=>{const s=n;n=r,t&&e.next([s,r]),t=!0}))})}var mt,iB=V(3997),ks=V(6304),c6=(V(8977),V(3399)),xp=V(7592),See=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Pd={},rB=rB||{},an=See||self;function F1(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function DI(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var sB="closure_uid_"+(1e9*Math.random()>>>0),Mee=0;function Ree(i,e,n){return i.call.apply(i.bind,arguments)}function Pee(i,e,n){if(!i)throw Error();if(2<arguments.length){var t=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,t),i.apply(e,r)}}return function(){return i.apply(e,arguments)}}function jo(i,e,n){return(jo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ree:Pee).apply(null,arguments)}function L1(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),i.apply(this,t)}}function js(i,e){function n(){}n.prototype=e.prototype,i.$=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.ac=function(t,r,s){for(var o=Array(arguments.length-2),d=2;d<arguments.length;d++)o[d-2]=arguments[d];return e.prototype[r].apply(t,o)}}function Cp(){this.s=this.s,this.o=this.o}Cp.prototype.s=!1,Cp.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Aee(i){Object.prototype.hasOwnProperty.call(i,sB)&&i[sB]||(i[sB]=++Mee)}(this)},Cp.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const l6=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1};function oB(i){const e=i.length;if(0<e){const n=Array(e);for(let t=0;t<e;t++)n[t]=i[t];return n}return[]}function d6(i,e){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(F1(t)){const r=i.length||0,s=t.length||0;i.length=r+s;for(let o=0;o<s;o++)i[r+o]=t[o]}else i.push(t)}}function Go(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}Go.prototype.h=function(){this.defaultPrevented=!0};var Nee=function(){if(!an.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{an.addEventListener("test",()=>{},e),an.removeEventListener("test",()=>{},e)}catch{}return i}();function kI(i){return/^[\s\xa0]*$/.test(i)}function B1(){var i=an.navigator;return i&&(i=i.userAgent)?i:""}function Fu(i){return-1!=B1().indexOf(i)}function aB(i){return aB[" "](i),i}aB[" "]=function(){};var lB,i,Lee=Fu("Opera"),j0=Fu("Trident")||Fu("MSIE"),u6=Fu("Edge"),cB=u6||j0,h6=Fu("Gecko")&&!(-1!=B1().toLowerCase().indexOf("webkit")&&!Fu("Edge"))&&!(Fu("Trident")||Fu("MSIE"))&&!Fu("Edge"),Bee=-1!=B1().toLowerCase().indexOf("webkit")&&!Fu("Edge");function m6(){var i=an.document;return i?i.documentMode:void 0}e:{var dB="",uB=(i=B1(),h6?/rv:([^\);]+)(\)|;)/.exec(i):u6?/Edge\/([\d\.]+)/.exec(i):j0?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Bee?/WebKit\/(\S+)/.exec(i):Lee?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(uB&&(dB=uB?uB[1]:""),j0){var hB=m6();if(null!=hB&&hB>parseFloat(dB)){lB=String(hB);break e}}lB=dB}var Vee=an.document&&j0&&(m6()||parseInt(lB,10))||void 0;function TI(i,e){if(Go.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,t=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(h6){e:{try{aB(e.nodeName);var r=!0;break e}catch{}r=!1}r||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,t?(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Uee[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&TI.$.h.call(this)}}js(TI,Go);var Uee={2:"touch",3:"pen",4:"mouse"};TI.prototype.h=function(){TI.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var SI="closure_listenable_"+(1e6*Math.random()|0),Hee=0;function zee(i,e,n,t,r){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!t,this.la=r,this.key=++Hee,this.fa=this.ia=!1}function V1(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function fB(i,e,n){for(const t in i)e.call(n,i[t],t,i)}function p6(i){const e={};for(const n in i)e[n]=i[n];return e}const _6="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function g6(i,e){let n,t;for(let r=1;r<arguments.length;r++){for(n in t=arguments[r],t)i[n]=t[n];for(let s=0;s<_6.length;s++)n=_6[s],Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}}function U1(i){this.src=i,this.g={},this.h=0}function pB(i,e){var n=e.type;if(n in i.g){var s,t=i.g[n],r=l6(t,e);(s=0<=r)&&Array.prototype.splice.call(t,r,1),s&&(V1(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function _B(i,e,n,t){for(var r=0;r<i.length;++r){var s=i[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==t)return r}return-1}U1.prototype.add=function(i,e,n,t,r){var s=i.toString();(i=this.g[s])||(i=this.g[s]=[],this.h++);var o=_B(i,e,t,r);return-1<o?(e=i[o],n||(e.ia=!1)):((e=new zee(e,this.src,s,!!t,r)).ia=n,i.push(e)),e};var gB="closure_lm_"+(1e6*Math.random()|0),vB={};function v6(i,e,n,t,r){if(t&&t.once)return y6(i,e,n,t,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)v6(i,e[s],n,t,r);return null}return n=xB(n),i&&i[SI]?i.O(e,n,DI(t)?!!t.capture:!!t,r):b6(i,e,n,!1,t,r)}function b6(i,e,n,t,r,s){if(!e)throw Error("Invalid event type");var o=DI(r)?!!r.capture:!!r,d=yB(i);if(d||(i[gB]=d=new U1(i)),(n=d.add(e,n,t,o,s)).proxy)return n;if(t=function Gee(){const e=$ee;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=t,t.src=i,t.listener=n,i.addEventListener)Nee||(r=o),void 0===r&&(r=!1),i.addEventListener(e.toString(),t,r);else if(i.attachEvent)i.attachEvent(x6(e.toString()),t);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(t)}return n}function y6(i,e,n,t,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)y6(i,e[s],n,t,r);return null}return n=xB(n),i&&i[SI]?i.P(e,n,DI(t)?!!t.capture:!!t,r):b6(i,e,n,!0,t,r)}function w6(i,e,n,t,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)w6(i,e[s],n,t,r);else t=DI(t)?!!t.capture:!!t,n=xB(n),i&&i[SI]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=_B(s=i.g[e],n,t,r))&&(V1(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete i.g[e],i.h--))):i&&(i=yB(i))&&(e=i.g[e.toString()],i=-1,e&&(i=_B(e,n,t,r)),(n=-1<i?e[i]:null)&&bB(n))}function bB(i){if("number"!=typeof i&&i&&!i.fa){var e=i.src;if(e&&e[SI])pB(e.i,i);else{var n=i.type,t=i.proxy;e.removeEventListener?e.removeEventListener(n,t,i.capture):e.detachEvent?e.detachEvent(x6(n),t):e.addListener&&e.removeListener&&e.removeListener(t),(n=yB(e))?(pB(n,i),0==n.h&&(n.src=null,e[gB]=null)):V1(i)}}}function x6(i){return i in vB?vB[i]:vB[i]="on"+i}function $ee(i,e){if(i.fa)i=!0;else{e=new TI(e,this);var n=i.listener,t=i.la||i.src;i.ia&&bB(i),i=n.call(t,e)}return i}function yB(i){return(i=i[gB])instanceof U1?i:null}var wB="__closure_events_fn_"+(1e9*Math.random()>>>0);function xB(i){return"function"==typeof i?i:(i[wB]||(i[wB]=function(e){return i.handleEvent(e)}),i[wB])}function Gs(){Cp.call(this),this.i=new U1(this),this.S=this,this.J=null}function _o(i,e){var n,t=i.J;if(t)for(n=[];t;t=t.J)n.push(t);if(i=i.S,t=e.type||e,"string"==typeof e)e=new Go(e,i);else if(e instanceof Go)e.target=e.target||i;else{var r=e;g6(e=new Go(t,i),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=H1(o,t,!0,e)&&r}if(r=H1(o=e.g=i,t,!0,e)&&r,r=H1(o,t,!1,e)&&r,n)for(s=0;s<n.length;s++)r=H1(o=e.g=n[s],t,!1,e)&&r}function H1(i,e,n,t){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var d=o.listener,m=o.la||o.src;o.ia&&pB(i.i,o),r=!1!==d.call(m,t)&&r}}return r&&!t.defaultPrevented}js(Gs,Cp),Gs.prototype[SI]=!0,Gs.prototype.removeEventListener=function(i,e,n,t){w6(this,i,e,n,t)},Gs.prototype.N=function(){if(Gs.$.N.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],t=0;t<n.length;t++)V1(n[t]);delete i.g[e],i.h--}}this.J=null},Gs.prototype.O=function(i,e,n,t){return this.i.add(String(i),e,!1,n,t)},Gs.prototype.P=function(i,e,n,t){return this.i.add(String(i),e,!0,n,t)};var CB=an.JSON.stringify;function qee(){var i=EB;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var C6=new class Wee{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Zee,i=>i.reset());class Zee{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function Kee(i){var e=1;i=i.split(":");const n=[];for(;0<e&&i.length;)n.push(i.shift()),e--;return i.length&&n.push(i.join(":")),n}function Qee(i){an.setTimeout(()=>{throw i},0)}let AI,MI=!1,EB=new class Yee{constructor(){this.h=this.g=null}add(e,n){const t=C6.get();t.set(e,n),this.h?this.h.next=t:this.g=t,this.h=t}},E6=()=>{const i=an.Promise.resolve(void 0);AI=()=>{i.then(Xee)}};var Xee=()=>{for(var i;i=qee();){try{i.h.call(i.g)}catch(n){Qee(n)}var e=C6;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}MI=!1};function z1(i,e){Gs.call(this),this.h=i||1,this.g=e||an,this.j=jo(this.qb,this),this.l=Date.now()}function IB(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}function DB(i,e,n){if("function"==typeof i)n&&(i=jo(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=jo(i.handleEvent,i)}return 2147483647<Number(e)?-1:an.setTimeout(i,e||0)}function I6(i){i.g=DB(()=>{i.g=null,i.i&&(i.i=!1,I6(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}js(z1,Gs),(mt=z1.prototype).ga=!1,mt.T=null,mt.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_o(this,"tick"),this.ga&&(IB(this),this.start()))}},mt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},mt.N=function(){z1.$.N.call(this),IB(this),delete this.g};class Jee extends Cp{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:I6(this)}N(){super.N(),this.g&&(an.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function RI(i){Cp.call(this),this.h=i,this.g={}}js(RI,Cp);var D6=[];function k6(i,e,n,t){Array.isArray(n)||(n&&(D6[0]=n.toString()),n=D6);for(var r=0;r<n.length;r++){var s=v6(e,n[r],t||i.handleEvent,!1,i.h||i);if(!s)break;i.g[s.key]=s}}function T6(i){fB(i.g,function(e,n){this.g.hasOwnProperty(n)&&bB(e)},i),i.g={}}function j1(){this.g=!0}function G0(i,e,n,t){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function ite(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var t=n[i];if(!(2>t.length)){var r=t[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return CB(n)}catch{return e}}(i,n)+(t?" "+t:"")})}RI.prototype.N=function(){RI.$.N.call(this),T6(this)},RI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},j1.prototype.Ea=function(){this.g=!1},j1.prototype.info=function(){};var Ev={},S6=null;function G1(){return S6=S6||new Gs}function A6(i){Go.call(this,Ev.Ta,i)}function PI(i){const e=G1();_o(e,new A6(e))}function M6(i,e){Go.call(this,Ev.STAT_EVENT,i),this.stat=e}function fa(i){const e=G1();_o(e,new M6(e,i))}function R6(i,e){Go.call(this,Ev.Ua,i),this.size=e}function OI(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return an.setTimeout(function(){i()},e)}Ev.Ta="serverreachability",js(A6,Go),Ev.STAT_EVENT="statevent",js(M6,Go),Ev.Ua="timingevent",js(R6,Go);var $1={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},P6={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function kB(){}function N6(){}kB.prototype.h=null;var AB,NI={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function TB(){Go.call(this,"d")}function SB(){Go.call(this,"c")}function W1(){}function FI(i,e,n,t){this.l=i,this.j=e,this.m=n,this.W=t||1,this.U=new RI(this),this.P=rte,this.V=new z1(i=cB?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new F6}function F6(){this.i=null,this.g="",this.h=!1}js(TB,Go),js(SB,Go),js(W1,kB),W1.prototype.g=function(){return new XMLHttpRequest},W1.prototype.i=function(){return{}},AB=new W1;var rte=45e3,MB={},q1={};function RB(i,e,n){i.L=1,i.v=Q1(ym(e)),i.s=n,i.S=!0,L6(i,null)}function L6(i,e){i.G=Date.now(),LI(i),i.A=ym(i.v);var n=i.A,t=i.W;Array.isArray(t)||(t=[String(t)]),q6(n.i,"t",t),i.C=0,n=i.l.J,i.h=new F6,i.g=v5(i.l,n?e:null,!i.s),0<i.O&&(i.M=new Jee(jo(i.Pa,i,i.g),i.O)),k6(i.U,i.g,"readystatechange",i.nb),e=i.I?p6(i.I):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.A,i.u,i.s,e)):(i.u="GET",i.g.ha(i.A,i.u,null,e)),PI(),function ete(i,e,n,t,r,s){i.info(function(){if(i.g)if(s)for(var o="",d=s.split("&"),m=0;m<d.length;m++){var f=d[m].split("=");if(1<f.length){var b=f[0];f=f[1];var w=b.split("_");o=2<=w.length&&"type"==w[1]?o+(b+"=")+f+"&":o+(b+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+t+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o})}(i.j,i.u,i.A,i.m,i.W,i.s)}function B6(i){return!!i.g&&"GET"==i.u&&2!=i.L&&i.l.Ha}function V6(i,e,n){let r,t=!0;for(;!i.J&&i.C<n.length;){if(r=ste(i,n),r==q1){4==e&&(i.o=4,fa(14),t=!1),G0(i.j,i.m,null,"[Incomplete Response]");break}if(r==MB){i.o=4,fa(15),G0(i.j,i.m,n,"[Invalid Chunk]"),t=!1;break}G0(i.j,i.m,r,null),PB(i,r)}B6(i)&&r!=q1&&r!=MB&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,fa(16),t=!1),i.i=i.i&&t,t?0<n.length&&!i.ba&&(i.ba=!0,(e=i.l).g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),UB(e),e.M=!0,fa(11))):(G0(i.j,i.m,n,"[Invalid Chunked Response]"),Iv(i),BI(i))}function ste(i,e){var n=i.C,t=e.indexOf("\n",n);return-1==t?q1:(n=Number(e.substring(n,t)),isNaN(n)?MB:(t+=1)+n>e.length?q1:(e=e.slice(t,t+n),i.C=t+n,e))}function LI(i){i.Y=Date.now()+i.P,U6(i,i.P)}function U6(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=OI(jo(i.lb,i),e)}function Y1(i){i.B&&(an.clearTimeout(i.B),i.B=null)}function BI(i){0==i.l.H||i.J||f5(i.l,i)}function Iv(i){Y1(i);var e=i.M;e&&"function"==typeof e.sa&&e.sa(),i.M=null,IB(i.V),T6(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function PB(i,e){try{var n=i.l;if(0!=n.H&&(n.g==i||OB(n.i,i)))if(!i.K&&OB(n.i,i)&&3==n.H){try{var t=n.Ja.g.parse(e)}catch{t=null}if(Array.isArray(t)&&3==t.length){var r=t;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<i.G))break e;iR(n),tR(n)}VB(n),fa(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=OI(jo(n.ib,n),6e3));if(1>=K6(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else kv(n,11)}else if((i.K||n.g==i)&&iR(n),!kI(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let f=r[e];if(n.V=f[0],f=f[1],2==n.H)if("c"==f[0]){n.K=f[1],n.pa=f[2];const b=f[3];null!=b&&(n.ra=b,n.l.info("VER="+n.ra));const w=f[4];null!=w&&(n.Ga=w,n.l.info("SVER="+n.Ga));const I=f[5];null!=I&&"number"==typeof I&&0<I&&(n.L=t=1.5*I,n.l.info("backChannelRequestTimeoutMs_="+t)),t=n;const S=i.g;if(S){const F=S.g?S.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=t.i;s.g||-1==F.indexOf("spdy")&&-1==F.indexOf("quic")&&-1==F.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(NB(s,s.h),s.h=null))}if(t.F){const z=S.g?S.g.getResponseHeader("X-HTTP-Session-Id"):null;z&&(t.Da=z,Zi(t.I,t.F,z))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-i.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=i;if((t=n).wa=g5(t,t.J?t.pa:null,t.Y),o.K){Q6(t.i,o);var d=o,m=t.L;m&&d.setTimeout(m),d.B&&(Y1(d),LI(d)),t.g=o}else h5(t);0<n.j.length&&nR(n)}else"stop"!=f[0]&&"close"!=f[0]||kv(n,7);else 3==n.H&&("stop"==f[0]||"close"==f[0]?"stop"==f[0]?kv(n,7):BB(n):"noop"!=f[0]&&n.h&&n.h.Aa(f),n.A=0)}PI()}catch{}}function H6(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(F1(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var n=function ate(i){if(i.ta&&"function"==typeof i.ta)return i.ta();if(!i.Z||"function"!=typeof i.Z){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(F1(i)||"string"==typeof i){var e=[];i=i.length;for(var n=0;n<i;n++)e.push(n);return e}e=[],n=0;for(const t in i)e[n++]=t;return e}}}(i),t=function ote(i){if(i.Z&&"function"==typeof i.Z)return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(F1(i)){for(var e=[],n=i.length,t=0;t<n;t++)e.push(i[t]);return e}for(t in e=[],n=0,i)e[n++]=i[t];return e}(i),r=t.length,s=0;s<r;s++)e.call(void 0,t[s],n&&n[s],i)}(mt=FI.prototype).setTimeout=function(i){this.P=i},mt.nb=function(i){i=i.target;const e=this.M;e&&3==Lu(i)?e.l():this.Pa(i)},mt.Pa=function(i){try{if(i==this.g)e:{const b=Lu(this.g);var e=this.g.Ia();if(this.g.da(),!(3>b)&&(3!=b||cB||this.g&&(this.h.h||this.g.ja()||o5(this.g)))){this.J||4!=b||7==e||PI(),Y1(this);var n=this.g.da();this.ca=n;t:if(B6(this)){var t=o5(this.g);i="";var r=t.length,s=4==Lu(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Iv(this),BI(this);var o="";break t}this.h.i=new an.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,i+=this.h.i.decode(t[e],{stream:s&&e==r-1});t.splice(0,r),this.h.g+=i,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function tte(i,e,n,t,r,s,o){i.info(function(){return"XMLHTTP RESP ("+t+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.W,b,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,m=this.g;if((d=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kI(d)){var f=d;break t}}f=null}if(!(n=f)){this.i=!1,this.o=3,fa(12),Iv(this),BI(this);break e}G0(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,PB(this,n)}this.S?(V6(this,b,o),cB&&this.i&&3==b&&(k6(this.U,this.V,"tick",this.mb),this.V.start())):(G0(this.j,this.m,o,null),PB(this,o)),4==b&&Iv(this),this.i&&!this.J&&(4==b?f5(this.l,this):(this.i=!1,LI(this)))}else(function Ite(i){const e={};i=(i.g&&2<=Lu(i)&&i.g.getAllResponseHeaders()||"").split("\r\n");for(let t=0;t<i.length;t++){if(kI(i[t]))continue;var n=Kee(i[t]);const r=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}!function jee(i,e){for(const n in i)e.call(void 0,i[n],n,i)}(e,function(t){return t.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,fa(12)):(this.o=0,fa(13)),Iv(this),BI(this)}}}catch{}},mt.mb=function(){if(this.g){var i=Lu(this.g),e=this.g.ja();this.C<e.length&&(Y1(this),V6(this,i,e),this.i&&4!=i&&LI(this))}},mt.cancel=function(){this.J=!0,Iv(this)},mt.lb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function nte(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(PI(),fa(17)),Iv(this),this.o=2,BI(this)):U6(this,this.Y-i)};var z6=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dv(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof Dv){this.h=i.h,Z1(this,i.j),this.s=i.s,this.g=i.g,K1(this,i.m),this.l=i.l;var e=i.i,n=new HI;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),j6(this,n),this.o=i.o}else i&&(e=String(i).match(z6))?(this.h=!1,Z1(this,e[1]||"",!0),this.s=VI(e[2]||""),this.g=VI(e[3]||"",!0),K1(this,e[4]),this.l=VI(e[5]||"",!0),j6(this,e[6]||"",!0),this.o=VI(e[7]||"")):(this.h=!1,this.i=new HI(null,this.h))}function ym(i){return new Dv(i)}function Z1(i,e,n){i.j=n?VI(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function K1(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function j6(i,e,n){e instanceof HI?(i.i=e,function fte(i,e){e&&!i.j&&(Ep(i),i.i=null,i.g.forEach(function(n,t){var r=t.toLowerCase();t!=r&&($6(this,t),q6(this,r,n))},i)),i.j=e}(i.i,i.h)):(n||(e=UI(e,hte)),i.i=new HI(e,i.h))}function Zi(i,e,n){i.i.set(e,n)}function Q1(i){return Zi(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function VI(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function UI(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,lte),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function lte(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Dv.prototype.toString=function(){var i=[],e=this.j;e&&i.push(UI(e,G6,!0),":");var n=this.g;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(UI(e,G6,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&i.push("/"),i.push(UI(n,"/"==n.charAt(0)?ute:dte,!0))),(n=this.i.toString())&&i.push("?",n),(n=this.o)&&i.push("#",UI(n,mte)),i.join("")};var G6=/[#\/\?@]/g,dte=/[#\?:]/g,ute=/[#\?]/g,hte=/[#\?@]/g,mte=/#/g;function HI(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ep(i){i.g||(i.g=new Map,i.h=0,i.i&&function cte(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var t=i[n].indexOf("="),r=null;if(0<=t){var s=i[n].substring(0,t);r=i[n].substring(t+1)}else s=i[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function $6(i,e){Ep(i),e=$0(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function W6(i,e){return Ep(i),e=$0(i,e),i.g.has(e)}function q6(i,e,n){$6(i,e),0<n.length&&(i.i=null,i.g.set($0(i,e),oB(n)),i.h+=n.length)}function $0(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Y6(i){this.l=i||_te,i=an.PerformanceNavigationTiming?0<(i=an.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(an.g&&an.g.Ka&&an.g.Ka()&&an.g.Ka().ec),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(mt=HI.prototype).add=function(i,e){Ep(this),this.i=null,i=$0(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},mt.forEach=function(i,e){Ep(this),this.g.forEach(function(n,t){n.forEach(function(r){i.call(e,r,t,this)},this)},this)},mt.ta=function(){Ep(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let t=0;t<e.length;t++){const r=i[t];for(let s=0;s<r.length;s++)n.push(e[t])}return n},mt.Z=function(i){Ep(this);let e=[];if("string"==typeof i)W6(this,i)&&(e=e.concat(this.g.get($0(this,i))));else{i=Array.from(this.g.values());for(let n=0;n<i.length;n++)e=e.concat(i[n])}return e},mt.set=function(i,e){return Ep(this),this.i=null,W6(this,i=$0(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},mt.get=function(i,e){return i&&0<(i=this.Z(i)).length?String(i[0]):e},mt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var t=e[n];const s=encodeURIComponent(String(t)),o=this.Z(t);for(t=0;t<o.length;t++){var r=s;""!==o[t]&&(r+="="+encodeURIComponent(String(o[t]))),i.push(r)}}return this.i=i.join("&")};var _te=10;function Z6(i){return!!i.h||!!i.g&&i.g.size>=i.j}function K6(i){return i.h?1:i.g?i.g.size:0}function OB(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function NB(i,e){i.g?i.g.add(e):i.h=e}function Q6(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function X6(i){if(null!=i.h)return i.i.concat(i.h.F);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.F);return e}return oB(i.i)}Y6.prototype.cancel=function(){if(this.i=X6(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}};var gte=class{stringify(i){return an.JSON.stringify(i,void 0)}parse(i){return an.JSON.parse(i,void 0)}};function vte(){this.g=new gte}function bte(i,e,n){const t=n||"";try{H6(i,function(r,s){let o=r;DI(r)&&(o=CB(r)),e.push(t+s+"="+encodeURIComponent(o))})}catch(r){throw e.push(t+"type="+encodeURIComponent("_badmap")),r}}function X1(i,e,n,t,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(t)}catch{}}function zI(i){this.l=i.fc||null,this.j=i.ob||!1}function J1(i,e){Gs.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=FB,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}js(zI,kB),zI.prototype.g=function(){return new J1(this.l,this.j)},zI.prototype.i=function(i){return function(){return i}}({}),js(J1,Gs);var FB=0;function J6(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}function jI(i){i.readyState=4,i.l=null,i.j=null,i.A=null,GI(i)}function GI(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(mt=J1.prototype).open=function(i,e){if(this.readyState!=FB)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,GI(this)},mt.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||an).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},mt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,jI(this)),this.readyState=FB},mt.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,GI(this)),this.g&&(this.readyState=3,GI(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof an.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;J6(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))},mt.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?jI(this):GI(this),3==this.readyState&&J6(this)}},mt.Za=function(i){this.g&&(this.response=this.responseText=i,jI(this))},mt.Ya=function(i){this.g&&(this.response=i,jI(this))},mt.ka=function(){this.g&&jI(this)},mt.setRequestHeader=function(i,e){this.v.append(i,e)},mt.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},mt.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(J1.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var wte=an.JSON.parse;function Or(i){Gs.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=e5,this.L=this.M=!1}js(Or,Gs);var e5="",xte=/^https?$/i,Cte=["POST","PUT"];function t5(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,n5(i),eR(i)}function n5(i){i.F||(i.F=!0,_o(i,"complete"),_o(i,"error"))}function r5(i){if(i.h&&typeof rB<"u"&&(!i.C[1]||4!=Lu(i)||2!=i.da()))if(i.v&&4==Lu(i))DB(i.La,0,i);else if(_o(i,"readystatechange"),4==Lu(i)){i.h=!1;try{const o=i.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var t;if(t=0===o){var r=String(i.I).match(z6)[1]||null;!r&&an.self&&an.self.location&&(r=an.self.location.protocol.slice(0,-1)),t=!xte.test(r?r.toLowerCase():"")}n=t}if(n)_o(i,"complete"),_o(i,"success");else{i.m=6;try{var s=2<Lu(i)?i.g.statusText:""}catch{s=""}i.j=s+" ["+i.da()+"]",n5(i)}}finally{eR(i)}}}function eR(i,e){if(i.g){s5(i);const n=i.g,t=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||_o(i,"ready");try{n.onreadystatechange=t}catch{}}}function s5(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(an.clearTimeout(i.A),i.A=null)}function Lu(i){return i.g?i.g.readyState:0}function o5(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case e5:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function a5(i){let e="";return fB(i,function(n,t){e+=t,e+=":",e+=n,e+="\r\n"}),e}function LB(i,e,n){e:{for(t in n){var t=!1;break e}t=!0}t||(n=a5(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Zi(i,e,n))}function $I(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function c5(i){this.Ga=0,this.j=[],this.l=new j1,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=$I("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=$I("baseRetryDelayMs",5e3,i),this.hb=$I("retryDelaySeedMs",1e4,i),this.eb=$I("forwardChannelMaxRetries",2,i),this.xa=$I("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.dc||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new Y6(i&&i.concurrentRequestLimit),this.Ja=new vte,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function BB(i){if(l5(i),3==i.H){var e=i.W++,n=ym(i.I);if(Zi(n,"SID",i.K),Zi(n,"RID",e),Zi(n,"TYPE","terminate"),WI(i,n),(e=new FI(i,i.l,e)).L=2,e.v=Q1(ym(n)),n=!1,an.navigator&&an.navigator.sendBeacon)try{n=an.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&an.Image&&((new Image).src=e.v,n=!0),n||(e.g=v5(e.l,null),e.g.ha(e.v)),e.G=Date.now(),LI(e)}_5(i)}function tR(i){i.g&&(UB(i),i.g.cancel(),i.g=null)}function l5(i){tR(i),i.u&&(an.clearTimeout(i.u),i.u=null),iR(i),i.i.cancel(),i.m&&("number"==typeof i.m&&an.clearTimeout(i.m),i.m=null)}function nR(i){if(!Z6(i.i)&&!i.m){i.m=!0;var e=i.Na;AI||E6(),MI||(AI(),MI=!0),EB.add(e,i),i.C=0}}function d5(i,e){var n;n=e?e.m:i.W++;const t=ym(i.I);Zi(t,"SID",i.K),Zi(t,"RID",n),Zi(t,"AID",i.V),WI(i,t),i.o&&i.s&&LB(t,i.o,i.s),n=new FI(i,i.l,n,i.C+1),null===i.o&&(n.I=i.s),e&&(i.j=e.F.concat(i.j)),e=u5(i,n,1e3),n.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),NB(i.i,n),RB(n,t,e)}function WI(i,e){i.na&&fB(i.na,function(n,t){Zi(e,t,n)}),i.h&&H6({},function(n,t){Zi(e,t,n)})}function u5(i,e,n){n=Math.min(i.j.length,n);var t=i.h?jo(i.h.Va,i.h,i):null;e:{var r=i.j;let s=-1;for(;;){const o=["count="+n];-1==s?0<n?(s=r[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let d=!0;for(let m=0;m<n;m++){let f=r[m].g;const b=r[m].map;if(f-=s,0>f)s=Math.max(0,r[m].g-100),d=!1;else try{bte(b,o,"req"+f+"_")}catch{t&&t(b)}}if(d){t=o.join("&");break e}}}return i=i.j.splice(0,n),e.F=i,t}function h5(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;AI||E6(),MI||(AI(),MI=!0),EB.add(e,i),i.A=0}}function VB(i){return!(i.g||i.u||3<=i.A||(i.ba++,i.u=OI(jo(i.Ma,i),p5(i,i.A)),i.A++,0))}function UB(i){null!=i.B&&(an.clearTimeout(i.B),i.B=null)}function m5(i){i.g=new FI(i,i.l,"rpc",i.ba),null===i.o&&(i.g.I=i.s),i.g.O=0;var e=ym(i.wa);Zi(e,"RID","rpc"),Zi(e,"SID",i.K),Zi(e,"AID",i.V),Zi(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&Zi(e,"TO",i.qa),Zi(e,"TYPE","xmlhttp"),WI(i,e),i.o&&i.s&&LB(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var n=i.g;i=i.pa,n.L=1,n.v=Q1(ym(e)),n.s=null,n.S=!0,L6(n,i)}function iR(i){null!=i.v&&(an.clearTimeout(i.v),i.v=null)}function f5(i,e){var n=null;if(i.g==e){iR(i),UB(i),i.g=null;var t=2}else{if(!OB(i.i,e))return;n=e.F,Q6(i.i,e),t=1}if(0!=i.H)if(e.i)if(1==t){n=e.s?e.s.length:0,e=Date.now()-e.G;var r=i.C;_o(t=G1(),new R6(t,n)),nR(i)}else h5(i);else if(3==(r=e.o)||0==r&&0<e.ca||!(1==t&&function Dte(i,e){return!(K6(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.j=e.F.concat(i.j),0):1==i.H||2==i.H||i.C>=(i.cb?0:i.eb)||(i.m=OI(jo(i.Na,i,e),p5(i,i.C)),i.C++,0)))}(i,e)||2==t&&VB(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),r){case 1:kv(i,5);break;case 4:kv(i,10);break;case 3:kv(i,6);break;default:kv(i,2)}}function p5(i,e){let n=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(n*=2),n*e}function kv(i,e){if(i.l.info("Error code "+e),2==e){var n=null;i.h&&(n=null);var t=jo(i.pb,i);n||(n=new Dv("//www.google.com/images/cleardot.gif"),an.location&&"http"==an.location.protocol||Z1(n,"https"),Q1(n)),function yte(i,e){const n=new j1;if(an.Image){const t=new Image;t.onload=L1(X1,n,t,"TestLoadImage: loaded",!0,e),t.onerror=L1(X1,n,t,"TestLoadImage: error",!1,e),t.onabort=L1(X1,n,t,"TestLoadImage: abort",!1,e),t.ontimeout=L1(X1,n,t,"TestLoadImage: timeout",!1,e),an.setTimeout(function(){t.ontimeout&&t.ontimeout()},1e4),t.src=i}else e(!1)}(n.toString(),t)}else fa(2);i.H=0,i.h&&i.h.za(e),_5(i),l5(i)}function _5(i){if(i.H=0,i.ma=[],i.h){const e=X6(i.i);(0!=e.length||0!=i.j.length)&&(d6(i.ma,e),d6(i.ma,i.j),i.i.i.length=0,oB(i.j),i.j.length=0),i.h.ya()}}function g5(i,e,n){var t=n instanceof Dv?ym(n):new Dv(n);if(""!=t.g)e&&(t.g=e+"."+t.g),K1(t,t.m);else{var r=an.location;t=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new Dv(null);t&&Z1(s,t),e&&(s.g=e),r&&K1(s,r),n&&(s.l=n),t=s}return e=i.Da,(n=i.F)&&e&&Zi(t,n,e),Zi(t,"VER",i.ra),WI(i,t),t}function v5(i,e,n){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Or(n&&i.Ha&&!i.va?new zI({ob:!0}):i.va)).Oa(i.J),e}function b5(){}function rR(){if(j0&&!(10<=Number(Vee)))throw Error("Environmental error: no available transport.")}function Sc(i,e){Gs.call(this),this.g=new c5(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!kI(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!kI(e)&&(this.g.F=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new W0(this)}function y5(i){TB.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function w5(){SB.call(this),this.status=1}function W0(i){this.g=i}function Od(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function HB(i,e,n){n||(n=0);var t=Array(16);if("string"==typeof e)for(var r=0;16>r;++r)t[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)t[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;var s=i.g[3],o=(e=i.g[0])+(s^(n=i.g[1])&((r=i.g[2])^s))+t[0]+3614090360&4294967295;o=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=(n=(r=(s=(e=n+(o<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+t[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+t[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+t[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+t[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+t[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+t[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+t[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+t[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+t[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+t[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+t[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^n&(r^s))+t[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^e&(n^r))+t[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(e^n))+t[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(e^r&(s^e))+t[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(r^s&(n^r))+t[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+t[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+t[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+t[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+t[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+t[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+t[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+t[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+t[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+t[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+t[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+t[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(r^s&(n^r))+t[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(e^n))+t[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(e^n&(s^e))+t[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^e&(r^s))+t[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(n^r^s)+t[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+t[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+t[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+t[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+t[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+t[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+t[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+t[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+t[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+t[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+t[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+t[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(n^r^s)+t[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^n^r)+t[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^e^n)+t[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^e)+t[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(r^(n|~s))+t[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+t[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+t[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+t[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+t[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+t[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+t[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+t[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(r^(n|~s))+t[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+t[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(e^(s|~n))+t[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~e))+t[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=n+((o=e+(r^(n|~s))+t[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(e|~r))+t[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(e^(s|~n))+t[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+t[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,i.g[2]=i.g[2]+r&4294967295,i.g[3]=i.g[3]+s&4294967295}function bi(i,e){this.h=e;for(var n=[],t=!0,r=i.length-1;0<=r;r--){var s=0|i[r];t&&s==e||(n[r]=s,t=!1)}this.g=n}(mt=Or.prototype).Oa=function(i){this.M=i},mt.ha=function(i,e,n,t){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():AB.g(),this.C=function O6(i){return i.h||(i.h=i.i())}(this.u?this.u:AB),this.g.onreadystatechange=jo(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(s){return void t5(this,s)}if(i=n||"",n=new Map(this.headers),t)if(Object.getPrototypeOf(t)===Object.prototype)for(var r in t)n.set(r,t[r]);else{if("function"!=typeof t.keys||"function"!=typeof t.get)throw Error("Unknown input type for opt_headers: "+String(t));for(const s of t.keys())n.set(s,t.get(s))}t=Array.from(n.keys()).find(s=>"content-type"==s.toLowerCase()),r=an.FormData&&i instanceof an.FormData,!(0<=l6(Cte,e))||t||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{s5(this),0<this.B&&((this.L=function Ete(i){return j0&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=jo(this.ua,this)):this.A=DB(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(s){t5(this,s)}},mt.ua=function(){typeof rB<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_o(this,"timeout"),this.abort(8))},mt.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,_o(this,"complete"),_o(this,"abort"),eR(this))},mt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),eR(this,!0)),Or.$.N.call(this)},mt.La=function(){this.s||(this.G||this.v||this.l?r5(this):this.kb())},mt.kb=function(){r5(this)},mt.isActive=function(){return!!this.g},mt.da=function(){try{return 2<Lu(this)?this.g.status:-1}catch{return-1}},mt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},mt.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),wte(e)}},mt.Ia=function(){return this.m},mt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(mt=c5.prototype).ra=8,mt.H=1,mt.Na=function(i){if(this.m)if(this.m=null,1==this.H){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const r=new FI(this,this.l,i);let s=this.s;if(this.U&&(s?(s=p6(s),g6(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){var t=this.j[n];if(void 0===(t="__data__"in t.map&&"string"==typeof(t=t.map.__data__)?t.length:void 0))break;if(4096<(e+=t)){e=n;break e}if(4096===e||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=u5(this,r,e),Zi(n=ym(this.I),"RID",i),Zi(n,"CVER",22),this.F&&Zi(n,"X-HTTP-Session-Id",this.F),WI(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(a5(s)))+"&"+e:this.o&&LB(n,this.o,s)),NB(this.i,r),this.bb&&Zi(n,"TYPE","init"),this.P?(Zi(n,"$req",e),Zi(n,"SID","null"),r.aa=!0,RB(r,n,null)):RB(r,n,e),this.H=2}}else 3==this.H&&(i?d5(this,i):0==this.j.length||Z6(this.i)||d5(this))},mt.Ma=function(){if(this.u=null,m5(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=OI(jo(this.jb,this),i)}},mt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,fa(10),tR(this),m5(this))},mt.ib=function(){null!=this.v&&(this.v=null,tR(this),VB(this),fa(19))},mt.pb=function(i){i?(this.l.info("Successfully pinged google.com"),fa(2)):(this.l.info("Failed to ping google.com"),fa(1))},mt.isActive=function(){return!!this.h&&this.h.isActive(this)},(mt=b5.prototype).Ba=function(){},mt.Aa=function(){},mt.za=function(){},mt.ya=function(){},mt.isActive=function(){return!0},mt.Va=function(){},rR.prototype.g=function(i,e){return new Sc(i,e)},js(Sc,Gs),Sc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,n=this.h||void 0;fa(0),i.Y=e,i.na=n||{},i.G=i.aa,i.I=g5(i,null,i.Y),nR(i)},Sc.prototype.close=function(){BB(this.g)},Sc.prototype.u=function(i){var e=this.g;if("string"==typeof i){var n={};n.__data__=i,i=n}else this.v&&((n={}).__data__=CB(i),i=n);e.j.push(new class{constructor(i,e){this.g=i,this.map=e}}(e.fb++,i)),3==e.H&&nR(e)},Sc.prototype.N=function(){this.g.h=null,delete this.j,BB(this.g),delete this.g,Sc.$.N.call(this)},js(y5,TB),js(w5,SB),js(W0,b5),W0.prototype.Ba=function(){_o(this.g,"a")},W0.prototype.Aa=function(i){_o(this.g,new y5(i))},W0.prototype.za=function(i){_o(this.g,new w5)},W0.prototype.ya=function(){_o(this.g,"b")},js(Od,function kte(){this.blockSize=-1}),Od.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Od.prototype.j=function(i,e){void 0===e&&(e=i.length);for(var n=e-this.blockSize,t=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)HB(this,i,s),s+=this.blockSize;if("string"==typeof i){for(;s<e;)if(t[r++]=i.charCodeAt(s++),r==this.blockSize){HB(this,t),r=0;break}}else for(;s<e;)if(t[r++]=i[s++],r==this.blockSize){HB(this,t),r=0;break}}this.h=r,this.i+=e},Od.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var n=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=255&n,n/=256;for(this.j(i),i=Array(16),e=n=0;4>e;++e)for(var t=0;32>t;t+=8)i[n++]=this.g[e]>>>t&255;return i};var Tte={};function zB(i){return-128<=i&&128>i?function Fee(i,e){var n=Tte;return Object.prototype.hasOwnProperty.call(n,i)?n[i]:n[i]=e(i)}(i,function(e){return new bi([0|e],0>e?-1:0)}):new bi([0|i],0>i?-1:0)}function Bu(i){if(isNaN(i)||!isFinite(i))return q0;if(0>i)return go(Bu(-i));for(var e=[],n=1,t=0;i>=n;t++)e[t]=i/n|0,n*=jB;return new bi(e,0)}var jB=4294967296,q0=zB(0),GB=zB(1),C5=zB(16777216);function wm(i){if(0!=i.h)return!1;for(var e=0;e<i.g.length;e++)if(0!=i.g[e])return!1;return!0}function Dl(i){return-1==i.h}function go(i){for(var e=i.g.length,n=[],t=0;t<e;t++)n[t]=~i.g[t];return new bi(n,~i.h).add(GB)}function sR(i,e){return i.add(go(e))}function oR(i,e){for(;(65535&i[e])!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function qI(i,e){this.g=i,this.h=e}function aR(i,e){if(wm(e))throw Error("division by zero");if(wm(i))return new qI(q0,q0);if(Dl(i))return e=aR(go(i),e),new qI(go(e.g),go(e.h));if(Dl(e))return e=aR(i,go(e)),new qI(go(e.g),e.h);if(30<i.g.length){if(Dl(i)||Dl(e))throw Error("slowDivide_ only works with positive integers.");for(var n=GB,t=e;0>=t.X(i);)n=E5(n),t=E5(t);var r=Y0(n,1),s=Y0(t,1);for(t=Y0(t,2),n=Y0(n,2);!wm(t);){var o=s.add(t);0>=o.X(i)&&(r=r.add(n),s=o),t=Y0(t,1),n=Y0(n,1)}return e=sR(i,r.R(e)),new qI(r,e)}for(r=q0;0<=i.X(e);){for(n=Math.max(1,Math.floor(i.ea()/e.ea())),t=48>=(t=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,t-48),o=(s=Bu(n)).R(e);Dl(o)||0<o.X(i);)o=(s=Bu(n-=t)).R(e);wm(s)&&(s=GB),r=r.add(s),i=sR(i,o)}return new qI(r,i)}function E5(i){for(var e=i.g.length+1,n=[],t=0;t<e;t++)n[t]=i.D(t)<<1|i.D(t-1)>>>31;return new bi(n,i.h)}function Y0(i,e){var n=e>>5;e%=32;for(var t=i.g.length-n,r=[],s=0;s<t;s++)r[s]=0<e?i.D(s+n)>>>e|i.D(s+n+1)<<32-e:i.D(s+n);return new bi(r,i.h)}(mt=bi.prototype).ea=function(){if(Dl(this))return-go(this).ea();for(var i=0,e=1,n=0;n<this.g.length;n++){var t=this.D(n);i+=(0<=t?t:jB+t)*e,e*=jB}return i},mt.toString=function(i){if(2>(i=i||10)||36<i)throw Error("radix out of range: "+i);if(wm(this))return"0";if(Dl(this))return"-"+go(this).toString(i);for(var e=Bu(Math.pow(i,6)),n=this,t="";;){var r=aR(n,e).g,s=((0<(n=sR(n,r.R(e))).g.length?n.g[0]:n.h)>>>0).toString(i);if(wm(n=r))return s+t;for(;6>s.length;)s="0"+s;t=s+t}},mt.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h},mt.X=function(i){return Dl(i=sR(this,i))?-1:wm(i)?0:1},mt.abs=function(){return Dl(this)?go(this):this},mt.add=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],t=0,r=0;r<=e;r++){var s=t+(65535&this.D(r))+(65535&i.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(i.D(r)>>>16);t=o>>>16,n[r]=(o&=65535)<<16|(s&=65535)}return new bi(n,-2147483648&n[n.length-1]?-1:0)},mt.R=function(i){if(wm(this)||wm(i))return q0;if(Dl(this))return Dl(i)?go(this).R(go(i)):go(go(this).R(i));if(Dl(i))return go(this.R(go(i)));if(0>this.X(C5)&&0>i.X(C5))return Bu(this.ea()*i.ea());for(var e=this.g.length+i.g.length,n=[],t=0;t<2*e;t++)n[t]=0;for(t=0;t<this.g.length;t++)for(var r=0;r<i.g.length;r++){var s=this.D(t)>>>16,o=65535&this.D(t),d=i.D(r)>>>16,m=65535&i.D(r);n[2*t+2*r]+=o*m,oR(n,2*t+2*r),n[2*t+2*r+1]+=s*m,oR(n,2*t+2*r+1),n[2*t+2*r+1]+=o*d,oR(n,2*t+2*r+1),n[2*t+2*r+2]+=s*d,oR(n,2*t+2*r+2)}for(t=0;t<e;t++)n[t]=n[2*t+1]<<16|n[2*t];for(t=e;t<2*e;t++)n[t]=0;return new bi(n,0)},mt.gb=function(i){return aR(this,i).h},mt.and=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],t=0;t<e;t++)n[t]=this.D(t)&i.D(t);return new bi(n,this.h&i.h)},mt.or=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],t=0;t<e;t++)n[t]=this.D(t)|i.D(t);return new bi(n,this.h|i.h)},mt.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),n=[],t=0;t<e;t++)n[t]=this.D(t)^i.D(t);return new bi(n,this.h^i.h)},rR.prototype.createWebChannel=rR.prototype.g,Sc.prototype.send=Sc.prototype.u,Sc.prototype.open=Sc.prototype.m,Sc.prototype.close=Sc.prototype.close,$1.NO_ERROR=0,$1.TIMEOUT=8,$1.HTTP_ERROR=6,P6.COMPLETE="complete",N6.EventType=NI,NI.OPEN="a",NI.CLOSE="b",NI.ERROR="c",NI.MESSAGE="d",Gs.prototype.listen=Gs.prototype.O,Or.prototype.listenOnce=Or.prototype.P,Or.prototype.getLastError=Or.prototype.Sa,Or.prototype.getLastErrorCode=Or.prototype.Ia,Or.prototype.getStatus=Or.prototype.da,Or.prototype.getResponseJson=Or.prototype.Wa,Or.prototype.getResponseText=Or.prototype.ja,Or.prototype.send=Or.prototype.ha,Or.prototype.setWithCredentials=Or.prototype.Oa,Od.prototype.digest=Od.prototype.l,Od.prototype.reset=Od.prototype.reset,Od.prototype.update=Od.prototype.j,bi.prototype.add=bi.prototype.add,bi.prototype.multiply=bi.prototype.R,bi.prototype.modulo=bi.prototype.gb,bi.prototype.compare=bi.prototype.X,bi.prototype.toNumber=bi.prototype.ea,bi.prototype.toString=bi.prototype.toString,bi.prototype.getBits=bi.prototype.D,bi.fromNumber=Bu,bi.fromString=function x5(i,e){if(0==i.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==i.charAt(0))return go(x5(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Bu(Math.pow(e,8)),t=q0,r=0;r<i.length;r+=8){var s=Math.min(8,i.length-r),o=parseInt(i.substring(r,r+s),e);8>s?(s=Bu(Math.pow(e,s)),t=t.R(s).add(Bu(o))):t=(t=t.R(n)).add(Bu(o))}return t};var D5,k5,T5,S5,A5,R5,P5,O5,N5,F5,L5,B5,V5,U5,H5,z5,j5,G5,$5,W5,q5,Y5,Z5,K5,Q5,X5,J5,eG,tG,nG,iG,rG,sG,oG,aG,cG,lG,dG,uG,hG,mG,fG,pG,Ste=Pd.createWebChannelTransport=function(){return new rR},Ate=Pd.getStatEventTarget=function(){return G1()},$B=Pd.ErrorCode=$1,Mte=Pd.EventType=P6,Rte=Pd.Event=Ev,I5=Pd.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Pte=Pd.FetchXmlHttpFactory=zI,cR=Pd.WebChannel=N6,Ote=Pd.XhrIo=Or,Nte=Pd.Md5=Od,Z0=Pd.Integer=bi;const _G="@firebase/firestore";class $s{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}$s.UNAUTHENTICATED=new $s(null),$s.GOOGLE_CREDENTIALS=new $s("google-credentials-uid"),$s.FIRST_PARTY=new $s("first-party-uid"),$s.MOCK_USER=new $s("mock-user");let K0="9.23.0";const Ip=new Cs.Yd("@firebase/firestore");function WB(){return Ip.logLevel}function Ke(i,...e){if(Ip.logLevel<=Cs.in.DEBUG){const n=e.map(qB);Ip.debug(`Firestore (${K0}): ${i}`,...n)}}function qr(i,...e){if(Ip.logLevel<=Cs.in.ERROR){const n=e.map(qB);Ip.error(`Firestore (${K0}): ${i}`,...n)}}function kl(i,...e){if(Ip.logLevel<=Cs.in.WARN){const n=e.map(qB);Ip.warn(`Firestore (${K0}): ${i}`,...n)}}function qB(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch{return i}}function xt(i="Unexpected state"){const e=`FIRESTORE (${K0}) INTERNAL ASSERTION FAILED: `+i;throw qr(e),new Error(e)}function Rt(i,e){i||xt()}function ut(i,e){return i}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ge extends R.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ts{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class gG{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Bte{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n($s.UNAUTHENTICATED))}shutdown(){}}class Vte{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Ute{constructor(e){this.t=e,this.currentUser=$s.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var t=this;let r=this.i;const s=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let o=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ts,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const f=o;e.enqueueRetryable((0,ee.Z)(function*(){yield f.promise,yield s(t.currentUser)}))},m=f=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(f=>m(f)),setTimeout(()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?m(f):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ts)}},0),d()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(t=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Rt("string"==typeof t.accessToken),new gG(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new $s(e)}}class Hte{constructor(e,n,t){this.h=e,this.l=n,this.m=t,this.type="FirstParty",this.user=$s.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class zte{constructor(e,n,t){this.h=e,this.l=n,this.m=t}getToken(){return Promise.resolve(new Hte(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n($s.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class vG{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class jte{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,n){const t=s=>{null!=s.error&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.T;return this.T=s.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>t(s))};const r=s=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?r(s):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Rt("string"==typeof n.token),this.T=n.token,new vG(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Gte(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let t=0;t<i;t++)n[t]=Math.floor(256*Math.random());return n}class bG{static A(){const n=62*Math.floor(256/62);let t="";for(;t.length<20;){const r=Gte(40);for(let s=0;s<r.length;++s)t.length<20&&r[s]<n&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[s]%62))}return t}}function rn(i,e){return i<e?-1:i>e?1:0}function Q0(i,e,n){return i.length===e.length&&i.every((t,r)=>n(t,e[r]))}function yG(i){return i+"\0"}class cr{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ge(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ge(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Ge(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ge(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return cr.fromMillis(Date.now())}static fromDate(e){return cr.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),t=Math.floor(1e6*(e-1e3*n));return new cr(n,t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rn(this.nanoseconds,e.nanoseconds):rn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new cr(0,0))}static max(){return new Ot(new cr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class YI{constructor(e,n,t){void 0===n?n=0:n>e.length&&xt(),void 0===t?t=e.length-n:t>e.length-n&&xt(),this.segments=e,this.offset=n,this.len=t}get length(){return this.len}isEqual(e){return 0===YI.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof YI?e.forEach(t=>{n.push(t)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,t=this.limit();n<t;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const t=Math.min(e.length,n.length);for(let r=0;r<t;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Wn extends YI{construct(e,n,t){return new Wn(e,n,t)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const t of e){if(t.indexOf("//")>=0)throw new Ge(ge.INVALID_ARGUMENT,`Invalid segment (${t}). Paths must not contain // in them.`);n.push(...t.split("/").filter(r=>r.length>0))}return new Wn(n)}static emptyPath(){return new Wn([])}}const $te=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nr extends YI{construct(e,n,t){return new Nr(e,n,t)}static isValidIdentifier(e){return $te.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nr(["__name__"])}static fromServerFormat(e){const n=[];let t="",r=0;const s=()=>{if(0===t.length)throw new Ge(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(t),t=""};let o=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new Ge(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[r+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Ge(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);t+=m,r+=2}else"`"===d?(o=!o,r++):"."!==d||o?(t+=d,r++):(s(),r++)}if(s(),o)throw new Ge(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nr(n)}static emptyPath(){return new Nr([])}}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(Wn.fromString(e))}static fromName(e){return new lt(Wn.fromString(e).popFirst(5))}static empty(){return new lt(Wn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Wn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new Wn(e.slice()))}}class lR{constructor(e,n,t,r){this.indexId=e,this.collectionGroup=n,this.fields=t,this.indexState=r}}function YB(i){return i.fields.find(e=>2===e.kind)}function Tv(i){return i.fields.filter(e=>2!==e.kind)}lR.UNKNOWN_ID=-1;class dR{constructor(e,n){this.fieldPath=e,this.kind=n}}class ZI{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ZI(0,Ac.min())}}function wG(i,e){const n=i.toTimestamp().seconds,t=i.toTimestamp().nanoseconds+1,r=Ot.fromTimestamp(1e9===t?new cr(n+1,0):new cr(n,t));return new Ac(r,lt.empty(),e)}function xG(i){return new Ac(i.readTime,i.key,-1)}class Ac{constructor(e,n,t){this.readTime=e,this.documentKey=n,this.largestBatchId=t}static min(){return new Ac(Ot.min(),lt.empty(),-1)}static max(){return new Ac(Ot.max(),lt.empty(),-1)}}function ZB(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=lt.comparator(i.documentKey,e.documentKey),0!==n?n:rn(i.largestBatchId,e.largestBatchId))}const CG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Dp(i){return(D5=D5||(0,ee.Z)(function*(e){if(e.code!==ge.FAILED_PRECONDITION||e.message!==CG)throw e;Ke("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new de((t,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(t,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(t,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof de?n:de.resolve(n)}catch(n){return de.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):de.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):de.reject(n)}static resolve(e){return new de((n,t)=>{n(e)})}static reject(e){return new de((n,t)=>{t(e)})}static waitFor(e){return new de((n,t)=>{let r=0,s=0,o=!1;e.forEach(d=>{++r,d.next(()=>{++s,o&&s===r&&n()},m=>t(m))}),o=!0,s===r&&n()})}static or(e){let n=de.resolve(!1);for(const t of e)n=n.next(r=>r?de.resolve(r):t());return n}static forEach(e,n){const t=[];return e.forEach((r,s)=>{t.push(n.call(this,r,s))}),this.waitFor(t)}static mapArray(e,n){return new de((t,r)=>{const s=e.length,o=new Array(s);let d=0;for(let m=0;m<s;m++){const f=m;n(e[f]).next(b=>{o[f]=b,++d,d===s&&t(o)},b=>r(b))}})}static doWhile(e,n){return new de((t,r)=>{const s=()=>{!0===e()?n().next(()=>{s()},r):t()};s()})}}class uR{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.v=new Ts,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{n.error?this.v.reject(new KI(e,n.error)):this.v.resolve()},this.transaction.onerror=t=>{const r=KB(t.target.error);this.v.reject(new KI(e,r))}}static open(e,n,t,r){try{return new uR(n,e.transaction(r,t))}catch(s){throw new KI(n,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Zte(n)}}class Nd{constructor(e,n,t){this.name=e,this.version=n,this.V=t,12.2===Nd.S((0,R.z$)())&&qr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ke("SimpleDb","Removing database:",e),Sv(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,R.hl)())return!1;if(Nd.C())return!0;const e=(0,R.z$)(),n=Nd.S(e),t=0<n&&n<10,r=Nd.N(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||t||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(t)}static N(e){const n=e.match(/Android ([\d.]+)/i),t=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(t)}$(e){var n=this;return(0,ee.Z)(function*(){return n.db||(Ke("SimpleDb","Opening database:",n.name),n.db=yield new Promise((t,r)=>{const s=indexedDB.open(n.name,n.version);s.onsuccess=o=>{t(o.target.result)},s.onblocked=()=>{r(new KI(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const d=o.target.error;r("VersionError"===d.name?new Ge(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ge(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new KI(e,d))},s.onupgradeneeded=o=>{Ke("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',o.oldVersion),n.V.O(o.target.result,s.transaction,o.oldVersion,n.version).next(()=>{Ke("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.F&&(n.db.onversionchange=t=>n.F(t)),n.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,t,r){var s=this;return(0,ee.Z)(function*(){const o="readonly"===n;let d=0;for(;;){++d;try{s.db=yield s.$(e);const m=uR.open(s.db,e,o?"readonly":"readwrite",t),f=r(m).next(b=>(m.P(),b)).catch(b=>(m.abort(b),de.reject(b))).toPromise();return f.catch(()=>{}),yield m.R,f}catch(m){const f=m,b="FirebaseError"!==f.name&&d<3;if(Ke("SimpleDb","Transaction failed with error:",f.message,"Retrying:",b),s.close(),!b)return Promise.reject(f)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Yte{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Sv(this.L.delete())}}class KI extends Ge{constructor(e,n){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function kp(i){return"IndexedDbTransactionError"===i.name}class Zte{constructor(e){this.store=e}put(e,n){let t;return void 0!==n?(Ke("SimpleDb","PUT",this.store.name,e,n),t=this.store.put(n,e)):(Ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),t=this.store.put(e)),Sv(t)}add(e){return Ke("SimpleDb","ADD",this.store.name,e,e),Sv(this.store.add(e))}get(e){return Sv(this.store.get(e)).next(n=>(void 0===n&&(n=null),Ke("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Ke("SimpleDb","DELETE",this.store.name,e),Sv(this.store.delete(e))}count(){return Ke("SimpleDb","COUNT",this.store.name),Sv(this.store.count())}j(e,n){const t=this.options(e,n);if(t.index||"function"!=typeof this.store.getAll){const r=this.cursor(t),s=[];return this.W(r,(o,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(t.range);return new de((s,o)=>{r.onerror=d=>{o(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}H(e,n){const t=this.store.getAll(e,null===n?void 0:n);return new de((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{r(o.target.result)}})}J(e,n){Ke("SimpleDb","DELETE ALL",this.store.name);const t=this.options(e,n);t.Y=!1;const r=this.cursor(t);return this.W(r,(s,o,d)=>d.delete())}X(e,n){let t;n?t=e:(t={},n=e);const r=this.cursor(t);return this.W(r,n)}Z(e){const n=this.cursor({});return new de((t,r)=>{n.onerror=s=>{const o=KB(s.target.error);r(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(d=>{d?o.continue():t()}):t()}})}W(e,n){const t=[];return new de((r,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const d=o.target.result;if(!d)return void r();const m=new Yte(d),f=n(d.primaryKey,d.value,m);if(f instanceof de){const b=f.catch(w=>(m.done(),de.reject(w)));t.push(b)}m.isDone?r():null===m.K?d.continue():d.continue(m.K)}}).next(()=>de.waitFor(t))}options(e,n){let t;return void 0!==e&&("string"==typeof e?t=e:n=e),{index:t,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const t=this.store.index(e.index);return e.Y?t.openKeyCursor(e.range,n):t.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Sv(i){return new de((e,n)=>{i.onsuccess=t=>{e(t.target.result)},i.onerror=t=>{const r=KB(t.target.error);n(r)}})}let IG=!1;function KB(i){const e=Nd.S((0,R.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const t=new Ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return IG||(IG=!0,setTimeout(()=>{throw t},0)),t}}return i}class Kte{constructor(e,n){this.asyncQueue=e,this.tt=n,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var n=this;Ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ee.Z)(function*(){n.task=null;try{Ke("IndexBackiller",`Documents written: ${yield n.tt.nt()}`)}catch(t){kp(t)?Ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",t):yield Dp(t)}yield n.et(6e4)}))}}class Qte{constructor(e,n){this.localStore=e,this.persistence=n}nt(e=50){var n=this;return(0,ee.Z)(function*(){return n.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>n.st(t,e))})()}st(e,n){const t=new Set;let r=n,s=!0;return de.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!t.has(o))return Ke("IndexBackiller",`Processing collection: ${o}`),this.it(e,o,r).next(d=>{r-=d,t.add(o)});s=!1})).next(()=>n-r)}it(e,n,t){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(r=>this.localStore.localDocuments.getNextDocuments(e,n,r,t).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.rt(r,s)).next(d=>(Ke("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,n,d))).next(()=>o.size)}))}rt(e,n){let t=e;return n.changes.forEach((r,s)=>{const o=xG(s);ZB(o,t)>0&&(t=o)}),new Ac(t.readTime,t.documentKey,Math.max(n.batchId,e.largestBatchId))}}let Mc=(()=>{class i{constructor(n,t){this.previousValue=n,t&&(t.sequenceNumberHandler=r=>this.ot(r),this.ut=r=>t.writeSequenceNumber(r))}ot(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){const n=++this.previousValue;return this.ut&&this.ut(n),n}}return i.ct=-1,i})();function QI(i){return null==i}function XI(i){return 0===i&&1/i==-1/0}function DG(i){return"number"==typeof i&&Number.isInteger(i)&&!XI(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}function $o(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=kG(e)),e=Xte(i.get(n),e);return kG(e)}function Xte(i,e){let n=e;const t=i.length;for(let r=0;r<t;r++){const s=i.charAt(r);switch(s){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=s}}return n}function kG(i){return i+"\x01\x01"}function Vu(i){const e=i.length;if(Rt(e>=2),2===e)return Rt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Wn.emptyPath();const n=e-2,t=[];let r="";for(let s=0;s<e;){const o=i.indexOf("\x01",s);switch((o<0||o>n)&&xt(),i.charAt(o+1)){case"\x01":const d=i.substring(s,o);let m;0===r.length?m=d:(r+=d,m=r,r=""),t.push(m);break;case"\x10":r+=i.substring(s,o),r+="\0";break;case"\x11":r+=i.substring(s,o+1);break;default:xt()}s=o+2}return new Wn(t)}const TG=["userId","batchId"];function hR(i,e){return[i,$o(e)]}function SG(i,e,n){return[i,$o(e),n]}const Jte={},ene=["prefixPath","collectionGroup","readTime","documentId"],tne=["prefixPath","collectionGroup","documentId"],nne=["collectionGroup","readTime","prefixPath","documentId"],ine=["canonicalId","targetId"],rne=["targetId","path"],sne=["path","targetId"],one=["collectionId","parent"],ane=["indexId","uid"],cne=["uid","sequenceNumber"],lne=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dne=["indexId","uid","orderedDocumentKey"],une=["userId","collectionPath","documentId"],hne=["userId","collectionPath","largestBatchId"],mne=["userId","collectionGroup","largestBatchId"],AG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fne=[...AG,"documentOverlays"],MG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RG=MG,pne=[...RG,"indexConfiguration","indexState","indexEntries"];class QB extends EG{constructor(e,n){super(),this.ht=e,this.currentSequenceNumber=n}}function Ws(i,e){const n=ut(i);return Nd.M(n.ht,e)}function PG(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Tp(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function OG(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class Gi{constructor(e,n){this.comparator=e,this.root=n||vo.EMPTY}insert(e,n){return new Gi(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,vo.BLACK,null,null))}remove(e){return new Gi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vo.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const t=this.comparator(e,n.key);if(0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}indexOf(e){let n=0,t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return n+t.left.size;r<0?t=t.left:(n+=t.left.size+1,t=t.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,t)=>(e(n,t),!1))}toString(){const e=[];return this.inorderTraversal((n,t)=>(e.push(`${n}:${t}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new mR(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new mR(this.root,e,this.comparator,!1)}getReverseIterator(){return new mR(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new mR(this.root,e,this.comparator,!0)}}class mR{constructor(e,n,t,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?t(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vo{constructor(e,n,t,r,s){this.key=e,this.value=n,this.color=t??vo.RED,this.left=r??vo.EMPTY,this.right=s??vo.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,t,r,s){return new vo(e??this.key,n??this.value,t??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,t){let r=this;const s=t(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,t),null):0===s?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,t)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vo.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let t,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===n(e,r.key)){if(r.right.isEmpty())return vo.EMPTY;t=r.right.min(),r=r.copy(t.key,t.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vo.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}vo.EMPTY=null,vo.RED=!0,vo.BLACK=!1,vo.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(i,e,n,t,r){return this}insert(i,e,n){return new vo(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Ki{constructor(e){this.comparator=e,this.data=new Gi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,t)=>(e(n),!1))}forEachInRange(e,n){const t=this.data.getIteratorFrom(e[0]);for(;t.hasNext();){const r=t.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let t;for(t=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();t.hasNext();)if(!e(t.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new NG(this.data.getIterator())}getIteratorFrom(e){return new NG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(t=>{n=n.add(t)}),n}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const n=this.data.getIterator(),t=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=t.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ki(this.comparator);return n.data=e,n}}class NG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function X0(i){return i.hasNext()?i.getNext():void 0}class Ga{constructor(e){this.fields=e,e.sort(Nr.comparator)}static empty(){return new Ga([])}unionWith(e){let n=new Ki(Nr.comparator);for(const t of this.fields)n=n.add(t);for(const t of e)n=n.add(t);return new Ga(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Q0(this.fields,e.fields,(n,t)=>n.isEqual(t))}}class FG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ss{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(t){try{return atob(t)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new FG("Invalid base64 string: "+r):r}}(e);return new Ss(n)}static fromUint8Array(e){const n=function(t){let r="";for(let s=0;s<t.length;++s)r+=String.fromCharCode(t[s]);return r}(e);return new Ss(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ss.EMPTY_BYTE_STRING=new Ss("");const gne=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sp(i){if(Rt(!!i),"string"==typeof i){let e=0;const n=gne.exec(i);if(Rt(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const t=new Date(i);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}return{seconds:Fr(i.seconds),nanos:Fr(i.nanos)}}function Fr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function xm(i){return"string"==typeof i?Ss.fromBase64String(i):Ss.fromUint8Array(i)}function fR(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=i?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function pR(i){const e=i.mapValue.fields.__previous_value__;return fR(e)?pR(e):e}function JI(i){const e=Sp(i.mapValue.fields.__local_write_time__.timestampValue);return new cr(e.seconds,e.nanos)}class vne{constructor(e,n,t,r,s,o,d,m,f){this.databaseId=e,this.appId=n,this.persistenceKey=t,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=f}}class Ap{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ap("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Ap&&e.projectId===this.projectId&&e.database===this.database}}const Mp={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},_R={nullValue:"NULL_VALUE"};function Rp(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?fR(i)?4:UG(i)?9007199254740991:10:xt()}function Uu(i,e){if(i===e)return!0;const n=Rp(i);if(n!==Rp(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return JI(i).isEqual(JI(e));case 3:return function(t,r){if("string"==typeof t.timestampValue&&"string"==typeof r.timestampValue&&t.timestampValue.length===r.timestampValue.length)return t.timestampValue===r.timestampValue;const s=Sp(t.timestampValue),o=Sp(r.timestampValue);return s.seconds===o.seconds&&s.nanos===o.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return r=e,xm(i.bytesValue).isEqual(xm(r.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(t,r){return Fr(t.geoPointValue.latitude)===Fr(r.geoPointValue.latitude)&&Fr(t.geoPointValue.longitude)===Fr(r.geoPointValue.longitude)}(i,e);case 2:return function(t,r){if("integerValue"in t&&"integerValue"in r)return Fr(t.integerValue)===Fr(r.integerValue);if("doubleValue"in t&&"doubleValue"in r){const s=Fr(t.doubleValue),o=Fr(r.doubleValue);return s===o?XI(s)===XI(o):isNaN(s)&&isNaN(o)}return!1}(i,e);case 9:return Q0(i.arrayValue.values||[],e.arrayValue.values||[],Uu);case 10:return function(t,r){const s=t.mapValue.fields||{},o=r.mapValue.fields||{};if(PG(s)!==PG(o))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===o[d]||!Uu(s[d],o[d])))return!1;return!0}(i,e);default:return xt()}var r}function eD(i,e){return void 0!==(i.values||[]).find(n=>Uu(n,e))}function Pp(i,e){if(i===e)return 0;const n=Rp(i),t=Rp(e);if(n!==t)return rn(n,t);switch(n){case 0:case 9007199254740991:return 0;case 1:return rn(i.booleanValue,e.booleanValue);case 2:return function(r,s){const o=Fr(r.integerValue||r.doubleValue),d=Fr(s.integerValue||s.doubleValue);return o<d?-1:o>d?1:o===d?0:isNaN(o)?isNaN(d)?0:-1:1}(i,e);case 3:return LG(i.timestampValue,e.timestampValue);case 4:return LG(JI(i),JI(e));case 5:return rn(i.stringValue,e.stringValue);case 6:return function(r,s){const o=xm(r),d=xm(s);return o.compareTo(d)}(i.bytesValue,e.bytesValue);case 7:return function(r,s){const o=r.split("/"),d=s.split("/");for(let m=0;m<o.length&&m<d.length;m++){const f=rn(o[m],d[m]);if(0!==f)return f}return rn(o.length,d.length)}(i.referenceValue,e.referenceValue);case 8:return function(r,s){const o=rn(Fr(r.latitude),Fr(s.latitude));return 0!==o?o:rn(Fr(r.longitude),Fr(s.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(r,s){const o=r.values||[],d=s.values||[];for(let m=0;m<o.length&&m<d.length;++m){const f=Pp(o[m],d[m]);if(f)return f}return rn(o.length,d.length)}(i.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===Mp.mapValue&&s===Mp.mapValue)return 0;if(r===Mp.mapValue)return 1;if(s===Mp.mapValue)return-1;const o=r.fields||{},d=Object.keys(o),m=s.fields||{},f=Object.keys(m);d.sort(),f.sort();for(let b=0;b<d.length&&b<f.length;++b){const w=rn(d[b],f[b]);if(0!==w)return w;const I=Pp(o[d[b]],m[f[b]]);if(0!==I)return I}return rn(d.length,f.length)}(i.mapValue,e.mapValue);default:throw xt()}}function LG(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return rn(i,e);const n=Sp(i),t=Sp(e),r=rn(n.seconds,t.seconds);return 0!==r?r:rn(n.nanos,t.nanos)}function J0(i){return XB(i)}function XB(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(t){const r=Sp(t);return`time(${r.seconds},${r.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?xm(i.bytesValue).toBase64():"referenceValue"in i?lt.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(t){let r="[",s=!0;for(const o of t.values||[])s?s=!1:r+=",",r+=XB(o);return r+"]"}(i.arrayValue):"mapValue"in i?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",o=!0;for(const d of r)o?o=!1:s+=",",s+=`${d}:${XB(t.fields[d])}`;return s+"}"}(i.mapValue):xt();var e}function Av(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function JB(i){return!!i&&"integerValue"in i}function tD(i){return!!i&&"arrayValue"in i}function BG(i){return!!i&&"nullValue"in i}function VG(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vR(i){return!!i&&"mapValue"in i}function nD(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Tp(i.mapValue.fields,(n,t)=>e.mapValue.fields[n]=nD(t)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nD(i.arrayValue.values[n]);return e}return Object.assign({},i)}function UG(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function bne(i){return"nullValue"in i?_R:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Av(Ap.empty(),lt.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:xt()}function yne(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Av(Ap.empty(),lt.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?Mp:xt()}function HG(i,e){const n=Pp(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function zG(i,e){const n=Pp(i.value,e.value);return 0!==n?n:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class bo{constructor(e){this.value=e}static empty(){return new bo({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let t=0;t<e.length-1;++t)if(n=(n.mapValue.fields||{})[e.get(t)],!vR(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nD(n)}setAll(e){let n=Nr.emptyPath(),t={},r=[];e.forEach((o,d)=>{if(!n.isImmediateParentOf(d)){const m=this.getFieldsMap(n);this.applyChanges(m,t,r),t={},r=[],n=d.popLast()}o?t[d.lastSegment()]=nD(o):r.push(d.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,t,r)}delete(e){const n=this.field(e.popLast());vR(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Uu(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let t=0;t<e.length;++t){let r=n.mapValue.fields[e.get(t)];vR(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(t)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,t){Tp(n,(r,s)=>e[r]=s);for(const r of t)delete e[r]}clone(){return new bo(nD(this.value))}}function jG(i){const e=[];return Tp(i.fields,(n,t)=>{const r=new Nr([n]);if(vR(t)){const s=jG(t.mapValue).fields;if(0===s.length)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ga(e)}class Qi{constructor(e,n,t,r,s,o,d){this.key=e,this.documentType=n,this.version=t,this.readTime=r,this.createTime=s,this.data=o,this.documentState=d}static newInvalidDocument(e){return new Qi(e,0,Ot.min(),Ot.min(),Ot.min(),bo.empty(),0)}static newFoundDocument(e,n,t,r){return new Qi(e,1,n,Ot.min(),t,r,0)}static newNoDocument(e,n){return new Qi(e,2,n,Ot.min(),Ot.min(),bo.empty(),0)}static newUnknownDocument(e,n){return new Qi(e,3,n,Ot.min(),Ot.min(),bo.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bo.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Qi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Op{constructor(e,n){this.position=e,this.inclusive=n}}function GG(i,e,n){let t=0;for(let r=0;r<i.position.length;r++){const s=e[r],o=i.position[r];if(t=s.field.isKeyField()?lt.comparator(lt.fromName(o.referenceValue),n.key):Pp(o,n.data.field(s.field)),"desc"===s.dir&&(t*=-1),0!==t)break}return t}function $G(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Uu(i.position[n],e.position[n]))return!1;return!0}class ew{constructor(e,n="asc"){this.field=e,this.dir=n}}function wne(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class WG{}class Fn extends WG{constructor(e,n,t){super(),this.field=e,this.op=n,this.value=t}static create(e,n,t){return e.isKeyField()?"in"===n||"not-in"===n?this.createKeyFieldInFilter(e,n,t):new xne(e,n,t):"array-contains"===n?new Ine(e,t):"in"===n?new XG(e,t):"not-in"===n?new Dne(e,t):"array-contains-any"===n?new kne(e,t):new Fn(e,n,t)}static createKeyFieldInFilter(e,n,t){return"in"===n?new Cne(e,t):new Ene(e,t)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.matchesComparison(Pp(n,this.value)):null!==n&&Rp(this.value)===Rp(n)&&this.matchesComparison(Pp(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class yi extends WG{constructor(e,n){super(),this.filters=e,this.op=n,this.lt=null}static create(e,n){return new yi(e,n)}matches(e){return tw(this)?void 0===this.filters.find(n=>!n.matches(e)):void 0!==this.filters.find(n=>n.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(n=>n.isInequality());return null!==e?e.field:null}ft(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function tw(i){return"and"===i.op}function eV(i){return"or"===i.op}function tV(i){return qG(i)&&tw(i)}function qG(i){for(const e of i.filters)if(e instanceof yi)return!1;return!0}function nV(i){if(i instanceof Fn)return i.field.canonicalString()+i.op.toString()+J0(i.value);if(tV(i))return i.filters.map(e=>nV(e)).join(",");{const e=i.filters.map(n=>nV(n)).join(",");return`${i.op}(${e})`}}function YG(i,e){return i instanceof Fn?(n=i,(t=e)instanceof Fn&&n.op===t.op&&n.field.isEqual(t.field)&&Uu(n.value,t.value)):i instanceof yi?function(n,t){return t instanceof yi&&n.op===t.op&&n.filters.length===t.filters.length&&n.filters.reduce((r,s,o)=>r&&YG(s,t.filters[o]),!0)}(i,e):void xt();var n,t}function ZG(i,e){const n=i.filters.concat(e);return yi.create(n,i.op)}function KG(i){return i instanceof Fn?`${(e=i).field.canonicalString()} ${e.op} ${J0(e.value)}`:i instanceof yi?function(e){return e.op.toString()+" {"+e.getFilters().map(KG).join(" ,")+"}"}(i):"Filter";var e}class xne extends Fn{constructor(e,n,t){super(e,n,t),this.key=lt.fromName(t.referenceValue)}matches(e){const n=lt.comparator(e.key,this.key);return this.matchesComparison(n)}}class Cne extends Fn{constructor(e,n){super(e,"in",n),this.keys=QG(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ene extends Fn{constructor(e,n){super(e,"not-in",n),this.keys=QG(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QG(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(t=>lt.fromName(t.referenceValue))}class Ine extends Fn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tD(n)&&eD(n.arrayValue,this.value)}}class XG extends Fn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&eD(this.value.arrayValue,n)}}class Dne extends Fn{constructor(e,n){super(e,"not-in",n)}matches(e){if(eD(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!eD(this.value.arrayValue,n)}}class kne extends Fn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tD(n)||!n.arrayValue.values)&&n.arrayValue.values.some(t=>eD(this.value.arrayValue,t))}}class Tne{constructor(e,n=null,t=[],r=[],s=null,o=null,d=null){this.path=e,this.collectionGroup=n,this.orderBy=t,this.filters=r,this.limit=s,this.startAt=o,this.endAt=d,this.dt=null}}function iV(i,e=null,n=[],t=[],r=null,s=null,o=null){return new Tne(i,e,n,t,r,s,o)}function Mv(i){const e=ut(i);if(null===e.dt){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(t=>nV(t)).join(","),n+="|ob:",n+=e.orderBy.map(t=>{return(r=t).field.canonicalString()+r.dir;var r}).join(","),QI(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(t=>J0(t)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(t=>J0(t)).join(",")),e.dt=n}return e.dt}function iD(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!wne(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!YG(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!$G(i.startAt,e.startAt)&&$G(i.endAt,e.endAt)}function bR(i){return lt.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function yR(i,e){return i.filters.filter(n=>n instanceof Fn&&n.field.isEqual(e))}function JG(i,e,n){let t=_R,r=!0;for(const s of yR(i,e)){let o=_R,d=!0;switch(s.op){case"<":case"<=":o=bne(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,d=!1;break;case"!=":case"not-in":o=_R}HG({value:t,inclusive:r},{value:o,inclusive:d})<0&&(t=o,r=d)}if(null!==n)for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(e)){const o=n.position[s];HG({value:t,inclusive:r},{value:o,inclusive:n.inclusive})<0&&(t=o,r=n.inclusive);break}return{value:t,inclusive:r}}function e$(i,e,n){let t=Mp,r=!0;for(const s of yR(i,e)){let o=Mp,d=!0;switch(s.op){case">=":case">":o=yne(s.value),d=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,d=!1;break;case"!=":case"not-in":o=Mp}zG({value:t,inclusive:r},{value:o,inclusive:d})>0&&(t=o,r=d)}if(null!==n)for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(e)){const o=n.position[s];zG({value:t,inclusive:r},{value:o,inclusive:n.inclusive})>0&&(t=o,r=n.inclusive);break}return{value:t,inclusive:r}}class Cm{constructor(e,n=null,t=[],r=[],s=null,o="F",d=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=t,this.filters=r,this.limit=s,this.limitType=o,this.startAt=d,this.endAt=m,this.wt=null,this._t=null}}function t$(i,e,n,t,r,s,o,d){return new Cm(i,e,n,t,r,s,o,d)}function nw(i){return new Cm(i)}function n$(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function rV(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function wR(i){for(const e of i.filters){const n=e.getFirstInequalityField();if(null!==n)return n}return null}function sV(i){return null!==i.collectionGroup}function Rv(i){const e=ut(i);if(null===e.wt){e.wt=[];const n=wR(e),t=rV(e);if(null!==n&&null===t)n.isKeyField()||e.wt.push(new ew(n)),e.wt.push(new ew(Nr.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new ew(Nr.keyField(),s))}}}return e.wt}function pa(i){const e=ut(i);if(!e._t)if("F"===e.limitType)e._t=iV(e.path,e.collectionGroup,Rv(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const s of Rv(e))n.push(new ew(s.field,"desc"===s.dir?"asc":"desc"));const t=e.endAt?new Op(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Op(e.startAt.position,e.startAt.inclusive):null;e._t=iV(e.path,e.collectionGroup,n,e.filters,e.limit,t,r)}return e._t}function oV(i,e){e.getFirstInequalityField(),wR(i);const n=i.filters.concat([e]);return new Cm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function xR(i,e,n){return new Cm(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function rD(i,e){return iD(pa(i),pa(e))&&i.limitType===e.limitType}function i$(i){return`${Mv(pa(i))}|lt:${i.limitType}`}function aV(i){return`Query(target=${function(e){let n=e.path.canonicalString();return null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(t=>KG(t)).join(", ")}]`),QI(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(t=>J0(t)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(t=>J0(t)).join(",")),`Target(${n})`}(pa(i))}; limitType=${i.limitType})`}function sD(i,e){return e.isFoundDocument()&&function(n,t){const r=t.key.path;return null!==n.collectionGroup?t.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):lt.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r)}(i,e)&&function(n,t){for(const r of Rv(n))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(i,e)&&function(n,t){for(const r of n.filters)if(!r.matches(t))return!1;return!0}(i,e)&&(t=e,!((n=i).startAt&&!function(r,s,o){const d=GG(r,s,o);return r.inclusive?d<=0:d<0}(n.startAt,Rv(n),t)||n.endAt&&!function(r,s,o){const d=GG(r,s,o);return r.inclusive?d>=0:d>0}(n.endAt,Rv(n),t)));var n,t}function r$(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function s$(i){return(e,n)=>{let t=!1;for(const r of Rv(i)){const s=Sne(r,e,n);if(0!==s)return s;t=t||r.field.isKeyField()}return 0}}function Sne(i,e,n){const t=i.field.isKeyField()?lt.comparator(e.key,n.key):function(r,s,o){const d=s.data.field(r),m=o.data.field(r);return null!==d&&null!==m?Pp(d,m):xt()}(i.field,e,n);switch(i.dir){case"asc":return t;case"desc":return-1*t;default:return xt()}}class Em{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),t=this.inner[n];if(void 0!==t)for(const[r,s]of t)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,n){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return this.inner[t]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),t=this.inner[n];if(void 0===t)return!1;for(let r=0;r<t.length;r++)if(this.equalsFn(t[r][0],e))return 1===t.length?delete this.inner[n]:t.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Tp(this.inner,(n,t)=>{for(const[r,s]of t)e(r,s)})}isEmpty(){return OG(this.inner)}size(){return this.innerSize}}const Ane=new Gi(lt.comparator);function $a(){return Ane}const o$=new Gi(lt.comparator);function oD(...i){let e=o$;for(const n of i)e=e.insert(n.key,n);return e}function a$(i){let e=o$;return i.forEach((n,t)=>e=e.insert(n,t.overlayedDocument)),e}function Hu(){return aD()}function c$(){return aD()}function aD(){return new Em(i=>i.toString(),(i,e)=>i.isEqual(e))}const Mne=new Gi(lt.comparator),Rne=new Ki(lt.comparator);function fn(...i){let e=Rne;for(const n of i)e=e.add(n);return e}const Pne=new Ki(rn);function cV(){return Pne}function l$(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:XI(e)?"-0":e}}function d$(i){return{integerValue:""+i}}function u$(i,e){return DG(e)?d$(e):l$(i,e)}class CR{constructor(){this._=void 0}}function One(i,e,n){return i instanceof iw?function(t,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return r&&fR(r)&&(r=pR(r)),r&&(s.fields.__previous_value__=r),{mapValue:s}}(n,e):i instanceof Pv?m$(i,e):i instanceof Ov?f$(i,e):function(t,r){const s=h$(t,r),o=p$(s)+p$(t.gt);return JB(s)&&JB(t.gt)?d$(o):l$(t.serializer,o)}(i,e)}function Nne(i,e,n){return i instanceof Pv?m$(i,e):i instanceof Ov?f$(i,e):n}function h$(i,e){return i instanceof rw?JB(n=e)||(t=n)&&"doubleValue"in t?e:{integerValue:0}:null;var t,n}class iw extends CR{}class Pv extends CR{constructor(e){super(),this.elements=e}}function m$(i,e){const n=_$(e);for(const t of i.elements)n.some(r=>Uu(r,t))||n.push(t);return{arrayValue:{values:n}}}class Ov extends CR{constructor(e){super(),this.elements=e}}function f$(i,e){let n=_$(e);for(const t of i.elements)n=n.filter(r=>!Uu(r,t));return{arrayValue:{values:n}}}class rw extends CR{constructor(e,n){super(),this.serializer=e,this.gt=n}}function p$(i){return Fr(i.integerValue||i.doubleValue)}function _$(i){return tD(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class cD{constructor(e,n){this.field=e,this.transform=n}}class Lne{constructor(e,n){this.version=e,this.transformResults=n}}class lr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ER(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class IR{}function g$(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new ow(i.key,lr.none()):new sw(i.key,i.data,lr.none());{const n=i.data,t=bo.empty();let r=new Ki(Nr.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);null===o&&s.length>1&&(s=s.popLast(),o=n.field(s)),null===o?t.delete(s):t.set(s,o),r=r.add(s)}return new Im(i.key,t,new Ga(r.toArray()),lr.none())}}function Bne(i,e,n){i instanceof sw?function(t,r,s){const o=t.value.clone(),d=y$(t.fieldTransforms,r,s.transformResults);o.setAll(d),r.convertToFoundDocument(s.version,o).setHasCommittedMutations()}(i,e,n):i instanceof Im?function(t,r,s){if(!ER(t.precondition,r))return void r.convertToUnknownDocument(s.version);const o=y$(t.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(b$(t)),d.setAll(o),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function lD(i,e,n,t){return i instanceof sw?function(r,s,o,d){if(!ER(r.precondition,s))return o;const m=r.value.clone(),f=w$(r.fieldTransforms,d,s);return m.setAll(f),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null}(i,e,n,t):i instanceof Im?function(r,s,o,d){if(!ER(r.precondition,s))return o;const m=w$(r.fieldTransforms,d,s),f=s.data;return f.setAll(b$(r)),f.setAll(m),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null===o?null:o.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(b=>b.field))}(i,e,n,t):(o=n,ER(i.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):o);var s,o}function Vne(i,e){let n=null;for(const t of i.fieldTransforms){const r=e.data.field(t.field),s=h$(t.transform,r||null);null!=s&&(null===n&&(n=bo.empty()),n.set(t.field,s))}return n||null}function v$(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(t=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===t||n&&t&&Q0(n,t,(r,s)=>function Fne(i,e){return i.field.isEqual(e.field)&&(t=e.transform,(n=i.transform)instanceof Pv&&t instanceof Pv||n instanceof Ov&&t instanceof Ov?Q0(n.elements,t.elements,Uu):n instanceof rw&&t instanceof rw?Uu(n.gt,t.gt):n instanceof iw&&t instanceof iw);var n,t}(r,s))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,t}class sw extends IR{constructor(e,n,t,r=[]){super(),this.key=e,this.value=n,this.precondition=t,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Im extends IR{constructor(e,n,t,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=t,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function b$(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const t=i.data.field(n);e.set(n,t)}}),e}function y$(i,e,n){const t=new Map;Rt(i.length===n.length);for(let r=0;r<n.length;r++){const s=i[r],o=s.transform,d=e.data.field(s.field);t.set(s.field,Nne(o,d,n[r]))}return t}function w$(i,e,n){const t=new Map;for(const r of i){const s=r.transform,o=n.data.field(r.field);t.set(r.field,One(s,o,e))}return t}class ow extends IR{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lV extends IR{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class dV{constructor(e,n,t,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=t,this.mutations=r}applyToRemoteDocument(e,n){const t=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&Bne(s,e,t[r])}}applyToLocalView(e,n){for(const t of this.baseMutations)t.key.isEqual(e.key)&&(n=lD(t,e,n,this.localWriteTime));for(const t of this.mutations)t.key.isEqual(e.key)&&(n=lD(t,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const t=c$();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let d=this.applyToLocalView(o,s.mutatedFields);d=n.has(r.key)?null:d;const m=g$(o,d);null!==m&&t.set(r.key,m),o.isValidDocument()||o.convertToNoDocument(Ot.min())}),t}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fn())}isEqual(e){return this.batchId===e.batchId&&Q0(this.mutations,e.mutations,(n,t)=>v$(n,t))&&Q0(this.baseMutations,e.baseMutations,(n,t)=>v$(n,t))}}class uV{constructor(e,n,t,r){this.batch=e,this.commitVersion=n,this.mutationResults=t,this.docVersions=r}static from(e,n,t){Rt(e.mutations.length===t.length);let r=Mne;const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,t[o].version);return new uV(e,n,t,r)}}class hV{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Hne{constructor(e,n){this.count=e,this.unchangedNames=n}}var us,qn;function x$(i){switch(i){default:return xt();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function C$(i){if(void 0===i)return qr("GRPC error has no .code"),ge.UNKNOWN;switch(i){case us.OK:return ge.OK;case us.CANCELLED:return ge.CANCELLED;case us.UNKNOWN:return ge.UNKNOWN;case us.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case us.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case us.INTERNAL:return ge.INTERNAL;case us.UNAVAILABLE:return ge.UNAVAILABLE;case us.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case us.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case us.NOT_FOUND:return ge.NOT_FOUND;case us.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case us.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case us.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case us.ABORTED:return ge.ABORTED;case us.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case us.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case us.DATA_LOSS:return ge.DATA_LOSS;default:return xt()}}(qn=us||(us={}))[qn.OK=0]="OK",qn[qn.CANCELLED=1]="CANCELLED",qn[qn.UNKNOWN=2]="UNKNOWN",qn[qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",qn[qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",qn[qn.NOT_FOUND=5]="NOT_FOUND",qn[qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",qn[qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",qn[qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",qn[qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",qn[qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",qn[qn.ABORTED=10]="ABORTED",qn[qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",qn[qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",qn[qn.INTERNAL=13]="INTERNAL",qn[qn.UNAVAILABLE=14]="UNAVAILABLE",qn[qn.DATA_LOSS=15]="DATA_LOSS";class mV{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return DR}static getOrCreateInstance(){return null===DR&&(DR=new mV),DR}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let DR=null;function E$(){return new TextEncoder}const zne=new Z0([4294967295,4294967295],0);function I$(i){const e=E$().encode(i),n=new Nte;return n.update(e),new Uint8Array(n.digest())}function D$(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),t=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Z0([n,t],0),new Z0([r,s],0)]}class fV{constructor(e,n,t){if(this.bitmap=e,this.padding=n,this.hashCount=t,n<0||n>=8)throw new dD(`Invalid padding: ${n}`);if(t<0)throw new dD(`Invalid hash count: ${t}`);if(e.length>0&&0===this.hashCount)throw new dD(`Invalid hash count: ${t}`);if(0===e.length&&0!==n)throw new dD(`Invalid padding when bitmap length is 0: ${n}`);this.It=8*e.length-n,this.Tt=Z0.fromNumber(this.It)}Et(e,n,t){let r=e.add(n.multiply(Z0.fromNumber(t)));return 1===r.compare(zne)&&(r=new Z0([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const n=I$(e),[t,r]=D$(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(t,r,s);if(!this.At(o))return!1}return!0}static create(e,n,t){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new fV(s,r,n);return t.forEach(d=>o.insert(d)),o}insert(e){if(0===this.It)return;const n=I$(e),[t,r]=D$(n);for(let s=0;s<this.hashCount;s++){const o=this.Et(t,r,s);this.Rt(o)}}Rt(e){const n=Math.floor(e/8);this.bitmap[n]|=1<<e%8}}class dD extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uD{constructor(e,n,t,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=t,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,t){const r=new Map;return r.set(e,hD.createSynthesizedTargetChangeForCurrentChange(e,n,t)),new uD(Ot.min(),r,new Gi(rn),$a(),fn())}}class hD{constructor(e,n,t,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=t,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,t){return new hD(t,n,fn(),fn(),fn())}}class kR{constructor(e,n,t,r){this.Pt=e,this.removedTargetIds=n,this.key=t,this.bt=r}}class k${constructor(e,n){this.targetId=e,this.Vt=n}}class T${constructor(e,n,t=Ss.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=t,this.cause=r}}class S${constructor(){this.St=0,this.Dt=M$(),this.Ct=Ss.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=fn(),n=fn(),t=fn();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:t=t.add(r);break;default:xt()}}),new hD(this.Ct,this.xt,e,n,t)}Ft(){this.Nt=!1,this.Dt=M$()}Bt(e,n){this.Nt=!0,this.Dt=this.Dt.insert(e,n)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class jne{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=$a(),this.zt=A$(),this.Wt=new Gi(rn)}Ht(e){for(const n of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(n,e.bt):this.Yt(n,e.key,e.bt);for(const n of e.removedTargetIds)this.Yt(n,e.key,e.bt)}Xt(e){this.forEachTarget(e,n=>{const t=this.Zt(n);switch(e.state){case 0:this.te(n)&&t.$t(e.resumeToken);break;case 1:t.Ut(),t.kt||t.Ft(),t.$t(e.resumeToken);break;case 2:t.Ut(),t.kt||this.removeTarget(n);break;case 3:this.te(n)&&(t.Kt(),t.$t(e.resumeToken));break;case 4:this.te(n)&&(this.ee(n),t.$t(e.resumeToken));break;default:xt()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Qt.forEach((t,r)=>{this.te(r)&&n(r)})}ne(e){var n;const t=e.targetId,r=e.Vt.count,s=this.se(t);if(s){const o=s.target;if(bR(o))if(0===r){const d=new lt(o.path);this.Yt(t,d,Qi.newNoDocument(d,Ot.min()))}else Rt(1===r);else{const d=this.ie(t);if(d!==r){const m=this.re(e,d);0!==m&&(this.ee(t),this.Wt=this.Wt.insert(t,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(n=mV.instance)||void 0===n||n.notifyOnExistenceFilterMismatch(function(f,b,w){var I,S,F,z,q,we;const Ae={localCacheCount:b,existenceFilterCount:w.count},De=w.unchangedNames;return De&&(Ae.bloomFilter={applied:0===f,hashCount:null!==(I=De?.hashCount)&&void 0!==I?I:0,bitmapLength:null!==(z=null===(F=null===(S=De?.bits)||void 0===S?void 0:S.bitmap)||void 0===F?void 0:F.length)&&void 0!==z?z:0,padding:null!==(we=null===(q=De?.bits)||void 0===q?void 0:q.padding)&&void 0!==we?we:0}),Ae}(m,d,e.Vt))}}}}re(e,n){const{unchangedNames:t,count:r}=e.Vt;if(!t||!t.bits)return 1;const{bits:{bitmap:s="",padding:o=0},hashCount:d=0}=t;let m,f;try{m=xm(s).toUint8Array()}catch(b){if(b instanceof FG)return kl("Decoding the base64 bloom filter in existence filter failed ("+b.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw b}try{f=new fV(m,o,d)}catch(b){return kl(b instanceof dD?"BloomFilter error: ":"Applying bloom filter failed: ",b),1}return 0===f.It?1:r!==n-this.oe(e.targetId,f)?2:0}oe(e,n){const t=this.Gt.getRemoteKeysForTarget(e);let r=0;return t.forEach(s=>{const o=this.Gt.ue(),d=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;n.vt(d)||(this.Yt(e,s,null),r++)}),r}ce(e){const n=new Map;this.Qt.forEach((s,o)=>{const d=this.se(o);if(d){if(s.current&&bR(d.target)){const m=new lt(d.target.path);null!==this.jt.get(m)||this.ae(o,m)||this.Yt(o,m,Qi.newNoDocument(m,e))}s.Mt&&(n.set(o,s.Ot()),s.Ft())}});let t=fn();this.zt.forEach((s,o)=>{let d=!0;o.forEachWhile(m=>{const f=this.se(m);return!f||"TargetPurposeLimboResolution"===f.purpose||(d=!1,!1)}),d&&(t=t.add(s))}),this.jt.forEach((s,o)=>o.setReadTime(e));const r=new uD(e,n,this.Wt,this.jt,t);return this.jt=$a(),this.zt=A$(),this.Wt=new Gi(rn),r}Jt(e,n){if(!this.te(e))return;const t=this.ae(e,n.key)?2:0;this.Zt(e).Bt(n.key,t),this.jt=this.jt.insert(n.key,n),this.zt=this.zt.insert(n.key,this.he(n.key).add(e))}Yt(e,n,t){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,n)?r.Bt(n,1):r.Lt(n),this.zt=this.zt.insert(n,this.he(n).delete(e)),t&&(this.jt=this.jt.insert(n,t))}removeTarget(e){this.Qt.delete(e)}ie(e){const n=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let n=this.Qt.get(e);return n||(n=new S$,this.Qt.set(e,n)),n}he(e){let n=this.zt.get(e);return n||(n=new Ki(rn),this.zt=this.zt.insert(e,n)),n}te(e){const n=null!==this.se(e);return n||Ke("WatchChangeAggregator","Detected inactive target",e),n}se(e){const n=this.Qt.get(e);return n&&n.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new S$),this.Gt.getRemoteKeysForTarget(e).forEach(n=>{this.Yt(e,n,null)})}ae(e,n){return this.Gt.getRemoteKeysForTarget(e).has(n)}}function A$(){return new Gi(lt.comparator)}function M$(){return new Gi(lt.comparator)}const Gne={asc:"ASCENDING",desc:"DESCENDING"},$ne={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wne={and:"AND",or:"OR"};class qne{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function pV(i,e){return i.useProto3Json||QI(e)?e:{value:e}}function aw(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R$(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function Yne(i,e){return aw(i,e.toTimestamp())}function Yr(i){return Rt(!!i),Ot.fromTimestamp(function(e){const n=Sp(e);return new cr(n.seconds,n.nanos)}(i))}function _V(i,e){return(n=i,new Wn(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function P$(i){const e=Wn.fromString(i);return Rt(z$(e)),e}function mD(i,e){return _V(i.databaseId,e.path)}function zu(i,e){const n=P$(e);if(n.get(1)!==i.databaseId.projectId)throw new Ge(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Ge(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new lt(N$(n))}function gV(i,e){return _V(i.databaseId,e)}function O$(i){const e=P$(i);return 4===e.length?Wn.emptyPath():N$(e)}function fD(i){return new Wn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function N$(i){return Rt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function F$(i,e,n){return{name:mD(i,e),fields:n.value.mapValue.fields}}function L$(i,e,n){const t=zu(i,e.name),r=Yr(e.updateTime),s=e.createTime?Yr(e.createTime):Ot.min(),o=new bo({mapValue:{fields:e.fields}}),d=Qi.newFoundDocument(t,r,s,o);return n&&d.setHasCommittedMutations(),n?d.setHasCommittedMutations():d}function pD(i,e){let n;if(e instanceof sw)n={update:F$(i,e.key,e.value)};else if(e instanceof ow)n={delete:mD(i,e.key)};else if(e instanceof Im)n={update:F$(i,e.key,e.data),updateMask:nie(e.fieldMask)};else{if(!(e instanceof lV))return xt();n={verify:mD(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(t=>function(r,s){const o=s.transform;if(o instanceof iw)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof Pv)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof Ov)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof rw)return{fieldPath:s.field.canonicalString(),increment:o.gt};throw xt()}(0,t))),e.precondition.isNone||(n.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:Yne(i,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:xt()),n;var r}function vV(i,e){const n=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?lr.updateTime(Yr(r.updateTime)):void 0!==r.exists?lr.exists(r.exists):lr.none():lr.none(),t=e.updateTransforms?e.updateTransforms.map(r=>function(s,o){let d=null;"setToServerValue"in o?(Rt("REQUEST_TIME"===o.setToServerValue),d=new iw):"appendMissingElements"in o?d=new Pv(o.appendMissingElements.values||[]):"removeAllFromArray"in o?d=new Ov(o.removeAllFromArray.values||[]):"increment"in o?d=new rw(s,o.increment):xt();const m=Nr.fromServerFormat(o.fieldPath);return new cD(m,d)}(i,r)):[];var r;if(e.update){const r=zu(i,e.update.name),s=new bo({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new Ga((e.updateMask.fieldPaths||[]).map(f=>Nr.fromServerFormat(f)));return new Im(r,s,o,n,t)}return new sw(r,s,n,t)}if(e.delete){const r=zu(i,e.delete);return new ow(r,n)}if(e.verify){const r=zu(i,e.verify);return new lV(r,n)}return xt()}function B$(i,e){return{documents:[gV(i,e.path)]}}function bV(i,e){const n={structuredQuery:{}},t=e.path;null!==e.collectionGroup?(n.parent=gV(i,t),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=gV(i,t.popLast()),n.structuredQuery.from=[{collectionId:t.lastSegment()}]);const r=function(m){if(0!==m.length)return H$(yi.create(m,"and"))}(e.filters);r&&(n.structuredQuery.where=r);const s=function(m){if(0!==m.length)return m.map(f=>{return{field:Np((b=f).field),direction:Jne(b.dir)};var b})}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=pV(i,e.limit);var d,m;return null!==o&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(n.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),n}function V$(i){let e=O$(i.parent);const n=i.structuredQuery,t=n.from?n.from.length:0;let r=null;if(t>0){Rt(1===t);const b=n.from[0];b.allDescendants?r=b.collectionId:e=e.child(b.collectionId)}let s=[];n.where&&(s=function(b){const w=U$(b);return w instanceof yi&&tV(w)?w.getFilters():[w]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(b=>{return new ew(cw((w=b).field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction));var w}));let d=null;n.limit&&(d=function(b){let w;return w="object"==typeof b?b.value:b,QI(w)?null:w}(n.limit));let m=null;var b;n.startAt&&(m=new Op((b=n.startAt).values||[],!!b.before));let f=null;return n.endAt&&(f=function(b){return new Op(b.values||[],!b.before)}(n.endAt)),t$(e,r,o,s,d,"F",m,f)}function U$(i){return void 0!==i.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=cw(e.unaryFilter.field);return Fn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const t=cw(e.unaryFilter.field);return Fn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=cw(e.unaryFilter.field);return Fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=cw(e.unaryFilter.field);return Fn.create(s,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(i):void 0!==i.fieldFilter?Fn.create(cw((e=i).fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==i.compositeFilter?function(e){return yi.create(e.compositeFilter.filters.map(n=>U$(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return xt()}}(e.compositeFilter.op))}(i):xt();var e}function Jne(i){return Gne[i]}function eie(i){return $ne[i]}function tie(i){return Wne[i]}function Np(i){return{fieldPath:i.canonicalString()}}function cw(i){return Nr.fromServerFormat(i.fieldPath)}function H$(i){return i instanceof Fn?function(e){if("=="===e.op){if(VG(e.value))return{unaryFilter:{field:Np(e.field),op:"IS_NAN"}};if(BG(e.value))return{unaryFilter:{field:Np(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(VG(e.value))return{unaryFilter:{field:Np(e.field),op:"IS_NOT_NAN"}};if(BG(e.value))return{unaryFilter:{field:Np(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Np(e.field),op:eie(e.op),value:e.value}}}(i):i instanceof yi?function(e){const n=e.getFilters().map(t=>H$(t));return 1===n.length?n[0]:{compositeFilter:{op:tie(e.op),filters:n}}}(i):xt()}function nie(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function z$(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}class Dm{constructor(e,n,t,r,s=Ot.min(),o=Ot.min(),d=Ss.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=t,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Dm(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Dm(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Dm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Dm(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class j${constructor(e){this.fe=e}}function G$(i,e){const n=e.key,t={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:TR(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())t.document={name:mD(r=i.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:aw(r,s.version.toTimestamp()),createTime:aw(r,s.createTime.toTimestamp())};else if(e.isNoDocument())t.noDocument={path:n.path.toArray(),readTime:Nv(e.version)};else{if(!e.isUnknownDocument())return xt();t.unknownDocument={path:n.path.toArray(),version:Nv(e.version)}}var r,s;return t}function TR(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Nv(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Fv(i){const e=new cr(i.seconds,i.nanoseconds);return Ot.fromTimestamp(e)}function Lv(i,e){const n=(e.baseMutations||[]).map(s=>vV(i.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const t=e.mutations.map(s=>vV(i.fe,s)),r=cr.fromMillis(e.localWriteTimeMs);return new dV(e.batchId,r,n,t)}function _D(i){const e=Fv(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Fv(i.lastLimboFreeSnapshotVersion):Ot.min();let t;var r;return void 0!==i.query.documents?(Rt(1===(r=i.query).documents.length),t=pa(nw(O$(r.documents[0])))):t=pa(V$(i.query)),new Dm(t,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,n,Ss.fromBase64String(i.resumeToken))}function $$(i,e){const n=Nv(e.snapshotVersion),t=Nv(e.lastLimboFreeSnapshotVersion);let r;r=bR(e.target)?B$(i.fe,e.target):bV(i.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Mv(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:t,query:r}}function yV(i){const e=V$({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?xR(e,e.limit,"L"):e}function wV(i,e){return new hV(e.largestBatchId,vV(i.fe,e.overlayMutation))}function W$(i,e){const n=e.path.lastSegment();return[i,$o(e.path.popLast()),n]}function q$(i,e,n,t){return{indexId:i,uid:e.uid||"",sequenceNumber:n,readTime:Nv(t.readTime),documentKey:$o(t.documentKey.path),largestBatchId:t.largestBatchId}}class rie{getBundleMetadata(e,n){return Y$(e).get(n).next(t=>{if(t)return{id:(r=t).bundleId,createTime:Fv(r.createTime),version:r.version};var r})}saveBundleMetadata(e,n){return Y$(e).put({bundleId:(t=n).id,createTime:Nv(Yr(t.createTime)),version:t.version});var t}getNamedQuery(e,n){return Z$(e).get(n).next(t=>{if(t)return{name:(r=t).name,query:yV(r.bundledQuery),readTime:Fv(r.readTime)};var r})}saveNamedQuery(e,n){return Z$(e).put({name:(t=n).name,readTime:Nv(Yr(t.readTime)),bundledQuery:t.bundledQuery});var t}}function Y$(i){return Ws(i,"bundles")}function Z$(i){return Ws(i,"namedQueries")}class SR{constructor(e,n){this.serializer=e,this.userId=n}static de(e,n){return new SR(e,n.uid||"")}getOverlay(e,n){return gD(e).get(W$(this.userId,n)).next(t=>t?wV(this.serializer,t):null)}getOverlays(e,n){const t=Hu();return de.forEach(n,r=>this.getOverlay(e,r).next(s=>{null!==s&&t.set(r,s)})).next(()=>t)}saveOverlays(e,n,t){const r=[];return t.forEach((s,o)=>{const d=new hV(n,o);r.push(this.we(e,d))}),de.waitFor(r)}removeOverlaysForBatchId(e,n,t){const r=new Set;n.forEach(o=>r.add($o(o.getCollectionPath())));const s=[];return r.forEach(o=>{const d=IDBKeyRange.bound([this.userId,o,t],[this.userId,o,t+1],!1,!0);s.push(gD(e).J("collectionPathOverlayIndex",d))}),de.waitFor(s)}getOverlaysForCollection(e,n,t){const r=Hu(),s=$o(n),o=IDBKeyRange.bound([this.userId,s,t],[this.userId,s,Number.POSITIVE_INFINITY],!0);return gD(e).j("collectionPathOverlayIndex",o).next(d=>{for(const m of d){const f=wV(this.serializer,m);r.set(f.getKey(),f)}return r})}getOverlaysForCollectionGroup(e,n,t,r){const s=Hu();let o;const d=IDBKeyRange.bound([this.userId,n,t],[this.userId,n,Number.POSITIVE_INFINITY],!0);return gD(e).X({index:"collectionGroupOverlayIndex",range:d},(m,f,b)=>{const w=wV(this.serializer,f);s.size()<r||w.largestBatchId===o?(s.set(w.getKey(),w),o=w.largestBatchId):b.done()}).next(()=>s)}we(e,n){return gD(e).put(function(t,r,s){const[o,d,m]=W$(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:m,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:pD(t.fe,s.mutation)}}(this.serializer,this.userId,n))}}function gD(i){return Ws(i,"documentOverlays")}class Bv{constructor(){}_e(e,n){this.me(e,n),n.ge()}me(e,n){if("nullValue"in e)this.ye(n,5);else if("booleanValue"in e)this.ye(n,10),n.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(n,15),n.pe(Fr(e.integerValue));else if("doubleValue"in e){const t=Fr(e.doubleValue);isNaN(t)?this.ye(n,13):(this.ye(n,15),XI(t)?n.pe(0):n.pe(t))}else if("timestampValue"in e){const t=e.timestampValue;this.ye(n,20),"string"==typeof t?n.Ie(t):(n.Ie(`${t.seconds||""}`),n.pe(t.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,n),this.Ee(n);else if("bytesValue"in e)this.ye(n,30),n.Ae(xm(e.bytesValue)),this.Ee(n);else if("referenceValue"in e)this.ve(e.referenceValue,n);else if("geoPointValue"in e){const t=e.geoPointValue;this.ye(n,45),n.pe(t.latitude||0),n.pe(t.longitude||0)}else"mapValue"in e?UG(e)?this.ye(n,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,n),this.Ee(n)):"arrayValue"in e?(this.Pe(e.arrayValue,n),this.Ee(n)):xt()}Te(e,n){this.ye(n,25),this.be(e,n)}be(e,n){n.Ie(e)}Re(e,n){const t=e.fields||{};this.ye(n,55);for(const r of Object.keys(t))this.Te(r,n),this.me(t[r],n)}Pe(e,n){const t=e.values||[];this.ye(n,50);for(const r of t)this.me(r,n)}ve(e,n){this.ye(n,37),lt.fromName(e).path.forEach(t=>{this.ye(n,60),this.be(t,n)})}ye(e,n){e.pe(n)}Ee(e){e.pe(2)}}function sie(i){if(0===i)return 8;let e=0;return!(i>>4)&&(e+=4,i<<=4),!(i>>6)&&(e+=2,i<<=2),!(i>>7)&&(e+=1),e}function K$(i){const e=64-function(n){let t=0;for(let r=0;r<8;++r){const s=sie(255&n[r]);if(t+=s,8!==s)break}return t}(i);return Math.ceil(e/8)}Bv.Ve=new Bv;class oie{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const n=e[Symbol.iterator]();let t=n.next();for(;!t.done;)this.De(t.value),t=n.next();this.Ce()}xe(e){const n=e[Symbol.iterator]();let t=n.next();for(;!t.done;)this.Ne(t.value),t=n.next();this.ke()}Me(e){for(const n of e){const t=n.charCodeAt(0);if(t<128)this.De(t);else if(t<2048)this.De(960|t>>>6),this.De(128|63&t);else if(n<"\ud800"||"\udbff"<n)this.De(480|t>>>12),this.De(128|63&t>>>6),this.De(128|63&t);else{const r=n.codePointAt(0);this.De(240|r>>>18),this.De(128|63&r>>>12),this.De(128|63&r>>>6),this.De(128|63&r)}}this.Ce()}$e(e){for(const n of e){const t=n.charCodeAt(0);if(t<128)this.Ne(t);else if(t<2048)this.Ne(960|t>>>6),this.Ne(128|63&t);else if(n<"\ud800"||"\udbff"<n)this.Ne(480|t>>>12),this.Ne(128|63&t>>>6),this.Ne(128|63&t);else{const r=n.codePointAt(0);this.Ne(240|r>>>18),this.Ne(128|63&r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r)}}this.ke()}Oe(e){const n=this.Fe(e),t=K$(n);this.Be(1+t),this.buffer[this.position++]=255&t;for(let r=n.length-t;r<n.length;++r)this.buffer[this.position++]=255&n[r]}Le(e){const n=this.Fe(e),t=K$(n);this.Be(1+t),this.buffer[this.position++]=~(255&t);for(let r=n.length-t;r<n.length;++r)this.buffer[this.position++]=~(255&n[r])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const n=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),t=0!=(128&n[0]);n[0]^=t?255:128;for(let r=1;r<n.length;++r)n[r]^=t?255:0;return n}De(e){const n=255&e;0===n?(this.Ue(0),this.Ue(255)):255===n?(this.Ue(255),this.Ue(0)):this.Ue(n)}Ne(e){const n=255&e;0===n?(this.Ge(0),this.Ge(255)):255===n?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const n=e+this.position;if(n<=this.buffer.length)return;let t=2*this.buffer.length;t<n&&(t=n);const r=new Uint8Array(t);r.set(this.buffer),this.buffer=r}}class aie{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class cie{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class vD{constructor(){this.je=new oie,this.ze=new aie(this.je),this.We=new cie(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Vv{constructor(e,n,t,r){this.indexId=e,this.documentKey=n,this.arrayValue=t,this.directionalValue=r}Je(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,t=new Uint8Array(n);return t.set(this.directionalValue,0),n!==e?t.set([0],this.directionalValue.length):++t[t.length-1],new Vv(this.indexId,this.documentKey,this.arrayValue,t)}}function Fp(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=Q$(i.arrayValue,e.arrayValue),0!==n?n:(n=Q$(i.directionalValue,e.directionalValue),0!==n?n:lt.comparator(i.documentKey,e.documentKey)))}function Q$(i,e){for(let n=0;n<i.length&&n<e.length;++n){const t=i[n]-e[n];if(0!==t)return t}return i.length-e.length}class lie{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const n of e.filters){const t=n;t.isInequality()?this.Ze=t:this.Xe.push(t)}}tn(e){Rt(e.collectionGroup===this.collectionId);const n=YB(e);if(void 0!==n&&!this.en(n))return!1;const t=Tv(e);let r=new Set,s=0,o=0;for(;s<t.length&&this.en(t[s]);++s)r=r.add(t[s].fieldPath.canonicalString());if(s===t.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const d=t[s];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[o++],d))return!1}++s}for(;s<t.length;++s)if(o>=this.Ye.length||!this.sn(this.Ye[o++],t[s]))return!1;return!0}en(e){for(const n of this.Xe)if(this.nn(n,e))return!0;return!1}nn(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}function X$(i){var e,n;if(Rt(i instanceof Fn||i instanceof yi),i instanceof Fn){if(i instanceof XG){const r=(null===(n=null===(e=i.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map(s=>Fn.create(i.field,"==",s)))||[];return yi.create(r,"or")}return i}const t=i.filters.map(r=>X$(r));return yi.create(t,i.op)}function die(i){if(0===i.getFilters().length)return[];const e=EV(X$(i));return Rt(J$(e)),xV(e)||CV(e)?[e]:e.getFilters()}function xV(i){return i instanceof Fn}function CV(i){return i instanceof yi&&tV(i)}function J$(i){return xV(i)||CV(i)||function(e){if(e instanceof yi&&eV(e)){for(const n of e.getFilters())if(!xV(n)&&!CV(n))return!1;return!0}return!1}(i)}function EV(i){if(Rt(i instanceof Fn||i instanceof yi),i instanceof Fn)return i;if(1===i.filters.length)return EV(i.filters[0]);const e=i.filters.map(t=>EV(t));let n=yi.create(e,i.op);return n=AR(n),J$(n)?n:(Rt(n instanceof yi),Rt(tw(n)),Rt(n.filters.length>1),n.filters.reduce((t,r)=>IV(t,r)))}function IV(i,e){let n;return Rt(i instanceof Fn||i instanceof yi),Rt(e instanceof Fn||e instanceof yi),n=i instanceof Fn?e instanceof Fn?yi.create([i,e],"and"):e8(i,e):e instanceof Fn?e8(e,i):function(t,r){if(Rt(t.filters.length>0&&r.filters.length>0),tw(t)&&tw(r))return ZG(t,r.getFilters());const s=eV(t)?t:r,o=eV(t)?r:t,d=s.filters.map(m=>IV(m,o));return yi.create(d,"or")}(i,e),AR(n)}function e8(i,e){if(tw(e))return ZG(e,i.getFilters());{const n=e.filters.map(t=>IV(i,t));return yi.create(n,"or")}}function AR(i){if(Rt(i instanceof Fn||i instanceof yi),i instanceof Fn)return i;const e=i.getFilters();if(1===e.length)return AR(e[0]);if(qG(i))return i;const n=e.map(r=>AR(r)),t=[];return n.forEach(r=>{r instanceof Fn?t.push(r):r instanceof yi&&(r.op===i.op?t.push(...r.filters):t.push(r))}),1===t.length?t[0]:yi.create(t,i.op)}class uie{constructor(){this.rn=new DV}addToCollectionParentIndex(e,n){return this.rn.add(n),de.resolve()}getCollectionParents(e,n){return de.resolve(this.rn.getEntries(n))}addFieldIndex(e,n){return de.resolve()}deleteFieldIndex(e,n){return de.resolve()}getDocumentsMatchingTarget(e,n){return de.resolve(null)}getIndexType(e,n){return de.resolve(0)}getFieldIndexes(e,n){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,n){return de.resolve(Ac.min())}getMinOffsetFromCollectionGroup(e,n){return de.resolve(Ac.min())}updateCollectionGroup(e,n,t){return de.resolve()}updateIndexEntries(e,n){return de.resolve()}}class DV{constructor(){this.index={}}add(e){const n=e.lastSegment(),t=e.popLast(),r=this.index[n]||new Ki(Wn.comparator),s=!r.has(t);return this.index[n]=r.add(t),s}has(e){const n=e.lastSegment(),t=e.popLast(),r=this.index[n];return r&&r.has(t)}getEntries(e){return(this.index[e]||new Ki(Wn.comparator)).toArray()}}const MR=new Uint8Array(0);class hie{constructor(e,n){this.user=e,this.databaseId=n,this.on=new DV,this.un=new Em(t=>Mv(t),(t,r)=>iD(t,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.on.has(n)){const t=n.lastSegment(),r=n.popLast();e.addOnCommittedListener(()=>{this.on.add(n)});const s={collectionId:t,parent:$o(r)};return t8(e).put(s)}return de.resolve()}getCollectionParents(e,n){const t=[],r=IDBKeyRange.bound([n,""],[yG(n),""],!1,!0);return t8(e).j(r).next(s=>{for(const o of s){if(o.collectionId!==n)break;t.push(Vu(o.parent))}return t})}addFieldIndex(e,n){const t=RR(e),r={indexId:(o=n).indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var o;delete r.indexId;const s=t.add(r);if(n.indexState){const o=yD(e);return s.next(d=>{o.put(q$(d,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const t=RR(e),r=yD(e),s=bD(e);return t.delete(n.indexId).next(()=>r.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const t=bD(e);let r=!0;const s=new Map;return de.forEach(this.cn(n),o=>this.an(e,o).next(d=>{r&&(r=!!d),s.set(o,d)})).next(()=>{if(r){let o=fn();const d=[];return de.forEach(s,(m,f)=>{var b;Ke("IndexedDbIndexManager",`Using index ${b=m,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(De=>`${De.fieldPath}:${De.kind}`).join(",")}`} to execute ${Mv(n)}`);const w=function(De,Pe){const gt=YB(Pe);if(void 0===gt)return null;for(const Nt of yR(De,gt.fieldPath))switch(Nt.op){case"array-contains-any":return Nt.value.arrayValue.values||[];case"array-contains":return[Nt.value]}return null}(f,m),I=function(De,Pe){const gt=new Map;for(const Nt of Tv(Pe))for(const un of yR(De,Nt.fieldPath))switch(un.op){case"==":case"in":gt.set(Nt.fieldPath.canonicalString(),un.value);break;case"not-in":case"!=":return gt.set(Nt.fieldPath.canonicalString(),un.value),Array.from(gt.values())}return null}(f,m),S=function(De,Pe){const gt=[];let Nt=!0;for(const un of Tv(Pe)){const di=0===un.kind?JG(De,un.fieldPath,De.startAt):e$(De,un.fieldPath,De.startAt);gt.push(di.value),Nt&&(Nt=di.inclusive)}return new Op(gt,Nt)}(f,m),F=function(De,Pe){const gt=[];let Nt=!0;for(const un of Tv(Pe)){const di=0===un.kind?e$(De,un.fieldPath,De.endAt):JG(De,un.fieldPath,De.endAt);gt.push(di.value),Nt&&(Nt=di.inclusive)}return new Op(gt,Nt)}(f,m),z=this.hn(m,f,S),q=this.hn(m,f,F),we=this.ln(m,f,I),Ae=this.fn(m.indexId,w,z,S.inclusive,q,F.inclusive,we);return de.forEach(Ae,De=>t.H(De,n.limit).next(Pe=>{Pe.forEach(gt=>{const Nt=lt.fromSegments(gt.documentKey);o.has(Nt)||(o=o.add(Nt),d.push(Nt))})}))}).next(()=>d)}return de.resolve(null)})}cn(e){let n=this.un.get(e);return n||(n=0===e.filters.length?[e]:die(yi.create(e.filters,"and")).map(t=>iV(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}fn(e,n,t,r,s,o,d){const m=(null!=n?n.length:1)*Math.max(t.length,s.length),f=m/(null!=n?n.length:1),b=[];for(let w=0;w<m;++w){const I=n?this.dn(n[w/f]):MR,S=this.wn(e,I,t[w%f],r),F=this._n(e,I,s[w%f],o),z=d.map(q=>this.wn(e,I,q,!0));b.push(...this.createRange(S,F,z))}return b}wn(e,n,t,r){const s=new Vv(e,lt.empty(),n,t);return r?s:s.Je()}_n(e,n,t,r){const s=new Vv(e,lt.empty(),n,t);return r?s.Je():s}an(e,n){const t=new lie(n),r=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let o=null;for(const d of s)t.tn(d)&&(!o||d.fields.length>o.fields.length)&&(o=d);return o})}getIndexType(e,n){let t=2;const r=this.cn(n);return de.forEach(r,s=>this.an(e,s).next(o=>{o?0!==t&&o.fields.length<function(d){let m=new Ki(Nr.comparator),f=!1;for(const b of d.filters)for(const w of b.getFlattenedFilters())w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?f=!0:m=m.add(w.field));for(const b of d.orderBy)b.field.isKeyField()||(m=m.add(b.field));return m.size+(f?1:0)}(s)&&(t=1):t=0})).next(()=>null!==n.limit&&r.length>1&&2===t?1:t)}mn(e,n){const t=new vD;for(const r of Tv(e)){const s=n.data.field(r.fieldPath);if(null==s)return null;const o=t.He(r.kind);Bv.Ve._e(s,o)}return t.Qe()}dn(e){const n=new vD;return Bv.Ve._e(e,n.He(0)),n.Qe()}gn(e,n){const t=new vD;return Bv.Ve._e(Av(this.databaseId,n),t.He(function(r){const s=Tv(r);return 0===s.length?0:s[s.length-1].kind}(e))),t.Qe()}ln(e,n,t){if(null===t)return[];let r=[];r.push(new vD);let s=0;for(const o of Tv(e)){const d=t[s++];for(const m of r)if(this.yn(n,o.fieldPath)&&tD(d))r=this.pn(r,o,d);else{const f=m.He(o.kind);Bv.Ve._e(d,f)}}return this.In(r)}hn(e,n,t){return this.ln(e,n,t.position)}In(e){const n=[];for(let t=0;t<e.length;++t)n[t]=e[t].Qe();return n}pn(e,n,t){const r=[...e],s=[];for(const o of t.arrayValue.values||[])for(const d of r){const m=new vD;m.seed(d.Qe()),Bv.Ve._e(o,m.He(n.kind)),s.push(m)}return s}yn(e,n){return!!e.filters.find(t=>t instanceof Fn&&t.field.isEqual(n)&&("in"===t.op||"not-in"===t.op))}getFieldIndexes(e,n){const t=RR(e),r=yD(e);return(n?t.j("collectionGroupIndex",IDBKeyRange.bound(n,n)):t.j()).next(s=>{const o=[];return de.forEach(s,d=>r.get([d.indexId,this.uid]).next(m=>{o.push(function(f,b){const w=b?new ZI(b.sequenceNumber,new Ac(Fv(b.readTime),new lt(Vu(b.documentKey)),b.largestBatchId)):ZI.empty(),I=f.fields.map(([S,F])=>new dR(Nr.fromServerFormat(S),F));return new lR(f.indexId,f.collectionGroup,I,w)}(d,m))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((t,r)=>{const s=t.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:rn(t.collectionGroup,r.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,t){const r=RR(e),s=yD(e);return this.Tn(e).next(o=>r.j("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(d=>de.forEach(d,m=>s.put(q$(m.indexId,this.user,o,t)))))}updateIndexEntries(e,n){const t=new Map;return de.forEach(n,(r,s)=>{const o=t.get(r.collectionGroup);return(o?de.resolve(o):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(t.set(r.collectionGroup,d),de.forEach(d,m=>this.En(e,r,m).next(f=>{const b=this.An(s,m);return f.isEqual(b)?de.resolve():this.vn(e,s,m,f,b)}))))})}Rn(e,n,t,r){return bD(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(t,n.key),documentKey:n.key.path.toArray()})}Pn(e,n,t,r){return bD(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(t,n.key),n.key.path.toArray()])}En(e,n,t){const r=bD(e);let s=new Ki(Fp);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([t.indexId,this.uid,this.gn(t,n)])},(o,d)=>{s=s.add(new Vv(t.indexId,n,d.arrayValue,d.directionalValue))}).next(()=>s)}An(e,n){let t=new Ki(Fp);const r=this.mn(n,e);if(null==r)return t;const s=YB(n);if(null!=s){const o=e.data.field(s.fieldPath);if(tD(o))for(const d of o.arrayValue.values||[])t=t.add(new Vv(n.indexId,e.key,this.dn(d),r))}else t=t.add(new Vv(n.indexId,e.key,MR,r));return t}vn(e,n,t,r,s){Ke("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(d,m,f,b,w){const I=d.getIterator(),S=m.getIterator();let F=X0(I),z=X0(S);for(;F||z;){let q=!1,we=!1;if(F&&z){const Ae=f(F,z);Ae<0?we=!0:Ae>0&&(q=!0)}else null!=F?we=!0:q=!0;q?(b(z),z=X0(S)):we?(w(F),F=X0(I)):(F=X0(I),z=X0(S))}}(r,s,Fp,d=>{o.push(this.Rn(e,n,t,d))},d=>{o.push(this.Pn(e,n,t,d))}),de.waitFor(o)}Tn(e){let n=1;return yD(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(t,r,s)=>{s.done(),n=r.sequenceNumber+1}).next(()=>n)}createRange(e,n,t){t=t.sort((o,d)=>Fp(o,d)).filter((o,d,m)=>!d||0!==Fp(o,m[d-1]));const r=[];r.push(e);for(const o of t){const d=Fp(o,e),m=Fp(o,n);if(0===d)r[0]=e.Je();else if(d>0&&m<0)r.push(o),r.push(o.Je());else if(m>0)break}r.push(n);const s=[];for(let o=0;o<r.length;o+=2){if(this.bn(r[o],r[o+1]))return[];s.push(IDBKeyRange.bound([r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,MR,[]],[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,MR,[]]))}return s}bn(e,n){return Fp(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(n8)}getMinOffset(e,n){return de.mapArray(this.cn(n),t=>this.an(e,t).next(r=>r||xt())).next(n8)}}function t8(i){return Ws(i,"collectionParents")}function bD(i){return Ws(i,"indexEntries")}function RR(i){return Ws(i,"indexConfiguration")}function yD(i){return Ws(i,"indexState")}function n8(i){Rt(0!==i.length);let e=i[0].indexState.offset,n=e.largestBatchId;for(let t=1;t<i.length;t++){const r=i[t].indexState.offset;ZB(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Ac(e.readTime,e.documentKey,n)}const r8={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wo{constructor(e,n,t){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=t}static withCacheSize(e){return new Wo(e,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function s8(i,e,n){const t=i.store("mutations"),r=i.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let d=0;const m=t.X({range:o},(b,w,I)=>(d++,I.delete()));s.push(m.next(()=>{Rt(1===d)}));const f=[];for(const b of n.mutations){const w=SG(e,b.key.path,n.batchId);s.push(r.delete(w)),f.push(b.key)}return de.waitFor(s).next(()=>f)}function PR(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw xt();e=i.noDocument}return JSON.stringify(e).length}Wo.DEFAULT_COLLECTION_PERCENTILE=10,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wo.DEFAULT=new Wo(41943040,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wo.DISABLED=new Wo(-1,0,0);class OR{constructor(e,n,t,r){this.userId=e,this.serializer=n,this.indexManager=t,this.referenceDelegate=r,this.Vn={}}static de(e,n,t,r){Rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new OR(s,n,t,r)}checkEmpty(e){let n=!0;const t=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lp(e).X({index:"userMutationsIndex",range:t},(r,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,t,r){const s=lw(e),o=Lp(e);return o.add({}).next(d=>{Rt("number"==typeof d);const m=new dV(d,n,t,r),f=function(I,S,F){const z=F.baseMutations.map(we=>pD(I.fe,we)),q=F.mutations.map(we=>pD(I.fe,we));return{userId:S,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:z,mutations:q}}(this.serializer,this.userId,m),b=[];let w=new Ki((I,S)=>rn(I.canonicalString(),S.canonicalString()));for(const I of r){const S=SG(this.userId,I.key.path,d);w=w.add(I.key.path.popLast()),b.push(o.put(f)),b.push(s.put(S,Jte))}return w.forEach(I=>{b.push(this.indexManager.addToCollectionParentIndex(e,I))}),e.addOnCommittedListener(()=>{this.Vn[d]=m.keys()}),de.waitFor(b).next(()=>m)})}lookupMutationBatch(e,n){return Lp(e).get(n).next(t=>t?(Rt(t.userId===this.userId),Lv(this.serializer,t)):null)}Sn(e,n){return this.Vn[n]?de.resolve(this.Vn[n]):this.lookupMutationBatch(e,n).next(t=>{if(t){const r=t.keys();return this.Vn[n]=r,r}return null})}getNextMutationBatchAfterBatchId(e,n){const t=n+1,r=IDBKeyRange.lowerBound([this.userId,t]);let s=null;return Lp(e).X({index:"userMutationsIndex",range:r},(o,d,m)=>{d.userId===this.userId&&(Rt(d.batchId>=t),s=Lv(this.serializer,d)),m.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let t=-1;return Lp(e).X({index:"userMutationsIndex",range:n,reverse:!0},(r,s,o)=>{t=s.batchId,o.done()}).next(()=>t)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lp(e).j("userMutationsIndex",n).next(t=>t.map(r=>Lv(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(e,n){const t=hR(this.userId,n.path),r=IDBKeyRange.lowerBound(t),s=[];return lw(e).X({range:r},(o,d,m)=>{const[f,b,w]=o,I=Vu(b);if(f===this.userId&&n.path.isEqual(I))return Lp(e).get(w).next(S=>{if(!S)throw xt();Rt(S.userId===this.userId),s.push(Lv(this.serializer,S))});m.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let t=new Ki(rn);const r=[];return n.forEach(s=>{const o=hR(this.userId,s.path),d=IDBKeyRange.lowerBound(o),m=lw(e).X({range:d},(f,b,w)=>{const[I,S,F]=f,z=Vu(S);I===this.userId&&s.path.isEqual(z)?t=t.add(F):w.done()});r.push(m)}),de.waitFor(r).next(()=>this.Dn(e,t))}getAllMutationBatchesAffectingQuery(e,n){const t=n.path,r=t.length+1,s=hR(this.userId,t),o=IDBKeyRange.lowerBound(s);let d=new Ki(rn);return lw(e).X({range:o},(m,f,b)=>{const[w,I,S]=m,F=Vu(I);w===this.userId&&t.isPrefixOf(F)?F.length===r&&(d=d.add(S)):b.done()}).next(()=>this.Dn(e,d))}Dn(e,n){const t=[],r=[];return n.forEach(s=>{r.push(Lp(e).get(s).next(o=>{if(null===o)throw xt();Rt(o.userId===this.userId),t.push(Lv(this.serializer,o))}))}),de.waitFor(r).next(()=>t)}removeMutationBatch(e,n){return s8(e.ht,this.userId,n).next(t=>(e.addOnCommittedListener(()=>{this.Cn(n.batchId)}),de.forEach(t,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return de.resolve();const t=IDBKeyRange.lowerBound([this.userId]),r=[];return lw(e).X({range:t},(s,o,d)=>{if(s[0]===this.userId){const m=Vu(s[1]);r.push(m)}else d.done()}).next(()=>{Rt(0===r.length)})})}containsKey(e,n){return o8(e,this.userId,n)}xn(e){return a8(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function o8(i,e,n){const t=hR(e,n.path),r=t[1],s=IDBKeyRange.lowerBound(t);let o=!1;return lw(i).X({range:s,Y:!0},(d,m,f)=>{const[b,w,I]=d;b===e&&w===r&&(o=!0),f.done()}).next(()=>o)}function Lp(i){return Ws(i,"mutations")}function lw(i){return Ws(i,"documentMutations")}function a8(i){return Ws(i,"mutationQueues")}class Uv{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Uv(0)}static Mn(){return new Uv(-1)}}class mie{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.$n(e).next(n=>{const t=new Uv(n.highestTargetId);return n.highestTargetId=t.next(),this.On(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(n=>Ot.fromTimestamp(new cr(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,t){return this.$n(e).next(r=>(r.highestListenSequenceNumber=n,t&&(r.lastRemoteSnapshotVersion=t.toTimestamp()),n>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=n),this.On(e,r)))}addTargetData(e,n){return this.Fn(e,n).next(()=>this.$n(e).next(t=>(t.targetCount+=1,this.Bn(n,t),this.On(e,t))))}updateTargetData(e,n){return this.Fn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>dw(e).delete(n.targetId)).next(()=>this.$n(e)).next(t=>(Rt(t.targetCount>0),t.targetCount-=1,this.On(e,t)))}removeTargets(e,n,t){let r=0;const s=[];return dw(e).X((o,d)=>{const m=_D(d);m.sequenceNumber<=n&&null===t.get(m.targetId)&&(r++,s.push(this.removeTargetData(e,m)))}).next(()=>de.waitFor(s)).next(()=>r)}forEachTarget(e,n){return dw(e).X((t,r)=>{const s=_D(r);n(s)})}$n(e){return c8(e).get("targetGlobalKey").next(n=>(Rt(null!==n),n))}On(e,n){return c8(e).put("targetGlobalKey",n)}Fn(e,n){return dw(e).put($$(this.serializer,n))}Bn(e,n){let t=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,t=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,t=!0),t}getTargetCount(e){return this.$n(e).next(n=>n.targetCount)}getTargetData(e,n){const t=Mv(n),r=IDBKeyRange.bound([t,Number.NEGATIVE_INFINITY],[t,Number.POSITIVE_INFINITY]);let s=null;return dw(e).X({range:r,index:"queryTargetsIndex"},(o,d,m)=>{const f=_D(d);iD(n,f.target)&&(s=f,m.done())}).next(()=>s)}addMatchingKeys(e,n,t){const r=[],s=Bp(e);return n.forEach(o=>{const d=$o(o.path);r.push(s.put({targetId:t,path:d})),r.push(this.referenceDelegate.addReference(e,t,o))}),de.waitFor(r)}removeMatchingKeys(e,n,t){const r=Bp(e);return de.forEach(n,s=>{const o=$o(s.path);return de.waitFor([r.delete([t,o]),this.referenceDelegate.removeReference(e,t,s)])})}removeMatchingKeysForTargetId(e,n){const t=Bp(e),r=IDBKeyRange.bound([n],[n+1],!1,!0);return t.delete(r)}getMatchingKeysForTargetId(e,n){const t=IDBKeyRange.bound([n],[n+1],!1,!0),r=Bp(e);let s=fn();return r.X({range:t,Y:!0},(o,d,m)=>{const f=Vu(o[1]),b=new lt(f);s=s.add(b)}).next(()=>s)}containsKey(e,n){const t=$o(n.path),r=IDBKeyRange.bound([t],[yG(t)],!1,!0);let s=0;return Bp(e).X({index:"documentTargetsIndex",Y:!0,range:r},([o,d],m,f)=>{0!==o&&(s++,f.done())}).next(()=>s>0)}le(e,n){return dw(e).get(n).next(t=>t?_D(t):null)}}function dw(i){return Ws(i,"targets")}function c8(i){return Ws(i,"targetGlobal")}function Bp(i){return Ws(i,"targetDocuments")}function l8([i,e],[n,t]){const r=rn(i,n);return 0===r?rn(e,t):r}class fie{constructor(e){this.Ln=e,this.buffer=new Ki(l8),this.qn=0}Un(){return++this.qn}Kn(e){const n=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(n);else{const t=this.buffer.last();l8(n,t)<0&&(this.buffer=this.buffer.delete(t).add(n))}}get maxValue(){return this.buffer.last()[0]}}class d8{constructor(e,n,t){this.garbageCollector=e,this.asyncQueue=n,this.localStore=t,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var n=this;Ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ee.Z)(function*(){n.Gn=null;try{yield n.localStore.collectGarbage(n.garbageCollector)}catch(t){kp(t)?Ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Dp(t)}yield n.Qn(3e5)}))}}class pie{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.zn(e).next(t=>Math.floor(n/100*t))}nthSequenceNumber(e,n){if(0===n)return de.resolve(Mc.ct);const t=new fie(n);return this.jn.forEachTarget(e,r=>t.Kn(r.sequenceNumber)).next(()=>this.jn.Wn(e,r=>t.Kn(r))).next(()=>t.maxValue)}removeTargets(e,n,t){return this.jn.removeTargets(e,n,t)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(r8)):this.getCacheSize(e).next(t=>t<this.params.cacheSizeCollectionThreshold?(Ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${t} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),r8):this.Hn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,n){let t,r,s,o,d,m,f;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(w=>(w>this.params.maximumSequenceNumbersToCollect?(Ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${w}`),r=this.params.maximumSequenceNumbersToCollect):r=w,o=Date.now(),this.nthSequenceNumber(e,r))).next(w=>(t=w,d=Date.now(),this.removeTargets(e,t,n))).next(w=>(s=w,m=Date.now(),this.removeOrphanedDocuments(e,t))).next(w=>(f=Date.now(),WB()<=Cs.in.DEBUG&&Ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-b}ms\n\tDetermined least recently used ${r} in `+(d-o)+`ms\n\tRemoved ${s} targets in `+(m-d)+`ms\n\tRemoved ${w} documents in `+(f-m)+`ms\nTotal Duration: ${f-b}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:w})))}}class _ie{constructor(e,n){this.db=e,this.garbageCollector=function u8(i,e){return new pie(i,e)}(this,n)}zn(e){const n=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(t=>n.next(r=>t+r))}Jn(e){let n=0;return this.Wn(e,t=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Wn(e,n){return this.Yn(e,(t,r)=>n(r))}addReference(e,n,t){return NR(e,t)}removeReference(e,n,t){return NR(e,t)}removeTargets(e,n,t){return this.db.getTargetCache().removeTargets(e,n,t)}markPotentiallyOrphaned(e,n){return NR(e,n)}Xn(e,n){return function(t,r){let s=!1;return a8(t).Z(o=>o8(t,o,r).next(d=>(d&&(s=!0),de.resolve(!d)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const t=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Yn(e,(o,d)=>{if(d<=n){const m=this.Xn(e,o).next(f=>{if(!f)return s++,t.getEntry(e,o).next(()=>(t.removeEntry(o,Ot.min()),Bp(e).delete([0,$o(o.path)])))});r.push(m)}}).next(()=>de.waitFor(r)).next(()=>t.apply(e)).next(()=>s)}removeTarget(e,n){const t=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,t)}updateLimboDocument(e,n){return NR(e,n)}Yn(e,n){const t=Bp(e);let r,s=Mc.ct;return t.X({index:"documentTargetsIndex"},([o,d],{path:m,sequenceNumber:f})=>{0===o?(s!==Mc.ct&&n(new lt(Vu(r)),s),s=f,r=m):s=Mc.ct}).next(()=>{s!==Mc.ct&&n(new lt(Vu(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function NR(i,e){return Bp(i).put((t=i.currentSequenceNumber,{targetId:0,path:$o(e.path),sequenceNumber:t}));var t}class h8{constructor(){this.changes=new Em(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qi.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const t=this.changes.get(n);return void 0!==t?de.resolve(t):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gie{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,t){return Hv(e).put(t)}removeEntry(e,n,t){return Hv(e).delete(function(r,s){const o=r.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],TR(s),o[o.length-1]]}(n,t))}updateMetadata(e,n){return this.getMetadata(e).next(t=>(t.byteSize+=n,this.Zn(e,t)))}getEntry(e,n){let t=Qi.newInvalidDocument(n);return Hv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(wD(n))},(r,s)=>{t=this.ts(n,s)}).next(()=>t)}es(e,n){let t={size:0,document:Qi.newInvalidDocument(n)};return Hv(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(wD(n))},(r,s)=>{t={document:this.ts(n,s),size:PR(s)}}).next(()=>t)}getEntries(e,n){let t=$a();return this.ns(e,n,(r,s)=>{const o=this.ts(r,s);t=t.insert(r,o)}).next(()=>t)}ss(e,n){let t=$a(),r=new Gi(lt.comparator);return this.ns(e,n,(s,o)=>{const d=this.ts(s,o);t=t.insert(s,d),r=r.insert(s,PR(o))}).next(()=>({documents:t,rs:r}))}ns(e,n,t){if(n.isEmpty())return de.resolve();let r=new Ki(_8);n.forEach(m=>r=r.add(m));const s=IDBKeyRange.bound(wD(r.first()),wD(r.last())),o=r.getIterator();let d=o.getNext();return Hv(e).X({index:"documentKeyIndex",range:s},(m,f,b)=>{const w=lt.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;d&&_8(d,w)<0;)t(d,null),d=o.getNext();d&&d.isEqual(w)&&(t(d,f),d=o.hasNext()?o.getNext():null),d?b.G(wD(d)):b.done()}).next(()=>{for(;d;)t(d,null),d=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,t,r){const s=n.path,o=[s.popLast().toArray(),s.lastSegment(),TR(t.readTime),t.documentKey.path.isEmpty()?"":t.documentKey.path.lastSegment()],d=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Hv(e).j(IDBKeyRange.bound(o,d,!0)).next(m=>{let f=$a();for(const b of m){const w=this.ts(lt.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);w.isFoundDocument()&&(sD(n,w)||r.has(w.key))&&(f=f.insert(w.key,w))}return f})}getAllFromCollectionGroup(e,n,t,r){let s=$a();const o=p8(n,t),d=p8(n,Ac.max());return Hv(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,d,!0)},(m,f,b)=>{const w=this.ts(lt.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);s=s.insert(w.key,w),s.size===r&&b.done()}).next(()=>s)}newChangeBuffer(e){return new vie(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return f8(e).get("remoteDocumentGlobalKey").next(n=>(Rt(!!n),n))}Zn(e,n){return f8(e).put("remoteDocumentGlobalKey",n)}ts(e,n){if(n){const t=function iie(i,e){let n;if(e.document)n=L$(i.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=lt.fromSegments(e.noDocument.path),r=Fv(e.noDocument.readTime);n=Qi.newNoDocument(t,r),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const t=lt.fromSegments(e.unknownDocument.path),r=Fv(e.unknownDocument.version);n=Qi.newUnknownDocument(t,r)}}return e.readTime&&n.setReadTime(function(t){const r=new cr(t[0],t[1]);return Ot.fromTimestamp(r)}(e.readTime)),n}(this.serializer,n);if(!t.isNoDocument()||!t.version.isEqual(Ot.min()))return t}return Qi.newInvalidDocument(e)}}function m8(i){return new gie(i)}class vie extends h8{constructor(e,n){super(),this.os=e,this.trackRemovals=n,this.us=new Em(t=>t.toString(),(t,r)=>t.isEqual(r))}applyChanges(e){const n=[];let t=0,r=new Ki((s,o)=>rn(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const d=this.us.get(s);if(n.push(this.os.removeEntry(e,s,d.readTime)),o.isValidDocument()){const m=G$(this.os.serializer,o);r=r.add(s.path.popLast());const f=PR(m);t+=f-d.size,n.push(this.os.addEntry(e,s,m))}else if(t-=d.size,this.trackRemovals){const m=G$(this.os.serializer,o.convertToNoDocument(Ot.min()));n.push(this.os.addEntry(e,s,m))}}),r.forEach(s=>{n.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.os.updateMetadata(e,t)),de.waitFor(n)}getFromCache(e,n){return this.os.es(e,n).next(t=>(this.us.set(n,{size:t.size,readTime:t.document.readTime}),t.document))}getAllFromCache(e,n){return this.os.ss(e,n).next(({documents:t,rs:r})=>(r.forEach((s,o)=>{this.us.set(s,{size:o,readTime:t.get(s).readTime})}),t))}}function f8(i){return Ws(i,"remoteDocumentGlobal")}function Hv(i){return Ws(i,"remoteDocumentsV14")}function wD(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function p8(i,e){const n=e.documentKey.path.toArray();return[i,TR(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function _8(i,e){const n=i.path.toArray(),t=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<t.length-2;++s)if(r=rn(n[s],t[s]),r)return r;return r=rn(n.length,t.length),r||(r=rn(n[n.length-2],t[t.length-2]),r||rn(n[n.length-1],t[t.length-1]))}class bie{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class g8{constructor(e,n,t,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=t,this.indexManager=r}getDocument(e,n){let t=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(t=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(null!==t&&lD(t.mutation,r,Ga.empty(),cr.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(t=>this.getLocalViewOfDocuments(e,t,fn()).next(()=>t))}getLocalViewOfDocuments(e,n,t=fn()){const r=Hu();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,t).next(s=>{let o=oD();return s.forEach((d,m)=>{o=o.insert(d,m.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const t=Hu();return this.populateOverlays(e,t,n).next(()=>this.computeViews(e,n,t,fn()))}populateOverlays(e,n,t){const r=[];return t.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,d)=>{n.set(o,d)})})}computeViews(e,n,t,r){let s=$a();const o=aD(),d=aD();return n.forEach((m,f)=>{const b=t.get(f.key);r.has(f.key)&&(void 0===b||b.mutation instanceof Im)?s=s.insert(f.key,f):void 0!==b?(o.set(f.key,b.mutation.getFieldMask()),lD(b.mutation,f,b.mutation.getFieldMask(),cr.now())):o.set(f.key,Ga.empty())}),this.recalculateAndSaveOverlays(e,s).next(m=>(m.forEach((f,b)=>o.set(f,b)),n.forEach((f,b)=>{var w;return d.set(f,new bie(b,null!==(w=o.get(f))&&void 0!==w?w:null))}),d))}recalculateAndSaveOverlays(e,n){const t=aD();let r=new Gi((o,d)=>o-d),s=fn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const d of o)d.keys().forEach(m=>{const f=n.get(m);if(null===f)return;let b=t.get(m)||Ga.empty();b=d.applyToLocalView(f,b),t.set(m,b);const w=(r.get(d.batchId)||fn()).add(m);r=r.insert(d.batchId,w)})}).next(()=>{const o=[],d=r.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),f=m.key,b=m.value,w=c$();b.forEach(I=>{if(!s.has(I)){const S=g$(n.get(I),t.get(I));null!==S&&w.set(I,S),s=s.add(I)}}),o.push(this.documentOverlayCache.saveOverlays(e,f,w))}return de.waitFor(o)}).next(()=>t)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,n,t){return lt.isDocumentKey((r=n).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,n.path):sV(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,t):this.getDocumentsMatchingCollectionQuery(e,n,t);var r}getNextDocuments(e,n,t,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,t,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,t.largestBatchId,r-s.size):de.resolve(Hu());let d=-1,m=s;return o.next(f=>de.forEach(f,(b,w)=>(d<w.largestBatchId&&(d=w.largestBatchId),s.get(b)?de.resolve():this.remoteDocumentCache.getEntry(e,b).next(I=>{m=m.insert(b,I)}))).next(()=>this.populateOverlays(e,f,s)).next(()=>this.computeViews(e,m,f,fn())).next(b=>({batchId:d,changes:a$(b)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new lt(n)).next(t=>{let r=oD();return t.isFoundDocument()&&(r=r.insert(t.key,t)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,t){const r=n.collectionGroup;let s=oD();return this.indexManager.getCollectionParents(e,r).next(o=>de.forEach(o,d=>{const m=(f=n,b=d.child(r),new Cm(b,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt));var f,b;return this.getDocumentsMatchingCollectionQuery(e,m,t).next(f=>{f.forEach((b,w)=>{s=s.insert(b,w)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,t){let r;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,t.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,t,r))).next(s=>{r.forEach((d,m)=>{const f=m.getKey();null===s.get(f)&&(s=s.insert(f,Qi.newInvalidDocument(f)))});let o=oD();return s.forEach((d,m)=>{const f=r.get(d);void 0!==f&&lD(f.mutation,m,Ga.empty(),cr.now()),sD(n,m)&&(o=o.insert(d,m))}),o})}}class yie{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,n){return de.resolve(this.cs.get(n))}saveBundleMetadata(e,n){var t;return this.cs.set(n.id,{id:(t=n).id,version:t.version,createTime:Yr(t.createTime)}),de.resolve()}getNamedQuery(e,n){return de.resolve(this.hs.get(n))}saveNamedQuery(e,n){return this.hs.set(n.name,{name:(t=n).name,query:yV(t.bundledQuery),readTime:Yr(t.readTime)}),de.resolve();var t}}class wie{constructor(){this.overlays=new Gi(lt.comparator),this.ls=new Map}getOverlay(e,n){return de.resolve(this.overlays.get(n))}getOverlays(e,n){const t=Hu();return de.forEach(n,r=>this.getOverlay(e,r).next(s=>{null!==s&&t.set(r,s)})).next(()=>t)}saveOverlays(e,n,t){return t.forEach((r,s)=>{this.we(e,n,s)}),de.resolve()}removeOverlaysForBatchId(e,n,t){const r=this.ls.get(t);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(t)),de.resolve()}getOverlaysForCollection(e,n,t){const r=Hu(),s=n.length+1,o=new lt(n.child("")),d=this.overlays.getIteratorFrom(o);for(;d.hasNext();){const m=d.getNext().value,f=m.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===s&&m.largestBatchId>t&&r.set(m.getKey(),m)}return de.resolve(r)}getOverlaysForCollectionGroup(e,n,t,r){let s=new Gi((f,b)=>f-b);const o=this.overlays.getIterator();for(;o.hasNext();){const f=o.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>t){let b=s.get(f.largestBatchId);null===b&&(b=Hu(),s=s.insert(f.largestBatchId,b)),b.set(f.getKey(),f)}}const d=Hu(),m=s.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((f,b)=>d.set(f,b)),!(d.size()>=r)););return de.resolve(d)}we(e,n,t){const r=this.overlays.get(t.key);if(null!==r){const o=this.ls.get(r.largestBatchId).delete(t.key);this.ls.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(t.key,new hV(n,t));let s=this.ls.get(n);void 0===s&&(s=fn(),this.ls.set(n,s)),this.ls.set(n,s.add(t.key))}}class kV{constructor(){this.fs=new Ki(qs.ds),this.ws=new Ki(qs._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,n){const t=new qs(e,n);this.fs=this.fs.add(t),this.ws=this.ws.add(t)}gs(e,n){e.forEach(t=>this.addReference(t,n))}removeReference(e,n){this.ys(new qs(e,n))}ps(e,n){e.forEach(t=>this.removeReference(t,n))}Is(e){const n=new lt(new Wn([])),t=new qs(n,e),r=new qs(n,e+1),s=[];return this.ws.forEachInRange([t,r],o=>{this.ys(o),s.push(o.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const n=new lt(new Wn([])),t=new qs(n,e),r=new qs(n,e+1);let s=fn();return this.ws.forEachInRange([t,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new qs(e,0),t=this.fs.firstAfterOrEqual(n);return null!==t&&e.isEqual(t.key)}}class qs{constructor(e,n){this.key=e,this.As=n}static ds(e,n){return lt.comparator(e.key,n.key)||rn(e.As,n.As)}static _s(e,n){return rn(e.As,n.As)||lt.comparator(e.key,n.key)}}class xie{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.vs=1,this.Rs=new Ki(qs.ds)}checkEmpty(e){return de.resolve(0===this.mutationQueue.length)}addMutationBatch(e,n,t,r){const s=this.vs;this.vs++;const o=new dV(s,n,t,r);this.mutationQueue.push(o);for(const d of r)this.Rs=this.Rs.add(new qs(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,n){return de.resolve(this.Ps(n))}getNextMutationBatchAfterBatchId(e,n){const r=this.bs(n+1),s=r<0?0:r;return de.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const t=new qs(n,0),r=new qs(n,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([t,r],o=>{const d=this.Ps(o.As);s.push(d)}),de.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let t=new Ki(rn);return n.forEach(r=>{const s=new qs(r,0),o=new qs(r,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,o],d=>{t=t.add(d.As)})}),de.resolve(this.Vs(t))}getAllMutationBatchesAffectingQuery(e,n){const t=n.path,r=t.length+1;let s=t;lt.isDocumentKey(s)||(s=s.child(""));const o=new qs(new lt(s),0);let d=new Ki(rn);return this.Rs.forEachWhile(m=>{const f=m.key.path;return!!t.isPrefixOf(f)&&(f.length===r&&(d=d.add(m.As)),!0)},o),de.resolve(this.Vs(d))}Vs(e){const n=[];return e.forEach(t=>{const r=this.Ps(t);null!==r&&n.push(r)}),n}removeMutationBatch(e,n){Rt(0===this.Ss(n.batchId,"removed")),this.mutationQueue.shift();let t=this.Rs;return de.forEach(n.mutations,r=>{const s=new qs(r.key,n.batchId);return t=t.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=t})}Cn(e){}containsKey(e,n){const t=new qs(n,0),r=this.Rs.firstAfterOrEqual(t);return de.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return de.resolve()}Ss(e,n){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const n=this.bs(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Cie{constructor(e){this.Ds=e,this.docs=new Gi(lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const t=n.key,r=this.docs.get(t),s=r?r.size:0,o=this.Ds(n);return this.docs=this.docs.insert(t,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,t.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const t=this.docs.get(n);return de.resolve(t?t.document.mutableCopy():Qi.newInvalidDocument(n))}getEntries(e,n){let t=$a();return n.forEach(r=>{const s=this.docs.get(r);t=t.insert(r,s?s.document.mutableCopy():Qi.newInvalidDocument(r))}),de.resolve(t)}getDocumentsMatchingQuery(e,n,t,r){let s=$a();const o=n.path,d=new lt(o.child("")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:f,value:{document:b}}=m.getNext();if(!o.isPrefixOf(f.path))break;f.path.length>o.length+1||ZB(xG(b),t)<=0||(r.has(b.key)||sD(n,b))&&(s=s.insert(b.key,b.mutableCopy()))}return de.resolve(s)}getAllFromCollectionGroup(e,n,t,r){xt()}Cs(e,n){return de.forEach(this.docs,t=>n(t))}newChangeBuffer(e){return new Eie(this)}getSize(e){return de.resolve(this.size)}}class Eie extends h8{constructor(e){super(),this.os=e}applyChanges(e){const n=[];return this.changes.forEach((t,r)=>{r.isValidDocument()?n.push(this.os.addEntry(e,r)):this.os.removeEntry(t)}),de.waitFor(n)}getFromCache(e,n){return this.os.getEntry(e,n)}getAllFromCache(e,n){return this.os.getEntries(e,n)}}class Iie{constructor(e){this.persistence=e,this.xs=new Em(n=>Mv(n),iD),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Ns=0,this.ks=new kV,this.targetCount=0,this.Ms=Uv.kn()}forEachTarget(e,n){return this.xs.forEach((t,r)=>n(r)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,n,t){return t&&(this.lastRemoteSnapshotVersion=t),n>this.Ns&&(this.Ns=n),de.resolve()}Fn(e){this.xs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Ms=new Uv(n),this.highestTargetId=n),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,n){return this.Fn(n),this.targetCount+=1,de.resolve()}updateTargetData(e,n){return this.Fn(n),de.resolve()}removeTargetData(e,n){return this.xs.delete(n.target),this.ks.Is(n.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,n,t){let r=0;const s=[];return this.xs.forEach((o,d)=>{d.sequenceNumber<=n&&null===t.get(d.targetId)&&(this.xs.delete(o),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),de.waitFor(s).next(()=>r)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,n){const t=this.xs.get(n)||null;return de.resolve(t)}addMatchingKeys(e,n,t){return this.ks.gs(n,t),de.resolve()}removeMatchingKeys(e,n,t){this.ks.ps(n,t);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),de.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.ks.Is(n),de.resolve()}getMatchingKeysForTargetId(e,n){const t=this.ks.Es(n);return de.resolve(t)}containsKey(e,n){return de.resolve(this.ks.containsKey(n))}}class TV{constructor(e,n){this.$s={},this.overlays={},this.Os=new Mc(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Iie(this),this.indexManager=new uie,this.remoteDocumentCache=new Cie(t=>this.referenceDelegate.Ls(t)),this.serializer=new j$(n),this.qs=new yie(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wie,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let t=this.$s[e.toKey()];return t||(t=new xie(n,this.referenceDelegate),this.$s[e.toKey()]=t),t}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,n,t){Ke("MemoryPersistence","Starting transaction:",e);const r=new Die(this.Os.next());return this.referenceDelegate.Us(),t(r).next(s=>this.referenceDelegate.Ks(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Gs(e,n){return de.or(Object.values(this.$s).map(t=>()=>t.containsKey(e,n)))}}class Die extends EG{constructor(e){super(),this.currentSequenceNumber=e}}class FR{constructor(e){this.persistence=e,this.Qs=new kV,this.js=null}static zs(e){return new FR(e)}get Ws(){if(this.js)return this.js;throw xt()}addReference(e,n,t){return this.Qs.addReference(t,n),this.Ws.delete(t.toString()),de.resolve()}removeReference(e,n,t){return this.Qs.removeReference(t,n),this.Ws.add(t.toString()),de.resolve()}markPotentiallyOrphaned(e,n){return this.Ws.add(n.toString()),de.resolve()}removeTarget(e,n){this.Qs.Is(n.targetId).forEach(r=>this.Ws.add(r.toString()));const t=this.persistence.getTargetCache();return t.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Ws.add(s.toString()))}).next(()=>t.removeTargetData(e,n))}Us(){this.js=new Set}Ks(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.Ws,t=>{const r=lt.fromPath(t);return this.Hs(e,r).next(s=>{s||n.removeEntry(r,Ot.min())})}).next(()=>(this.js=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hs(e,n).next(t=>{t?this.Ws.delete(n.toString()):this.Ws.add(n.toString())})}Ls(e){return 0}Hs(e,n){return de.or([()=>de.resolve(this.Qs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gs(e,n)])}}class kie{constructor(e){this.serializer=e}O(e,n,t,r){const s=new uR("createOrUpgrade",n);var d;t<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TG,{unique:!0}),d.createObjectStore("documentMutations"),v8(e),function(d){d.createObjectStore("remoteDocuments")}(e));let o=de.resolve();return t<3&&r>=3&&(0!==t&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),v8(e)),o=o.next(()=>function(d){const m=d.store("targetGlobal"),f={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",f)}(s))),t<4&&r>=4&&(0!==t&&(o=o.next(()=>function(d,m){return m.store("mutations").j().next(f=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",TG,{unique:!0});const b=m.store("mutations"),w=f.map(I=>b.put(I));return de.waitFor(w)})}(e,s))),o=o.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),t<5&&r>=5&&(o=o.next(()=>this.Ys(s))),t<6&&r>=6&&(o=o.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),t<7&&r>=7&&(o=o.next(()=>this.Zs(s))),t<8&&r>=8&&(o=o.next(()=>this.ti(e,s))),t<9&&r>=9&&(o=o.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),t<10&&r>=10&&(o=o.next(()=>this.ei(s))),t<11&&r>=11&&(o=o.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),t<12&&r>=12&&(o=o.next(()=>{!function(d){const m=d.createObjectStore("documentOverlays",{keyPath:une});m.createIndex("collectionPathOverlayIndex",hne,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",mne,{unique:!1})}(e)})),t<13&&r>=13&&(o=o.next(()=>function(d){const m=d.createObjectStore("remoteDocumentsV14",{keyPath:ene});m.createIndex("documentKeyIndex",tne),m.createIndex("collectionGroupIndex",nne)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),t<14&&r>=14&&(o=o.next(()=>this.si(e,s))),t<15&&r>=15&&(o=o.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:ane}).createIndex("sequenceNumberIndex",cne,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:lne}).createIndex("documentKeyIndex",dne,{unique:!1})}(e))),o}Xs(e){let n=0;return e.store("remoteDocuments").X((t,r)=>{n+=PR(r)}).next(()=>{const t={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",t)})}Ys(e){const n=e.store("mutationQueues"),t=e.store("mutations");return n.j().next(r=>de.forEach(r,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return t.j("userMutationsIndex",o).next(d=>de.forEach(d,m=>{Rt(m.userId===s.userId);const f=Lv(this.serializer,m);return s8(e,s.userId,f).next(()=>{})}))}))}Zs(e){const n=e.store("targetDocuments"),t=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return t.X((o,d)=>{const m=new Wn(o),f=[0,$o(m)];s.push(n.get(f).next(b=>b?de.resolve():n.put({targetId:0,path:$o(m),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>de.waitFor(s))})}ti(e,n){e.createObjectStore("collectionParents",{keyPath:one});const t=n.store("collectionParents"),r=new DV,s=o=>{if(r.add(o)){const d=o.lastSegment(),m=o.popLast();return t.put({collectionId:d,parent:$o(m)})}};return n.store("remoteDocuments").X({Y:!0},(o,d)=>{const m=new Wn(o);return s(m.popLast())}).next(()=>n.store("documentMutations").X({Y:!0},([o,d,m],f)=>{const b=Vu(d);return s(b.popLast())}))}ei(e){const n=e.store("targets");return n.X((t,r)=>{const s=_D(r),o=$$(this.serializer,s);return n.put(o)})}ni(e,n){const t=n.store("remoteDocuments"),r=[];return t.X((s,o)=>{const d=n.store("remoteDocumentsV14"),m=(f=o,f.document?new lt(Wn.fromString(f.document.name).popFirst(5)):f.noDocument?lt.fromSegments(f.noDocument.path):f.unknownDocument?lt.fromSegments(f.unknownDocument.path):xt()).path.toArray();var f;const b={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(d.put(b))}).next(()=>de.waitFor(r))}si(e,n){const t=n.store("mutations"),r=m8(this.serializer),s=new TV(FR.zs,this.serializer.fe);return t.j().next(o=>{const d=new Map;return o.forEach(m=>{var f;let b=null!==(f=d.get(m.userId))&&void 0!==f?f:fn();Lv(this.serializer,m).keys().forEach(w=>b=b.add(w)),d.set(m.userId,b)}),de.forEach(d,(m,f)=>{const b=new $s(f),w=SR.de(this.serializer,b),I=s.getIndexManager(b),S=OR.de(b,this.serializer,I,s.referenceDelegate);return new g8(r,S,w,I).recalculateAndSaveOverlaysForDocumentKeys(new QB(n,Mc.ct),m).next()})})}}function v8(i){i.createObjectStore("targetDocuments",{keyPath:rne}).createIndex("documentTargetsIndex",sne,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",ine,{unique:!0}),i.createObjectStore("targetGlobal")}const SV="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AV{constructor(e,n,t,r,s,o,d,m,f,b,w=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=t,this.ii=s,this.window=o,this.document=d,this.ri=f,this.oi=b,this.ui=w,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=I=>Promise.resolve(),!AV.D())throw new Ge(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _ie(this,r),this.di=n+"main",this.serializer=new j$(m),this.wi=new Nd(this.di,this.ui,new kie(this.serializer)),this.Bs=new mie(this.referenceDelegate,this.serializer),this.remoteDocumentCache=m8(this.serializer),this.qs=new rie,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===b&&qr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ge(ge.FAILED_PRECONDITION,SV);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Mc(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t,n=this;return this.fi=function(r){return(t=t||(0,ee.Z)(function*(s){if(n.started)return e(s)})).apply(this,arguments)},e(this.isPrimary)}setDatabaseDeletedListener(e){var n;this.wi.B(function(t){return(n=n||(0,ee.Z)(function*(r){null===r.newVersion&&(yield e())})).apply(this,arguments)})}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,ee.Z)(function*(){n.started&&(yield n.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>BR(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(n=>{n||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(n=>this.isPrimary&&!n?this.Ai(e).next(()=>!1):!!n&&this.vi(e).next(()=>!0))).catch(e=>{if(kp(e))return Ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return xD(e).get("owner").next(n=>de.resolve(this.Ri(n)))}Pi(e){return BR(e).delete(this.clientId)}bi(){var e=this;return(0,ee.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Ws(t,"clientMetadata");return r.j().next(s=>{const o=e.Si(s,18e5),d=s.filter(m=>-1===o.indexOf(m));return de.forEach(d,m=>r.delete(m.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const t of n)e._i.removeItem(e.Di(t.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?de.resolve(!0):xD(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)){if(this.Ri(n)&&this.networkEnabled)return!0;if(!this.Ri(n)){if(!n.allowTabSynchronization)throw new Ge(ge.FAILED_PRECONDITION,SV);return!1}}return!(!this.networkEnabled||!this.inForeground)||BR(e).j().next(t=>void 0===this.Si(t,5e3).find(r=>!(this.clientId===r.clientId||!(!this.networkEnabled&&r.networkEnabled||!this.inForeground&&r.inForeground&&this.networkEnabled===r.networkEnabled))))}).next(n=>(this.isPrimary!==n&&Ke("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,ee.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const t=new QB(n,Mc.ct);return e.Ai(t).next(()=>e.Pi(t))}),e.wi.close(),e.Mi()})()}Si(e,n){return e.filter(t=>this.Vi(t.updateTimeMs,n)&&!this.Ci(t.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>BR(e).j().next(n=>this.Si(n,18e5).map(t=>t.clientId)))}get started(){return this.Fs}getMutationQueue(e,n){return OR.de(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new hie(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return SR.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,n,t){Ke("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===n?"readonly":"readwrite",s=15===(o=this.ui)?pne:14===o?RG:13===o?MG:12===o?fne:11===o?AG:void xt();var o;let d;return this.wi.runTransaction(e,r,s,m=>(d=new QB(m,this.Os?this.Os.next():Mc.ct),"readwrite-primary"===n?this.Ti(d).next(f=>!!f||this.Ei(d)).next(f=>{if(!f)throw qr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Ge(ge.FAILED_PRECONDITION,CG);return t(d)}).next(f=>this.vi(d).next(()=>f)):this.Oi(d).next(()=>t(d)))).then(m=>(d.raiseOnCommittedEvent(),m))}Oi(e){return xD(e).get("owner").next(n=>{if(null!==n&&this.Vi(n.leaseTimestampMs,5e3)&&!this.Ci(n.ownerId)&&!this.Ri(n)&&!(this.oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Ge(ge.FAILED_PRECONDITION,SV)})}vi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xD(e).put("owner",n)}static D(){return Nd.D()}Ai(e){const n=xD(e);return n.get("owner").next(t=>this.Ri(t)?(Ke("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):de.resolve())}Vi(e,n){const t=Date.now();return!(e<t-n||e>t&&(qr(`Detected an update time that is in the future: ${e} > ${t}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;(0,R.G6)()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var n;try{const t=null!==(null===(n=this._i)||void 0===n?void 0:n.getItem(this.Di(e)));return Ke("IndexedDbPersistence",`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return qr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){qr("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xD(i){return Ws(i,"owner")}function BR(i){return Ws(i,"clientMetadata")}function MV(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class RV{constructor(e,n,t,r){this.targetId=e,this.fromCache=n,this.Fi=t,this.Bi=r}static Li(e,n){let t=fn(),r=fn();for(const s of n.docChanges)switch(s.type){case 0:t=t.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new RV(e,n.fromCache,t,r)}}class b8{constructor(){this.qi=!1}initialize(e,n){this.Ui=e,this.indexManager=n,this.qi=!0}getDocumentsMatchingQuery(e,n,t,r){return this.Ki(e,n).next(s=>s||this.Gi(e,n,r,t)).next(s=>s||this.Qi(e,n))}Ki(e,n){if(n$(n))return de.resolve(null);let t=pa(n);return this.indexManager.getIndexType(e,t).next(r=>0===r?null:(null!==n.limit&&1===r&&(n=xR(n,null,"F"),t=pa(n)),this.indexManager.getDocumentsMatchingTarget(e,t).next(s=>{const o=fn(...s);return this.Ui.getDocuments(e,o).next(d=>this.indexManager.getMinOffset(e,t).next(m=>{const f=this.ji(n,d);return this.zi(n,f,o,m.readTime)?this.Ki(e,xR(n,null,"F")):this.Wi(e,f,n,m)}))})))}Gi(e,n,t,r){return n$(n)||r.isEqual(Ot.min())?this.Qi(e,n):this.Ui.getDocuments(e,t).next(s=>{const o=this.ji(n,s);return this.zi(n,o,t,r)?this.Qi(e,n):(WB()<=Cs.in.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),aV(n)),this.Wi(e,o,n,wG(r,-1)))})}ji(e,n){let t=new Ki(s$(e));return n.forEach((r,s)=>{sD(e,s)&&(t=t.add(s))}),t}zi(e,n,t,r){if(null===e.limit)return!1;if(t.size!==n.size)return!0;const s="F"===e.limitType?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,n){return WB()<=Cs.in.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",aV(n)),this.Ui.getDocumentsMatchingQuery(e,n,Ac.min())}Wi(e,n,t,r){return this.Ui.getDocumentsMatchingQuery(e,t,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}class Tie{constructor(e,n,t,r){this.persistence=e,this.Hi=n,this.serializer=r,this.Ji=new Gi(rn),this.Yi=new Em(s=>Mv(s),iD),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(t)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new g8(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ji))}}function y8(i,e,n,t){return new Tie(i,e,n,t)}function w8(i,e){return(k5=k5||(0,ee.Z)(function*(n,t){const r=ut(n);return yield r.persistence.runTransaction("Handle user change","readonly",s=>{let o;return r.mutationQueue.getAllMutationBatches(s).next(d=>(o=d,r.tr(t),r.mutationQueue.getAllMutationBatches(s))).next(d=>{const m=[],f=[];let b=fn();for(const w of o){m.push(w.batchId);for(const I of w.mutations)b=b.add(I.key)}for(const w of d){f.push(w.batchId);for(const I of w.mutations)b=b.add(I.key)}return r.localDocuments.getDocuments(s,b).next(w=>({er:w,removedBatchIds:m,addedBatchIds:f}))})})})).apply(this,arguments)}function x8(i){const e=ut(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Bs.getLastRemoteSnapshotVersion(n))}function C8(i,e,n){let t=fn(),r=fn();return n.forEach(s=>t=t.add(s)),e.getEntries(i,t).next(s=>{let o=$a();return n.forEach((d,m)=>{const f=s.get(d);m.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(d)),m.isNoDocument()&&m.version.isEqual(Ot.min())?(e.removeEntry(d,m.readTime),o=o.insert(d,m)):!f.isValidDocument()||m.version.compareTo(f.version)>0||0===m.version.compareTo(f.version)&&f.hasPendingWrites?(e.addEntry(m),o=o.insert(d,m)):Ke("LocalStore","Ignoring outdated watch update for ",d,". Current version:",f.version," Watch version:",m.version)}),{nr:o,sr:r}})}function Mie(i,e){const n=ut(i);return n.persistence.runTransaction("Get next mutation batch","readonly",t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e)))}function uw(i,e){const n=ut(i);return n.persistence.runTransaction("Allocate target","readwrite",t=>{let r;return n.Bs.getTargetData(t,e).next(s=>s?(r=s,de.resolve(r)):n.Bs.allocateTargetId(t).next(o=>(r=new Dm(e,o,"TargetPurposeListen",t.currentSequenceNumber),n.Bs.addTargetData(t,r).next(()=>r))))}).then(t=>{const r=n.Ji.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(t.targetId,t),n.Yi.set(e,t.targetId)),t})}function hw(i,e,n){return(T5=T5||(0,ee.Z)(function*(t,r,s){const o=ut(t),d=o.Ji.get(r),m=s?"readwrite":"readwrite-primary";try{s||(yield o.persistence.runTransaction("Release target",m,f=>o.persistence.referenceDelegate.removeTarget(f,d)))}catch(f){if(!kp(f))throw f;Ke("LocalStore",`Failed to update sequence numbers for target ${r}: ${f}`)}o.Ji=o.Ji.remove(r),o.Yi.delete(d.target)})).apply(this,arguments)}function VR(i,e,n){const t=ut(i);let r=Ot.min(),s=fn();return t.persistence.runTransaction("Execute query","readonly",o=>function(d,m,f){const b=ut(d),w=b.Yi.get(f);return void 0!==w?de.resolve(b.Ji.get(w)):b.Bs.getTargetData(m,f)}(t,o,pa(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,t.Bs.getMatchingKeysForTargetId(o,d.targetId).next(m=>{s=m})}).next(()=>t.Hi.getDocumentsMatchingQuery(o,e,n?r:Ot.min(),n?s:fn())).next(d=>(D8(t,r$(e),d),{documents:d,ir:s})))}function E8(i,e){const n=ut(i),t=ut(n.Bs),r=n.Ji.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",s=>t.le(s,e).next(o=>o?o.target:null))}function I8(i,e){const n=ut(i),t=n.Xi.get(e)||Ot.min();return n.persistence.runTransaction("Get new document changes","readonly",r=>n.Zi.getAllFromCollectionGroup(r,e,wG(t,-1),Number.MAX_SAFE_INTEGER)).then(r=>(D8(n,e,r),r))}function D8(i,e,n){let t=i.Xi.get(e)||Ot.min();n.forEach((r,s)=>{s.readTime.compareTo(t)>0&&(t=s.readTime)}),i.Xi.set(e,t)}function Pie(i,e){return(A5=A5||(0,ee.Z)(function*(n,t,r=fn()){const s=yield uw(n,pa(yV(t.bundledQuery))),o=ut(n);return o.persistence.runTransaction("Save named query","readwrite",d=>{const m=Yr(t.readTime);if(s.snapshotVersion.compareTo(m)>=0)return o.qs.saveNamedQuery(d,t);const f=s.withResumeToken(Ss.EMPTY_BYTE_STRING,m);return o.Ji=o.Ji.insert(f.targetId,f),o.Bs.updateTargetData(d,f).next(()=>o.Bs.removeMatchingKeysForTargetId(d,s.targetId)).next(()=>o.Bs.addMatchingKeys(d,r,s.targetId)).next(()=>o.qs.saveNamedQuery(d,t))})})).apply(this,arguments)}function k8(i,e){return`firestore_clients_${i}_${e}`}function T8(i,e,n){let t=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(t+=`_${e.uid}`),t}function PV(i,e){return`firestore_targets_${i}_${e}`}class UR{constructor(e,n,t,r){this.user=e,this.batchId=n,this.state=t,this.error=r}static ar(e,n,t){const r=JSON.parse(t);let s,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(s=new Ge(r.error.code,r.error.message))),o?new UR(e,n,r.state,s):(qr("SharedClientState",`Failed to parse mutation state for ID '${n}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CD{constructor(e,n,t){this.targetId=e,this.state=n,this.error=t}static ar(e,n){const t=JSON.parse(n);let r,s="object"==typeof t&&-1!==["not-current","current","rejected"].indexOf(t.state)&&(void 0===t.error||"object"==typeof t.error);return s&&t.error&&(s="string"==typeof t.error.message&&"string"==typeof t.error.code,s&&(r=new Ge(t.error.code,t.error.message))),s?new CD(e,t.state,r):(qr("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class HR{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static ar(e,n){const t=JSON.parse(n);let r="object"==typeof t&&t.activeTargetIds instanceof Array,s=cV();for(let o=0;r&&o<t.activeTargetIds.length;++o)r=DG(t.activeTargetIds[o]),s=s.add(t.activeTargetIds[o]);return r?new HR(e,s):(qr("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class OV{constructor(e,n){this.clientId=e,this.onlineState=n}static ar(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new OV(n.clientId,n.onlineState):(qr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class NV{constructor(){this.activeTargetIds=cV()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class FV{constructor(e,n,t,r,s){this.window=e,this.ii=n,this.persistenceKey=t,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Gi(rn),this.started=!1,this.yr=[];const o=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=k8(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new NV),this.Tr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ee.Z)(function*(){const n=yield e.syncEngine.$i();for(const r of n){if(r===e.wr)continue;const s=e.getItem(k8(e.persistenceKey,r));if(s){const o=HR.ar(r,s);o&&(e.gr=e.gr.insert(o.clientId,o))}}e.Pr();const t=e.storage.getItem(e.vr);if(t){const r=e.br(t);r&&e.Vr(r)}for(const r of e.yr)e.mr(r);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let n=!1;return this.gr.forEach((t,r)=>{r.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,n,t){this.Dr(e,n,t),this.Cr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(PV(this.persistenceKey,e));if(t){const r=CD.ar(e,t);r&&(n=r.state)}}return this.Nr.lr(e),this.Pr(),n}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(PV(this.persistenceKey,e))}updateQueryState(e,n,t){this.kr(e,n,t)}handleUserChange(e,n,t){n.forEach(r=>{this.Cr(r)}),this.currentUser=e,t.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Ke("SharedClientState","READ",e,n),n}setItem(e,n){Ke("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var n=this;const t=e;if(t.storageArea===this.storage){if(Ke("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void qr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,ee.Z)(function*(){if(n.started){if(null!==t.key)if(n.Tr.test(t.key)){if(null==t.newValue){const r=n.Or(t.key);return n.Fr(r,null)}{const r=n.Br(t.key,t.newValue);if(r)return n.Fr(r.clientId,r)}}else if(n.Er.test(t.key)){if(null!==t.newValue){const r=n.Lr(t.key,t.newValue);if(r)return n.qr(r)}}else if(n.Ar.test(t.key)){if(null!==t.newValue){const r=n.Ur(t.key,t.newValue);if(r)return n.Kr(r)}}else if(t.key===n.vr){if(null!==t.newValue){const r=n.br(t.newValue);if(r)return n.Vr(r)}}else if(t.key===n.Ir){const r=function(s){let o=Mc.ct;if(null!=s)try{const d=JSON.parse(s);Rt("number"==typeof d),o=d}catch(d){qr("SharedClientState","Failed to read sequence number from WebStorage",d)}return o}(t.newValue);r!==Mc.ct&&n.sequenceNumberHandler(r)}else if(t.key===n.Rr){const r=n.Gr(t.newValue);yield Promise.all(r.map(s=>n.syncEngine.Qr(s)))}}else n.yr.push(t)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,n,t){const r=new UR(this.currentUser,e,n,t),s=T8(this.persistenceKey,this.currentUser,e);this.setItem(s,r.hr())}Cr(e){const n=T8(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,n,t){const r=PV(this.persistenceKey,e),s=new CD(e,n,t);this.setItem(r,s.hr())}$r(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Rr,n)}Or(e){const n=this.Tr.exec(e);return n?n[1]:null}Br(e,n){const t=this.Or(e);return HR.ar(t,n)}Lr(e,n){const t=this.Er.exec(e),r=Number(t[1]);return UR.ar(new $s(void 0!==t[2]?t[2]:null),r,n)}Ur(e,n){const t=this.Ar.exec(e),r=Number(t[1]);return CD.ar(r,n)}br(e){return OV.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var n=this;return(0,ee.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.jr(e.batchId,e.state,e.error);Ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,n){const t=n?this.gr.insert(e,n):this.gr.remove(e),r=this.Sr(this.gr),s=this.Sr(t),o=[],d=[];return s.forEach(m=>{r.has(m)||o.push(m)}),r.forEach(m=>{s.has(m)||d.push(m)}),this.syncEngine.Wr(o,d).then(()=>{this.gr=t})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let n=cV();return e.forEach((t,r)=>{n=n.unionWith(r.activeTargetIds)}),n}}class S8{constructor(){this.Hr=new NV,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,t){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,n,t){this.Jr[e]=n}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new NV,Promise.resolve()}handleUserChange(e,n,t){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Oie{Yr(e){}shutdown(){}}class A8{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let zR=null;function LV(){return null===zR?zR=268435456+Math.round(2147483648*Math.random()):zR++,"0x"+zR.toString(16)}const Nie={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fie{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const qo="WebChannelConnection";class Lie extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,n,t,r,s){const o=LV(),d=this.To(e,n);Ke("RestConnection",`Sending RPC '${e}' ${o}:`,d,t);const m={};return this.Eo(m,r,s),this.Ao(e,d,m,t).then(f=>(Ke("RestConnection",`Received RPC '${e}' ${o}: `,f),f),f=>{throw kl("RestConnection",`RPC '${e}' ${o} failed with error: `,f,"url: ",d,"request:",t),f})}vo(e,n,t,r,s,o){return this.Io(e,n,t,r,s)}Eo(e,n,t){e["X-Goog-Api-Client"]="gl-js/ fire/"+K0,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((r,s)=>e[s]=r),t&&t.headers.forEach((r,s)=>e[s]=r)}To(e,n){return`${this.mo}/v1/${n}:${Nie[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,n,t,r){const s=LV();return new Promise((o,d)=>{const m=new Ote;m.setWithCredentials(!0),m.listenOnce(Mte.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case $B.NO_ERROR:const b=m.getResponseJson();Ke(qo,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(b)),o(b);break;case $B.TIMEOUT:Ke(qo,`RPC '${e}' ${s} timed out`),d(new Ge(ge.DEADLINE_EXCEEDED,"Request time out"));break;case $B.HTTP_ERROR:const w=m.getStatus();if(Ke(qo,`RPC '${e}' ${s} failed with status:`,w,"response text:",m.getResponseText()),w>0){let I=m.getResponseJson();Array.isArray(I)&&(I=I[0]);const S=I?.error;if(S&&S.status&&S.message){const F=function(z){const q=z.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(q)>=0?q:ge.UNKNOWN}(S.status);d(new Ge(F,S.message))}else d(new Ge(ge.UNKNOWN,"Server responded with status "+m.getStatus()))}else d(new Ge(ge.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Ke(qo,`RPC '${e}' ${s} completed.`)}});const f=JSON.stringify(r);Ke(qo,`RPC '${e}' ${s} sending request:`,r),m.send(n,"POST",f,t,15)})}Ro(e,n,t){const r=LV(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Ste(),d=Ate(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;void 0!==f&&(m.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(m.xmlHttpFactory=new Pte({})),this.Eo(m.initMessageHeaders,n,t),m.encodeInitMessageHeaders=!0;const b=s.join("");Ke(qo,`Creating RPC '${e}' stream ${r}: ${b}`,m);const w=o.createWebChannel(b,m);let I=!1,S=!1;const F=new Fie({ro:q=>{S?Ke(qo,`Not sending because RPC '${e}' stream ${r} is closed:`,q):(I||(Ke(qo,`Opening RPC '${e}' stream ${r} transport.`),w.open(),I=!0),Ke(qo,`RPC '${e}' stream ${r} sending:`,q),w.send(q))},oo:()=>w.close()}),z=(q,we,Ae)=>{q.listen(we,De=>{try{Ae(De)}catch(Pe){setTimeout(()=>{throw Pe},0)}})};return z(w,cR.EventType.OPEN,()=>{S||Ke(qo,`RPC '${e}' stream ${r} transport opened.`)}),z(w,cR.EventType.CLOSE,()=>{S||(S=!0,Ke(qo,`RPC '${e}' stream ${r} transport closed`),F.wo())}),z(w,cR.EventType.ERROR,q=>{S||(S=!0,kl(qo,`RPC '${e}' stream ${r} transport errored:`,q),F.wo(new Ge(ge.UNAVAILABLE,"The operation could not be completed")))}),z(w,cR.EventType.MESSAGE,q=>{var we;if(!S){const Ae=q.data[0];Rt(!!Ae);const Pe=Ae.error||(null===(we=Ae[0])||void 0===we?void 0:we.error);if(Pe){Ke(qo,`RPC '${e}' stream ${r} received error:`,Pe);const gt=Pe.status;let Nt=function(di){const ki=us[di];if(void 0!==ki)return C$(ki)}(gt),un=Pe.message;void 0===Nt&&(Nt=ge.INTERNAL,un="Unknown error status: "+gt+" with message "+Pe.message),S=!0,F.wo(new Ge(Nt,un)),w.close()}else Ke(qo,`RPC '${e}' stream ${r} received:`,Ae),F._o(Ae)}}),z(d,Rte.STAT_EVENT,q=>{q.stat===I5.PROXY?Ke(qo,`RPC '${e}' stream ${r} detected buffering proxy`):q.stat===I5.NOPROXY&&Ke(qo,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{F.fo()},0),F}}function M8(){return typeof window<"u"?window:null}function jR(){return typeof document<"u"?document:null}function ED(i){return new qne(i,!0)}class BV{constructor(e,n,t=1e3,r=1.5,s=6e4){this.ii=e,this.timerId=n,this.Po=t,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const n=Math.floor(this.So+this.ko()),t=Math.max(0,Date.now()-this.Co),r=Math.max(0,n-t);r>0&&Ke("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${n} ms, last attempt: ${t} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class R8{constructor(e,n,t,r,s,o,d,m){this.ii=e,this.$o=t,this.Oo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new BV(e,n)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,ee.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,ee.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,n){var t=this;return(0,ee.Z)(function*(){t.Ho(),t.Jo(),t.qo.cancel(),t.Fo++,4!==e?t.qo.reset():n&&n.code===ge.RESOURCE_EXHAUSTED?(qr(n.toString()),qr("Using maximum backoff delay to prevent overloading the backend."),t.qo.xo()):n&&n.code===ge.UNAUTHENTICATED&&3!==t.state&&(t.authCredentialsProvider.invalidateToken(),t.appCheckCredentialsProvider.invalidateToken()),null!==t.stream&&(t.Yo(),t.stream.close(),t.stream=null),t.state=e,yield t.listener.ao(n)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),n=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([t,r])=>{this.Fo===n&&this.Zo(t,r)},t=>{e(()=>{const r=new Ge(ge.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(r)})})}Zo(e,n){const t=this.Xo(this.Fo);this.stream=this.eu(e,n),this.stream.uo(()=>{t(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(r=>{t(()=>this.tu(r))}),this.stream.onMessage(r=>{t(()=>this.onMessage(r))})}Go(){var e=this;this.state=5,this.qo.No((0,ee.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return n=>{this.ii.enqueueAndForget(()=>this.Fo===e?n():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Bie extends R8{constructor(e,n,t,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,t,r,o),this.serializer=s}eu(e,n){return this.connection.Ro("Listen",e,n)}onMessage(e){this.qo.reset();const n=function Kne(i,e){let n;if("targetChange"in e){const t="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:xt(),r=e.targetChange.targetIds||[],s=function(m,f){return m.useProto3Json?(Rt(void 0===f||"string"==typeof f),Ss.fromBase64String(f||"")):(Rt(void 0===f||f instanceof Uint8Array),Ss.fromUint8Array(f||new Uint8Array))}(i,e.targetChange.resumeToken),o=e.targetChange.cause,d=o&&function(m){const f=void 0===m.code?ge.UNKNOWN:C$(m.code);return new Ge(f,m.message||"")}(o);n=new T$(t,r,s,d||null)}else if("documentChange"in e){const t=e.documentChange,r=zu(i,t.document.name),s=Yr(t.document.updateTime),o=t.document.createTime?Yr(t.document.createTime):Ot.min(),d=new bo({mapValue:{fields:t.document.fields}}),m=Qi.newFoundDocument(r,s,o,d);n=new kR(t.targetIds||[],t.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const t=e.documentDelete,r=zu(i,t.document),s=t.readTime?Yr(t.readTime):Ot.min(),o=Qi.newNoDocument(r,s);n=new kR([],t.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const t=e.documentRemove,r=zu(i,t.document);n=new kR([],t.removedTargetIds||[],r,null)}else{if(!("filter"in e))return xt();{const t=e.filter,{count:r=0,unchangedNames:s}=t,o=new Hne(r,s);n=new k$(t.targetId,o)}}var m;return n}(this.serializer,e),t=function(r){if(!("targetChange"in r))return Ot.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Ot.min():s.readTime?Yr(s.readTime):Ot.min()}(e);return this.listener.nu(n,t)}su(e){const n={};n.database=fD(this.serializer),n.addTarget=function(r,s){let o;const d=s.target;if(o=bR(d)?{documents:B$(r,d)}:{query:bV(r,d)},o.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){o.resumeToken=R$(r,s.resumeToken);const m=pV(r,s.expectedCount);null!==m&&(o.expectedCount=m)}else if(s.snapshotVersion.compareTo(Ot.min())>0){o.readTime=aw(r,s.snapshotVersion.toTimestamp());const m=pV(r,s.expectedCount);null!==m&&(o.expectedCount=m)}return o}(this.serializer,e);const t=function Xne(i,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);t&&(n.labels=t),this.Wo(n)}iu(e){const n={};n.database=fD(this.serializer),n.removeTarget=e,this.Wo(n)}}class Vie extends R8{constructor(e,n,t,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,t,r,o),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,n){return this.connection.Ro("Write",e,n)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const n=function Qne(i,e){return i&&i.length>0?(Rt(void 0!==e),i.map(n=>function(t,r){let s=Yr(t.updateTime?t.updateTime:r);return s.isEqual(Ot.min())&&(s=Yr(r)),new Lne(s,t.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),t=Yr(e.commitTime);return this.listener.cu(t,n)}return Rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=fD(this.serializer),this.Wo(e)}uu(e){const n={streamToken:this.lastStreamToken,writes:e.map(t=>pD(this.serializer,t))};this.Wo(n)}}class Uie extends class{}{constructor(e,n,t,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=t,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new Ge(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,n,t){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.Io(e,n,t,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ge(ge.UNKNOWN,r.toString())})}vo(e,n,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.vo(e,n,t,s,o,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ge(ge.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class zie{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(qr(n),this.mu=!1):Ke("OnlineStateTracker",n)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class jie{constructor(e,n,t,r,s){var o=this;this.localStore=e,this.datastore=n,this.asyncQueue=t,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(d=>{t.enqueueAndForget((0,ee.Z)(function*(){var m;Vp(o)&&(Ke("RemoteStore","Restarting streams for network reachability change."),yield function(f){return(m=m||(0,ee.Z)(function*(b){const w=ut(b);w.vu.add(4),yield mw(w),w.bu.set("Unknown"),w.vu.delete(4),yield ID(w)})).apply(this,arguments)}(o))}))}),this.bu=new zie(t,r)}}function ID(i){return(R5=R5||(0,ee.Z)(function*(e){if(Vp(e))for(const n of e.Ru)yield n(!0)})).apply(this,arguments)}function mw(i){return(P5=P5||(0,ee.Z)(function*(e){for(const n of e.Ru)yield n(!1)})).apply(this,arguments)}function GR(i,e){const n=ut(i);n.Au.has(e.targetId)||(n.Au.set(e.targetId,e),HV(n)?UV(n):pw(n).Ko()&&VV(n,e))}function DD(i,e){const n=ut(i),t=pw(n);n.Au.delete(e),t.Ko()&&P8(n,e),0===n.Au.size&&(t.Ko()?t.jo():Vp(n)&&n.bu.set("Unknown"))}function VV(i,e){if(i.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}pw(i).su(e)}function P8(i,e){i.Vu.qt(e),pw(i).iu(e)}function UV(i){i.Vu=new jne({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),le:e=>i.Au.get(e)||null,ue:()=>i.datastore.serializer.databaseId}),pw(i).start(),i.bu.gu()}function HV(i){return Vp(i)&&!pw(i).Uo()&&i.Au.size>0}function Vp(i){return 0===ut(i).vu.size}function O8(i){i.Vu=void 0}function Gie(i){return(O5=O5||(0,ee.Z)(function*(e){e.Au.forEach((n,t)=>{VV(e,n)})})).apply(this,arguments)}function $ie(i,e){return(N5=N5||(0,ee.Z)(function*(n,t){O8(n),HV(n)?(n.bu.Iu(t),UV(n)):n.bu.set("Unknown")})).apply(this,arguments)}function Wie(i,e,n){return(F5=F5||(0,ee.Z)(function*(t,r,s){if(t.bu.set("Online"),r instanceof T$&&2===r.state&&r.cause)try{var o;yield function(d,m){return(o=o||(0,ee.Z)(function*(f,b){const w=b.cause;for(const I of b.targetIds)f.Au.has(I)&&(yield f.remoteSyncer.rejectListen(I,w),f.Au.delete(I),f.Vu.removeTarget(I))})).apply(this,arguments)}(t,r)}catch(d){Ke("RemoteStore","Failed to remove targets %s: %s ",r.targetIds.join(","),d),yield $R(t,d)}else if(r instanceof kR?t.Vu.Ht(r):r instanceof k$?t.Vu.ne(r):t.Vu.Xt(r),!s.isEqual(Ot.min()))try{const d=yield x8(t.localStore);s.compareTo(d)>=0&&(yield function(m,f){const b=m.Vu.ce(f);return b.targetChanges.forEach((w,I)=>{if(w.resumeToken.approximateByteSize()>0){const S=m.Au.get(I);S&&m.Au.set(I,S.withResumeToken(w.resumeToken,f))}}),b.targetMismatches.forEach((w,I)=>{const S=m.Au.get(w);if(!S)return;m.Au.set(w,S.withResumeToken(Ss.EMPTY_BYTE_STRING,S.snapshotVersion)),P8(m,w);const F=new Dm(S.target,w,I,S.sequenceNumber);VV(m,F)}),m.remoteSyncer.applyRemoteEvent(b)}(t,s))}catch(d){Ke("RemoteStore","Failed to raise snapshot:",d),yield $R(t,d)}})).apply(this,arguments)}function $R(i,e,n){return(L5=L5||(0,ee.Z)(function*(t,r,s){if(!kp(r))throw r;t.vu.add(1),yield mw(t),t.bu.set("Offline"),s||(s=()=>x8(t.localStore)),t.asyncQueue.enqueueRetryable((0,ee.Z)(function*(){Ke("RemoteStore","Retrying IndexedDB access"),yield s(),t.vu.delete(1),yield ID(t)}))})).apply(this,arguments)}function N8(i,e){return e().catch(n=>$R(i,n,e))}function fw(i){return(B5=B5||(0,ee.Z)(function*(e){const n=ut(e),t=Up(n);let r=n.Eu.length>0?n.Eu[n.Eu.length-1].batchId:-1;for(;qie(n);)try{const s=yield Mie(n.localStore,r);if(null===s){0===n.Eu.length&&t.jo();break}r=s.batchId,Yie(n,s)}catch(s){yield $R(n,s)}F8(n)&&L8(n)})).apply(this,arguments)}function qie(i){return Vp(i)&&i.Eu.length<10}function Yie(i,e){i.Eu.push(e);const n=Up(i);n.Ko()&&n.ou&&n.uu(e.mutations)}function F8(i){return Vp(i)&&!Up(i).Uo()&&i.Eu.length>0}function L8(i){Up(i).start()}function Zie(i){return(V5=V5||(0,ee.Z)(function*(e){Up(e).hu()})).apply(this,arguments)}function Kie(i){return(U5=U5||(0,ee.Z)(function*(e){const n=Up(e);for(const t of e.Eu)n.uu(t.mutations)})).apply(this,arguments)}function Qie(i,e,n){return(H5=H5||(0,ee.Z)(function*(t,r,s){const o=t.Eu.shift(),d=uV.from(o,r,s);yield N8(t,()=>t.remoteSyncer.applySuccessfulWrite(d)),yield fw(t)})).apply(this,arguments)}function Xie(i,e){return(z5=z5||(0,ee.Z)(function*(n,t){var r;t&&Up(n).ou&&(yield function(s,o){return(r=r||(0,ee.Z)(function*(d,m){if(x$(f=m.code)&&f!==ge.ABORTED){const b=d.Eu.shift();Up(d).Qo(),yield N8(d,()=>d.remoteSyncer.rejectFailedWrite(b.batchId,m)),yield fw(d)}var f})).apply(this,arguments)}(n,t)),F8(n)&&L8(n)})).apply(this,arguments)}function B8(i,e){return(j5=j5||(0,ee.Z)(function*(n,t){const r=ut(n);r.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const s=Vp(r);r.vu.add(3),yield mw(r),s&&r.bu.set("Unknown"),yield r.remoteSyncer.handleCredentialChange(t),r.vu.delete(3),yield ID(r)})).apply(this,arguments)}function zV(i,e){return(G5=G5||(0,ee.Z)(function*(n,t){const r=ut(n);t?(r.vu.delete(2),yield ID(r)):t||(r.vu.add(2),yield mw(r),r.bu.set("Unknown"))})).apply(this,arguments)}function pw(i){var e;return i.Su||(i.Su=function(n,t,r){const s=ut(n);return s.fu(),new Bie(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{uo:Gie.bind(null,i),ao:$ie.bind(null,i),nu:Wie.bind(null,i)}),i.Ru.push(function(n){return(e=e||(0,ee.Z)(function*(t){t?(i.Su.Qo(),HV(i)?UV(i):i.bu.set("Unknown")):(yield i.Su.stop(),O8(i))})).apply(this,arguments)})),i.Su}function Up(i){var e;return i.Du||(i.Du=function(n,t,r){const s=ut(n);return s.fu(),new Vie(t,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(i.datastore,i.asyncQueue,{uo:Zie.bind(null,i),ao:Xie.bind(null,i),au:Kie.bind(null,i),cu:Qie.bind(null,i)}),i.Ru.push(function(n){return(e=e||(0,ee.Z)(function*(t){t?(i.Du.Qo(),yield fw(i)):(yield i.Du.stop(),i.Eu.length>0&&(Ke("RemoteStore",`Stopping write stream with ${i.Eu.length} pending writes`),i.Eu=[]))})).apply(this,arguments)})),i.Du}class jV{constructor(e,n,t,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=t,this.op=r,this.removalCallback=s,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,t,r,s){const o=Date.now()+t,d=new jV(e,n,o,r,s);return d.start(t),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ge(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _w(i,e){if(qr("AsyncQueue",`${e}: ${i}`),kp(i))return new Ge(ge.UNAVAILABLE,`${e}: ${i}`);throw i}class gw{constructor(e){this.comparator=e?(n,t)=>e(n,t)||lt.comparator(n.key,t.key):(n,t)=>lt.comparator(n.key,t.key),this.keyedMap=oD(),this.sortedSet=new Gi(this.comparator)}static emptySet(e){return new gw(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,t)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gw)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),t=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=t.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const t=new gw;return t.comparator=this.comparator,t.keyedMap=e,t.sortedSet=n,t}}class V8{constructor(){this.Cu=new Gi(lt.comparator)}track(e){const n=e.doc.key,t=this.Cu.get(n);t?0!==e.type&&3===t.type?this.Cu=this.Cu.insert(n,e):3===e.type&&1!==t.type?this.Cu=this.Cu.insert(n,{type:t.type,doc:e.doc}):2===e.type&&2===t.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===t.type?this.Cu=this.Cu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===t.type?this.Cu=this.Cu.remove(n):1===e.type&&2===t.type?this.Cu=this.Cu.insert(n,{type:1,doc:t.doc}):0===e.type&&1===t.type?this.Cu=this.Cu.insert(n,{type:2,doc:e.doc}):xt():this.Cu=this.Cu.insert(n,e)}xu(){const e=[];return this.Cu.inorderTraversal((n,t)=>{e.push(t)}),e}}class vw{constructor(e,n,t,r,s,o,d,m,f){this.query=e,this.docs=n,this.oldDocs=t,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=f}static fromInitialDocuments(e,n,t,r,s){const o=[];return n.forEach(d=>{o.push({type:0,doc:d})}),new vw(e,n,gw.emptySet(n),o,t,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rD(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,t=e.docChanges;if(n.length!==t.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==t[r].type||!n[r].doc.isEqual(t[r].doc))return!1;return!0}}class Jie{constructor(){this.Nu=void 0,this.listeners=[]}}class ere{constructor(){this.queries=new Em(e=>i$(e),rD),this.onlineState="Unknown",this.ku=new Set}}function GV(i,e){return($5=$5||(0,ee.Z)(function*(n,t){const r=ut(n),s=t.query;let o=!1,d=r.queries.get(s);if(d||(o=!0,d=new Jie),o)try{d.Nu=yield r.onListen(s)}catch(m){const f=_w(m,`Initialization of query '${aV(t.query)}' failed`);return void t.onError(f)}r.queries.set(s,d),d.listeners.push(t),t.Mu(r.onlineState),d.Nu&&t.$u(d.Nu)&&WV(r)})).apply(this,arguments)}function $V(i,e){return(W5=W5||(0,ee.Z)(function*(n,t){const r=ut(n),s=t.query;let o=!1;const d=r.queries.get(s);if(d){const m=d.listeners.indexOf(t);m>=0&&(d.listeners.splice(m,1),o=0===d.listeners.length)}if(o)return r.queries.delete(s),r.onUnlisten(s)})).apply(this,arguments)}function tre(i,e){const n=ut(i);let t=!1;for(const r of e){const o=n.queries.get(r.query);if(o){for(const d of o.listeners)d.$u(r)&&(t=!0);o.Nu=r}}t&&WV(n)}function nre(i,e,n){const t=ut(i),r=t.queries.get(e);if(r)for(const s of r.listeners)s.onError(n);t.queries.delete(e)}function WV(i){i.ku.forEach(e=>{e.next()})}class qV{constructor(e,n,t){this.query=e,this.Ou=n,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=t||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const r of e.docChanges)3!==r.type&&t.push(r);e=new vw(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),n=!0):this.qu(e,this.onlineState)&&(this.Uu(e),n=!0),this.Bu=e,n}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let n=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),n=!0),n}qu(e,n){return!e.fromCache||(!this.options.Ku||!("Offline"!==n))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===n)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=vw.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ire{constructor(e,n){this.Gu=e,this.byteLength=n}Qu(){return"metadata"in this.Gu}}class U8{constructor(e){this.serializer=e}rr(e){return zu(this.serializer,e)}ur(e){return e.metadata.exists?L$(this.serializer,e.document,!1):Qi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Yr(e)}}class rre{constructor(e,n,t){this.ju=e,this.localStore=n,this.serializer=t,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=H8(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++n;const t=Wn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(t.get(t.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Wu(e){const n=new Map,t=new U8(this.serializer);for(const r of e)if(r.metadata.queries){const s=t.rr(r.metadata.name);for(const o of r.metadata.queries){const d=(n.get(o)||fn()).add(s);n.set(o,d)}}return n}complete(){var e=this;return(0,ee.Z)(function*(){const n=yield function Rie(i,e,n,t){return(S5=S5||(0,ee.Z)(function*(r,s,o,d){const m=ut(r);let f=fn(),b=$a();for(const S of o){const F=s.rr(S.metadata.name);S.document&&(f=f.add(F));const z=s.ur(S);z.setReadTime(s.cr(S.metadata.readTime)),b=b.insert(F,z)}const w=m.Zi.newChangeBuffer({trackRemovals:!0}),I=yield uw(m,(S=d,pa(nw(Wn.fromString(`__bundle__/docs/${S}`)))));var S;return m.persistence.runTransaction("Apply bundle documents","readwrite",S=>C8(S,w,b).next(F=>(w.apply(S),F)).next(F=>m.Bs.removeMatchingKeysForTargetId(S,I.targetId).next(()=>m.Bs.addMatchingKeys(S,f,I.targetId)).next(()=>m.localDocuments.getLocalViewOfDocuments(S,F.nr,F.sr)).next(()=>F.nr)))})).apply(this,arguments)}(e.localStore,new U8(e.serializer),e.documents,e.ju.id),t=e.Wu(e.documents);for(const r of e.queries)yield Pie(e.localStore,r,t.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:n}})()}}function H8(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class z8{constructor(e){this.key=e}}class j8{constructor(e){this.key=e}}class G8{constructor(e,n){this.query=e,this.Yu=n,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=fn(),this.mutatedKeys=fn(),this.tc=s$(e),this.ec=new gw(this.tc)}get nc(){return this.Yu}sc(e,n){const t=n?n.ic:new V8,r=n?n.ec:this.ec;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,d=!1;const m="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,f="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((b,w)=>{const I=r.get(b),S=sD(this.query,w)?w:null,F=!!I&&this.mutatedKeys.has(I.key),z=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let q=!1;I&&S?I.data.isEqual(S.data)?F!==z&&(t.track({type:3,doc:S}),q=!0):this.rc(I,S)||(t.track({type:2,doc:S}),q=!0,(m&&this.tc(S,m)>0||f&&this.tc(S,f)<0)&&(d=!0)):!I&&S?(t.track({type:0,doc:S}),q=!0):I&&!S&&(t.track({type:1,doc:I}),q=!0,(m||f)&&(d=!0)),q&&(S?(o=o.add(S),s=z?s.add(b):s.delete(b)):(o=o.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const b="F"===this.query.limitType?o.last():o.first();o=o.delete(b.key),s=s.delete(b.key),t.track({type:1,doc:b})}return{ec:o,ic:t,zi:d,mutatedKeys:s}}rc(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,t){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((f,b)=>function(w,I){const S=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return S(w)-S(I)}(f.type,b.type)||this.tc(f.doc,b.doc)),this.oc(t);const o=n?this.uc():[],d=0===this.Zu.size&&this.current?1:0,m=d!==this.Xu;return this.Xu=d,0!==s.length||m?{snapshot:new vw(this.query,e.ec,r,s,e.mutatedKeys,0===d,m,!1,!!t&&t.resumeToken.approximateByteSize()>0),cc:o}:{cc:o}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new V8,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(n=>this.Yu=this.Yu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Yu=this.Yu.delete(n)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=fn(),this.ec.forEach(t=>{this.ac(t.key)&&(this.Zu=this.Zu.add(t.key))});const n=[];return e.forEach(t=>{this.Zu.has(t)||n.push(new j8(t))}),this.Zu.forEach(t=>{e.has(t)||n.push(new z8(t))}),n}hc(e){this.Yu=e.ir,this.Zu=fn();const n=this.sc(e.documents);return this.applyChanges(n,!0)}lc(){return vw.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class sre{constructor(e,n,t){this.query=e,this.targetId=n,this.view=t}}class ore{constructor(e){this.key=e,this.fc=!1}}class are{constructor(e,n,t,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=t,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.dc={},this.wc=new Em(d=>i$(d),rD),this._c=new Map,this.mc=new Set,this.gc=new Gi(lt.comparator),this.yc=new Map,this.Ic=new kV,this.Tc={},this.Ec=new Map,this.Ac=Uv.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function cre(i,e){return(q5=q5||(0,ee.Z)(function*(n,t){const r=JV(n);let s,o;const d=r.wc.get(t);if(d)s=d.targetId,r.sharedClientState.addLocalQueryTarget(s),o=d.view.lc();else{const m=yield uw(r.localStore,pa(t)),f=r.sharedClientState.addLocalQueryTarget(m.targetId);s=m.targetId,o=yield YV(r,t,s,"current"===f,m.resumeToken),r.isPrimaryClient&&GR(r.remoteStore,m)}return o})).apply(this,arguments)}function YV(i,e,n,t,r){return(Y5=Y5||(0,ee.Z)(function*(s,o,d,m,f){s.Rc=(q,we,Ae)=>{var De;return function(Pe,gt,Nt,un){return(De=De||(0,ee.Z)(function*(di,ki,Bc,sT){let rh=ki.view.sc(Bc);rh.zi&&(rh=yield VR(di.localStore,ki.query,!1).then(({documents:DN})=>ki.view.sc(DN,rh)));const Hm=sT&&sT.targetChanges.get(ki.targetId),oT=ki.view.applyChanges(rh,di.isPrimaryClient,Hm);return QV(di,ki.targetId,oT.cc),oT.snapshot})).apply(this,arguments)}(s,q,we,Ae)};const b=yield VR(s.localStore,o,!0),w=new G8(o,b.ir),I=w.sc(b.documents),S=hD.createSynthesizedTargetChangeForCurrentChange(d,m&&"Offline"!==s.onlineState,f),F=w.applyChanges(I,s.isPrimaryClient,S);QV(s,d,F.cc);const z=new sre(o,d,w);return s.wc.set(o,z),s._c.has(d)?s._c.get(d).push(o):s._c.set(d,[o]),F.snapshot})).apply(this,arguments)}function lre(i,e){return(Z5=Z5||(0,ee.Z)(function*(n,t){const r=ut(n),s=r.wc.get(t),o=r._c.get(s.targetId);if(o.length>1)return r._c.set(s.targetId,o.filter(d=>!rD(d,t))),void r.wc.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||(yield hw(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),DD(r.remoteStore,s.targetId),bw(r,s.targetId)}).catch(Dp))):(bw(r,s.targetId),yield hw(r.localStore,s.targetId,!0))})).apply(this,arguments)}function $8(i,e){return(Q5=Q5||(0,ee.Z)(function*(n,t){const r=ut(n);try{const s=yield function Aie(i,e){const n=ut(i),t=e.snapshotVersion;let r=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Zi.newChangeBuffer({trackRemovals:!0});r=n.Ji;const d=[];e.targetChanges.forEach((b,w)=>{const I=r.get(w);if(!I)return;d.push(n.Bs.removeMatchingKeys(s,b.removedDocuments,w).next(()=>n.Bs.addMatchingKeys(s,b.addedDocuments,w)));let S=I.withSequenceNumber(s.currentSequenceNumber);var F,z,q;null!==e.targetMismatches.get(w)?S=S.withResumeToken(Ss.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):b.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(b.resumeToken,t)),r=r.insert(w,S),z=S,q=b,(0===(F=I).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0)&&d.push(n.Bs.updateTargetData(s,S))});let m=$a(),f=fn();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&d.push(n.persistence.referenceDelegate.updateLimboDocument(s,b))}),d.push(C8(s,o,e.documentUpdates).next(b=>{m=b.nr,f=b.sr})),!t.isEqual(Ot.min())){const b=n.Bs.getLastRemoteSnapshotVersion(s).next(w=>n.Bs.setTargetsMetadata(s,s.currentSequenceNumber,t));d.push(b)}return de.waitFor(d).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,m,f)).next(()=>m)}).then(s=>(n.Ji=r,s))}(r.localStore,t);t.targetChanges.forEach((o,d)=>{const m=r.yc.get(d);m&&(Rt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?m.fc=!0:o.modifiedDocuments.size>0?Rt(m.fc):o.removedDocuments.size>0&&(Rt(m.fc),m.fc=!1))}),yield km(r,s,t)}catch(s){yield Dp(s)}})).apply(this,arguments)}function W8(i,e,n){const t=ut(i);if(t.isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n){const r=[];t.wc.forEach((s,o)=>{const d=o.view.Mu(e);d.snapshot&&r.push(d.snapshot)}),function(s,o){const d=ut(s);d.onlineState=o;let m=!1;d.queries.forEach((f,b)=>{for(const w of b.listeners)w.Mu(o)&&(m=!0)}),m&&WV(d)}(t.eventManager,e),r.length&&t.dc.nu(r),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e)}}function ure(i,e,n){return(X5=X5||(0,ee.Z)(function*(t,r,s){const o=ut(t);o.sharedClientState.updateQueryState(r,"rejected",s);const d=o.yc.get(r),m=d&&d.key;if(m){let f=new Gi(lt.comparator);f=f.insert(m,Qi.newNoDocument(m,Ot.min()));const b=fn().add(m),w=new uD(Ot.min(),new Map,new Gi(rn),f,b);yield $8(o,w),o.gc=o.gc.remove(m),o.yc.delete(r),XV(o)}else yield hw(o.localStore,r,!1).then(()=>bw(o,r,s)).catch(Dp)})).apply(this,arguments)}function hre(i,e){return(J5=J5||(0,ee.Z)(function*(n,t){const r=ut(n),s=t.batch.batchId;try{const o=yield function Sie(i,e){const n=ut(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",t=>{const r=e.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(o,d,m,f){const b=m.batch,w=b.keys();let I=de.resolve();return w.forEach(S=>{I=I.next(()=>f.getEntry(d,S)).next(F=>{const z=m.docVersions.get(S);Rt(null!==z),F.version.compareTo(z)<0&&(b.applyToRemoteDocument(F,m),F.isValidDocument()&&(F.setReadTime(m.commitVersion),f.addEntry(F)))})}),I.next(()=>o.mutationQueue.removeMutationBatch(d,b))}(n,t,e,s).next(()=>s.apply(t)).next(()=>n.mutationQueue.performConsistencyCheck(t)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(t,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(o){let d=fn();for(let m=0;m<o.mutationResults.length;++m)o.mutationResults[m].transformResults.length>0&&(d=d.add(o.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(t,r))})}(r.localStore,t);KV(r,s,null),ZV(r,s),r.sharedClientState.updateMutationState(s,"acknowledged"),yield km(r,o)}catch(o){yield Dp(o)}})).apply(this,arguments)}function mre(i,e,n){return(eG=eG||(0,ee.Z)(function*(t,r,s){const o=ut(t);try{const d=yield function(m,f){const b=ut(m);return b.persistence.runTransaction("Reject batch","readwrite-primary",w=>{let I;return b.mutationQueue.lookupMutationBatch(w,f).next(S=>(Rt(null!==S),I=S.keys(),b.mutationQueue.removeMutationBatch(w,S))).next(()=>b.mutationQueue.performConsistencyCheck(w)).next(()=>b.documentOverlayCache.removeOverlaysForBatchId(w,I,f)).next(()=>b.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(w,I)).next(()=>b.localDocuments.getDocuments(w,I))})}(o.localStore,r);KV(o,r,s),ZV(o,r),o.sharedClientState.updateMutationState(r,"rejected",s),yield km(o,d)}catch(d){yield Dp(d)}})).apply(this,arguments)}function ZV(i,e){(i.Ec.get(e)||[]).forEach(n=>{n.resolve()}),i.Ec.delete(e)}function KV(i,e,n){const t=ut(i);let r=t.Tc[t.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),t.Tc[t.currentUser.toKey()]=r}}function bw(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const t of i._c.get(e))i.wc.delete(t),n&&i.dc.Pc(t,n);i._c.delete(e),i.isPrimaryClient&&i.Ic.Is(e).forEach(t=>{i.Ic.containsKey(t)||q8(i,t)})}function q8(i,e){i.mc.delete(e.path.canonicalString());const n=i.gc.get(e);null!==n&&(DD(i.remoteStore,n),i.gc=i.gc.remove(e),i.yc.delete(n),XV(i))}function QV(i,e,n){for(const t of n)t instanceof z8?(i.Ic.addReference(t.key,e),pre(i,t)):t instanceof j8?(Ke("SyncEngine","Document no longer in limbo: "+t.key),i.Ic.removeReference(t.key,e),i.Ic.containsKey(t.key)||q8(i,t.key)):xt()}function pre(i,e){const n=e.key,t=n.path.canonicalString();i.gc.get(n)||i.mc.has(t)||(Ke("SyncEngine","New document in limbo: "+n),i.mc.add(t),XV(i))}function XV(i){for(;i.mc.size>0&&i.gc.size<i.maxConcurrentLimboResolutions;){const e=i.mc.values().next().value;i.mc.delete(e);const n=new lt(Wn.fromString(e)),t=i.Ac.next();i.yc.set(t,new ore(n)),i.gc=i.gc.insert(n,t),GR(i.remoteStore,new Dm(pa(nw(n.path)),t,"TargetPurposeLimboResolution",Mc.ct))}}function km(i,e,n){return(nG=nG||(0,ee.Z)(function*(t,r,s){var o;const d=ut(t),m=[],f=[],b=[];d.wc.isEmpty()||(d.wc.forEach((w,I)=>{b.push(d.Rc(I,r,s).then(S=>{if((S||s)&&d.isPrimaryClient&&d.sharedClientState.updateQueryState(I.targetId,S?.fromCache?"not-current":"current"),S){m.push(S);const F=RV.Li(I.targetId,S);f.push(F)}}))}),yield Promise.all(b),d.dc.nu(m),yield function(w,I){return(o=o||(0,ee.Z)(function*(S,F){const z=ut(S);try{yield z.persistence.runTransaction("notifyLocalViewChanges","readwrite",q=>de.forEach(F,we=>de.forEach(we.Fi,Ae=>z.persistence.referenceDelegate.addReference(q,we.targetId,Ae)).next(()=>de.forEach(we.Bi,Ae=>z.persistence.referenceDelegate.removeReference(q,we.targetId,Ae)))))}catch(q){if(!kp(q))throw q;Ke("LocalStore","Failed to update sequence numbers: "+q)}for(const q of F){const we=q.targetId;if(!q.fromCache){const Ae=z.Ji.get(we),Pe=Ae.withLastLimboFreeSnapshotVersion(Ae.snapshotVersion);z.Ji=z.Ji.insert(we,Pe)}}})).apply(this,arguments)}(d.localStore,f))})).apply(this,arguments)}function _re(i,e){return(iG=iG||(0,ee.Z)(function*(n,t){const r=ut(n);if(!r.currentUser.isEqual(t)){Ke("SyncEngine","User change. New user:",t.toKey());const s=yield w8(r.localStore,t);r.currentUser=t,(o=r).Ec.forEach(m=>{m.forEach(f=>{f.reject(new Ge(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.Ec.clear(),r.sharedClientState.handleUserChange(t,s.removedBatchIds,s.addedBatchIds),yield km(r,s.er)}var o})).apply(this,arguments)}function gre(i,e){const n=ut(i),t=n.yc.get(e);if(t&&t.fc)return fn().add(t.key);{let r=fn();const s=n._c.get(e);if(!s)return r;for(const o of s){const d=n.wc.get(o);r=r.unionWith(d.view.nc)}return r}}function vre(i,e){return(rG=rG||(0,ee.Z)(function*(n,t){const r=ut(n),s=yield VR(r.localStore,t.query,!0),o=t.view.hc(s);return r.isPrimaryClient&&QV(r,t.targetId,o.cc),o})).apply(this,arguments)}function bre(i,e){return(sG=sG||(0,ee.Z)(function*(n,t){const r=ut(n);return I8(r.localStore,t).then(s=>km(r,s))})).apply(this,arguments)}function yre(i,e,n,t){return(oG=oG||(0,ee.Z)(function*(r,s,o,d){const m=ut(r),f=yield function(b,w){const I=ut(b),S=ut(I.mutationQueue);return I.persistence.runTransaction("Lookup mutation documents","readonly",F=>S.Sn(F,w).next(z=>z?I.localDocuments.getDocuments(F,z):de.resolve(null)))}(m.localStore,s);var w;null!==f?("pending"===o?yield fw(m.remoteStore):"acknowledged"===o||"rejected"===o?(KV(m,s,d||null),ZV(m,s),w=s,ut(ut(m.localStore).mutationQueue).Cn(w)):xt(),yield km(m,f)):Ke("SyncEngine","Cannot apply mutation batch with id: "+s)})).apply(this,arguments)}function Y8(i,e,n){return(cG=cG||(0,ee.Z)(function*(t,r,s){const o=ut(t),d=[],m=[];for(const f of r){let b;const w=o._c.get(f);if(w&&0!==w.length){b=yield uw(o.localStore,pa(w[0]));for(const I of w){const S=o.wc.get(I),F=yield vre(o,S);F.snapshot&&m.push(F.snapshot)}}else{const I=yield E8(o.localStore,f);b=yield uw(o.localStore,I),yield YV(o,Z8(I),f,!1,b.resumeToken)}d.push(b)}return o.dc.nu(m),d})).apply(this,arguments)}function Z8(i){return t$(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function xre(i){const e=ut(i);return ut(ut(e.localStore).persistence).$i()}function Cre(i,e,n,t){return(lG=lG||(0,ee.Z)(function*(r,s,o,d){const m=ut(r);if(m.vc)return void Ke("SyncEngine","Ignoring unexpected query state notification.");const f=m._c.get(s);if(f&&f.length>0)switch(o){case"current":case"not-current":{const b=yield I8(m.localStore,r$(f[0])),w=uD.createSynthesizedRemoteEventForCurrentChange(s,"current"===o,Ss.EMPTY_BYTE_STRING);yield km(m,b,w);break}case"rejected":yield hw(m.localStore,s,!0),bw(m,s,d);break;default:xt()}})).apply(this,arguments)}function Ere(i,e,n){return(dG=dG||(0,ee.Z)(function*(t,r,s){const o=JV(t);if(o.vc){for(const d of r){if(o._c.has(d)){Ke("SyncEngine","Adding an already active target "+d);continue}const m=yield E8(o.localStore,d),f=yield uw(o.localStore,m);yield YV(o,Z8(m),f.targetId,!1,f.resumeToken),GR(o.remoteStore,f)}for(const d of s)o._c.has(d)&&(yield hw(o.localStore,d,!1).then(()=>{DD(o.remoteStore,d),bw(o,d)}).catch(Dp))}})).apply(this,arguments)}function JV(i){const e=ut(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=$8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ure.bind(null,e),e.dc.nu=tre.bind(null,e.eventManager),e.dc.Pc=nre.bind(null,e.eventManager),e}function eU(i){const e=ut(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mre.bind(null,e),e}class kD{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,ee.Z)(function*(){n.serializer=ED(e.databaseInfo.databaseId),n.sharedClientState=n.createSharedClientState(e),n.persistence=n.createPersistence(e),yield n.persistence.start(),n.localStore=n.createLocalStore(e),n.gcScheduler=n.createGarbageCollectionScheduler(e,n.localStore),n.indexBackfillerScheduler=n.createIndexBackfillerScheduler(e,n.localStore)})()}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return y8(this.persistence,new b8,e.initialUser,this.serializer)}createPersistence(e){return new TV(FR.zs,this.serializer)}createSharedClientState(e){return new S8}terminate(){var e=this;return(0,ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class tU extends kD{constructor(e,n,t){super(),this.Vc=e,this.cacheSizeBytes=n,this.forceOwnership=t,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,t=this;return(0,ee.Z)(function*(){yield n().call(t,e),yield t.Vc.initialize(t,e),yield eU(t.Vc.syncEngine),yield fw(t.Vc.remoteStore),yield t.persistence.Ii(()=>(t.gcScheduler&&!t.gcScheduler.started&&t.gcScheduler.start(),t.indexBackfillerScheduler&&!t.indexBackfillerScheduler.started&&t.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return y8(this.persistence,new b8,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){return new d8(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const t=new Qte(n,this.persistence);return new Kte(e.asyncQueue,t)}createPersistence(e){const n=MV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),t=void 0!==this.cacheSizeBytes?Wo.withCacheSize(this.cacheSizeBytes):Wo.DEFAULT;return new AV(this.synchronizeTabs,n,e.clientId,t,e.asyncQueue,M8(),jR(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new S8}}class K8 extends tU{constructor(e,n){super(e,n,!1),this.Vc=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,t=this;return(0,ee.Z)(function*(){var r;yield n().call(t,e);const s=t.Vc.syncEngine;t.sharedClientState instanceof FV&&(t.sharedClientState.syncEngine={jr:yre.bind(null,s),zr:Cre.bind(null,s),Wr:Ere.bind(null,s),$i:xre.bind(null,s),Qr:bre.bind(null,s)},yield t.sharedClientState.start()),yield t.persistence.Ii(function(o){return(r=r||(0,ee.Z)(function*(d){yield function wre(i,e){return(aG=aG||(0,ee.Z)(function*(n,t){const r=ut(n);if(JV(r),eU(r),!0===t&&!0!==r.vc){const s=r.sharedClientState.getAllActiveQueryTargets(),o=yield Y8(r,s.toArray());r.vc=!0,yield zV(r.remoteStore,!0);for(const d of o)GR(r.remoteStore,d)}else if(!1===t&&!1!==r.vc){const s=[];let o=Promise.resolve();r._c.forEach((d,m)=>{r.sharedClientState.isLocalQueryTarget(m)?s.push(m):o=o.then(()=>(bw(r,m),hw(r.localStore,m,!0))),DD(r.remoteStore,m)}),yield o,yield Y8(r,s),function(d){const m=ut(d);m.yc.forEach((f,b)=>{DD(m.remoteStore,b)}),m.Ic.Ts(),m.yc=new Map,m.gc=new Gi(lt.comparator)}(r),r.vc=!1,yield zV(r.remoteStore,!1)}})).apply(this,arguments)}(t.Vc.syncEngine,d),t.gcScheduler&&(d&&!t.gcScheduler.started?t.gcScheduler.start():d||t.gcScheduler.stop()),t.indexBackfillerScheduler&&(d&&!t.indexBackfillerScheduler.started?t.indexBackfillerScheduler.start():d||t.indexBackfillerScheduler.stop())})).apply(this,arguments)})})()}createSharedClientState(e){const n=M8();if(!FV.D(n))throw new Ge(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const t=MV(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new FV(n,e.asyncQueue,t,e.clientId,e.initialUser)}}class yw{initialize(e,n){var t=this;return(0,ee.Z)(function*(){t.localStore||(t.localStore=e.localStore,t.sharedClientState=e.sharedClientState,t.datastore=t.createDatastore(n),t.remoteStore=t.createRemoteStore(n),t.eventManager=t.createEventManager(n),t.syncEngine=t.createSyncEngine(n,!e.synchronizeTabs),t.sharedClientState.onlineStateHandler=r=>W8(t.syncEngine,r,1),t.remoteStore.remoteSyncer.handleCredentialChange=_re.bind(null,t.syncEngine),yield zV(t.remoteStore,t.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ere}createDatastore(e){const n=ED(e.databaseInfo.databaseId),t=new Lie(e.databaseInfo);return new Uie(e.authCredentials,e.appCheckCredentials,t,n)}createRemoteStore(e){return n=this.localStore,t=this.datastore,r=e.asyncQueue,s=d=>W8(this.syncEngine,d,0),o=A8.D()?new A8:new Oie,new jie(n,t,r,s,o);var n,t,r,s,o}createSyncEngine(e,n){return function(t,r,s,o,d,m,f){const b=new are(t,r,s,o,d,m);return f&&(b.vc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){var e;return function(n){return(e=e||(0,ee.Z)(function*(t){const r=ut(t);Ke("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield mw(r),r.Pu.shutdown(),r.bu.set("Unknown")})).apply(this,arguments)}(this.remoteStore)}}function Q8(i,e=10240){let n=0;return{read:()=>(0,ee.Z)(function*(){if(n<i.byteLength){const t={value:i.slice(n,n+e),done:!1};return n+=e,t}return{done:!0}})(),cancel:()=>(0,ee.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class WR{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):qr("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class kre{constructor(e,n){this.Cc=e,this.serializer=n,this.metadata=new Ts,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(t=>{t&&t.Qu()?this.metadata.resolve(t.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(t?.Gu)}`))},t=>this.metadata.reject(t))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,ee.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,ee.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,ee.Z)(function*(){const n=yield e.kc();if(null===n)return null;const t=e.xc.decode(n),r=Number(t);isNaN(r)&&e.Mc(`length string (${t}) is not valid number`);const s=yield e.$c(r);return new ire(JSON.parse(s),n.length+r)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,ee.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const n=e.Oc();n<0&&e.Mc("Reached the end of bundle when a length string is expected.");const t=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),t})()}$c(e){var n=this;return(0,ee.Z)(function*(){for(;n.buffer.length<e;)(yield n.Fc())&&n.Mc("Reached the end of bundle when more is expected.");const t=n.xc.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),t})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,ee.Z)(function*(){const n=yield e.Cc.read();if(!n.done){const t=new Uint8Array(e.buffer.length+n.value.length);t.set(e.buffer),t.set(n.value,e.buffer.length),e.buffer=t}return n.done})()}}class Tre{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,ee.Z)(function*(){var t;if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Ge(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield function(s,o){return(t=t||(0,ee.Z)(function*(d,m){const f=ut(d),b=fD(f.serializer)+"/documents",w={documents:m.map(z=>mD(f.serializer,z))},I=yield f.vo("BatchGetDocuments",b,w,m.length),S=new Map;I.forEach(z=>{const q=function Zne(i,e){return"found"in e?function(n,t){Rt(!!t.found);const r=zu(n,t.found.name),s=Yr(t.found.updateTime),o=t.found.createTime?Yr(t.found.createTime):Ot.min(),d=new bo({mapValue:{fields:t.found.fields}});return Qi.newFoundDocument(r,s,o,d)}(i,e):"missing"in e?function(n,t){Rt(!!t.missing),Rt(!!t.readTime);const r=zu(n,t.missing),s=Yr(t.readTime);return Qi.newNoDocument(r,s)}(i,e):xt()}(f.serializer,z);S.set(q.key.toString(),q)});const F=[];return m.forEach(z=>{const q=S.get(z.toString());Rt(!!q),F.push(q)}),F})).apply(this,arguments)}(n.datastore,e);return r.forEach(s=>n.recordVersion(s)),r})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(e.toString())}delete(e){this.write(new ow(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ee.Z)(function*(){var n;if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,s)=>{const o=lt.fromPath(s);e.mutations.push(new lV(o,e.precondition(o)))}),yield function(r,s){return(n=n||(0,ee.Z)(function*(o,d){const m=ut(o),f=fD(m.serializer)+"/documents",b={writes:d.map(w=>pD(m.serializer,w))};yield m.Io("Commit",f,b)})).apply(this,arguments)}(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw xt();n=Ot.min()}const t=this.readVersions.get(e.key.toString());if(t){if(!n.isEqual(t))throw new Ge(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(Ot.min())?lr.exists(!1):lr.updateTime(n):lr.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(Ot.min()))throw new Ge(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(n)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Sre{constructor(e,n,t,r,s){this.asyncQueue=e,this.datastore=n,this.options=t,this.updateFunction=r,this.deferred=s,this.Bc=t.maxAttempts,this.qo=new BV(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,ee.Z)(function*(){const n=new Tre(e.datastore),t=e.qc(n);t&&t.then(r=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Uc(s)}))}).catch(r=>{e.Uc(r)})}))}qc(e){try{const n=this.updateFunction(e);return!QI(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||"already-exists"===n||!x$(n)}return!1}}class Are{constructor(e,n,t,r){var o,s=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=t,this.databaseInfo=r,this.user=$s.UNAUTHENTICATED,this.clientId=bG.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(t,function(d){return(o=o||(0,ee.Z)(function*(m){Ke("FirestoreClient","Received user=",m.uid),yield s.authCredentialListener(m),s.user=m})).apply(this,arguments)}),this.appCheckCredentials.start(t,d=>(Ke("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ge(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ee.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(t){const r=_w(t,"Failed to shutdown persistence");n.reject(r)}})),n.promise}}function qR(i,e){return(uG=uG||(0,ee.Z)(function*(n,t){var r;n.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const s=yield n.getConfiguration();yield t.initialize(s);let o=s.initialUser;n.setCredentialChangeListener(function(d){return(r=r||(0,ee.Z)(function*(m){o.isEqual(m)||(yield w8(t.localStore,m),o=m)})).apply(this,arguments)}),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})).apply(this,arguments)}function nU(i,e){return(hG=hG||(0,ee.Z)(function*(n,t){n.asyncQueue.verifyOperationInProgress();const r=yield iU(n);Ke("FirestoreClient","Initializing OnlineComponentProvider");const s=yield n.getConfiguration();yield t.initialize(r,s),n.setCredentialChangeListener(o=>B8(t.remoteStore,o)),n.setAppCheckTokenChangeListener((o,d)=>B8(t.remoteStore,d)),n._onlineComponents=t})).apply(this,arguments)}function X8(i){return"FirebaseError"===i.name?i.code===ge.FAILED_PRECONDITION||i.code===ge.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code}function iU(i){return(mG=mG||(0,ee.Z)(function*(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{yield qR(e,e._uninitializedComponentsProvider._offline)}catch(n){const t=n;if(!X8(t))throw t;kl("Error using user provided cache. Falling back to memory cache: "+t),yield qR(e,new kD)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),yield qR(e,new kD);return e._offlineComponents})).apply(this,arguments)}function YR(i){return(fG=fG||(0,ee.Z)(function*(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),yield nU(e,e._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),yield nU(e,new yw))),e._onlineComponents})).apply(this,arguments)}function J8(i){return iU(i).then(e=>e.persistence)}function ZR(i){return iU(i).then(e=>e.localStore)}function e7(i){return YR(i).then(e=>e.remoteStore)}function rU(i){return YR(i).then(e=>e.syncEngine)}function ww(i){return(pG=pG||(0,ee.Z)(function*(e){const n=yield YR(e),t=n.eventManager;return t.onListen=cre.bind(null,n.syncEngine),t.onUnlisten=lre.bind(null,n.syncEngine),t})).apply(this,arguments)}function n7(i,e,n={}){const t=new Ts;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(r,s,o,d,m){const f=new WR({next:w=>{s.enqueueAndForget(()=>$V(r,b));const I=w.docs.has(o);!I&&w.fromCache?m.reject(new Ge(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&w.fromCache&&d&&"server"===d.source?m.reject(new Ge(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(w)},error:w=>m.reject(w)}),b=new qV(nw(o.path),f,{includeMetadataChanges:!0,Ku:!0});return GV(r,b)}(yield ww(i),i.asyncQueue,e,n,t)})),t.promise}function r7(i,e,n={}){const t=new Ts;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(r,s,o,d,m){const f=new WR({next:w=>{s.enqueueAndForget(()=>$V(r,b)),w.fromCache&&"server"===d.source?m.reject(new Ge(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(w)},error:w=>m.reject(w)}),b=new qV(o,f,{includeMetadataChanges:!0,Ku:!0});return GV(r,b)}(yield ww(i),i.asyncQueue,e,n,t)})),t.promise}function s7(i){const e={};return void 0!==i.timeoutSeconds&&(e.timeoutSeconds=i.timeoutSeconds),e}const o7=new Map;function sU(i,e,n){if(!n)throw new Ge(ge.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function a7(i,e,n,t){if(!0===e&&!0===t)throw new Ge(ge.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function c7(i){if(!lt.isDocumentKey(i))throw new Ge(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function l7(i){if(lt.isDocumentKey(i))throw new Ge(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function KR(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":xt()}function Ln(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Ge(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=KR(i);throw new Ge(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function d7(i,e){if(e<=0)throw new Ge(ge.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class u7{constructor(e){var n,t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ge(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ge(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}a7("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=s7(null!==(t=e.experimentalLongPollingOptions)&&void 0!==t?t:{}),function(r){if(void 0!==r.timeoutSeconds){if(isNaN(r.timeoutSeconds))throw new Ge(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ge(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ge(ge.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class TD{constructor(e,n,t,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=t,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u7({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ge(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ge(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u7(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new Bte;switch(n.type){case"firstParty":return new zte(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ge(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=o7.get(e);n&&(Ke("ComponentProvider","Removing Datastore"),o7.delete(e),n.terminate())}(this),Promise.resolve()}}class Xi{constructor(e,n,t){this.converter=n,this._key=t,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ju(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Xi(this.firestore,e,this._key)}}class yo{constructor(e,n,t){this.converter=n,this._query=t,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class ju extends yo{constructor(e,n,t){super(e,n,nw(t)),this._path=t,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xi(this.firestore,null,new lt(e))}withConverter(e){return new ju(this.firestore,e,this._path)}}function m7(i,e,...n){if(i=(0,R.m9)(i),sU("collection","path",e),i instanceof TD){const t=Wn.fromString(e,...n);return l7(t),new ju(i,null,t)}{if(!(i instanceof Xi||i instanceof ju))throw new Ge(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=i._path.child(Wn.fromString(e,...n));return l7(t),new ju(i.firestore,null,t)}}function QR(i,e,...n){if(i=(0,R.m9)(i),1===arguments.length&&(e=bG.A()),sU("doc","path",e),i instanceof TD){const t=Wn.fromString(e,...n);return c7(t),new Xi(i,null,new lt(t))}{if(!(i instanceof Xi||i instanceof ju))throw new Ge(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const t=i._path.child(Wn.fromString(e,...n));return c7(t),new Xi(i.firestore,i instanceof ju?i.converter:null,new lt(t))}}function f7(i,e){return i=(0,R.m9)(i),e=(0,R.m9)(e),(i instanceof Xi||i instanceof ju)&&(e instanceof Xi||e instanceof ju)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function oU(i,e){return i=(0,R.m9)(i),e=(0,R.m9)(e),i instanceof yo&&e instanceof yo&&i.firestore===e.firestore&&rD(i._query,e._query)&&i.converter===e.converter}class Ure{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new BV(this,"async_queue_retry"),this.Xc=()=>{const n=jR();n&&Ke("AsyncQueue","Visibility state changed to "+n.visibilityState),this.qo.Mo()};const e=jR();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const n=jR();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const n=new Ts;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,ee.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(n){if(!kp(n))throw n;Ke("AsyncQueue","Operation failed with retryable error: "+n)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const n=this.Gc.then(()=>(this.Hc=!0,e().catch(t=>{throw this.Wc=t,this.Hc=!1,qr("INTERNAL UNHANDLED ERROR: ",function(s){let o=s.message||"";return s.stack&&(o=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),o}(t)),t}).then(t=>(this.Hc=!1,t))));return this.Gc=n,n}enqueueAfterDelay(e,n,t){this.Zc(),this.Yc.indexOf(e)>-1&&(n=0);const r=jV.createAndSchedule(this,e,n,t,s=>this.na(s));return this.zc.push(r),r}Zc(){this.Wc&&xt()}verifyOperationInProgress(){}sa(){var e=this;return(0,ee.Z)(function*(){let n;do{n=e.Gc,yield n}while(n!==e.Gc)})()}ia(e){for(const n of this.zc)if(n.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((n,t)=>n.targetTimeMs-t.targetTimeMs);for(const n of this.zc)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const n=this.zc.indexOf(e);this.zc.splice(n,1)}}function aU(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const t=e;for(const r of["next","error","complete"])if(r in t&&"function"==typeof t[r])return!0;return!1}(i)}class Hre{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ts,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,t){this._progressObserver={next:e,error:n,complete:t}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ji extends TD{constructor(e,n,t,r){super(e,n,t,r),this.type="firestore",this._queue=new Ure,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||p7(this),this._firestoreClient.terminate()}}function Zr(i){return i._firestoreClient||p7(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function p7(i){var e,n,t;const r=i._freezeSettings(),s=(d=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new vne(i._databaseId,d,i._persistenceKey,(f=r).host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,s7(f.experimentalLongPollingOptions),f.useFetchStreams));var d,f;i._firestoreClient=new Are(i._authCredentials,i._appCheckCredentials,i._queue,s),null!==(n=r.cache)&&void 0!==n&&n._offlineComponentProvider&&null!==(t=r.cache)&&void 0!==t&&t._onlineComponentProvider&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.cache.kind,_offline:r.cache._offlineComponentProvider,_online:r.cache._onlineComponentProvider})}function _7(i,e,n){const t=new Ts;return i.asyncQueue.enqueue((0,ee.Z)(function*(){try{yield qR(i,n),yield nU(i,e),t.resolve()}catch(r){const s=r;if(!X8(s))throw s;kl("Error enabling indexeddb cache. Falling back to memory cache: "+s),t.reject(s)}})).then(()=>t.promise)}function g7(i){if(i._initialized||i._terminated)throw new Ge(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Gu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gu(Ss.fromBase64String(e))}catch(n){throw new Ge(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gu(Ss.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tm{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Ge(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class zv{constructor(e){this._methodName=e}}class XR{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ge(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ge(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rn(this._lat,e._lat)||rn(this._long,e._long)}}const Xre=/^__.*__$/;class Jre{constructor(e,n,t){this.data=e,this.fieldMask=n,this.fieldTransforms=t}toMutation(e,n){return null!==this.fieldMask?new Im(e,this.data,this.fieldMask,n,this.fieldTransforms):new sw(e,this.data,n,this.fieldTransforms)}}class v7{constructor(e,n,t){this.data=e,this.fieldMask=n,this.fieldTransforms=t}toMutation(e,n){return new Im(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function b7(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class JR{constructor(e,n,t,r,s,o){this.settings=e,this.databaseId=n,this.serializer=t,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new JR(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var n;const t=null===(n=this.path)||void 0===n?void 0:n.child(e),r=this.aa({path:t,la:!1});return r.fa(e),r}da(e){var n;const t=null===(n=this.path)||void 0===n?void 0:n.child(e),r=this.aa({path:t,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return nP(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(b7(this.ca)&&Xre.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class ese{constructor(e,n,t){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=t||ED(e)}ya(e,n,t,r=!1){return new JR({ca:e,methodName:n,ga:t,path:Nr.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jv(i){const e=i._freezeSettings(),n=ED(i._databaseId);return new ese(i._databaseId,!!e.ignoreUndefinedProperties,n)}function eP(i,e,n,t,r,s={}){const o=i.ya(s.merge||s.mergeFields?2:0,e,n,r);uU("Data must be an object, but it was:",o,t);const d=x7(t,o);let m,f;if(s.merge)m=new Ga(o.fieldMask),f=o.fieldTransforms;else if(s.mergeFields){const b=[];for(const w of s.mergeFields){const I=MD(e,w,n);if(!o.contains(I))throw new Ge(ge.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);E7(b,I)||b.push(I)}m=new Ga(b),f=o.fieldTransforms.filter(w=>m.covers(w.field))}else m=null,f=o.fieldTransforms;return new Jre(new bo(d),m,f)}class AD extends zv{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof AD}}function y7(i,e,n){return new JR({ca:3,ga:e.settings.ga,methodName:i._methodName,la:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class cU extends zv{_toFieldTransform(e){return new cD(e.path,new iw)}isEqual(e){return e instanceof cU}}class tse extends zv{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=y7(this,e,!0),t=this.pa.map(s=>Gv(s,n)),r=new Pv(t);return new cD(e.path,r)}isEqual(e){return this===e}}class nse extends zv{constructor(e,n){super(e),this.pa=n}_toFieldTransform(e){const n=y7(this,e,!0),t=this.pa.map(s=>Gv(s,n)),r=new Ov(t);return new cD(e.path,r)}isEqual(e){return this===e}}class ise extends zv{constructor(e,n){super(e),this.Ia=n}_toFieldTransform(e){const n=new rw(e.serializer,u$(e.serializer,this.Ia));return new cD(e.path,n)}isEqual(e){return this===e}}function lU(i,e,n,t){const r=i.ya(1,e,n);uU("Data must be an object, but it was:",r,t);const s=[],o=bo.empty();Tp(t,(m,f)=>{const b=tP(e,m,n);f=(0,R.m9)(f);const w=r.da(b);if(f instanceof AD)s.push(b);else{const I=Gv(f,w);null!=I&&(s.push(b),o.set(b,I))}});const d=new Ga(s);return new v7(o,d,r.fieldTransforms)}function dU(i,e,n,t,r,s){const o=i.ya(1,e,n),d=[MD(e,t,n)],m=[r];if(s.length%2!=0)throw new Ge(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<s.length;I+=2)d.push(MD(e,s[I])),m.push(s[I+1]);const f=[],b=bo.empty();for(let I=d.length-1;I>=0;--I)if(!E7(f,d[I])){const S=d[I];let F=m[I];F=(0,R.m9)(F);const z=o.da(S);if(F instanceof AD)f.push(S);else{const q=Gv(F,z);null!=q&&(f.push(S),b.set(S,q))}}const w=new Ga(f);return new v7(b,w,o.fieldTransforms)}function w7(i,e,n,t=!1){return Gv(n,i.ya(t?4:3,e))}function Gv(i,e){if(C7(i=(0,R.m9)(i)))return uU("Unsupported field value:",e,i),x7(i,e);if(i instanceof zv)return function(n,t){if(!b7(t.ca))throw t._a(`${n._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${n._methodName}() is not currently supported inside arrays`);const r=n._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(n,t){const r=[];let s=0;for(const o of n){let d=Gv(o,t.wa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(i,e)}return function(n,t){if(null===(n=(0,R.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return u$(t.serializer,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const r=cr.fromDate(n);return{timestampValue:aw(t.serializer,r)}}if(n instanceof cr){const r=new cr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:aw(t.serializer,r)}}if(n instanceof XR)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Gu)return{bytesValue:R$(t.serializer,n._byteString)};if(n instanceof Xi){const r=t.databaseId,s=n.firestore._databaseId;if(!s.isEqual(r))throw t._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:_V(n.firestore._databaseId||t.databaseId,n._key.path)}}throw t._a(`Unsupported field value: ${KR(n)}`)}(i,e)}function x7(i,e){const n={};return OG(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Tp(i,(t,r)=>{const s=Gv(r,e.ha(t));null!=s&&(n[t]=s)}),{mapValue:{fields:n}}}function C7(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof cr||i instanceof XR||i instanceof Gu||i instanceof Xi||i instanceof zv)}function uU(i,e,n){if(!C7(n)||"object"!=typeof(t=n)||null===t||Object.getPrototypeOf(t)!==Object.prototype&&null!==Object.getPrototypeOf(t)){const t=KR(n);throw e._a("an object"===t?i+" a custom object":i+" "+t)}var t}function MD(i,e,n){if((e=(0,R.m9)(e))instanceof Tm)return e._internalPath;if("string"==typeof e)return tP(i,e);throw nP("Field path arguments must be of type string or ",i,!1,void 0,n)}const rse=new RegExp("[~\\*/\\[\\]]");function tP(i,e,n){if(e.search(rse)>=0)throw nP(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Tm(...e.split("."))._internalPath}catch{throw nP(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function nP(i,e,n,t,r){const s=t&&!t.isEmpty(),o=void 0!==r;let d=`Function ${e}() called with invalid data`;n&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(s||o)&&(m+=" (found",s&&(m+=` in field ${t}`),o&&(m+=` in document ${r}`),m+=")"),new Ge(ge.INVALID_ARGUMENT,d+i+m)}function E7(i,e){return i.some(n=>n.isEqual(e))}class RD{constructor(e,n,t,r,s){this._firestore=e,this._userDataWriter=n,this._key=t,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new sse(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(iP("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class sse extends RD{data(){return super.data()}}function iP(i,e){return"string"==typeof e?tP(i,e):e instanceof Tm?e._internalPath:e._delegate._internalPath}function I7(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Ge(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hU{}class PD extends hU{}function Hp(i,e,...n){let t=[];e instanceof hU&&t.push(e),t=t.concat(n),function(r){const s=r.filter(d=>d instanceof xw).length,o=r.filter(d=>d instanceof OD).length;if(s>1||s>0&&o>0)throw new Ge(ge.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(t);for(const r of t)i=r._apply(i);return i}class OD extends PD{constructor(e,n,t){super(),this._field=e,this._op=n,this._value=t,this.type="where"}static _create(e,n,t){return new OD(e,n,t)}_apply(e){const n=this._parse(e);return S7(e._query,n),new yo(e.firestore,e.converter,oV(e._query,n))}_parse(e){const n=jv(e.firestore);return function(r,s,o,d,m,f,b){let w;if(m.isKeyField()){if("array-contains"===f||"array-contains-any"===f)throw new Ge(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if("in"===f||"not-in"===f){T7(b,f);const I=[];for(const S of b)I.push(k7(d,r,S));w={arrayValue:{values:I}}}else w=k7(d,r,b)}else"in"!==f&&"not-in"!==f&&"array-contains-any"!==f||T7(b,f),w=w7(o,"where",b,"in"===f||"not-in"===f);return Fn.create(m,f,w)}(e._query,0,n,e.firestore._databaseId,this._field,this._op,this._value)}}class xw extends hU{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xw(e,n)}_parse(e){const n=this._queryConstraints.map(t=>t._parse(e)).filter(t=>t.getFilters().length>0);return 1===n.length?n[0]:yi.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return 0===n.getFilters().length?e:(function(t,r){let s=t;const o=r.getFlattenedFilters();for(const d of o)S7(s,d),s=oV(s,d)}(e._query,n),new yo(e.firestore,e.converter,oV(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class mU extends PD{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new mU(e,n)}_apply(e){const n=function(t,r,s){if(null!==t.startAt)throw new Ge(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ge(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new ew(r,s);return function(d,m){if(null===rV(d)){const f=wR(d);null!==f&&A7(0,f,m.field)}}(t,o),o}(e._query,this._field,this._direction);return new yo(e.firestore,e.converter,function(t,r){const s=t.explicitOrderBy.concat([r]);return new Cm(t.path,t.collectionGroup,s,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e._query,n))}}class rP extends PD{constructor(e,n,t){super(),this.type=e,this._limit=n,this._limitType=t}static _create(e,n,t){return new rP(e,n,t)}_apply(e){return new yo(e.firestore,e.converter,xR(e._query,this._limit,this._limitType))}}class sP extends PD{constructor(e,n,t){super(),this.type=e,this._docOrFields=n,this._inclusive=t}static _create(e,n,t){return new sP(e,n,t)}_apply(e){const n=D7(e,this.type,this._docOrFields,this._inclusive);return new yo(e.firestore,e.converter,(r=n,new Cm((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,r,t.endAt)));var t,r}}class oP extends PD{constructor(e,n,t){super(),this.type=e,this._docOrFields=n,this._inclusive=t}static _create(e,n,t){return new oP(e,n,t)}_apply(e){const n=D7(e,this.type,this._docOrFields,this._inclusive);return new yo(e.firestore,e.converter,(r=n,new Cm((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,r)));var t,r}}function D7(i,e,n,t){if(n[0]=(0,R.m9)(n[0]),n[0]instanceof RD)return function(r,s,o,d,m){if(!d)throw new Ge(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const f=[];for(const b of Rv(r))if(b.field.isKeyField())f.push(Av(s,d.key));else{const w=d.data.field(b.field);if(fR(w))throw new Ge(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===w){const I=b.field.canonicalString();throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}f.push(w)}return new Op(f,m)}(i._query,i.firestore._databaseId,e,n[0]._document,t);{const r=jv(i.firestore);return function(s,o,d,m,f,b){const w=s.explicitOrderBy;if(f.length>w.length)throw new Ge(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let S=0;S<f.length;S++){const F=f[S];if(w[S].field.isKeyField()){if("string"!=typeof F)throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof F}`);if(!sV(s)&&-1!==F.indexOf("/"))throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${F}' contains a slash.`);const z=s.path.child(Wn.fromString(F));if(!lt.isDocumentKey(z))throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${z}' is not because it contains an odd number of segments.`);const q=new lt(z);I.push(Av(o,q))}else{const z=w7(d,m,F);I.push(z)}}return new Op(I,b)}(i._query,i.firestore._databaseId,r,e,n,t)}}function k7(i,e,n){if("string"==typeof(n=(0,R.m9)(n))){if(""===n)throw new Ge(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sV(e)&&-1!==n.indexOf("/"))throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const t=e.path.child(Wn.fromString(n));if(!lt.isDocumentKey(t))throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${t}' is not because it has an odd number of segments (${t.length}).`);return Av(i,new lt(t))}if(n instanceof Xi)return Av(i,n._key);throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KR(n)}.`)}function T7(i,e){if(!Array.isArray(i)||0===i.length)throw new Ge(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function S7(i,e){if(e.isInequality()){const t=wR(i),r=e.field;if(null!==t&&!t.isEqual(r))throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${t.toString()}' and '${r.toString()}'`);const s=rV(i);null!==s&&A7(0,r,s)}const n=function(t,r){for(const s of t)for(const o of s.getFlattenedFilters())if(r.indexOf(o.op)>=0)return o.op;return null}(i.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw new Ge(ge.INVALID_ARGUMENT,n===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function A7(i,e,n){if(!n.isEqual(e))throw new Ge(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class fU{convertValue(e,n="none"){switch(Rp(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(xm(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw xt()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const t={};return Tp(e,(r,s)=>{t[r]=this.convertValue(s,n)}),t}convertGeoPoint(e){return new XR(Fr(e.latitude),Fr(e.longitude))}convertArray(e,n){return(e.values||[]).map(t=>this.convertValue(t,n))}convertServerTimestamp(e,n){switch(n){case"previous":const t=pR(e);return null==t?null:this.convertValue(t,n);case"estimate":return this.convertTimestamp(JI(e));default:return null}}convertTimestamp(e){const n=Sp(e);return new cr(n.seconds,n.nanos)}convertDocumentKey(e,n){const t=Wn.fromString(e);Rt(z$(t));const r=new Ap(t.get(1),t.get(3)),s=new lt(t.popFirst(5));return r.isEqual(n)||qr(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}function aP(i,e,n){let t;return t=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,t}class fse extends fU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,n)}}class $v{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Sm extends RD{constructor(e,n,t,r,s,o){super(e,n,t,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ND(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const t=this._document.data.field(iP("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t,n.serverTimestamps)}}}class ND extends Sm{data(e={}){return super.data(e)}}class zp{constructor(e,n,t,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new $v(r.hasPendingWrites,r.fromCache),this.query=t}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(t=>{e.call(n,new ND(this._firestore,this._userDataWriter,t.key,t,new $v(this._snapshot.mutatedKeys.has(t.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ge(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(t,r){if(t._snapshot.oldDocs.isEmpty()){let s=0;return t._snapshot.docChanges.map(o=>({type:"added",doc:new ND(t._firestore,t._userDataWriter,o.doc.key,o.doc,new $v(t._snapshot.mutatedKeys.has(o.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:s++}))}{let s=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(o=>r||3!==o.type).map(o=>{const d=new ND(t._firestore,t._userDataWriter,o.doc.key,o.doc,new $v(t._snapshot.mutatedKeys.has(o.doc.key),t._snapshot.fromCache),t.query.converter);let m=-1,f=-1;return 0!==o.type&&(m=s.indexOf(o.doc.key),s=s.delete(o.doc.key)),1!==o.type&&(s=s.add(o.doc),f=s.indexOf(o.doc.key)),{type:_se(o.type),doc:d,oldIndex:m,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _se(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}function R7(i,e){return i instanceof Sm&&e instanceof Sm?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof zp&&e instanceof zp&&i._firestore===e._firestore&&oU(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class jp extends fU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gu(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Xi(this.firestore,null,n)}}function P7(i,e,n){i=Ln(i,Xi);const t=Ln(i.firestore,Ji),r=aP(i.converter,e,n);return Cw(t,[eP(jv(t),"setDoc",i._key,r,null!==i.converter,n).toMutation(i._key,lr.none())])}function O7(i,e,n,...t){i=Ln(i,Xi);const r=Ln(i.firestore,Ji),s=jv(r);let o;return o="string"==typeof(e=(0,R.m9)(e))||e instanceof Tm?dU(s,"updateDoc",i._key,e,n,t):lU(s,"updateDoc",i._key,e),Cw(r,[o.toMutation(i._key,lr.exists(!0))])}function N7(i,...e){var n,t,r;i=(0,R.m9)(i);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||aU(e[o])||(s=e[o],o++);const d={includeMetadataChanges:s.includeMetadataChanges};if(aU(e[o])){const w=e[o];e[o]=null===(n=w.next)||void 0===n?void 0:n.bind(w),e[o+1]=null===(t=w.error)||void 0===t?void 0:t.bind(w),e[o+2]=null===(r=w.complete)||void 0===r?void 0:r.bind(w)}let m,f,b;if(i instanceof Xi)f=Ln(i.firestore,Ji),b=nw(i._key.path),m={next:w=>{e[o]&&e[o](pU(f,i,w))},error:e[o+1],complete:e[o+2]};else{const w=Ln(i,yo);f=Ln(w.firestore,Ji),b=w._query;const I=new jp(f);m={next:S=>{e[o]&&e[o](new zp(f,I,w,S))},error:e[o+1],complete:e[o+2]},I7(i._query)}return function(w,I,S,F){const z=new WR(F),q=new qV(I,z,S);return w.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return GV(yield ww(w),q)})),()=>{z.Dc(),w.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return $V(yield ww(w),q)}))}}(Zr(f),b,d,m)}function Cw(i,e){return function(n,t){const r=new Ts;return n.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function dre(i,e,n){return(K5=K5||(0,ee.Z)(function*(t,r,s){const o=eU(t);try{const d=yield function(m,f){const b=ut(m),w=cr.now(),I=f.reduce((z,q)=>z.add(q.key),fn());let S,F;return b.persistence.runTransaction("Locally write mutations","readwrite",z=>{let q=$a(),we=fn();return b.Zi.getEntries(z,I).next(Ae=>{q=Ae,q.forEach((De,Pe)=>{Pe.isValidDocument()||(we=we.add(De))})}).next(()=>b.localDocuments.getOverlayedDocuments(z,q)).next(Ae=>{S=Ae;const De=[];for(const Pe of f){const gt=Vne(Pe,S.get(Pe.key).overlayedDocument);null!=gt&&De.push(new Im(Pe.key,gt,jG(gt.value.mapValue),lr.exists(!0)))}return b.mutationQueue.addMutationBatch(z,w,De,f)}).next(Ae=>{F=Ae;const De=Ae.applyToLocalDocumentSet(S,we);return b.documentOverlayCache.saveOverlays(z,Ae.batchId,De)})}).then(()=>({batchId:F.batchId,changes:a$(S)}))}(o.localStore,r);o.sharedClientState.addPendingMutation(d.batchId),function(m,f,b){let w=m.Tc[m.currentUser.toKey()];w||(w=new Gi(rn)),w=w.insert(f,b),m.Tc[m.currentUser.toKey()]=w}(o,d.batchId,s),yield km(o,d.changes),yield fw(o.remoteStore)}catch(d){const m=_w(d,"Failed to persist write");s.reject(m)}})).apply(this,arguments)}(yield rU(n),t,r)})),r.promise}(Zr(i),e)}function pU(i,e,n){const t=n.docs.get(e._key),r=new jp(i);return new Sm(i,r,e._key,t,new $v(n.hasPendingWrites,n.fromCache),e.converter)}const Ose={maxAttempts:5};class F7{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=jv(e)}set(e,n,t){this._verifyNotCommitted();const r=Gp(e,this._firestore),s=aP(r.converter,n,t),o=eP(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,t);return this._mutations.push(o.toMutation(r._key,lr.none())),this}update(e,n,t,...r){this._verifyNotCommitted();const s=Gp(e,this._firestore);let o;return o="string"==typeof(n=(0,R.m9)(n))||n instanceof Tm?dU(this._dataReader,"WriteBatch.update",s._key,n,t,r):lU(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gp(e,this._firestore);return this._mutations=this._mutations.concat(new ow(n._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ge(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gp(i,e){if((i=(0,R.m9)(i)).firestore!==e)throw new Ge(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Nse extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=jv(e)}get(e){const n=Gp(e,this._firestore),t=new fse(this._firestore);return this._transaction.lookup([n._key]).then(r=>{if(!r||1!==r.length)return xt();const s=r[0];if(s.isFoundDocument())return new RD(this._firestore,t,s.key,s,n.converter);if(s.isNoDocument())return new RD(this._firestore,t,n._key,null,n.converter);throw xt()})}set(e,n,t){const r=Gp(e,this._firestore),s=aP(r.converter,n,t),o=eP(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,t);return this._transaction.set(r._key,o),this}update(e,n,t,...r){const s=Gp(e,this._firestore);let o;return o="string"==typeof(n=(0,R.m9)(n))||n instanceof Tm?dU(this._dataReader,"Transaction.update",s._key,n,t,r):lU(this._dataReader,"Transaction.update",s._key,n),this._transaction.update(s._key,o),this}delete(e){const n=Gp(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Gp(e,this._firestore),t=new jp(this._firestore);return super.get(e).then(r=>new Sm(this._firestore,t,n._key,r._document,new $v(!1,!1),n.converter))}}function _U(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ge("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function B7(){if(typeof Uint8Array>"u")throw new Ge("unimplemented","Uint8Arrays are not available in this environment.")}function V7(){if(!function _ne(){return typeof atob<"u"}())throw new Ge("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){K0=xp.SDK_VERSION,(0,xp._registerComponent)(new cs.wA("firestore",(n,{instanceIdentifier:t,options:r})=>{const s=n.getProvider("app").getImmediate(),o=new Ji(new Ute(n.getProvider("auth-internal")),new jte(n.getProvider("app-check-internal")),function(d,m){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ge(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ap(d.options.projectId,m)}(s,t),s);return r=Object.assign({useFetchStreams:e},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),(0,xp.registerVersion)(_G,"3.13.0",i),(0,xp.registerVersion)(_G,"3.13.0","esm2017")}();class FD{constructor(e){this._delegate=e}static fromBase64String(e){return V7(),new FD(Gu.fromBase64String(e))}static fromUint8Array(e){return B7(),new FD(Gu.fromUint8Array(e))}toBase64(){return V7(),this._delegate.toBase64()}toUint8Array(){return B7(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function gU(i){return function Gse(i,e){if("object"!=typeof i||null===i)return!1;const n=i;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(i,["next","error","complete"])}class $se{enableIndexedDbPersistence(e,n){return function jre(i,e){g7(i=Ln(i,Ji));const n=Zr(i);if(n._uninitializedComponentsProvider)throw new Ge(ge.FAILED_PRECONDITION,"SDK cache is already specified.");kl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings(),r=new yw;return _7(n,r,new tU(r,t.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return function Gre(i){g7(i=Ln(i,Ji));const e=Zr(i);if(e._uninitializedComponentsProvider)throw new Ge(ge.FAILED_PRECONDITION,"SDK cache is already specified.");kl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=i._freezeSettings(),t=new yw;return _7(e,t,new K8(t,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $re(i){if(i._initialized&&!i._terminated)throw new Ge(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ts;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ee.Z)(function*(){try{var n;yield function(t){return(n=n||(0,ee.Z)(function*(r){if(!Nd.D())return Promise.resolve();const s=r+"main";yield Nd.delete(s)})).apply(this,arguments)}(MV(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}(e._delegate)}}class U7{constructor(e,n,t){this._delegate=n,this._persistenceProvider=t,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ap||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&kl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},n),e)).merge,this._delegate._setSettings(e)}useEmulator(e,n,t={}){!function h7(i,e,n,t={}){var r;const s=(i=Ln(i,TD))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&kl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),t.mockUserToken){let d,m;if("string"==typeof t.mockUserToken)d=t.mockUserToken,m=$s.MOCK_USER;else{d=(0,R.Sg)(t.mockUserToken,null===(r=i._app)||void 0===r?void 0:r.options.projectId);const f=t.mockUserToken.sub||t.mockUserToken.user_id;if(!f)throw new Ge(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new $s(f)}i._authCredentials=new Vte(new gG(d,m))}}(this._delegate,e,n,t)}enableNetwork(){return function qre(i){return function Mre(i){return i.asyncQueue.enqueue((0,ee.Z)(function*(){const e=yield J8(i),n=yield e7(i);return e.setNetworkEnabled(!0),function(t){const r=ut(t);return r.vu.delete(0),ID(r)}(n)}))}(Zr(i=Ln(i,Ji)))}(this._delegate)}disableNetwork(){return function Yre(i){return function Rre(i){return i.asyncQueue.enqueue((0,ee.Z)(function*(){var e;const n=yield J8(i),t=yield e7(i);return n.setNetworkEnabled(!1),function(r){return(e=e||(0,ee.Z)(function*(s){const o=ut(s);o.vu.add(0),yield mw(o),o.bu.set("Offline")})).apply(this,arguments)}(t)}))}(Zr(i=Ln(i,Ji)))}(this._delegate)}enablePersistence(e){let n=!1,t=!1;return e&&(n=!!e.synchronizeTabs,t=!!e.experimentalForceOwningTab,a7("synchronizeTabs",n,"experimentalForceOwningTab",t)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,t)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Wre(i){return function(e){const n=new Ts;return e.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function fre(i,e){return(tG=tG||(0,ee.Z)(function*(n,t){const r=ut(n);Vp(r.remoteStore)||Ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const s=yield function(d){const m=ut(d);return m.persistence.runTransaction("Get highest unacknowledged batch id","readonly",f=>m.mutationQueue.getHighestUnacknowledgedBatchId(f))}(r.localStore);if(-1===s)return void t.resolve();const o=r.Ec.get(s)||[];o.push(t),r.Ec.set(s,o)}catch(s){const o=_w(s,"Initialization of waitForPendingWrites() operation failed");t.reject(o)}})).apply(this,arguments)}(yield rU(e),n)})),n.promise}(Zr(i=Ln(i,Ji)))}(this._delegate)}onSnapshotsInSync(e){return function Ise(i,e){return function Nre(i,e){const n=new WR(e);return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return t=yield ww(i),r=n,ut(t).ku.add(r),void r.next();var t,r})),()=>{n.Dc(),i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return t=yield ww(i),r=n,void ut(t).ku.delete(r);var t,r}))}}(Zr(i=Ln(i,Ji)),aU(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ge("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ew(this,m7(this._delegate,e))}catch(n){throw _a(n,"collection()","Firestore.collection()")}}doc(e){try{return new Tl(this,QR(this._delegate,e))}catch(n){throw _a(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ga(this,function Vre(i,e){if(i=Ln(i,TD),sU("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ge(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yo(i,null,(n=e,new Cm(Wn.emptyPath(),n)));var n}(this._delegate,e))}catch(n){throw _a(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Fse(i,e,n){i=Ln(i,Ji);const t=Object.assign(Object.assign({},Ose),n);return function(r){if(r.maxAttempts<1)throw new Ge(ge.INVALID_ARGUMENT,"Max attempts must be at least 1")}(t),function(r,s,o){const d=new Ts;return r.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){const m=yield function t7(i){return YR(i).then(e=>e.datastore)}(r);new Sre(r.asyncQueue,m,o,s,d).run()})),d.promise}(Zr(i),r=>e(new Nse(i,r)),t)}(this._delegate,n=>e(new H7(this,n)))}batch(){return Zr(this._delegate),new z7(new F7(this._delegate,e=>Cw(this._delegate,e)))}loadBundle(e){return function Zre(i,e){const n=Zr(i=Ln(i,Ji)),t=new Hre;return function Fre(i,e,n,t){const r=function(s,o){let d;return d="string"==typeof s?E$().encode(s):s,m=function(m,f){if(m instanceof Uint8Array)return Q8(m,f);if(m instanceof ArrayBuffer)return Q8(new Uint8Array(m),f);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new kre(m,o);var m}(n,ED(e));i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){!function Ire(i,e,n){var t;const r=ut(i);(function(s,o,d){return(t=t||(0,ee.Z)(function*(m,f,b){try{const w=yield f.getMetadata();if(yield function(z,q){const we=ut(z),Ae=Yr(q.createTime);return we.persistence.runTransaction("hasNewerBundle","readonly",De=>we.qs.getBundleMetadata(De,q.id)).then(De=>!!De&&De.createTime.compareTo(Ae)>=0)}(m.localStore,w))return yield f.close(),b._completeWith({taskState:"Success",documentsLoaded:(z=w).totalDocuments,bytesLoaded:z.totalBytes,totalDocuments:z.totalDocuments,totalBytes:z.totalBytes}),Promise.resolve(new Set);b._updateProgress(H8(w));const I=new rre(w,m.localStore,f.serializer);let S=yield f.bc();for(;S;){const z=yield I.zu(S);z&&b._updateProgress(z),S=yield f.bc()}const F=yield I.complete();return yield km(m,F.Ju,void 0),yield function(z,q){const we=ut(z);return we.persistence.runTransaction("Save bundle","readwrite",Ae=>we.qs.saveBundleMetadata(Ae,q))}(m.localStore,w),b._completeWith(F.progress),Promise.resolve(F.Hu)}catch(w){return kl("SyncEngine",`Loading bundle failed with ${w}`),b._failWith(w),Promise.resolve(new Set)}var z})).apply(this,arguments)})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}(yield rU(i),r,t)}))}(n,i._databaseId,e,t),t}(this._delegate,e)}namedQuery(e){return function Kre(i,e){return function Lre(i,e){return i.asyncQueue.enqueue((0,ee.Z)(function*(){return function(n,t){const r=ut(n);return r.persistence.runTransaction("Get named query","readonly",s=>r.qs.getNamedQuery(s,t))}(yield ZR(i),e)}))}(Zr(i=Ln(i,Ji)),e).then(n=>n?new yo(i,null,n.query):null)}(this._delegate,e).then(n=>n?new ga(this,n):null)}}class cP extends fU{constructor(e){super(),this.firestore=e}convertBytes(e){return new FD(new Gu(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Tl.forKey(n,this.firestore,null)}}class H7{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new cP(e)}get(e){const n=qv(e);return this._delegate.get(n).then(t=>new LD(this._firestore,new Sm(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,n.converter)))}set(e,n,t){const r=qv(e);return t?(_U("Transaction.set",t),this._delegate.set(r,n,t)):this._delegate.set(r,n),this}update(e,n,t,...r){const s=qv(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,t,...r),this}delete(e){const n=qv(e);return this._delegate.delete(n),this}}class z7{constructor(e){this._delegate=e}set(e,n,t){const r=qv(e);return t?(_U("WriteBatch.set",t),this._delegate.set(r,n,t)):this._delegate.set(r,n),this}update(e,n,t,...r){const s=qv(e);return 2===arguments.length?this._delegate.update(s,n):this._delegate.update(s,n,t,...r),this}delete(e){const n=qv(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Wv{constructor(e,n,t){this._firestore=e,this._userDataWriter=n,this._delegate=t}fromFirestore(e,n){const t=new ND(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new BD(this._firestore,t),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const t=Wv.INSTANCES;let r=t.get(e);r||(r=new WeakMap,t.set(e,r));let s=r.get(n);return s||(s=new Wv(e,new cP(e),n),r.set(n,s)),s}}Wv.INSTANCES=new WeakMap;class Tl{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cP(e)}static forPath(e,n,t){if(e.length%2!=0)throw new Ge("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Tl(n,new Xi(n._delegate,t,new lt(e)))}static forKey(e,n,t){return new Tl(n,new Xi(n._delegate,t,e))}get id(){return this._delegate.id}get parent(){return new Ew(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ew(this.firestore,m7(this._delegate,e))}catch(n){throw _a(n,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,R.m9)(e))instanceof Xi&&f7(this._delegate,e)}set(e,n){n=_U("DocumentReference.set",n);try{return n?P7(this._delegate,e,n):P7(this._delegate,e)}catch(t){throw _a(t,"setDoc()","DocumentReference.set()")}}update(e,n,...t){try{return 1===arguments.length?O7(this._delegate,e):O7(this._delegate,e,n,...t)}catch(r){throw _a(r,"updateDoc()","DocumentReference.update()")}}delete(){return function Cse(i){return Cw(Ln(i.firestore,Ji),[new ow(i._key,lr.none())])}(this._delegate)}onSnapshot(...e){const n=j7(e),t=G7(e,r=>new LD(this.firestore,new Sm(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return N7(this._delegate,n,t)}get(e){let n;return n="cache"===e?.source?function vse(i){i=Ln(i,Xi);const e=Ln(i.firestore,Ji),n=Zr(e),t=new jp(e);return function Pre(i,e){const n=new Ts;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){var t;return function(r,s,o){return(t=t||(0,ee.Z)(function*(d,m,f){try{const b=yield function(w,I){const S=ut(w);return S.persistence.runTransaction("read document","readonly",F=>S.localDocuments.getDocument(F,I))}(d,m);b.isFoundDocument()?f.resolve(b):b.isNoDocument()?f.resolve(null):f.reject(new Ge(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(b){const w=_w(b,`Failed to get document '${m} from cache`);f.reject(w)}})).apply(this,arguments)}(yield ZR(i),e,n)})),n.promise}(n,i._key).then(r=>new Sm(e,t,i._key,r,new $v(null!==r&&r.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===e?.source?function bse(i){i=Ln(i,Xi);const e=Ln(i.firestore,Ji);return n7(Zr(e),i._key,{source:"server"}).then(n=>pU(e,i,n))}(this._delegate):function gse(i){i=Ln(i,Xi);const e=Ln(i.firestore,Ji);return n7(Zr(e),i._key).then(n=>pU(e,i,n))}(this._delegate),n.then(t=>new LD(this.firestore,new Sm(this.firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,this._delegate.converter)))}withConverter(e){return new Tl(this.firestore,this._delegate.withConverter(e?Wv.getInstance(this.firestore,e):null))}}function _a(i,e,n){return i.message=i.message.replace(e,n),i}function j7(i){for(const e of i)if("object"==typeof e&&!gU(e))return e;return{}}function G7(i,e){var n,t;let r;return r=gU(i[0])?i[0]:gU(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(t=r.complete)||void 0===t?void 0:t.bind(r)}}class LD{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Tl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return R7(this._delegate,e._delegate)}}class BD extends LD{data(e){const n=this._delegate.data(e);return function Lte(i,e){i||xt()}(void 0!==n),n}}class ga{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new cP(e)}where(e,n,t){try{return new ga(this.firestore,Hp(this._delegate,function ose(i,e,n){const t=e,r=iP("where",i);return OD._create(r,t,n)}(e,n,t)))}catch(r){throw _a(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new ga(this.firestore,Hp(this._delegate,function ase(i,e="asc"){const n=e,t=iP("orderBy",i);return mU._create(t,n)}(e,n)))}catch(t){throw _a(t,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ga(this.firestore,Hp(this._delegate,function cse(i){return d7("limit",i),rP._create("limit",i,"F")}(e)))}catch(n){throw _a(n,"limit()","Query.limit()")}}limitToLast(e){try{return new ga(this.firestore,Hp(this._delegate,function lse(i){return d7("limitToLast",i),rP._create("limitToLast",i,"L")}(e)))}catch(n){throw _a(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ga(this.firestore,Hp(this._delegate,function dse(...i){return sP._create("startAt",i,!0)}(...e)))}catch(n){throw _a(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ga(this.firestore,Hp(this._delegate,function use(...i){return sP._create("startAfter",i,!1)}(...e)))}catch(n){throw _a(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ga(this.firestore,Hp(this._delegate,function hse(...i){return oP._create("endBefore",i,!1)}(...e)))}catch(n){throw _a(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ga(this.firestore,Hp(this._delegate,function mse(...i){return oP._create("endAt",i,!0)}(...e)))}catch(n){throw _a(n,"endAt()","Query.endAt()")}}isEqual(e){return oU(this._delegate,e._delegate)}get(e){let n;return n="cache"===e?.source?function wse(i){i=Ln(i,yo);const e=Ln(i.firestore,Ji),n=Zr(e),t=new jp(e);return function Ore(i,e){const n=new Ts;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){var t;return function(r,s,o){return(t=t||(0,ee.Z)(function*(d,m,f){try{const b=yield VR(d,m,!0),w=new G8(m,b.ir),I=w.sc(b.documents),S=w.applyChanges(I,!1);f.resolve(S.snapshot)}catch(b){const w=_w(b,`Failed to execute query '${m} against cache`);f.reject(w)}})).apply(this,arguments)}(yield ZR(i),e,n)})),n.promise}(n,i._query).then(r=>new zp(e,t,i,r))}(this._delegate):"server"===e?.source?function xse(i){i=Ln(i,yo);const e=Ln(i.firestore,Ji),n=Zr(e),t=new jp(e);return r7(n,i._query,{source:"server"}).then(r=>new zp(e,t,i,r))}(this._delegate):function yse(i){i=Ln(i,yo);const e=Ln(i.firestore,Ji),n=Zr(e),t=new jp(e);return I7(i._query),r7(n,i._query).then(r=>new zp(e,t,i,r))}(this._delegate),n.then(t=>new vU(this.firestore,new zp(this.firestore._delegate,this._userDataWriter,this._delegate,t._snapshot)))}onSnapshot(...e){const n=j7(e),t=G7(e,r=>new vU(this.firestore,new zp(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return N7(this._delegate,n,t)}withConverter(e){return new ga(this.firestore,this._delegate.withConverter(e?Wv.getInstance(this.firestore,e):null))}}class qse{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new BD(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class vU{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new ga(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new BD(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new qse(this._firestore,n))}forEach(e,n){this._delegate.forEach(t=>{e.call(n,new BD(this._firestore,t))})}isEqual(e){return R7(this._delegate,e._delegate)}}class Ew extends ga{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Tl(this.firestore,e):null}doc(e){try{return new Tl(this.firestore,void 0===e?QR(this._delegate):QR(this._delegate,e))}catch(n){throw _a(n,"doc()","CollectionReference.doc()")}}add(e){return function Ese(i,e){const n=Ln(i.firestore,Ji),t=QR(i),r=aP(i.converter,e);return Cw(n,[eP(jv(i.firestore),"addDoc",t._key,r,null!==i.converter,{}).toMutation(t._key,lr.exists(!1))]).then(()=>t)}(this._delegate,e).then(n=>new Tl(this.firestore,n))}isEqual(e){return f7(this._delegate,e._delegate)}withConverter(e){return new Ew(this.firestore,this._delegate.withConverter(e?Wv.getInstance(this.firestore,e):null))}}function qv(i){return Ln(i,Xi)}class bU{constructor(...e){this._delegate=new Tm(...e)}static documentId(){return new bU(Nr.keyField().canonicalString())}isEqual(e){return(e=(0,R.m9)(e))instanceof Tm&&this._delegate._internalPath.isEqual(e._internalPath)}}class Yv{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Bse(){return new cU("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Yv(e)}static delete(){const e=function Lse(){return new AD("deleteField")}();return e._methodName="FieldValue.delete",new Yv(e)}static arrayUnion(...e){const n=function Vse(...i){return new tse("arrayUnion",i)}(...e);return n._methodName="FieldValue.arrayUnion",new Yv(n)}static arrayRemove(...e){const n=function Use(...i){return new nse("arrayRemove",i)}(...e);return n._methodName="FieldValue.arrayRemove",new Yv(n)}static increment(e){const n=function Hse(i){return new ise("increment",i)}(e);return n._methodName="FieldValue.increment",new Yv(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Yse={Firestore:U7,GeoPoint:XR,Timestamp:cr,Blob:FD,Transaction:H7,WriteBatch:z7,DocumentReference:Tl,DocumentSnapshot:LD,Query:ga,QueryDocumentSnapshot:BD,QuerySnapshot:vU,CollectionReference:Ew,FieldPath:bU,FieldValue:Yv,setLogLevel:function Wse(i){!function Fte(i){Ip.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function Kse(i){(function Zse(i,e){i.INTERNAL.registerComponent(new cs.wA("firestore-compat",n=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("firestore").getImmediate();return e(t,r)},"PUBLIC").setServiceProps(Object.assign({},Yse)))})(i,(e,n)=>new U7(e,n,new $se)),i.registerVersion("@firebase/firestore-compat","0.3.12")}(c6.Z);var wo=V(3019),lP=V(3093),Qse=V(4552);class Xse extends Xe.x{constructor(e=1/0,n=1/0,t=Qse.l){super(),this._bufferSize=e,this._windowTime=n,this._timestampProvider=t,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,n)}next(e){const{isStopped:n,_buffer:t,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:o}=this;n||(t.push(e),!r&&t.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(e),{_infiniteTimeWindow:t,_buffer:r}=this,s=r.slice();for(let o=0;o<s.length&&!e.closed;o+=t?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),n}_trimBuffer(){const{_bufferSize:e,_timestampProvider:n,_buffer:t,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<t.length&&t.splice(0,t.length-s),!r){const o=n.now();let d=0;for(let m=1;m<t.length&&t[m]<=o;m+=2)d=m;d&&t.splice(0,d+1)}}}var yU=V(3020);function wU(i,e,n){let t,r=!1;return i&&"object"==typeof i?({bufferSize:t=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:n}=i):t=i??1/0,(0,yU.B)({connector:()=>new Xse(t,e,n),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function $7(i,e){return(0,nr.m)(e)?(0,ri.w)(()=>i,e):(0,ri.w)(()=>i)}var q7,Y7,X7,J7,eW,xU=V(5137);V(4097);const EU=new Map,iW={activated:!1,tokenObservers:[]},ioe={initialized:!1,enabled:!1};function Lr(i){return EU.get(i)||Object.assign({},iW)}function uP(){return ioe}const IU="https://content-firebaseappcheck.googleapis.com/v1",aoe="exchangeDebugToken",rW={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class loe{constructor(e,n,t,r,s){if(this.operation=e,this.retryPolicy=n,this.getWaitDuration=t,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var n=this;return(0,ee.Z)(function*(){n.stop();try{n.pending=new R.BH,yield function doe(i){return new Promise(e=>{setTimeout(e,i)})}(n.getNextRun(e)),n.pending.resolve(),yield n.pending.promise,n.pending=new R.BH,yield n.operation(),n.pending.resolve(),yield n.pending.promise,n.process(!0).catch(()=>{})}catch(t){n.retryPolicy(t)?n.process(!1).catch(()=>{}):n.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}const xo=new R.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function DU(i){if(!Lr(i).activated)throw xo.create("use-before-activation",{appName:i.name})}function fP(i,e){return(q7=q7||(0,ee.Z)(function*({url:n,body:t},r){const s={"Content-Type":"application/json"},o=r.getImmediate({optional:!0});if(o){const S=yield o.getHeartbeatsHeader();S&&(s["X-Firebase-Client"]=S)}const d={method:"POST",body:JSON.stringify(t),headers:s};let m,f;try{m=yield fetch(n,d)}catch(S){throw xo.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==m.status)throw xo.create("fetch-status-error",{httpStatus:m.status});try{f=yield m.json()}catch(S){throw xo.create("fetch-parse-error",{originalErrorMessage:S?.message})}const b=f.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw xo.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${f.ttl}`});const w=1e3*Number(b[1]),I=Date.now();return{token:f.token,expireTimeMillis:I+w,issuedAtTimeMillis:I}})).apply(this,arguments)}function sW(i,e){const{projectId:n,appId:t,apiKey:r}=i.options;return{url:`${IU}/projects/${n}/apps/${t}:${aoe}?key=${r}`,body:{debug_token:e}}}const foe="firebase-app-check-database",poe=1,VD="firebase-app-check-store";let pP=null;function cW(i,e){return(Y7=Y7||(0,ee.Z)(function*(n,t){const s=(yield function aW(){return pP||(pP=new Promise((i,e)=>{try{const n=indexedDB.open(foe,poe);n.onsuccess=t=>{i(t.target.result)},n.onerror=t=>{var r;e(xo.create("storage-open",{originalErrorMessage:null===(r=t.target.error)||void 0===r?void 0:r.message}))},n.onupgradeneeded=t=>{0===t.oldVersion&&t.target.result.createObjectStore(VD,{keyPath:"compositeKey"})}}catch(n){e(xo.create("storage-open",{originalErrorMessage:n?.message}))}}),pP)}()).transaction(VD,"readwrite"),d=s.objectStore(VD).put({compositeKey:n,value:t});return new Promise((m,f)=>{d.onsuccess=b=>{m()},s.onerror=b=>{var w;f(xo.create("storage-set",{originalErrorMessage:null===(w=b.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const UD=new Cs.Yd("@firebase/app-check");function TU(i,e){return(0,R.hl)()?function goe(i,e){return cW(function dW(i){return`${i.options.appId}-${i.name}`}(i),e)}(i,e).catch(n=>{UD.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}function SU(){return uP().enabled}function AU(){return(X7=X7||(0,ee.Z)(function*(){const i=uP();if(i.enabled&&i.token)return i.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Coe={error:"UNKNOWN_ERROR"};function Eoe(i){return R.US.encodeString(JSON.stringify(i),!1)}function _P(i){return(J7=J7||(0,ee.Z)(function*(e,n=!1){const t=e.app;DU(t);const r=Lr(t);let o,s=r.token;if(s&&!Iw(s)&&(r.token=void 0,s=void 0),!s){const f=yield r.cachedTokenPromise;f&&(Iw(f)?s=f:yield TU(t,void 0))}if(!n&&s&&Iw(s))return{token:s.token};let m,d=!1;if(SU()){r.exchangeTokenPromise||(r.exchangeTokenPromise=fP(sW(t,yield AU()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const f=yield r.exchangeTokenPromise;return yield TU(t,f),r.token=f,{token:f.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),s=yield Lr(t).exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?UD.warn(f.message):UD.error(f),o=f}return s?o?m=Iw(s)?{token:s.token,internalError:o}:fW(o):(m={token:s.token},r.token=s,yield TU(t,s)):m=fW(o),d&&function mW(i,e){const n=Lr(i).tokenObservers;for(const t of n)try{"EXTERNAL"===t.type&&null!=e.error?t.error(e.error):t.next(e)}catch{}}(t,m),m})).apply(this,arguments)}function RU(i,e){const n=Lr(i),t=n.tokenObservers.filter(r=>r.next!==e);0===t.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=t}function hW(i){const{app:e}=i,n=Lr(e);let t=n.tokenRefresher;t||(t=function Ioe(i){const{app:e}=i;return new loe((0,ee.Z)(function*(){let t;if(t=Lr(e).token?yield _P(i,!0):yield _P(i),t.error)throw t.error;if(t.internalError)throw t.internalError}),()=>!0,()=>{const n=Lr(e);if(n.token){let t=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,n.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},rW.RETRIAL_MIN_WAIT,rW.RETRIAL_MAX_WAIT)}(i),n.tokenRefresher=t),!t.isRunning()&&n.isTokenAutoRefreshEnabled&&t.start()}function Iw(i){return i.expireTimeMillis-Date.now()>0}function fW(i){return{token:Eoe(Coe),error:i}}class Doe{constructor(e,n){this.app=e,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:e}=Lr(this.app);for(const n of e)RU(this.app,n.next);return Promise.resolve()}}const xW="app-check-internal";!function Uoe(){(0,cn._registerComponent)(new cs.wA("app-check",i=>function koe(i,e){return new Doe(i,e)}(i.getProvider("app").getImmediate(),i.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,e,n)=>{i.getProvider(xW).initialize()})),(0,cn._registerComponent)(new cs.wA(xW,i=>function Toe(i){return{getToken:e=>_P(i,e),getLimitedUseToken:()=>function uW(i){return(eW=eW||(0,ee.Z)(function*(e){const n=e.app;DU(n);const{provider:t}=Lr(n);if(SU()){const r=yield AU(),{token:s}=yield fP(sW(n,r),e.heartbeatServiceProvider);return{token:s}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}(i),addTokenListener:e=>function MU(i,e,n,t){const{app:r}=i,s=Lr(r);if(s.tokenObservers=[...s.tokenObservers,{next:n,error:t,type:e}],s.token&&Iw(s.token)){const d=s.token;Promise.resolve().then(()=>{n({token:d.token}),hW(i)}).catch(()=>{})}s.cachedTokenPromise.then(()=>hW(i))}(i,"INTERNAL",e),removeTokenListener:e=>RU(i.app,e)}}(i.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,cn.registerVersion)("@firebase/app-check","0.8.0")}();class HD{constructor(){return(0,ti.vb)("app-check")}}typeof window<"u"&&window;var vP=V(120);const NU=new l.OlP("angularfire2.auth.use-emulator"),FU=new l.OlP("angularfire2.auth.settings"),LU=new l.OlP("angularfire2.auth.tenant-id"),BU=new l.OlP("angularfire2.auth.langugage-code"),VU=new l.OlP("angularfire2.auth.use-device-language"),UU=new l.OlP("angularfire.auth.persistence"),HU=(i,e,n,t,r,s,o,d)=>(0,ks.cc)(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{const m=e.runOutsideAngular(()=>i.auth());if(n&&m.useEmulator(...n),t&&(m.tenantId=t),m.languageCode=r,s&&m.useDeviceLanguage(),o)for(const[f,b]of Object.entries(o))m.settings[f]=b;return d&&m.setPersistence(d),m},[n,t,r,s,o,d]);let zD=(()=>{class i{constructor(n,t,r,s,o,d,m,f,b,w,I,S){const F=new Xe.x,z=(0,ft.of)(void 0).pipe((0,lP.Q)(o.outsideAngular),(0,ri.w)(()=>s.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,8977)))),(0,Ct.U)(()=>(0,ks.on)(n,s,t)),(0,Ct.U)(q=>HU(q,s,d,f,b,w,m,I)),wU({bufferSize:1,refCount:!1}));if(Vr(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ft.of)(null);else{z.pipe(or()).subscribe();const we=z.pipe((0,ri.w)(Pe=>Pe.getRedirectResult().then(gt=>gt,()=>null)),ti.iC,wU({bufferSize:1,refCount:!1})),Ae=z.pipe((0,ri.w)(Pe=>new Bi.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Pe.onAuthStateChanged(Nt=>gt.next(Nt),Nt=>gt.error(Nt),()=>gt.complete()))})))),De=z.pipe((0,ri.w)(Pe=>new Bi.y(gt=>({unsubscribe:s.runOutsideAngular(()=>Pe.onIdTokenChanged(Nt=>gt.next(Nt),Nt=>gt.error(Nt),()=>gt.complete()))}))));this.authState=we.pipe($7(Ae),(0,xU.R)(o.outsideAngular),(0,lP.Q)(o.insideAngular)),this.user=we.pipe($7(De),(0,xU.R)(o.outsideAngular),(0,lP.Q)(o.insideAngular)),this.idToken=this.user.pipe((0,ri.w)(Pe=>Pe?(0,zn.D)(Pe.getIdToken()):(0,ft.of)(null))),this.idTokenResult=this.user.pipe((0,ri.w)(Pe=>Pe?(0,zn.D)(Pe.getIdTokenResult()):(0,ft.of)(null))),this.credential=(0,wo.T)(we,F,this.authState.pipe(Kn(Pe=>!Pe))).pipe((0,Ct.U)(Pe=>Pe?.user?Pe:null),(0,xU.R)(o.outsideAngular),(0,lP.Q)(o.insideAngular))}return(0,ks.pX)(this,z,s,{spy:{apply:(q,we,Ae)=>{(q.startsWith("signIn")||q.startsWith("createUser"))&&Ae.then(De=>F.next(De))}}})}}return i.\u0275fac=function(n){return new(n||i)(l.LFG(ks.Dh),l.LFG(ks.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(ti.HU),l.LFG(NU,8),l.LFG(FU,8),l.LFG(LU,8),l.LFG(BU,8),l.LFG(VU,8),l.LFG(UU,8),l.LFG(HD,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),Woe=(()=>{class i{constructor(){vP.Z.registerVersion("angularfire",ti.q4.full,"auth-compat")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[zD]}),i})();function EW(i,e){return function qoe(i,e=Cv.z){return new Bi.y(n=>{let t;return null!=e?e.schedule(()=>{t=i.onSnapshot({includeMetadataChanges:!0},n)}):t=i.onSnapshot({includeMetadataChanges:!0},n),()=>{t?.()}})}(i,e)}function zU(i,e){return EW(i,e).pipe((0,Ct.U)(n=>({payload:n,type:"query"})))}function bP(i,e){return zU(i,e).pipe(wr(void 0),nB(),(0,Ct.U)(([n,t])=>{const r=t.payload.docChanges(),s=r.map(o=>({type:o.type,payload:o}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((o,d)=>{const m=r.find(b=>b.doc.ref.isEqual(o.ref)),f=n?.payload.docs.find(b=>b.ref.isEqual(o.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(o.metadata)||!m&&f&&JSON.stringify(f.metadata)===JSON.stringify(o.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:o}})}),s}))}function IW(i,e,n){return bP(i,n).pipe(oo((t,r)=>function Zoe(i,e,n){return e.forEach(t=>{n.indexOf(t.type)>-1&&(i=function Koe(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return jU(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=i.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return jU(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return jU(i,e.oldIndex,1)}return i}(i,t))}),i}(t,r.map(s=>s.payload),e),[]),(0,iB.x)(),(0,Ct.U)(t=>t.map(r=>({type:r.type,payload:r}))))}function jU(i,e,n,...t){const r=i.slice();return r.splice(e,n,...t),r}function DW(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}class kW{constructor(e,n,t){this.ref=e,this.query=n,this.afs=t}stateChanges(e){let n=bP(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Ct.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)))),n.pipe(wr(void 0),nB(),Kn(([t,r])=>r.length>0||!t),(0,Ct.U)(([t,r])=>r),ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(oo((n,t)=>[...n,...t],[]))}snapshotChanges(e){const n=DW(e);return IW(this.query,n,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return zU(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(n=>n.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),ti.iC)}get(e){return(0,zn.D)(this.query.get(e)).pipe(ti.iC)}add(e){return this.ref.add(e)}doc(e){return new TW(this.ref.doc(e),this.afs)}}class TW{constructor(e,n){this.ref=e,this.afs=n}set(e,n){return this.ref.set(e,n)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,n){const t=this.ref.collection(e),{ref:r,query:s}=MW(t,n);return new kW(r,s,this.afs)}snapshotChanges(){return function Yoe(i,e){return EW(i,e).pipe(wr(void 0),nB(),(0,Ct.U)(([n,t])=>t.exists?n?.exists?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ct.U)(({payload:n})=>e.idField?Object.assign(Object.assign({},n.data()),{[e.idField]:n.id}):n.data()))}get(e){return(0,zn.D)(this.ref.get(e)).pipe(ti.iC)}}class Qoe{constructor(e,n){this.query=e,this.afs=n}stateChanges(e){return e&&0!==e.length?bP(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(n=>n.filter(t=>e.indexOf(t.type)>-1)),Kn(n=>n.length>0),ti.iC):bP(this.query,this.afs.schedulers.outsideAngular).pipe(ti.iC)}auditTrail(e){return this.stateChanges(e).pipe(oo((n,t)=>[...n,...t],[]))}snapshotChanges(e){const n=DW(e);return IW(this.query,n,this.afs.schedulers.outsideAngular).pipe(ti.iC)}valueChanges(e={}){return zU(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ct.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),ti.iC)}get(e){return(0,zn.D)(this.query.get(e)).pipe(ti.iC)}}const SW=new l.OlP("angularfire2.enableFirestorePersistence"),AW=new l.OlP("angularfire2.firestore.persistenceSettings"),Xoe=new l.OlP("angularfire2.firestore.settings"),Joe=new l.OlP("angularfire2.firestore.use-emulator");function MW(i,e=(n=>n)){return{query:e(i),ref:i}}let RW=(()=>{class i{constructor(n,t,r,s,o,d,m,f,b,w,I,S,F,z,q,we,Ae){this.schedulers=m;const De=(0,ks.on)(n,d,t),Pe=b;w&&HU(De,d,I,F,z,q,S,we),[this.firestore,this.persistenceEnabled$]=(0,ks.cc)(`${De.name}.firestore`,"AngularFirestore",De.name,()=>{const gt=d.runOutsideAngular(()=>De.firestore());if(s&&gt.settings(s),Pe&&gt.useEmulator(...Pe),r&&!Vr(o)){const Nt=()=>{try{return(0,zn.D)(gt.enablePersistence(f||void 0).then(()=>!0,()=>!1))}catch(un){return typeof console<"u"&&console.warn(un),(0,ft.of)(!1)}};return[gt,d.runOutsideAngular(Nt)]}return[gt,(0,ft.of)(!1)]},[s,Pe,r])}collection(n,t){let r;r="string"==typeof n?this.firestore.collection(n):n;const{ref:s,query:o}=MW(r,t),d=this.schedulers.ngZone.run(()=>s);return new kW(d,o,this)}collectionGroup(n,t){const r=t||(o=>o),s=this.firestore.collectionGroup(n);return new Qoe(r(s),this)}doc(n){let t;t="string"==typeof n?this.firestore.doc(n):n;const r=this.schedulers.ngZone.run(()=>t);return new TW(r,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(n){return new(n||i)(l.LFG(ks.Dh),l.LFG(ks.xv,8),l.LFG(SW,8),l.LFG(Xoe,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(ti.HU),l.LFG(AW,8),l.LFG(Joe,8),l.LFG(zD,8),l.LFG(NU,8),l.LFG(FU,8),l.LFG(LU,8),l.LFG(BU,8),l.LFG(VU,8),l.LFG(UU,8),l.LFG(HD,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),eae=(()=>{class i{constructor(){vP.Z.registerVersion("angularfire",ti.q4.full,"fst-compat")}static enablePersistence(n){return{ngModule:i,providers:[{provide:SW,useValue:!0},{provide:AW,useValue:n}]}}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[RW]}),i})(),Zv=(()=>{var i;class e{constructor(t,r,s,o){this.afs=t,this.afAuth=r,this.router=s,this.ngZone=o,this.username="",this.message="",this.registeredUsers=[],this.app=(0,cn.initializeApp)(JC_firebase),this.db=Il(this.app),this.afAuth.authState.subscribe(d=>{d?(this.userData=d,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(s=>{this.SetUserData(s.user),this.afAuth.authState.subscribe(o=>{o&&this.router.navigate(["dashboard"])})}).catch(s=>{window.alert(s.message)})}SignUp(t,r){const s={email:t,password:r};return s.timestamp=(new Date).toString(),s.id=a6(),z0(wv(this.db,`registeredUsers/${s.id}`),s),this.afAuth.createUserWithEmailAndPassword(t,r).then(o=>{this.SendVerificationMail(),this.SetUserData(o.user)}).catch(o=>{window.alert(o.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new iA).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(RW),l.LFG(zD),l.LFG(co),l.LFG(l.R0b))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),tae=(()=>{var i;class e{constructor(t){this.authService=t}ngOnInit(){}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(Zv))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const s=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l._uU(4,"Sign In"),l.qZA(),l.TgZ(5,"div",3),l._UZ(6,"input",4,5),l.qZA(),l.TgZ(8,"div",3),l._UZ(9,"input",6,7),l.qZA(),l.TgZ(11,"div",3)(12,"input",8),l.NdJ("click",function(){l.CHM(s);const d=l.MAs(7),m=l.MAs(10);return l.KtG(r.authService.SignIn(d.value,m.value))}),l.qZA()(),l.TgZ(13,"div",3)(14,"span",9)(15,"span",10),l._uU(16,"Or"),l.qZA()()(),l.TgZ(17,"div",11)(18,"span",12),l._uU(19,"Forgot Password?"),l.qZA()()(),l.TgZ(20,"div",13)(21,"span"),l._uU(22,"Don't have an account?"),l.TgZ(23,"span",14),l._uU(24," Sign Up"),l.qZA()()()()()}},dependencies:[Af]}),e})(),nae=(()=>{var i;class e{constructor(t){this.authService=t}ngOnInit(){}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(Zv))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const s=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l._uU(4,"Sign Up"),l.qZA(),l.TgZ(5,"div",3),l._UZ(6,"input",4,5),l.qZA(),l.TgZ(8,"div",3),l._UZ(9,"input",6,7),l.qZA(),l.TgZ(11,"div",3)(12,"input",8),l.NdJ("click",function(){l.CHM(s);const d=l.MAs(7),m=l.MAs(10);return l.KtG(r.authService.SignUp(d.value,m.value))}),l.qZA()(),l.TgZ(13,"div",3)(14,"span",9)(15,"span",10),l._uU(16,"Or"),l.qZA()()(),l.TgZ(17,"div",11)(18,"span"),l._uU(19,"Already have an account? "),l.TgZ(20,"span",12),l._uU(21,"Log In"),l.qZA()()()()()()}},dependencies:[Af]}),e})();function PW(...i){const e=(0,so.jO)(i),{args:n,keys:t}=ii(i),r=new Bi.y(s=>{const{length:o}=n;if(!o)return void s.complete();const d=new Array(o);let m=o,f=o;for(let b=0;b<o;b++){let w=!1;(0,sa.Xf)(n[b]).subscribe((0,Mi.x)(s,I=>{w||(w=!0,f--),d[b]=I},()=>m--,void 0,()=>{(!m||!w)&&(f||s.next(t?Us(t,d):d),s.complete())}))}});return e?r.pipe(id(e)):r}let OW=(()=>{var i;class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.Qsj),l.Y36(l.SBq))},i.\u0275dir=l.lG2({type:i}),e})(),Kv=(()=>{var i;class e extends OW{}return(i=e).\u0275fac=function(){let n;return function(r){return(n||(n=l.n5z(i)))(r||i)}}(),i.\u0275dir=l.lG2({type:i,features:[l.qOj]}),e})();const hs=new l.OlP("NgValueAccessor"),rae={provide:hs,useExisting:(0,l.Gpc)(()=>yP),multi:!0},oae=new l.OlP("CompositionEventMode");let yP=(()=>{var i;class e extends OW{constructor(t,r,s){super(t,r),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function sae(){const i=U()?U().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(oae,8))},i.\u0275dir=l.lG2({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&l.NdJ("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[l._Bn([rae]),l.qOj]}),e})();function $p(i){return null==i||("string"==typeof i||Array.isArray(i))&&0===i.length}function FW(i){return null!=i&&"number"==typeof i.length}const As=new l.OlP("NgValidators"),Wp=new l.OlP("NgAsyncValidators"),aae=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class GU{static min(e){return function LW(i){return e=>{if($p(e.value)||$p(i))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<i?{min:{min:i,actual:e.value}}:null}}(e)}static max(e){return function BW(i){return e=>{if($p(e.value)||$p(i))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>i?{max:{max:i,actual:e.value}}:null}}(e)}static required(e){return function VW(i){return $p(i.value)?{required:!0}:null}(e)}static requiredTrue(e){return function UW(i){return!0===i.value?null:{required:!0}}(e)}static email(e){return function HW(i){return $p(i.value)||aae.test(i.value)?null:{email:!0}}(e)}static minLength(e){return function zW(i){return e=>$p(e.value)||!FW(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function jW(i){return e=>FW(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}(e)}static pattern(e){return function GW(i){if(!i)return wP;let e,n;return"string"==typeof i?(n="","^"!==i.charAt(0)&&(n+="^"),n+=i,"$"!==i.charAt(i.length-1)&&(n+="$"),e=new RegExp(n)):(n=i.toString(),e=i),t=>{if($p(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return KW(e)}static composeAsync(e){return QW(e)}}function wP(i){return null}function $W(i){return null!=i}function WW(i){return(0,l.QGY)(i)?(0,zn.D)(i):i}function qW(i){let e={};return i.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function YW(i,e){return e.map(n=>n(i))}function ZW(i){return i.map(e=>function cae(i){return!i.validate}(e)?e:n=>e.validate(n))}function KW(i){if(!i)return null;const e=i.filter($W);return 0==e.length?null:function(n){return qW(YW(n,e))}}function $U(i){return null!=i?KW(ZW(i)):null}function QW(i){if(!i)return null;const e=i.filter($W);return 0==e.length?null:function(n){return PW(YW(n,e).map(WW)).pipe((0,Ct.U)(qW))}}function WU(i){return null!=i?QW(ZW(i)):null}function XW(i,e){return null===i?[e]:Array.isArray(i)?[...i,e]:[i,e]}function JW(i){return i._rawValidators}function eq(i){return i._rawAsyncValidators}function qU(i){return i?Array.isArray(i)?i:[i]:[]}function xP(i,e){return Array.isArray(i)?i.includes(e):i===e}function tq(i,e){const n=qU(e);return qU(i).forEach(r=>{xP(n,r)||n.push(r)}),n}function nq(i,e){return qU(e).filter(n=>!xP(i,n))}class iq{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$U(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WU(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class va extends iq{get formDirective(){return null}get path(){return null}}class $u extends iq{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rq{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let sq=(()=>{var i;class e extends rq{constructor(t){super(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36($u,2))},i.\u0275dir=l.lG2({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[l.qOj]}),e})(),oq=(()=>{var i;class e extends rq{constructor(t){super(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(va,10))},i.\u0275dir=l.lG2({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&l.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[l.qOj]}),e})();const jD="VALID",EP="INVALID",Dw="PENDING",GD="DISABLED";function KU(i){return(IP(i)?i.validators:i)||null}function QU(i,e){return(IP(e)?e.asyncValidators:i)||null}function IP(i){return null!=i&&!Array.isArray(i)&&"object"==typeof i}function cq(i,e,n){const t=i.controls;if(!(e?Object.keys(t):t).length)throw new l.vHH(1e3,"");if(!t[n])throw new l.vHH(1001,"")}function lq(i,e,n){i._forEachChild((t,r)=>{if(void 0===n[r])throw new l.vHH(1002,"")})}class DP{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===jD}get invalid(){return this.status===EP}get pending(){return this.status==Dw}get disabled(){return this.status===GD}get enabled(){return this.status!==GD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(tq(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(tq(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(nq(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(nq(e,this._rawAsyncValidators))}hasValidator(e){return xP(this._rawValidators,e)}hasAsyncValidator(e){return xP(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Dw,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=GD,this.errors=null,this._forEachChild(t=>{t.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(t=>t(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=jD,this._forEachChild(t=>{t.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n}),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===jD||this.status===Dw)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?GD:jD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Dw,this._hasOwnPendingAsyncValidator=!0;const n=WW(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((t,r)=>t&&t._find(r),this)}getError(e,n){const t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?GD:this.errors?EP:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Dw)?Dw:this._anyControlsHaveStatus(EP)?EP:jD}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){IP(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function hae(i){return Array.isArray(i)?$U(i):i||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function mae(i){return Array.isArray(i)?WU(i):i||null}(this._rawAsyncValidators)}}class $D extends DP{constructor(e,n,t){super(KU(n),QU(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,t={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){lq(this,0,e),Object.keys(e).forEach(t=>{cq(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(t=>{const r=this.controls[t];r&&r.patchValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((t,r)=>{t.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,t)=>(e[t]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,t)=>!!t._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const t=this.controls[n];t&&e(t,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,t]of Object.entries(this.controls))if(this.contains(n)&&e(t))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,t,r)=>((t.enabled||this.disabled)&&(n[r]=t.value),n))}_reduceChildren(e,n){let t=e;return this._forEachChild((r,s)=>{t=n(t,r,s)}),t}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class dq extends $D{}const Qv=new l.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>WD}),WD="always";function qD(i,e,n=WD){XU(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(i.disabled),function pae(i,e){e.valueAccessor.registerOnChange(n=>{i._pendingValue=n,i._pendingChange=!0,i._pendingDirty=!0,"change"===i.updateOn&&uq(i,e)})}(i,e),function gae(i,e){const n=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};i.registerOnChange(n),e._registerOnDestroy(()=>{i._unregisterOnChange(n)})}(i,e),function _ae(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,"blur"===i.updateOn&&i._pendingChange&&uq(i,e),"submit"!==i.updateOn&&i.markAsTouched()})}(i,e),function fae(i,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(n),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(n)})}}(i,e)}function TP(i,e,n=!0){const t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),AP(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function SP(i,e){i.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function XU(i,e){const n=JW(i);null!==e.validator?i.setValidators(XW(n,e.validator)):"function"==typeof n&&i.setValidators([n]);const t=eq(i);null!==e.asyncValidator?i.setAsyncValidators(XW(t,e.asyncValidator)):"function"==typeof t&&i.setAsyncValidators([t]);const r=()=>i.updateValueAndValidity();SP(e._rawValidators,r),SP(e._rawAsyncValidators,r)}function AP(i,e){let n=!1;if(null!==i){if(null!==e.validator){const r=JW(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.validator);s.length!==r.length&&(n=!0,i.setValidators(s))}}if(null!==e.asyncValidator){const r=eq(i);if(Array.isArray(r)&&r.length>0){const s=r.filter(o=>o!==e.asyncValidator);s.length!==r.length&&(n=!0,i.setAsyncValidators(s))}}}const t=()=>{};return SP(e._rawValidators,t),SP(e._rawAsyncValidators,t),n}function uq(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function hq(i,e){XU(i,e)}function mq(i,e){i._syncPendingControls(),e.forEach(n=>{const t=n.control;"submit"===t.updateOn&&t._pendingChange&&(n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}const xae={provide:va,useExisting:(0,l.Gpc)(()=>ZD)},YD=(()=>Promise.resolve())();let ZD=(()=>{var i;class e extends va{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new $D({},$U(t),WU(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){YD.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),qD(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){YD.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){YD.then(()=>{const r=this._findContainer(t.path),s=new $D({});hq(s,t),r.registerControl(t.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){YD.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){YD.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,mq(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(As,10),l.Y36(Wp,10),l.Y36(Qv,8))},i.\u0275dir=l.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([xae]),l.qOj]}),e})();function fq(i,e){const n=i.indexOf(e);n>-1&&i.splice(n,1)}function pq(i){return"object"==typeof i&&null!==i&&2===Object.keys(i).length&&"value"in i&&"disabled"in i}const KD=class extends DP{constructor(e=null,n,t){super(KU(n),QU(t,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),IP(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=pq(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fq(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fq(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){pq(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let yq=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),xq=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const n3=new l.OlP("NgModelWithFormControlWarning"),Mae={provide:va,useExisting:(0,l.Gpc)(()=>kw)};let kw=(()=>{var i;class e extends va{constructor(t,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new l.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(AP(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return qD(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){TP(t.control||null,t,!1),function wae(i,e){const n=i.indexOf(e);n>-1&&i.splice(n,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,mq(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,s=this.form.get(t.path);r!==s&&(TP(r||null,t),(i=>i instanceof KD)(s)&&(qD(s,t,this.callSetDisabledState),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);hq(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function vae(i,e){return AP(i,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XU(this.form,this),this._oldForm&&AP(this._oldForm,this)}_checkFormPresent(){}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(As,10),l.Y36(Wp,10),l.Y36(Qv,8))},i.\u0275dir=l.lG2({type:i,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&l.NdJ("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([Mae]),l.qOj,l.TTD]}),e})();const Oae={provide:$u,useExisting:(0,l.Gpc)(()=>o3)};let o3=(()=>{var i;class e extends $u{set isDisabled(t){}constructor(t,r,s,o,d){super(),this._ngModelWarningConfig=d,this._added=!1,this.name=null,this.update=new l.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=function t3(i,e){if(!e)return null;let n,t,r;return Array.isArray(e),e.forEach(s=>{s.constructor===yP?n=s:function yae(i){return Object.getPrototypeOf(i.constructor)===Kv}(s)?t=s:r=s}),r||t||n||null}(0,o)}ngOnChanges(t){this._added||this._setUpControl(),function e3(i,e){if(!i.hasOwnProperty("model"))return!1;const n=i.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function kP(i,e){return[...e.path,i]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return(i=e)._ngModelWarningSentOnce=!1,i.\u0275fac=function(t){return new(t||i)(l.Y36(va,13),l.Y36(As,10),l.Y36(Wp,10),l.Y36(hs,10),l.Y36(n3,8))},i.\u0275dir=l.lG2({type:i,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[l._Bn([Oae]),l.qOj,l.TTD]}),e})(),Lq=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[xq]}),e})();class Bq extends DP{constructor(e,n,t){super(KU(n),QU(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,t={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(e,n={}){let t=this._adjustIndex(e);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){lq(this,0,e),e.forEach((t,r)=>{cq(this,!1,r),this.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(e.forEach((t,r)=>{this.at(r)&&this.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((t,r)=>{t.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,t)=>!!t._syncPendingControls()||n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,t)=>{e(n,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function Vq(i){return!!i&&(void 0!==i.asyncValidators||void 0!==i.validators||void 0!==i.updateOn)}let d3,Zae=(()=>{var i;class e{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new e;return t.useNonNullable=!0,t}group(t,r=null){const s=this._reduceControls(t);let o={};return Vq(r)?o=r:null!==r&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new $D(s,o)}record(t,r=null){const s=this._reduceControls(t);return new dq(s,r)}control(t,r,s){let o={};return this.useNonNullable?(Vq(r)?o=r:(o.validators=r,o.asyncValidators=s),new KD(t,{...o,nonNullable:!0})):new KD(t,r,s)}array(t,r,s){const o=t.map(d=>this._createControl(d));return new Bq(o,r,s)}_reduceControls(t){const r={};return Object.keys(t).forEach(s=>{r[s]=this._createControl(t[s])}),r}_createControl(t){return t instanceof KD||t instanceof DP?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Kae=(()=>{var i;class e{static withConfig(t){return{ngModule:e,providers:[{provide:Qv,useValue:t.callSetDisabledState??WD}]}}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Lq]}),e})(),Qae=(()=>{var i;class e{static withConfig(t){return{ngModule:e,providers:[{provide:n3,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:Qv,useValue:t.callSetDisabledState??WD}]}}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Lq]}),e})();try{d3=typeof Intl<"u"&&Intl.v8BreakIterator}catch{d3=!1}let Tw,Kr=(()=>{var i;class e{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Ul(i){return i===bs}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!d3)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(l.Lbi))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Uq=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const Hq=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function zq(){if(Tw)return Tw;if("object"!=typeof document||!document)return Tw=new Set(Hq),Tw;let i=document.createElement("input");return Tw=new Set(Hq.filter(e=>(i.setAttribute("type",e),i.type===e))),Tw}let QD,Jv,u3;function Wa(i){return function Xae(){if(null==QD&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>QD=!0}))}finally{QD=QD||!1}return QD}()?i:!!i.capture}function Jae(){if(null==Jv){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Jv=!1,Jv;if("scrollBehavior"in document.documentElement.style)Jv=!0;else{const i=Element.prototype.scrollTo;Jv=!!i&&!/\{\s*\[native code\]\s*\}/.test(i.toString())}}return Jv}function h3(i){if(function ece(){if(null==u3){const i=typeof document<"u"?document.head:null;u3=!(!i||!i.createShadowRoot&&!i.attachShadow)}return u3}()){const e=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function PP(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){const e=i.shadowRoot.activeElement;if(e===i)break;i=e}return i}function Rc(i){return i.composedPath?i.composedPath()[0]:i.target}function m3(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Fd(i,...e){return e.length?e.some(n=>i[n]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function FP(i,e=Cv.z){return(0,yr.e)((n,t)=>{let r=null,s=null,o=null;const d=()=>{if(r){r.unsubscribe(),r=null;const f=s;s=null,t.next(f)}};function m(){const f=o+i,b=e.now();if(b<f)return r=this.schedule(void 0,f-b),void t.add(r);d()}n.subscribe((0,Mi.x)(t,f=>{s=f,o=e.now(),r||(r=e.schedule(m,i),t.add(r))},()=>{d(),t.complete()},void 0,()=>{s=r=null}))})}function Gq(i){return Kn((e,n)=>i<=n)}function Et(i){return null!=i&&"false"!=`${i}`}function Ms(i,e=0){return function _ce(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}(i)?Number(i):e}function XD(i){return Array.isArray(i)?i:[i]}function ms(i){return null==i?"":"string"==typeof i?i:`${i}px`}function Br(i){return i instanceof l.SBq?i.nativeElement:i}let $q=(()=>{var i;class e{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Aw=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[$q]}),e})(),Wq=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const qq=new Set;let eb,bce=(()=>{var i;class e{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):wce}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function yce(i,e){if(!qq.has(i))try{eb||(eb=document.createElement("style"),e&&(eb.nonce=e),eb.setAttribute("type","text/css"),document.head.appendChild(eb)),eb.sheet&&(eb.sheet.insertRule(`@media ${i} {body{ }}`,0),qq.add(i))}catch(n){console.error(n)}}(t,this._nonce),this._matchMedia(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Kr),l.LFG(l.Ojb,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function wce(i){return{matches:"all"===i||""===i,media:i,addListener:()=>{},removeListener:()=>{}}}let xce=(()=>{var i;class e{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new Xe.x}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return Yq(XD(t)).some(s=>this._registerQuery(s).mql.matches)}observe(t){let o=ir(Yq(XD(t)).map(d=>this._registerQuery(d).observable));return o=Gr(o.pipe(Mn(1)),o.pipe(Gq(1),FP(0))),o.pipe((0,Ct.U)(d=>{const m={matches:!1,breakpoints:{}};return d.forEach(({matches:f,query:b})=>{m.matches=m.matches||f,m.breakpoints[b]=f}),m}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),o={observable:new Bi.y(d=>{const m=f=>this._zone.run(()=>d.next(f));return r.addListener(m),()=>{r.removeListener(m)}}).pipe(wr(r),(0,Ct.U)(({matches:d})=>({query:t,matches:d})),xn(this._destroySubject)),mql:r};return this._queries.set(t,o),o}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(bce),l.LFG(l.R0b))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function Yq(i){return i.map(e=>e.split(",")).reduce((e,n)=>e.concat(n)).map(e=>e.trim())}let LP=(()=>{var i;class e{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function Tce(i){return!!(i.offsetWidth||i.offsetHeight||"function"==typeof i.getClientRects&&i.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const r=function kce(i){try{return i.frameElement}catch{return null}}(function Fce(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}(t));if(r&&(-1===eY(r)||!this.isVisible(r)))return!1;let s=t.nodeName.toLowerCase(),o=eY(t);return t.hasAttribute("contenteditable")?-1!==o:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function Oce(i){let e=i.nodeName.toLowerCase(),n="input"===e&&i.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==o:"video"===s?-1!==o&&(null!==o||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,r){return function Nce(i){return!function Ace(i){return function Rce(i){return"input"==i.nodeName.toLowerCase()}(i)&&"hidden"==i.type}(i)&&(function Sce(i){let e=i.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(i)||function Mce(i){return function Pce(i){return"a"==i.nodeName.toLowerCase()}(i)&&i.hasAttribute("href")}(i)||i.hasAttribute("contenteditable")||Jq(i))}(t)&&!this.isDisabled(t)&&(r?.ignoreVisibility||this.isVisible(t))}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Kr))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function Jq(i){if(!i.hasAttribute("tabindex")||void 0===i.tabIndex)return!1;let e=i.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function eY(i){if(!Jq(i))return null;const e=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class Lce{get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}constructor(e,n,t,r,s=!1){this._element=e,this._checker=n,this._ngZone=t,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){const e=this._startAnchor,n=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),n&&(n.removeEventListener("focus",this.endAnchorListener),n.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(n=>{this._executeOnStable(()=>n(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const n=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?n.length?n[0]:this._getFirstTabbableElement(this._element):n.length?n[n.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const n=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(n){if(!this._checker.isFocusable(n)){const t=this._getFirstTabbableElement(n);return t?.focus(e),!!t}return n.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const n=this._getRegionBoundary("start");return n&&n.focus(e),!!n}focusLastTabbableElement(e){const n=this._getRegionBoundary("end");return n&&n.focus(e),!!n}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let t=0;t<n.length;t++){const r=n[t].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(n[t]):null;if(r)return r}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const n=e.children;for(let t=n.length-1;t>=0;t--){const r=n[t].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(n[t]):null;if(r)return r}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,n){e?n.setAttribute("tabindex","0"):n.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe(Mn(1)).subscribe(e)}}let v3=(()=>{var i;class e{constructor(t,r,s){this._checker=t,this._ngZone=r,this._document=s}create(t,r=!1){return new Lce(t,this._checker,this._ngZone,this._document,r)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(LP),l.LFG(l.R0b),l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function b3(i){return 0===i.buttons||0===i.offsetX&&0===i.offsetY}function y3(i){const e=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Bce=new l.OlP("cdk-input-modality-detector-options"),Vce={ignoreKeys:[18,17,224,91,16]},Mw=Wa({passive:!0,capture:!0});let Uce=(()=>{var i;class e{get mostRecentModality(){return this._modality.value}constructor(t,r,s,o){this._platform=t,this._mostRecentTarget=null,this._modality=new Ar.X(null),this._lastTouchMs=0,this._onKeydown=d=>{this._options?.ignoreKeys?.some(m=>m===d.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Rc(d))},this._onMousedown=d=>{Date.now()-this._lastTouchMs<650||(this._modality.next(b3(d)?"keyboard":"mouse"),this._mostRecentTarget=Rc(d))},this._onTouchstart=d=>{y3(d)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Rc(d))},this._options={...Vce,...o},this.modalityDetected=this._modality.pipe(Gq(1)),this.modalityChanged=this.modalityDetected.pipe((0,iB.x)()),t.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Mw),s.addEventListener("mousedown",this._onMousedown,Mw),s.addEventListener("touchstart",this._onTouchstart,Mw)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Mw),document.removeEventListener("mousedown",this._onMousedown,Mw),document.removeEventListener("touchstart",this._onTouchstart,Mw))}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Kr),l.LFG(l.R0b),l.LFG(re),l.LFG(Bce,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const zce=new l.OlP("cdk-focus-monitor-default-options"),BP=Wa({passive:!0,capture:!0});let Am=(()=>{var i;class e{constructor(t,r,s,o,d){this._ngZone=t,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Xe.x,this._rootNodeFocusAndBlurListener=m=>{for(let b=Rc(m);b;b=b.parentElement)"focus"===m.type?this._onFocus(m,b):this._onBlur(m,b)},this._document=o,this._detectionMode=d?.detectionMode||0}monitor(t,r=!1){const s=Br(t);if(!this._platform.isBrowser||1!==s.nodeType)return(0,ft.of)();const o=h3(s)||this._getDocument(),d=this._elementInfo.get(s);if(d)return r&&(d.checkChildren=!0),d.subject;const m={checkChildren:r,subject:new Xe.x,rootNode:o};return this._elementInfo.set(s,m),this._registerGlobalListeners(m),m.subject}stopMonitoring(t){const r=Br(t),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(t,r,s){const o=Br(t);o===this._getDocument().activeElement?this._getClosestElementsInfo(o).forEach(([m,f])=>this._originChanged(m,r,f)):(this._setOrigin(r),"function"==typeof o.focus&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const s=this._elementInfo.get(r),o=Rc(t);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(t,r){const s=this._elementInfo.get(r);!s||s.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,BP),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,BP)}),this._rootNodeFocusListenerCount.set(r,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(xn(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,BP),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,BP),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,s){this._setClasses(t,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((s,o)=>{(o===t||s.checkChildren&&o.contains(t))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const o=t.labels;if(o)for(let d=0;d<o.length;d++)if(o[d].contains(r))return!0;return!1}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(l.R0b),l.LFG(Kr),l.LFG(Uce),l.LFG(re,8),l.LFG(zce,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const nY="cdk-high-contrast-black-on-white",iY="cdk-high-contrast-white-on-black",w3="cdk-high-contrast-active";let rY=(()=>{var i;class e{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=(0,l.f3M)(xce).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(t):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(w3,nY,iY),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(w3,nY):2===r&&t.add(w3,iY)}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Kr),l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),tb=(()=>{var i;class e{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(rY))},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Aw]}),e})();const jce=new l.OlP("cdk-dir-doc",{providedIn:"root",factory:function Gce(){return(0,l.f3M)(re)}}),$ce=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let Ld=(()=>{var i;class e{constructor(t){this.value="ltr",this.change=new l.vpe,t&&(this.value=function Wce(i){const e=i?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?$ce.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(jce,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Rw=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const Yce=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function qce(){return!0}});let Tt=(()=>{var i;class e{constructor(t,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!m3()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(rY),l.LFG(Yce,8),l.LFG(re))},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Rw,Rw]}),e})();function JD(i){return class extends i{get disabled(){return this._disabled}set disabled(e){this._disabled=Et(e)}constructor(...e){super(...e),this._disabled=!1}}}function ek(i,e){return class extends i{get color(){return this._color}set color(n){const t=n||this.defaultColor;t!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),t&&this._elementRef.nativeElement.classList.add(`mat-${t}`),this._color=t)}constructor(...n){super(...n),this.defaultColor=e,this.color=e}}}function Pw(i){return class extends i{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Et(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function cY(i){return class extends i{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}const Zce=new l.OlP("MAT_DATE_LOCALE",{providedIn:"root",factory:function Kce(){return(0,l.f3M)(l.soG)}});class Wu{constructor(){this._localeChanges=new Xe.x,this.localeChanges=this._localeChanges}getValidDateOrNull(e){return this.isDateInstance(e)&&this.isValid(e)?e:null}deserialize(e){return null==e||this.isDateInstance(e)&&this.isValid(e)?e:this.invalid()}setLocale(e){this.locale=e,this._localeChanges.next()}compareDate(e,n){return this.getYear(e)-this.getYear(n)||this.getMonth(e)-this.getMonth(n)||this.getDate(e)-this.getDate(n)}sameDate(e,n){if(e&&n){let t=this.isValid(e),r=this.isValid(n);return t&&r?!this.compareDate(e,n):t==r}return e==n}clampDate(e,n,t){return n&&this.compareDate(e,n)<0?n:t&&this.compareDate(e,t)>0?t:e}}const E3=new l.OlP("mat-date-formats"),Qce=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function I3(i,e){const n=Array(i);for(let t=0;t<i;t++)n[t]=e(t);return n}let Xce=(()=>{var i;class e extends Wu{constructor(t,r){super(),this.useUtcForDisplay=!1,super.setLocale(t)}getYear(t){return t.getFullYear()}getMonth(t){return t.getMonth()}getDate(t){return t.getDate()}getDayOfWeek(t){return t.getDay()}getMonthNames(t){const r=new Intl.DateTimeFormat(this.locale,{month:t,timeZone:"utc"});return I3(12,s=>this._format(r,new Date(2017,s,1)))}getDateNames(){const t=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return I3(31,r=>this._format(t,new Date(2017,0,r+1)))}getDayOfWeekNames(t){const r=new Intl.DateTimeFormat(this.locale,{weekday:t,timeZone:"utc"});return I3(7,s=>this._format(r,new Date(2017,0,s+1)))}getYearName(t){const r=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(r,t)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(t){return this.getDate(this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+1,0))}clone(t){return new Date(t.getTime())}createDate(t,r,s){let o=this._createDateWithOverflow(t,r,s);return o.getMonth(),o}today(){return new Date}parse(t,r){return"number"==typeof t?new Date(t):t?new Date(Date.parse(t)):null}format(t,r){if(!this.isValid(t))throw Error("NativeDateAdapter: Cannot format invalid date.");const s=new Intl.DateTimeFormat(this.locale,{...r,timeZone:"utc"});return this._format(s,t)}addCalendarYears(t,r){return this.addCalendarMonths(t,12*r)}addCalendarMonths(t,r){let s=this._createDateWithOverflow(this.getYear(t),this.getMonth(t)+r,this.getDate(t));return this.getMonth(s)!=((this.getMonth(t)+r)%12+12)%12&&(s=this._createDateWithOverflow(this.getYear(s),this.getMonth(s),0)),s}addCalendarDays(t,r){return this._createDateWithOverflow(this.getYear(t),this.getMonth(t),this.getDate(t)+r)}toIso8601(t){return[t.getUTCFullYear(),this._2digit(t.getUTCMonth()+1),this._2digit(t.getUTCDate())].join("-")}deserialize(t){if("string"==typeof t){if(!t)return null;if(Qce.test(t)){let r=new Date(t);if(this.isValid(r))return r}}return super.deserialize(t)}isDateInstance(t){return t instanceof Date}isValid(t){return!isNaN(t.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(t,r,s){const o=new Date;return o.setFullYear(t,r,s),o.setHours(0,0,0,0),o}_2digit(t){return("00"+t).slice(-2)}_format(t,r){const s=new Date;return s.setUTCFullYear(r.getFullYear(),r.getMonth(),r.getDate()),s.setUTCHours(r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()),t.format(s)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Zce,8),l.LFG(Kr))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const Jce={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};let ele=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[{provide:Wu,useClass:Xce}]}),e})(),lY=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[{provide:E3,useValue:Jce}],imports:[ele]}),e})(),VP=(()=>{var i;class e{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),dY=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,Tt]}),e})();class tle{constructor(e,n,t,r=!1){this._renderer=e,this.element=n,this.config=t,this._animationForciblyDisabledThroughCss=r,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const uY=Wa({passive:!0,capture:!0});class nle{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const n=Rc(e);n&&this._events.get(e.type)?.forEach((t,r)=>{(r===n||r.contains(n))&&t.forEach(s=>s.handleEvent(e))})}}addHandler(e,n,t,r){const s=this._events.get(n);if(s){const o=s.get(t);o?o.add(r):s.set(t,new Set([r]))}else this._events.set(n,new Map([[t,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(n,this._delegateEventHandler,uY)})}removeHandler(e,n,t){const r=this._events.get(e);if(!r)return;const s=r.get(n);s&&(s.delete(t),0===s.size&&r.delete(n),0===r.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,uY)))}}const hY={enterDuration:225,exitDuration:150},mY=Wa({passive:!0,capture:!0}),fY=["mousedown","touchstart"],pY=["mouseup","mouseleave","touchend","touchcancel"];class Ow{constructor(e,n,t,r){this._target=e,this._ngZone=n,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Br(t))}fadeInRipple(e,n,t={}){const r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...hY,...t.animation};t.centered&&(e=r.left+r.width/2,n=r.top+r.height/2);const o=t.radius||function rle(i,e,n){const t=Math.max(Math.abs(i-n.left),Math.abs(i-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(t*t+r*r)}(e,n,r),d=e-r.left,m=n-r.top,f=s.enterDuration,b=document.createElement("div");b.classList.add("mat-ripple-element"),b.style.left=d-o+"px",b.style.top=m-o+"px",b.style.height=2*o+"px",b.style.width=2*o+"px",null!=t.color&&(b.style.backgroundColor=t.color),b.style.transitionDuration=`${f}ms`,this._containerElement.appendChild(b);const w=window.getComputedStyle(b),S=w.transitionDuration,F="none"===w.transitionProperty||"0s"===S||"0s, 0s"===S||0===r.width&&0===r.height,z=new tle(this,b,t,F);b.style.transform="scale3d(1, 1, 1)",z.state=0,t.persistent||(this._mostRecentTransientRipple=z);let q=null;return!F&&(f||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const we=()=>this._finishRippleTransition(z),Ae=()=>this._destroyRipple(z);b.addEventListener("transitionend",we),b.addEventListener("transitioncancel",Ae),q={onTransitionEnd:we,onTransitionCancel:Ae}}),this._activeRipples.set(z,q),(F||!f)&&this._finishRippleTransition(z),z}fadeOutRipple(e){if(2===e.state||3===e.state)return;const n=e.element,t={...hY,...e.config.animation};n.style.transitionDuration=`${t.exitDuration}ms`,n.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!t.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const n=Br(e);!this._platform.isBrowser||!n||n===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=n,fY.forEach(t=>{Ow._eventManager.addHandler(this._ngZone,t,n,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{pY.forEach(n=>{this._triggerElement.addEventListener(n,this,mY)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const n=e===this._mostRecentTransientRipple,{persistent:t}=e.config;e.state=1,!t&&(!n||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const n=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==n&&(e.element.removeEventListener("transitionend",n.onTransitionEnd),e.element.removeEventListener("transitioncancel",n.onTransitionCancel)),e.element.remove()}_onMousedown(e){const n=b3(e),t=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!n&&!t&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!y3(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const n=e.changedTouches;if(n)for(let t=0;t<n.length;t++)this.fadeInRipple(n[t].clientX,n[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&(fY.forEach(n=>Ow._eventManager.removeHandler(n,e,this)),this._pointerUpEventsRegistered&&pY.forEach(n=>e.removeEventListener(n,this,mY)))}}Ow._eventManager=new nle;const Nw=new l.OlP("mat-ripple-global-options");let Fw=(()=>{var i;class e{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,s,o,d){this._elementRef=t,this._animationMode=d,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Ow(this,r,t,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,s){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...s}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(Kr),l.Y36(Nw,8),l.Y36(l.QbO,8))},i.\u0275dir=l.lG2({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),e})(),qa=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,Tt]}),e})(),_Y=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt]}),e})(),UP=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[qa,$t,Tt,_Y]}),e})();const gY={capture:!0},vY=["focus","click","mouseenter","touchstart"],D3="mat-ripple-loader-uninitialized",k3="mat-ripple-loader-class-name",bY="mat-ripple-loader-centered",HP="mat-ripple-loader-disabled";let yY=(()=>{var i;class e{constructor(){this._document=(0,l.f3M)(re,{optional:!0}),this._animationMode=(0,l.f3M)(l.QbO,{optional:!0}),this._globalRippleOptions=(0,l.f3M)(Nw,{optional:!0}),this._platform=(0,l.f3M)(Kr),this._ngZone=(0,l.f3M)(l.R0b),this._onInteraction=t=>{if(!(t.target instanceof HTMLElement))return;const s=t.target.closest(`[${D3}]`);s&&this.createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(const t of vY)this._document?.addEventListener(t,this._onInteraction,gY)})}ngOnDestroy(){for(const t of vY)this._document?.removeEventListener(t,this._onInteraction,gY)}configureRipple(t,r){t.setAttribute(D3,""),(r.className||!t.hasAttribute(k3))&&t.setAttribute(k3,r.className||""),r.centered&&t.setAttribute(bY,""),r.disabled&&t.setAttribute(HP,"")}getRipple(t){return t.matRipple?t.matRipple:this.createRipple(t)}setDisabled(t,r){const s=t.matRipple;s?s.disabled=r:r?t.setAttribute(HP,""):t.removeAttribute(HP)}createRipple(t){if(!this._document)return;t.querySelector(".mat-ripple")?.remove();const r=this._document.createElement("span");r.classList.add("mat-ripple",t.getAttribute(k3)),t.append(r);const s=new Fw(new l.SBq(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=t,s.centered=t.hasAttribute(bY),s.disabled=t.hasAttribute(HP),this.attachRipple(t,s),s}attachRipple(t,r){t.removeAttribute(D3),t.matRipple=r}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class T3{}class Mm{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const t=n.indexOf(":");if(t>0){const r=n.slice(0,t),s=r.toLowerCase(),o=n.slice(t+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,t)=>{this.setHeaderEntries(t,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,t])=>{this.setHeaderEntries(n,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Mm?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Mm;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Mm?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if("string"==typeof t&&(t=[t]),0===t.length)return;this.maybeSetNormalizedName(e.name,n);const r=("a"===e.op?this.headers.get(n):void 0)||[];r.push(...t),this.headers.set(n,r);break;case"d":const s=e.value;if(s){let o=this.headers.get(n);if(!o)return;o=o.filter(d=>-1===s.indexOf(d)),0===o.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}else this.headers.delete(n),this.normalizedNames.delete(n)}}setHeaderEntries(e,n){const t=(Array.isArray(n)?n:[n]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class cle{encodeKey(e){return wY(e)}encodeValue(e){return wY(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const dle=/%(\d[a-f0-9])/gi,ule={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function wY(i){return encodeURIComponent(i).replace(dle,(e,n)=>ule[n]??e)}function zP(i){return`${i}`}class qp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new cle,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function lle(i,e){const n=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[o,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],m=n.get(o)||[];m.push(d),n.set(o,m)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const t=e.fromObject[n],r=Array.isArray(t)?t.map(zP):[zP(t)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(t=>{const r=e[t];Array.isArray(r)?r.forEach(s=>{n.push({param:t,value:s,op:"a"})}):n.push({param:t,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(t=>n+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new qp({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(zP(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let t=this.map.get(e.param)||[];const r=t.indexOf(zP(e.value));-1!==r&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class hle{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function xY(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function CY(i){return typeof Blob<"u"&&i instanceof Blob}function EY(i){return typeof FormData<"u"&&i instanceof FormData}class nk{constructor(e,n,t,r){let s;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function mle(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==t?t:null,s=r):s=t,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Mm),this.context||(this.context=new hle),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=n;else{const d=n.indexOf("?");this.urlWithParams=n+(-1===d?"?":d<n.length-1?"&":"")+o}}else this.params=new qp,this.urlWithParams=n}serializeBody(){return null===this.body?null:xY(this.body)||CY(this.body)||EY(this.body)||function fle(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||EY(this.body)?null:CY(this.body)?this.body.type||null:xY(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const n=e.method||this.method,t=e.url||this.url,r=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,d=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,f=e.params||this.params;const b=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((w,I)=>w.set(I,e.setHeaders[I]),m)),e.setParams&&(f=Object.keys(e.setParams).reduce((w,I)=>w.set(I,e.setParams[I]),f)),new nk(n,t,s,{params:f,headers:m,context:b,reportProgress:d,responseType:r,withCredentials:o})}}var A3=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(A3||{});class ple{constructor(e,n=200,t="OK"){this.headers=e.headers||new Mm,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class ik extends ple{constructor(e={}){super(e),this.type=A3.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new ik({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}function M3(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials}}let R3=(()=>{var i;class e{constructor(t){this.handler=t}request(t,r,s={}){let o;if(t instanceof nk)o=t;else{let f,b;f=s.headers instanceof Mm?s.headers:new Mm(s.headers),s.params&&(b=s.params instanceof qp?s.params:new qp({fromObject:s.params})),o=new nk(t,r,void 0!==s.body?s.body:null,{headers:f,context:s.context,params:b,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials})}const d=(0,ft.of)(o).pipe(ac(f=>this.handler.handle(f)));if(t instanceof nk||"events"===s.observe)return d;const m=d.pipe(Kn(f=>f instanceof ik));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return m.pipe((0,Ct.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return m.pipe((0,Ct.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return m.pipe((0,Ct.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return m.pipe((0,Ct.U)(f=>f.body))}case"response":return m;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new qp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,s={}){return this.request("PATCH",t,M3(s,r))}post(t,r,s={}){return this.request("POST",t,M3(s,r))}put(t,r,s={}){return this.request("PUT",t,M3(s,r))}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(T3))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const Nle=["*"];let $P;function rk(i){return function Fle(){if(void 0===$P&&($P=null,typeof window<"u")){const i=window;void 0!==i.trustedTypes&&($P=i.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return $P}()?.createHTML(i)||i}function OY(i){return Error(`Unable to find icon with the name "${i}"`)}function NY(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function FY(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}class rb{constructor(e,n,t){this.url=e,this.svgText=n,this.options=t}}let WP=(()=>{var i;class e{constructor(t,r,s,o){this._httpClient=t,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(t,r,s){return this.addSvgIconInNamespace("",t,r,s)}addSvgIconLiteral(t,r,s){return this.addSvgIconLiteralInNamespace("",t,r,s)}addSvgIconInNamespace(t,r,s,o){return this._addSvgIconConfig(t,r,new rb(s,null,o))}addSvgIconResolver(t){return this._resolvers.push(t),this}addSvgIconLiteralInNamespace(t,r,s,o){const d=this._sanitizer.sanitize(l.q3G.HTML,s);if(!d)throw FY(s);const m=rk(d);return this._addSvgIconConfig(t,r,new rb("",m,o))}addSvgIconSet(t,r){return this.addSvgIconSetInNamespace("",t,r)}addSvgIconSetLiteral(t,r){return this.addSvgIconSetLiteralInNamespace("",t,r)}addSvgIconSetInNamespace(t,r,s){return this._addSvgIconSetConfig(t,new rb(r,null,s))}addSvgIconSetLiteralInNamespace(t,r,s){const o=this._sanitizer.sanitize(l.q3G.HTML,r);if(!o)throw FY(r);const d=rk(o);return this._addSvgIconSetConfig(t,new rb("",d,s))}registerFontClassAlias(t,r=t){return this._fontCssClassesByAlias.set(t,r),this}classNameForFontAlias(t){return this._fontCssClassesByAlias.get(t)||t}setDefaultFontSetClass(...t){return this._defaultFontSetClass=t,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(t){const r=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,t);if(!r)throw NY(t);const s=this._cachedIconsByUrl.get(r);return s?(0,ft.of)(qP(s)):this._loadSvgIconFromConfig(new rb(t,null)).pipe((0,si.b)(o=>this._cachedIconsByUrl.set(r,o)),(0,Ct.U)(o=>qP(o)))}getNamedSvgIcon(t,r=""){const s=LY(r,t);let o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,t),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);const d=this._iconSetConfigs.get(r);return d?this._getSvgFromIconSetConfigs(t,d):au(OY(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(t){return t.svgText?(0,ft.of)(qP(this._svgElementFromConfig(t))):this._loadSvgIconFromConfig(t).pipe((0,Ct.U)(r=>qP(r)))}_getSvgFromIconSetConfigs(t,r){const s=this._extractIconWithNameFromAnySet(t,r);return s?(0,ft.of)(s):PW(r.filter(d=>!d.svgText).map(d=>this._loadSvgIconSetFromConfig(d).pipe(No(m=>{const b=`Loading icon set URL: ${this._sanitizer.sanitize(l.q3G.RESOURCE_URL,d.url)} failed: ${m.message}`;return this._errorHandler.handleError(new Error(b)),(0,ft.of)(null)})))).pipe((0,Ct.U)(()=>{const d=this._extractIconWithNameFromAnySet(t,r);if(!d)throw OY(t);return d}))}_extractIconWithNameFromAnySet(t,r){for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.svgText&&o.svgText.toString().indexOf(t)>-1){const d=this._svgElementFromConfig(o),m=this._extractSvgIconFromSet(d,t,o.options);if(m)return m}}return null}_loadSvgIconFromConfig(t){return this._fetchIcon(t).pipe((0,si.b)(r=>t.svgText=r),(0,Ct.U)(()=>this._svgElementFromConfig(t)))}_loadSvgIconSetFromConfig(t){return t.svgText?(0,ft.of)(null):this._fetchIcon(t).pipe((0,si.b)(r=>t.svgText=r))}_extractSvgIconFromSet(t,r,s){const o=t.querySelector(`[id="${r}"]`);if(!o)return null;const d=o.cloneNode(!0);if(d.removeAttribute("id"),"svg"===d.nodeName.toLowerCase())return this._setSvgAttributes(d,s);if("symbol"===d.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(d),s);const m=this._svgElementFromString(rk("<svg></svg>"));return m.appendChild(d),this._setSvgAttributes(m,s)}_svgElementFromString(t){const r=this._document.createElement("DIV");r.innerHTML=t;const s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(t){const r=this._svgElementFromString(rk("<svg></svg>")),s=t.attributes;for(let o=0;o<s.length;o++){const{name:d,value:m}=s[o];"id"!==d&&r.setAttribute(d,m)}for(let o=0;o<t.childNodes.length;o++)t.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(t.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(t,r){return t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),r&&r.viewBox&&t.setAttribute("viewBox",r.viewBox),t}_fetchIcon(t){const{url:r,options:s}=t,o=s?.withCredentials??!1;if(!this._httpClient)throw function Lle(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}();if(null==r)throw Error(`Cannot fetch icon from URL "${r}".`);const d=this._sanitizer.sanitize(l.q3G.RESOURCE_URL,r);if(!d)throw NY(r);const m=this._inProgressUrlFetches.get(d);if(m)return m;const f=this._httpClient.get(d,{responseType:"text",withCredentials:o}).pipe((0,Ct.U)(b=>rk(b)),Oa(()=>this._inProgressUrlFetches.delete(d)),(0,yU.B)());return this._inProgressUrlFetches.set(d,f),f}_addSvgIconConfig(t,r,s){return this._svgIconConfigs.set(LY(t,r),s),this}_addSvgIconSetConfig(t,r){const s=this._iconSetConfigs.get(t);return s?s.push(r):this._iconSetConfigs.set(t,[r]),this}_svgElementFromConfig(t){if(!t.svgElement){const r=this._svgElementFromString(t.svgText);this._setSvgAttributes(r,t.options),t.svgElement=r}return t.svgElement}_getIconConfigFromResolvers(t,r){for(let s=0;s<this._resolvers.length;s++){const o=this._resolvers[s](r,t);if(o)return Vle(o)?new rb(o.url,null,o.options):new rb(o,null)}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(R3,8),l.LFG(ss),l.LFG(re,8),l.LFG(l.qLn))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();function qP(i){return i.cloneNode(!0)}function LY(i,e){return i+":"+e}function Vle(i){return!(!i.url||!i.options)}const Ule=ek(class{constructor(i){this._elementRef=i}}),Hle=new l.OlP("MAT_ICON_DEFAULT_OPTIONS"),zle=new l.OlP("mat-icon-location",{providedIn:"root",factory:function jle(){const i=(0,l.f3M)(re),e=i?i.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}}),BY=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Gle=BY.map(i=>`[${i}]`).join(", "),$le=/^url\(['"]?#(.*?)['"]?\)$/;let Wle=(()=>{var i;class e extends Ule{get inline(){return this._inline}set inline(t){this._inline=Et(t)}get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}get fontSet(){return this._fontSet}set fontSet(t){const r=this._cleanupFontValue(t);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(t){const r=this._cleanupFontValue(t);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(t,r,s,o,d,m){super(t),this._iconRegistry=r,this._location=o,this._errorHandler=d,this._inline=!1,this._previousFontSetClass=[],this._currentIconFetch=rr.w0.EMPTY,m&&(m.color&&(this.color=this.defaultColor=m.color),m.fontSet&&(this.fontSet=m.fontSet)),s||t.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const r=t.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let r=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){const s=t.childNodes[r];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),r.forEach(s=>t.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(d=>{o.setAttribute(d.name,`url('${t}#${d.value}')`)})})}_cacheChildrenWithExternalReferences(t){const r=t.querySelectorAll(Gle),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)BY.forEach(d=>{const m=r[o],f=m.getAttribute(d),b=f?f.match($le):null;if(b){let w=s.get(m);w||(w=[],s.set(m,w)),w.push({name:d,value:b[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[r,s]=this._splitIconName(t);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(Mn(1)).subscribe(o=>this._setSvgElement(o),o=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${r}:${s}! ${o.message}`))})}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(WP),l.$8M("aria-hidden"),l.Y36(zle),l.Y36(l.qLn),l.Y36(Hle,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:8,hostBindings:function(t,r){2&t&&(l.uIk("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),l.ekj("mat-icon-inline",r.inline)("mat-icon-no-color","primary"!==r.color&&"accent"!==r.color&&"warn"!==r.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[l.qOj],ngContentSelectors:Nle,decls:1,vars:0,template:function(t,r){1&t&&(l.F$t(),l.Hsn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0}),e})(),sk=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,Tt]}),e})();const Yle=["mat-icon-button",""],Zle=["*"],Kle=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],Qle=ek(JD(Pw(class{constructor(i){this._elementRef=i}})));let Xle=(()=>{var i;class e extends Qle{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(t){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,t)}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=Et(t),this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(t){this._disabled=Et(t),this._updateRippleDisabled()}constructor(t,r,s,o){super(t),this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=(0,l.f3M)(Am),this._rippleLoader=(0,l.f3M)(yY),this._isFab=!1,this._disableRipple=!1,this._disabled=!1,this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-button-ripple"});const d=t.nativeElement.classList;for(const m of Kle)this._hasHostAttributes(m.selector)&&m.mdcClasses.forEach(f=>{d.add(f)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}}return(i=e).\u0275fac=function(t){l.$Z()},i.\u0275dir=l.lG2({type:i,features:[l.qOj]}),e})(),tde=(()=>{var i;class e extends Xle{constructor(t,r,s,o){super(t,r,s,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(Kr),l.Y36(l.R0b),l.Y36(l.QbO,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["button","mat-icon-button",""]],hostVars:7,hostBindings:function(t,r){2&t&&(l.uIk("disabled",r.disabled||null),l.ekj("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[l.qOj],attrs:Yle,ngContentSelectors:Zle,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(l.F$t(),l._UZ(0,"span",0),l.Hsn(1),l._UZ(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{height:var(--mdc-icon-button-state-layer-size);width:var(--mdc-icon-button-state-layer-size);color:var(--mdc-icon-button-icon-color);--mdc-icon-button-state-layer-size:48px;--mdc-icon-button-icon-size:24px;--mdc-icon-button-disabled-icon-color:black;--mdc-icon-button-disabled-icon-opacity:0.38}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{opacity:var(--mdc-icon-button-disabled-icon-opacity)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{padding:12px;font-size:var(--mdc-icon-button-icon-size);border-radius:50%;flex-shrink:0;text-align:center;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled]{cursor:default;pointer-events:none;opacity:1}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),e})(),ok=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,qa,Tt]}),e})();const nde=["*"],ade=new l.OlP("MAT_CARD_CONFIG");let VY=(()=>{var i;class e{constructor(t){this.appearance=t?.appearance||"raised"}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(ade,8))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(t,r){2&t&&l.ekj("mat-mdc-card-outlined","outlined"===r.appearance)("mdc-card--outlined","outlined"===r.appearance)},inputs:{appearance:"appearance"},exportAs:["matCard"],ngContentSelectors:nde,decls:1,vars:0,template:function(t,r){1&t&&(l.F$t(),l.Hsn(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation);--mdc-elevated-card-container-shape:4px;--mdc-outlined-card-container-shape:4px;--mdc-outlined-card-outline-width:1px}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0}),e})(),UY=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"]}),e})(),HY=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"]}),e})(),zY=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,$t,Tt]}),e})();class dde{constructor(e){this._box=e,this._destroyed=new Xe.x,this._resizeSubject=new Xe.x,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(n=>this._resizeSubject.next(n)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new Bi.y(n=>{const t=this._resizeSubject.subscribe(n);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),t.unsubscribe(),this._elementObservables.delete(e)}}).pipe(Kn(n=>n.some(t=>t.target===e)),wU({bufferSize:1,refCount:!0}),xn(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let ude=(()=>{var i;class e{constructor(){this._observers=new Map,this._ngZone=(0,l.f3M)(l.R0b)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,r){const s=r?.box||"content-box";return this._observers.has(s)||this._observers.set(s,new dde(s)),this._observers.get(s).observe(t)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class jY{}class hde{}const Rm="*";function dr(i,e){return{type:7,name:i,definitions:e,options:{}}}function kn(i,e=null){return{type:4,styles:e,timings:i}}function GY(i,e=null){return{type:2,steps:i,options:e}}function vt(i){return{type:6,styles:i,offset:null}}function pn(i,e,n){return{type:0,name:i,styles:e,options:n}}function En(i,e,n=null){return{type:1,expr:i,animation:e,options:n}}class ak{constructor(e=0,n=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+n}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}}class $Y{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let n=0,t=0,r=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++n==s&&this._onFinish()}),o.onDestroy(()=>{++t==s&&this._onDestroy()}),o.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,d)=>Math.max(o,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const n=e*this.totalTime;this.players.forEach(t=>{const r=t.totalTime?Math.min(1,n/t.totalTime):1;t.setPosition(r)})}getPosition(){const e=this.players.reduce((n,t)=>null===n||t.totalTime>n.totalTime?t:n,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const n="start"==e?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}}const mde=["notch"],fde=["matFormFieldNotchedOutline",""],pde=["*"],_de=["textField"],gde=["iconPrefixContainer"],vde=["textPrefixContainer"];function bde(i,e){1&i&&l._UZ(0,"span",19)}function yde(i,e){if(1&i&&(l.TgZ(0,"label",17),l.Hsn(1,1),l.YNc(2,bde,1,0,"span",18),l.qZA()),2&i){const n=l.oxw(2);l.Q6J("floating",n._shouldLabelFloat())("monitorResize",n._hasOutline())("id",n._labelId),l.uIk("for",n._control.id),l.xp6(2),l.Q6J("ngIf",!n.hideRequiredMarker&&n._control.required)}}function wde(i,e){if(1&i&&l.YNc(0,yde,3,5,"label",16),2&i){const n=l.oxw();l.Q6J("ngIf",n._hasFloatingLabel())}}function xde(i,e){1&i&&l._UZ(0,"div",20)}function Cde(i,e){}function Ede(i,e){if(1&i&&l.YNc(0,Cde,0,0,"ng-template",22),2&i){l.oxw(2);const n=l.MAs(1);l.Q6J("ngTemplateOutlet",n)}}function Ide(i,e){if(1&i&&(l.TgZ(0,"div",21),l.YNc(1,Ede,1,1,"ng-template",9),l.qZA()),2&i){const n=l.oxw();l.Q6J("matFormFieldNotchedOutlineOpen",n._shouldLabelFloat()),l.xp6(1),l.Q6J("ngIf",!n._forceDisplayInfixLabel())}}function Dde(i,e){1&i&&(l.TgZ(0,"div",23,24),l.Hsn(2,2),l.qZA())}function kde(i,e){1&i&&(l.TgZ(0,"div",25,26),l.Hsn(2,3),l.qZA())}function Tde(i,e){}function Sde(i,e){if(1&i&&l.YNc(0,Tde,0,0,"ng-template",22),2&i){l.oxw();const n=l.MAs(1);l.Q6J("ngTemplateOutlet",n)}}function Ade(i,e){1&i&&(l.TgZ(0,"div",27),l.Hsn(1,4),l.qZA())}function Mde(i,e){1&i&&(l.TgZ(0,"div",28),l.Hsn(1,5),l.qZA())}function Rde(i,e){1&i&&l._UZ(0,"div",29)}function Pde(i,e){if(1&i&&(l.TgZ(0,"div",30),l.Hsn(1,6),l.qZA()),2&i){const n=l.oxw();l.Q6J("@transitionMessages",n._subscriptAnimationState)}}function Ode(i,e){if(1&i&&(l.TgZ(0,"mat-hint",34),l._uU(1),l.qZA()),2&i){const n=l.oxw(2);l.Q6J("id",n._hintLabelId),l.xp6(1),l.Oqu(n.hintLabel)}}function Nde(i,e){if(1&i&&(l.TgZ(0,"div",31),l.YNc(1,Ode,2,2,"mat-hint",32),l.Hsn(2,7),l._UZ(3,"div",33),l.Hsn(4,8),l.qZA()),2&i){const n=l.oxw();l.Q6J("@transitionMessages",n._subscriptAnimationState),l.xp6(1),l.Q6J("ngIf",n.hintLabel)}}const Fde=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Lde=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let N3=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["mat-label"]]}),e})();const Bde=new l.OlP("MatError");let Vde=0,WY=(()=>{var i;class e{constructor(){this.align="start",this.id="mat-mdc-hint-"+Vde++}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,r){2&t&&(l.Ikx("id",r.id),l.uIk("align",null),l.ekj("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),e})();const Ude=new l.OlP("MatPrefix"),qY=new l.OlP("MatSuffix");let Hde=(()=>{var i;class e{constructor(){this._isText=!1}set _isTextSelector(t){this._isText=!0}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:["matTextSuffix","_isTextSelector"]},features:[l._Bn([{provide:qY,useExisting:i}])]}),e})();const YY=new l.OlP("FloatingLabelParent");let ZY=(()=>{var i;class e{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=(0,l.f3M)(ude),this._ngZone=(0,l.f3M)(l.R0b),this._parent=(0,l.f3M)(YY),this._resizeSubscription=new rr.w0}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function zde(i){if(null!==i.offsetParent)return i.scrollWidth;const n=i.cloneNode(!0);n.style.setProperty("position","absolute"),n.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(n);const t=n.scrollWidth;return n.remove(),t}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq))},i.\u0275dir=l.lG2({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),e})();const KY="mdc-line-ripple--active",YP="mdc-line-ripple--deactivating";let QY=(()=>{var i;class e{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=s=>{const o=this._elementRef.nativeElement.classList,d=o.contains(YP);"opacity"===s.propertyName&&d&&o.remove(KY,YP)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(YP),t.add(KY)}deactivate(){this._elementRef.nativeElement.classList.add(YP)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.R0b))},i.\u0275dir=l.lG2({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),e})(),XY=(()=>{var i;class e{constructor(t,r){this._elementRef=t,this._ngZone=r,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.R0b))},i.\u0275cmp=l.Xpm({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,r){if(1&t&&l.Gf(mde,5),2&t){let s;l.iGM(s=l.CRH())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,r){2&t&&l.ekj("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:fde,ngContentSelectors:pde,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(t,r){1&t&&(l.F$t(),l._UZ(0,"div",0),l.TgZ(1,"div",1,2),l.Hsn(3),l.qZA(),l._UZ(4,"div",3))},encapsulation:2,changeDetection:0}),e})();const jde={transitionMessages:dr("transitionMessages",[pn("enter",vt({opacity:1,transform:"translateY(0%)"})),En("void => enter",[vt({opacity:0,transform:"translateY(-5px)"}),kn("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let F3=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275dir=l.lG2({type:i}),e})();const ck=new l.OlP("MatFormField"),Gde=new l.OlP("MAT_FORM_FIELD_DEFAULT_OPTIONS");let JY=0,qde=(()=>{var i;class e{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=Et(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,s,o,d,m,f,b){this._elementRef=t,this._changeDetectorRef=r,this._ngZone=s,this._dir=o,this._platform=d,this._defaults=m,this._animationMode=f,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+JY++,this._hintLabelId="mat-mdc-hint-"+JY++,this._subscriptAnimationState="",this._destroyed=new Xe.x,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,m&&(m.appearance&&(this.appearance=m.appearance),this._hideRequiredMarker=!!m?.hideRequiredMarker,m.color&&(this.color=m.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(xn(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),(0,wo.T)(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(xn(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(xn(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(o=>"start"===o.align):null,s=this._hintChildren?this._hintChildren.find(o=>"end"===o.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),s&&t.push(s.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,s=this._textPrefixContainer?.nativeElement,o=r?.getBoundingClientRect().width??0,d=s?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${o+d}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(l.sBO),l.Y36(l.R0b),l.Y36(Ld),l.Y36(Kr),l.Y36(Gde,8),l.Y36(l.QbO,8),l.Y36(re))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-form-field"]],contentQueries:function(t,r,s){if(1&t&&(l.Suo(s,N3,5),l.Suo(s,N3,7),l.Suo(s,F3,5),l.Suo(s,Ude,5),l.Suo(s,qY,5),l.Suo(s,Bde,5),l.Suo(s,WY,5)),2&t){let o;l.iGM(o=l.CRH())&&(r._labelChildNonStatic=o.first),l.iGM(o=l.CRH())&&(r._labelChildStatic=o.first),l.iGM(o=l.CRH())&&(r._formFieldControl=o.first),l.iGM(o=l.CRH())&&(r._prefixChildren=o),l.iGM(o=l.CRH())&&(r._suffixChildren=o),l.iGM(o=l.CRH())&&(r._errorChildren=o),l.iGM(o=l.CRH())&&(r._hintChildren=o)}},viewQuery:function(t,r){if(1&t&&(l.Gf(_de,5),l.Gf(gde,5),l.Gf(vde,5),l.Gf(ZY,5),l.Gf(XY,5),l.Gf(QY,5)),2&t){let s;l.iGM(s=l.CRH())&&(r._textField=s.first),l.iGM(s=l.CRH())&&(r._iconPrefixContainer=s.first),l.iGM(s=l.CRH())&&(r._textPrefixContainer=s.first),l.iGM(s=l.CRH())&&(r._floatingLabel=s.first),l.iGM(s=l.CRH())&&(r._notchedOutline=s.first),l.iGM(s=l.CRH())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,r){2&t&&l.ekj("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[l._Bn([{provide:ck,useExisting:i},{provide:YY,useExisting:i}])],ngContentSelectors:Lde,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,r){1&t&&(l.F$t(Fde),l.YNc(0,wde,1,1,"ng-template",null,0,l.W1O),l.TgZ(2,"div",1,2),l.NdJ("click",function(o){return r._control.onContainerClick(o)}),l.YNc(4,xde,1,0,"div",3),l.TgZ(5,"div",4),l.YNc(6,Ide,2,2,"div",5),l.YNc(7,Dde,3,0,"div",6),l.YNc(8,kde,3,0,"div",7),l.TgZ(9,"div",8),l.YNc(10,Sde,1,1,"ng-template",9),l.Hsn(11),l.qZA(),l.YNc(12,Ade,2,0,"div",10),l.YNc(13,Mde,2,0,"div",11),l.qZA(),l.YNc(14,Rde,1,0,"div",12),l.qZA(),l.TgZ(15,"div",13),l.YNc(16,Pde,2,1,"div",14),l.YNc(17,Nde,5,2,"div",15),l.qZA()),2&t&&(l.xp6(2),l.ekj("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),l.xp6(2),l.Q6J("ngIf",!r._hasOutline()&&!r._control.disabled),l.xp6(2),l.Q6J("ngIf",r._hasOutline()),l.xp6(1),l.Q6J("ngIf",r._hasIconPrefix),l.xp6(1),l.Q6J("ngIf",r._hasTextPrefix),l.xp6(2),l.Q6J("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),l.xp6(2),l.Q6J("ngIf",r._hasTextSuffix),l.xp6(1),l.Q6J("ngIf",r._hasIconSuffix),l.xp6(1),l.Q6J("ngIf",!r._hasOutline()),l.xp6(1),l.ekj("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),l.Q6J("ngSwitch",r._getDisplayedMessages()),l.xp6(1),l.Q6J("ngSwitchCase","error"),l.xp6(1),l.Q6J("ngSwitchCase","hint"))},dependencies:[To,Wd,Hn,Hc,WY,ZY,XY,QY],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{--mdc-filled-text-field-active-indicator-height:1px;--mdc-filled-text-field-focus-active-indicator-height:2px;--mdc-filled-text-field-container-shape:4px;border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined{--mdc-outlined-text-field-outline-width:1px;--mdc-outlined-text-field-focus-outline-width:2px;--mdc-outlined-text-field-container-shape:4px}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size) * var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[jde.transitionMessages]},changeDetection:0}),e})(),lk=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,$t,Aw,Tt]}),e})();const n9=Wa({passive:!0});let Yde=(()=>{var i;class e{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return oa.E;const r=Br(t),s=this._monitoredElements.get(r);if(s)return s.subject;const o=new Xe.x,d="cdk-text-field-autofilled",m=f=>{"cdk-text-field-autofill-start"!==f.animationName||r.classList.contains(d)?"cdk-text-field-autofill-end"===f.animationName&&r.classList.contains(d)&&(r.classList.remove(d),this._ngZone.run(()=>o.next({target:f.target,isAutofilled:!1}))):(r.classList.add(d),this._ngZone.run(()=>o.next({target:f.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",m,n9),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:o,unlisten:()=>{r.removeEventListener("animationstart",m,n9)}}),o}stopMonitoring(t){const r=Br(t),s=this._monitoredElements.get(r);s&&(s.unlisten(),s.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Kr),l.LFG(l.R0b))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),L3=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const r9=new l.OlP("MAT_INPUT_VALUE_ACCESSOR"),Zde=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let Kde=0;const Qde=cY(class{constructor(i,e,n,t){this._defaultErrorStateMatcher=i,this._parentForm=e,this._parentFormGroup=n,this.ngControl=t,this.stateChanges=new Xe.x}});let Xde=(()=>{var i;class e extends Qde{get disabled(){return this._disabled}set disabled(t){this._disabled=Et(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(GU.required)??!1}set required(t){this._required=Et(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&zq().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=Et(t)}constructor(t,r,s,o,d,m,f,b,w,I){super(m,o,d,s),this._elementRef=t,this._platform=r,this._autofillMonitor=b,this._formField=I,this._uid="mat-input-"+Kde++,this.focused=!1,this.stateChanges=new Xe.x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(z=>zq().has(z)),this._iOSKeyupListener=z=>{const q=z.target;!q.value&&0===q.selectionStart&&0===q.selectionEnd&&(q.setSelectionRange(1,1),q.setSelectionRange(0,0))};const S=this._elementRef.nativeElement,F=S.nodeName.toLowerCase();this._inputValueAccessor=f||S,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&w.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===F,this._isTextarea="textarea"===F,this._isInFormField=!!I,this._isNativeSelect&&(this.controlType=S.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){Zde.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(Kr),l.Y36($u,10),l.Y36(ZD,8),l.Y36(kw,8),l.Y36(VP),l.Y36(r9,10),l.Y36(Yde),l.Y36(l.R0b),l.Y36(ck,8))},i.\u0275dir=l.lG2({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,r){1&t&&l.NdJ("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(l.Ikx("id",r.id)("disabled",r.disabled)("required",r.required),l.uIk("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),l.ekj("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[l._Bn([{provide:F3,useExisting:i}]),l.qOj,l.TTD]}),e})(),s9=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,lk,lk,L3,Tt]}),e})();function Jde(i,e){if(1&i&&(l.TgZ(0,"div",7)(1,"mat-card")(2,"mat-card-subtitle")(3,"span"),l._uU(4),l.ALo(5,"date"),l.qZA()(),l.TgZ(6,"mat-card-content")(7,"p"),l._uU(8),l.qZA()()()()),2&i){const n=e.$implicit;l.xp6(4),l.AsE("",n.username," (Sent: ",l.xi3(5,3,n.timestamp,"long"),")"),l.xp6(4),l.Oqu(n.message)}}let eue=(()=>{var i;class e{constructor(t,r){this.formBuilder=t,this.authService=r,this.username="",this.message="",this.chats=[],this.app=(0,cn.initializeApp)(JC_firebase),this.db=Il(this.app),this.form=this.formBuilder.group({message:[],username:""}),this.form.controls.username.setValue(this.exactUser)}onChatSubmit(t){const r=t;r.timestamp=(new Date).toString(),r.id=a6(),z0(wv(this.db,`chats/${r.id}`),r),this.form=this.formBuilder.group({message:[],username:this})}ngOnInit(){this.authService.afAuth.authState.subscribe(r=>{r?(this.userData=r,this.exactUser=this.userData.multiFactor.user.email,this.form.controls.username.setValue(this.exactUser),console.log(this.userData.multiFactor.user)):this.userData=null}),J2(wv(this.db,"chats"),r=>{const s=r.val();for(let o in s)this.chats.map(d=>d.id).includes(o)||this.chats.push(s[o])})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(Zae),l.Y36(Zv))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-chat-space"]],decls:14,vars:3,consts:[["id","history"],["class","mb",4,"ngFor","ngForOf"],["id","message",3,"formGroup","ngSubmit"],["appearance","outline",1,"fw"],["matInput","","formControlName","username"],["matInput","","formControlName","message"],["type","submit","matSuffix","","mat-icon-button","","aria-label","Submit"],[1,"mb"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0),l.YNc(1,Jde,9,6,"div",1),l.qZA(),l.TgZ(2,"form",2),l.NdJ("ngSubmit",function(){return r.onChatSubmit(r.form.value)}),l.TgZ(3,"mat-form-field",3)(4,"mat-label"),l._uU(5),l.qZA(),l._UZ(6,"input",4),l.qZA(),l.TgZ(7,"mat-form-field",3)(8,"mat-label"),l._uU(9,"Enter Chat"),l.qZA(),l._UZ(10,"input",5),l.TgZ(11,"button",6)(12,"mat-icon"),l._uU(13,"send"),l.qZA()()()()),2&t&&(l.xp6(1),l.Q6J("ngForOf",r.chats),l.xp6(1),l.Q6J("formGroup",r.form),l.xp6(3),l.Oqu(r.exactUser))},dependencies:[ah,Wle,tde,VY,UY,HY,qde,N3,Hde,Xde,yq,yP,sq,oq,kw,o3,Ja],styles:[".bg-style[_ngcontent-%COMP%]{background:purple}.sender-bg-style[_ngcontent-%COMP%]{background:rgb(242,162,242)}#history[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;padding-left:1em;padding-right:1em;width:400px;height:60%;overflow-y:scroll}#message[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;width:400px}.fw[_ngcontent-%COMP%]{width:100%}.mb[_ngcontent-%COMP%]{margin-bottom:1em}"]}),e})();function tue(i,e){if(1&i&&(l.TgZ(0,"div",1)(1,"div",15)(2,"div",16),l._UZ(3,"img",17),l.TgZ(4,"div",18)(5,"h1"),l._uU(6,"Hello: "),l.TgZ(7,"strong"),l._uU(8),l.qZA()(),l.TgZ(9,"p"),l._uU(10,"User ID: "),l.TgZ(11,"strong"),l._uU(12),l.qZA()(),l.TgZ(13,"p"),l._uU(14,"Email: "),l.TgZ(15,"strong"),l._uU(16),l.qZA()(),l.TgZ(17,"p"),l._uU(18,"Email Verified: "),l.TgZ(19,"strong"),l._uU(20),l.qZA()()()()()()),2&i){const n=e.ngIf;l.xp6(3),l.s9C("src",n.photoURL?n.photoURL:"/assets/dummy-user.png",l.LSH),l.s9C("alt",n.displayName),l.xp6(5),l.Oqu(n.displayName?n.displayName:"User"),l.xp6(4),l.Oqu(n.uid),l.xp6(4),l.Oqu(n.email),l.xp6(4),l.Oqu(n.emailVerified)}}let nue=(()=>{var i;class e{constructor(t){this.authService=t}ngOnInit(){}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(Zv))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-dashboard"]],decls:20,vars:1,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"nav",2)(3,"div",3)(4,"ul",4)(5,"li",5)(6,"a",6),l._UZ(7,"i",7),l._uU(8,"User Profile "),l.qZA()(),l.TgZ(9,"li",5)(10,"a",8),l.NdJ("click",function(){return r.authService.SignOut()}),l._UZ(11,"i",9),l._uU(12,"Log out "),l.qZA()()()()(),l.TgZ(13,"main",10)(14,"div",11)(15,"div",12)(16,"h1",13),l._uU(17,"User Profile"),l.qZA()(),l.YNc(18,tue,21,6,"div",14),l.qZA()()()(),l._UZ(19,"app-chat-space")),2&t&&(l.xp6(18),l.Q6J("ngIf",r.authService.userData))},dependencies:[To,eue]}),e})(),iue=(()=>{var i;class e{constructor(t){this.authService=t}ngOnInit(){}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(Zv))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const s=l.EpF();l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l._uU(4,"Reset Password"),l.qZA(),l.TgZ(5,"p",3),l._uU(6,"Please enter your email address to request a password reset."),l.qZA(),l.TgZ(7,"div",4),l._UZ(8,"input",5,6),l.qZA(),l.TgZ(10,"div",4)(11,"input",7),l.NdJ("click",function(){l.CHM(s);const d=l.MAs(9);return l.KtG(r.authService.ForgotPassword(d.value))}),l.qZA()()(),l.TgZ(12,"div",8)(13,"span"),l._uU(14,"Go back to ? "),l.TgZ(15,"span",9),l._uU(16,"Log In"),l.qZA()()()()()}},dependencies:[Af]}),e})();function rue(i,e){if(1&i&&(l.TgZ(0,"div",4)(1,"p",9),l._uU(2,"We have sent a confirmation email to "),l.TgZ(3,"strong"),l._uU(4),l.qZA(),l._uU(5,"."),l.qZA(),l.TgZ(6,"p",9),l._uU(7,"Please check your email and click on the link to verfiy your email address."),l.qZA()()),2&i){const n=e.ngIf;l.xp6(4),l.Oqu(n.email)}}const sue=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:tae},{path:"register-user",component:nae},{path:"dashboard",component:nue,canActivate:[(()=>{var i;class e{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Zv),l.LFG(co))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})()]},{path:"forgot-password",component:iue},{path:"verify-email-address",component:(()=>{var i;class e{constructor(t){this.authService=t}ngOnInit(){}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(Zv))},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),l._uU(4,"Thank You for Registering"),l.qZA(),l.YNc(5,rue,8,1,"div",3),l.TgZ(6,"div",4)(7,"button",5),l.NdJ("click",function(){return r.authService.SendVerificationMail()}),l._UZ(8,"i",6),l._uU(9," Resend Verification Email "),l.qZA()()(),l.TgZ(10,"div",7)(11,"span"),l._uU(12,"Go back to?"),l.TgZ(13,"span",8),l._uU(14," Sign in"),l.qZA()()()()()),2&t&&(l.xp6(5),l.Q6J("ngIf",r.authService.userData))},dependencies:[To,Af]}),e})()}];let oue=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Hx.forRoot(sue),Hx]}),e})(),aue=(()=>{var i;class e{constructor(){this.title="angular-chat"}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l.Xpm({type:i,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&l._UZ(0,"router-outlet")},dependencies:[Zh],styles:[".example-container[_ngcontent-%COMP%]{width:100%;height:100%}#mode[_ngcontent-%COMP%]{width:600px}"]}),e})();function o9(i){return new l.vHH(3e3,!1)}function Qp(i){switch(i.length){case 0:return new ak;case 1:return i[0];default:return new $Y(i)}}function a9(i,e,n=new Map,t=new Map){const r=[],s=[];let o=-1,d=null;if(e.forEach(m=>{const f=m.get("offset"),b=f==o,w=b&&d||new Map;m.forEach((I,S)=>{let F=S,z=I;if("offset"!==S)switch(F=i.normalizePropertyName(F,r),z){case"!":z=n.get(S);break;case Rm:z=t.get(S);break;default:z=i.normalizeStyleValue(S,F,z,r)}w.set(F,z)}),b||s.push(w),d=w,o=f}),r.length)throw function Aue(i){return new l.vHH(3502,!1)}();return s}function B3(i,e,n,t){switch(e){case"start":i.onStart(()=>t(n&&V3(n,"start",i)));break;case"done":i.onDone(()=>t(n&&V3(n,"done",i)));break;case"destroy":i.onDestroy(()=>t(n&&V3(n,"destroy",i)))}}function V3(i,e,n){const s=U3(i.element,i.triggerName,i.fromState,i.toState,e||i.phaseName,n.totalTime??i.totalTime,!!n.disabled),o=i._data;return null!=o&&(s._data=o),s}function U3(i,e,n,t,r="",s=0,o){return{element:i,triggerName:e,fromState:n,toState:t,phaseName:r,totalTime:s,disabled:!!o}}function Pc(i,e,n){let t=i.get(e);return t||i.set(e,t=n),t}function c9(i){const e=i.indexOf(":");return[i.substring(1,e),i.slice(e+1)]}const zue=(()=>typeof document>"u"?null:document.documentElement)();function H3(i){const e=i.parentNode||i.host||null;return e===zue?null:e}let ob=null,l9=!1;function d9(i,e){for(;e;){if(e===i)return!0;e=H3(e)}return!1}function u9(i,e,n){if(n)return Array.from(i.querySelectorAll(e));const t=i.querySelector(e);return t?[t]:[]}let h9=(()=>{var i;class e{validateStyleProperty(t){return function Gue(i){ob||(ob=function $ue(){return typeof document<"u"?document.body:null}()||{},l9=!!ob.style&&"WebkitAppearance"in ob.style);let e=!0;return ob.style&&!function jue(i){return"ebkit"==i.substring(1,6)}(i)&&(e=i in ob.style,!e&&l9&&(e="Webkit"+i.charAt(0).toUpperCase()+i.slice(1)in ob.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return d9(t,r)}getParentElement(t){return H3(t)}query(t,r,s){return u9(t,r,s)}computeStyle(t,r,s){return s||""}animate(t,r,s,o,d,m=[],f){return new ak(s,o)}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})(),z3=(()=>{class e{}return e.NOOP=new h9,e})();const Wue=1e3,j3="ng-enter",ZP="ng-leave",KP="ng-trigger",QP=".ng-trigger",f9="ng-animating",G3=".ng-animating";function Pm(i){if("number"==typeof i)return i;const e=i.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:$3(parseFloat(e[1]),e[2])}function $3(i,e){return"s"===e?i*Wue:i}function XP(i,e,n){return i.hasOwnProperty("duration")?i:function Yue(i,e,n){let r,s=0,o="";if("string"==typeof i){const d=i.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(o9()),{duration:0,delay:0,easing:""};r=$3(parseFloat(d[1]),d[2]);const m=d[3];null!=m&&(s=$3(parseFloat(m),d[4]));const f=d[5];f&&(o=f)}else r=i;if(!n){let d=!1,m=e.length;r<0&&(e.push(function cue(){return new l.vHH(3100,!1)}()),d=!0),s<0&&(e.push(function lue(){return new l.vHH(3101,!1)}()),d=!0),d&&e.splice(m,0,o9())}return{duration:r,delay:s,easing:o}}(i,e,n)}function dk(i,e={}){return Object.keys(i).forEach(n=>{e[n]=i[n]}),e}function p9(i){const e=new Map;return Object.keys(i).forEach(n=>{e.set(n,i[n])}),e}function Xp(i,e=new Map,n){if(n)for(let[t,r]of n)e.set(t,r);for(let[t,r]of i)e.set(t,r);return e}function qu(i,e,n){e.forEach((t,r)=>{const s=q3(r);n&&!n.has(r)&&n.set(r,i.style[s]),i.style[s]=t})}function ab(i,e){e.forEach((n,t)=>{const r=q3(t);i.style[r]=""})}function uk(i){return Array.isArray(i)?1==i.length?i[0]:GY(i):i}const W3=new RegExp("{{\\s*(.+?)\\s*}}","g");function g9(i){let e=[];if("string"==typeof i){let n;for(;n=W3.exec(i);)e.push(n[1]);W3.lastIndex=0}return e}function hk(i,e,n){const t=i.toString(),r=t.replace(W3,(s,o)=>{let d=e[o];return null==d&&(n.push(function uue(i){return new l.vHH(3003,!1)}()),d=""),d.toString()});return r==t?i:r}function JP(i){const e=[];let n=i.next();for(;!n.done;)e.push(n.value),n=i.next();return e}const Que=/-+([a-z0-9])/g;function q3(i){return i.replace(Que,(...e)=>e[1].toUpperCase())}function Oc(i,e,n){switch(e.type){case 7:return i.visitTrigger(e,n);case 0:return i.visitState(e,n);case 1:return i.visitTransition(e,n);case 2:return i.visitSequence(e,n);case 3:return i.visitGroup(e,n);case 4:return i.visitAnimate(e,n);case 5:return i.visitKeyframes(e,n);case 6:return i.visitStyle(e,n);case 8:return i.visitReference(e,n);case 9:return i.visitAnimateChild(e,n);case 10:return i.visitAnimateRef(e,n);case 11:return i.visitQuery(e,n);case 12:return i.visitStagger(e,n);default:throw function hue(i){return new l.vHH(3004,!1)}()}}function v9(i,e){return window.getComputedStyle(i)[e]}const eO="*";function ehe(i,e){const n=[];return"string"==typeof i?i.split(/\s*,\s*/).forEach(t=>function the(i,e,n){if(":"==i[0]){const m=function nhe(i,e){switch(i){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(n,t)=>parseFloat(t)>parseFloat(n);case":decrement":return(n,t)=>parseFloat(t)<parseFloat(n);default:return e.push(function Due(i){return new l.vHH(3016,!1)}()),"* => *"}}(i,n);if("function"==typeof m)return void e.push(m);i=m}const t=i.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==t||t.length<4)return n.push(function Iue(i){return new l.vHH(3015,!1)}()),e;const r=t[1],s=t[2],o=t[3];e.push(b9(r,o));"<"==s[0]&&!(r==eO&&o==eO)&&e.push(b9(o,r))}(t,n,e)):n.push(i),n}const tO=new Set(["true","1"]),nO=new Set(["false","0"]);function b9(i,e){const n=tO.has(i)||nO.has(i),t=tO.has(e)||nO.has(e);return(r,s)=>{let o=i==eO||i==r,d=e==eO||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?tO.has(i):nO.has(i)),!d&&t&&"boolean"==typeof s&&(d=s?tO.has(e):nO.has(e)),o&&d}}const ihe=new RegExp("s*:selfs*,?","g");function Y3(i,e,n,t){return new rhe(i).build(e,n,t)}class rhe{constructor(e){this._driver=e}build(e,n,t){const r=new ahe(n);return this._resetContextStyleTimingState(r),Oc(this,uk(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,n){let t=n.queryCount=0,r=n.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&n.errors.push(function fue(){return new l.vHH(3006,!1)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(n),0==d.type){const m=d,f=m.name;f.toString().split(/\s*,\s*/).forEach(b=>{m.name=b,s.push(this.visitState(m,n))}),m.name=f}else if(1==d.type){const m=this.visitTransition(d,n);t+=m.queryCount,r+=m.depCount,o.push(m)}else n.errors.push(function pue(){return new l.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:t,depCount:r,options:null}}visitState(e,n){const t=this.visitStyle(e.styles,n),r=e.options&&e.options.params||null;if(t.containsDynamicStyles){const s=new Set,o=r||{};t.styles.forEach(d=>{d instanceof Map&&d.forEach(m=>{g9(m).forEach(f=>{o.hasOwnProperty(f)||s.add(f)})})}),s.size&&(JP(s.values()),n.errors.push(function _ue(i,e){return new l.vHH(3008,!1)}()))}return{type:0,name:e.name,style:t,options:r?{params:r}:null}}visitTransition(e,n){n.queryCount=0,n.depCount=0;const t=Oc(this,uk(e.animation),n);return{type:1,matchers:ehe(e.expr,n.errors),animation:t,queryCount:n.queryCount,depCount:n.depCount,options:cb(e.options)}}visitSequence(e,n){return{type:2,steps:e.steps.map(t=>Oc(this,t,n)),options:cb(e.options)}}visitGroup(e,n){const t=n.currentTime;let r=0;const s=e.steps.map(o=>{n.currentTime=t;const d=Oc(this,o,n);return r=Math.max(r,n.currentTime),d});return n.currentTime=r,{type:3,steps:s,options:cb(e.options)}}visitAnimate(e,n){const t=function lhe(i,e){if(i.hasOwnProperty("duration"))return i;if("number"==typeof i)return Z3(XP(i,e).duration,0,"");const n=i;if(n.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=Z3(0,0,"");return s.dynamic=!0,s.strValue=n,s}const r=XP(n,e);return Z3(r.duration,r.delay,r.easing)}(e.timings,n.errors);n.currentAnimateTimings=t;let r,s=e.styles?e.styles:vt({});if(5==s.type)r=this.visitKeyframes(s,n);else{let o=e.styles,d=!1;if(!o){d=!0;const f={};t.easing&&(f.easing=t.easing),o=vt(f)}n.currentTime+=t.duration+t.delay;const m=this.visitStyle(o,n);m.isEmptyStep=d,r=m}return n.currentAnimateTimings=null,{type:4,timings:t,style:r,options:null}}visitStyle(e,n){const t=this._makeStyleAst(e,n);return this._validateStyleAst(t,n),t}_makeStyleAst(e,n){const t=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let d of r)"string"==typeof d?d===Rm?t.push(d):n.errors.push(new l.vHH(3002,!1)):t.push(p9(d));let s=!1,o=null;return t.forEach(d=>{if(d instanceof Map&&(d.has("easing")&&(o=d.get("easing"),d.delete("easing")),!s))for(let m of d.values())if(m.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:t,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,n){const t=n.currentAnimateTimings;let r=n.currentTime,s=n.currentTime;t&&s>0&&(s-=t.duration+t.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((d,m)=>{const f=n.collectedStyles.get(n.currentQuerySelector),b=f.get(m);let w=!0;b&&(s!=r&&s>=b.startTime&&r<=b.endTime&&(n.errors.push(function vue(i,e,n,t,r){return new l.vHH(3010,!1)}()),w=!1),s=b.startTime),w&&f.set(m,{startTime:s,endTime:r}),n.options&&function Kue(i,e,n){const t=e.params||{},r=g9(i);r.length&&r.forEach(s=>{t.hasOwnProperty(s)||n.push(function due(i){return new l.vHH(3001,!1)}())})}(d,n.options,n.errors)})})}visitKeyframes(e,n){const t={type:5,styles:[],options:null};if(!n.currentAnimateTimings)return n.errors.push(function bue(){return new l.vHH(3011,!1)}()),t;let s=0;const o=[];let d=!1,m=!1,f=0;const b=e.steps.map(we=>{const Ae=this._makeStyleAst(we,n);let De=null!=Ae.offset?Ae.offset:function che(i){if("string"==typeof i)return null;let e=null;if(Array.isArray(i))i.forEach(n=>{if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}});else if(i instanceof Map&&i.has("offset")){const n=i;e=parseFloat(n.get("offset")),n.delete("offset")}return e}(Ae.styles),Pe=0;return null!=De&&(s++,Pe=Ae.offset=De),m=m||Pe<0||Pe>1,d=d||Pe<f,f=Pe,o.push(Pe),Ae});m&&n.errors.push(function yue(){return new l.vHH(3012,!1)}()),d&&n.errors.push(function wue(){return new l.vHH(3200,!1)}());const w=e.steps.length;let I=0;s>0&&s<w?n.errors.push(function xue(){return new l.vHH(3202,!1)}()):0==s&&(I=1/(w-1));const S=w-1,F=n.currentTime,z=n.currentAnimateTimings,q=z.duration;return b.forEach((we,Ae)=>{const De=I>0?Ae==S?1:I*Ae:o[Ae],Pe=De*q;n.currentTime=F+z.delay+Pe,z.duration=Pe,this._validateStyleAst(we,n),we.offset=De,t.styles.push(we)}),t}visitReference(e,n){return{type:8,animation:Oc(this,uk(e.animation),n),options:cb(e.options)}}visitAnimateChild(e,n){return n.depCount++,{type:9,options:cb(e.options)}}visitAnimateRef(e,n){return{type:10,animation:this.visitReference(e.animation,n),options:cb(e.options)}}visitQuery(e,n){const t=n.currentQuerySelector,r=e.options||{};n.queryCount++,n.currentQuery=e;const[s,o]=function she(i){const e=!!i.split(/\s*,\s*/).find(n=>":self"==n);return e&&(i=i.replace(ihe,"")),i=i.replace(/@\*/g,QP).replace(/@\w+/g,n=>QP+"-"+n.slice(1)).replace(/:animating/g,G3),[i,e]}(e.selector);n.currentQuerySelector=t.length?t+" "+s:s,Pc(n.collectedStyles,n.currentQuerySelector,new Map);const d=Oc(this,uk(e.animation),n);return n.currentQuery=null,n.currentQuerySelector=t,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:d,originalSelector:e.selector,options:cb(e.options)}}visitStagger(e,n){n.currentQuery||n.errors.push(function Cue(){return new l.vHH(3013,!1)}());const t="full"===e.timings?{duration:0,delay:0,easing:"full"}:XP(e.timings,n.errors,!0);return{type:12,animation:Oc(this,uk(e.animation),n),timings:t,options:null}}}class ahe{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function cb(i){return i?(i=dk(i)).params&&(i.params=function ohe(i){return i?dk(i):null}(i.params)):i={},i}function Z3(i,e,n){return{duration:i,delay:e,easing:n}}function K3(i,e,n,t,r,s,o=null,d=!1){return{type:1,element:i,keyframes:e,preStyleProps:n,postStyleProps:t,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:d}}class iO{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,n){let t=this._map.get(e);t||this._map.set(e,t=[]),t.push(...n)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const hhe=new RegExp(":enter","g"),fhe=new RegExp(":leave","g");function Q3(i,e,n,t,r,s=new Map,o=new Map,d,m,f=[]){return(new phe).buildKeyframes(i,e,n,t,r,s,o,d,m,f)}class phe{buildKeyframes(e,n,t,r,s,o,d,m,f,b=[]){f=f||new iO;const w=new X3(e,n,f,r,s,b,[]);w.options=m;const I=m.delay?Pm(m.delay):0;w.currentTimeline.delayNextStep(I),w.currentTimeline.setStyles([o],null,w.errors,m),Oc(this,t,w);const S=w.timelines.filter(F=>F.containsAnimation());if(S.length&&d.size){let F;for(let z=S.length-1;z>=0;z--){const q=S[z];if(q.element===n){F=q;break}}F&&!F.allowOnlyTimelineStyles()&&F.setStyles([d],null,w.errors,m)}return S.length?S.map(F=>F.buildKeyframes()):[K3(n,[],[],[],0,I,"",!1)]}visitTrigger(e,n){}visitState(e,n){}visitTransition(e,n){}visitAnimateChild(e,n){const t=n.subInstructions.get(n.element);if(t){const r=n.createSubContext(e.options),s=n.currentTimeline.currentTime,o=this._visitSubInstructions(t,r,r.options);s!=o&&n.transformIntoNewTimeline(o)}n.previousNode=e}visitAnimateRef(e,n){const t=n.createSubContext(e.options);t.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],n,t),this.visitReference(e.animation,t),n.transformIntoNewTimeline(t.currentTimeline.currentTime),n.previousNode=e}_applyAnimationRefDelays(e,n,t){for(const r of e){const s=r?.delay;if(s){const o="number"==typeof s?s:Pm(hk(s,r?.params??{},n.errors));t.delayNextStep(o)}}}_visitSubInstructions(e,n,t){let s=n.currentTimeline.currentTime;const o=null!=t.duration?Pm(t.duration):null,d=null!=t.delay?Pm(t.delay):null;return 0!==o&&e.forEach(m=>{const f=n.appendInstructionToTimeline(m,o,d);s=Math.max(s,f.duration+f.delay)}),s}visitReference(e,n){n.updateOptions(e.options,!0),Oc(this,e.animation,n),n.previousNode=e}visitSequence(e,n){const t=n.subContextCount;let r=n;const s=e.options;if(s&&(s.params||s.delay)&&(r=n.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=rO);const o=Pm(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Oc(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>t&&r.transformIntoNewTimeline()),n.previousNode=e}visitGroup(e,n){const t=[];let r=n.currentTimeline.currentTime;const s=e.options&&e.options.delay?Pm(e.options.delay):0;e.steps.forEach(o=>{const d=n.createSubContext(e.options);s&&d.delayNextStep(s),Oc(this,o,d),r=Math.max(r,d.currentTimeline.currentTime),t.push(d.currentTimeline)}),t.forEach(o=>n.currentTimeline.mergeTimelineCollectedStyles(o)),n.transformIntoNewTimeline(r),n.previousNode=e}_visitTiming(e,n){if(e.dynamic){const t=e.strValue;return XP(n.params?hk(t,n.params,n.errors):t,n.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,n){const t=n.currentAnimateTimings=this._visitTiming(e.timings,n),r=n.currentTimeline;t.delay&&(n.incrementTime(t.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,n):(n.incrementTime(t.duration),this.visitStyle(s,n),r.applyStylesToKeyframe()),n.currentAnimateTimings=null,n.previousNode=e}visitStyle(e,n){const t=n.currentTimeline,r=n.currentAnimateTimings;!r&&t.hasCurrentStyleProperties()&&t.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?t.applyEmptyStep(s):t.setStyles(e.styles,s,n.errors,n.options),n.previousNode=e}visitKeyframes(e,n){const t=n.currentAnimateTimings,r=n.currentTimeline.duration,s=t.duration,d=n.createSubContext().currentTimeline;d.easing=t.easing,e.styles.forEach(m=>{d.forwardTime((m.offset||0)*s),d.setStyles(m.styles,m.easing,n.errors,n.options),d.applyStylesToKeyframe()}),n.currentTimeline.mergeTimelineCollectedStyles(d),n.transformIntoNewTimeline(r+s),n.previousNode=e}visitQuery(e,n){const t=n.currentTimeline.currentTime,r=e.options||{},s=r.delay?Pm(r.delay):0;s&&(6===n.previousNode.type||0==t&&n.currentTimeline.hasCurrentStyleProperties())&&(n.currentTimeline.snapshotCurrentStyles(),n.previousNode=rO);let o=t;const d=n.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,n.errors);n.currentQueryTotal=d.length;let m=null;d.forEach((f,b)=>{n.currentQueryIndex=b;const w=n.createSubContext(e.options,f);s&&w.delayNextStep(s),f===n.element&&(m=w.currentTimeline),Oc(this,e.animation,w),w.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,w.currentTimeline.currentTime)}),n.currentQueryIndex=0,n.currentQueryTotal=0,n.transformIntoNewTimeline(o),m&&(n.currentTimeline.mergeTimelineCollectedStyles(m),n.currentTimeline.snapshotCurrentStyles()),n.previousNode=e}visitStagger(e,n){const t=n.parentContext,r=n.currentTimeline,s=e.timings,o=Math.abs(s.duration),d=o*(n.currentQueryTotal-1);let m=o*n.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":m=d-m;break;case"full":m=t.currentStaggerTime}const b=n.currentTimeline;m&&b.delayNextStep(m);const w=b.currentTime;Oc(this,e.animation,n),n.previousNode=e,t.currentStaggerTime=r.currentTime-w+(r.startTime-t.currentTimeline.startTime)}}const rO={};class X3{constructor(e,n,t,r,s,o,d,m){this._driver=e,this.element=n,this.subInstructions=t,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=rO,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=m||new sO(this._driver,n,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,n){if(!e)return;const t=e;let r=this.options;null!=t.duration&&(r.duration=Pm(t.duration)),null!=t.delay&&(r.delay=Pm(t.delay));const s=t.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(d=>{(!n||!o.hasOwnProperty(d))&&(o[d]=hk(s[d],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const n=this.options.params;if(n){const t=e.params={};Object.keys(n).forEach(r=>{t[r]=n[r]})}}return e}createSubContext(e=null,n,t){const r=n||this.element,s=new X3(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,t||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=rO,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,n,t){const r={duration:n??e.duration,delay:this.currentTimeline.currentTime+(t??0)+e.delay,easing:""},s=new _he(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,n,t,r,s,o){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace(hhe,"."+this._enterClassName)).replace(fhe,"."+this._leaveClassName);let f=this._driver.query(this.element,e,1!=t);0!==t&&(f=t<0?f.slice(f.length+t,f.length):f.slice(0,t)),d.push(...f)}return!s&&0==d.length&&o.push(function Eue(i){return new l.vHH(3014,!1)}()),d}}class sO{constructor(e,n,t,r){this._driver=e,this.element=n,this.startTime=t,this._elementTimelineStylesLookup=r,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(n),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(n,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const n=1===this._keyframes.size&&this._pendingStyles.size;this.duration||n?(this.forwardTime(this.currentTime+e),n&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,n){return this.applyStylesToKeyframe(),new sO(this._driver,e,n||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,n){this._localTimelineStyles.set(e,n),this._globalTimelineStyles.set(e,n),this._styleSummary.set(e,{time:this.currentTime,value:n})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[n,t]of this._globalTimelineStyles)this._backFill.set(n,t||Rm),this._currentKeyframe.set(n,Rm);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,n,t,r){n&&this._previousKeyframe.set("easing",n);const s=r&&r.params||{},o=function ghe(i,e){const n=new Map;let t;return i.forEach(r=>{if("*"===r){t=t||e.keys();for(let s of t)n.set(s,Rm)}else Xp(r,n)}),n}(e,this._globalTimelineStyles);for(let[d,m]of o){const f=hk(m,s,t);this._pendingStyles.set(d,f),this._localTimelineStyles.has(d)||this._backFill.set(d,this._globalTimelineStyles.get(d)??Rm),this._updateStyle(d,f)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,n)=>{this._currentKeyframe.set(n,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,n)=>{this._currentKeyframe.has(n)||this._currentKeyframe.set(n,e)}))}snapshotCurrentStyles(){for(let[e,n]of this._localTimelineStyles)this._pendingStyles.set(e,n),this._updateStyle(e,n)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let n in this._currentKeyframe)e.push(n);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((n,t)=>{const r=this._styleSummary.get(t);(!r||n.time>r.time)&&this._updateStyle(t,n.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,n=new Set,t=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,m)=>{const f=Xp(d,new Map,this._backFill);f.forEach((b,w)=>{"!"===b?e.add(w):b===Rm&&n.add(w)}),t||f.set("offset",m/this.duration),r.push(f)});const s=e.size?JP(e.values()):[],o=n.size?JP(n.values()):[];if(t){const d=r[0],m=new Map(d);d.set("offset",0),m.set("offset",1),r=[d,m]}return K3(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}}class _he extends sO{constructor(e,n,t,r,s,o,d=!1){super(e,n,o.delay),this.keyframes=t,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:n,duration:t,easing:r}=this.timings;if(this._stretchStartingKeyframe&&n){const s=[],o=t+n,d=n/o,m=Xp(e[0]);m.set("offset",0),s.push(m);const f=Xp(e[0]);f.set("offset",x9(d)),s.push(f);const b=e.length-1;for(let w=1;w<=b;w++){let I=Xp(e[w]);const S=I.get("offset");I.set("offset",x9((n+S*t)/o)),s.push(I)}t=o,n=0,r="",e=s}return K3(this.element,e,this.preStyleProps,this.postStyleProps,t,n,r,!0)}}function x9(i,e=3){const n=Math.pow(10,e-1);return Math.round(i*n)/n}class J3{}const vhe=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class bhe extends J3{normalizePropertyName(e,n){return q3(e)}normalizeStyleValue(e,n,t,r){let s="";const o=t.toString().trim();if(vhe.has(n)&&0!==t&&"0"!==t)if("number"==typeof t)s="px";else{const d=t.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function mue(i,e){return new l.vHH(3005,!1)}())}return o+s}}function C9(i,e,n,t,r,s,o,d,m,f,b,w,I){return{type:0,element:i,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:t,toStyles:o,timelines:d,queriedElements:m,preStyleProps:f,postStyleProps:b,totalTime:w,errors:I}}const e4={};class E9{constructor(e,n,t){this._triggerName=e,this.ast=n,this._stateStyles=t}match(e,n,t,r){return function yhe(i,e,n,t,r){return i.some(s=>s(e,n,t,r))}(this.ast.matchers,e,n,t,r)}buildStyles(e,n,t){let r=this._stateStyles.get("*");return void 0!==e&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(n,t):new Map}build(e,n,t,r,s,o,d,m,f,b){const w=[],I=this.ast.options&&this.ast.options.params||e4,F=this.buildStyles(t,d&&d.params||e4,w),z=m&&m.params||e4,q=this.buildStyles(r,z,w),we=new Set,Ae=new Map,De=new Map,Pe="void"===r,gt={params:whe(z,I),delay:this.ast.options?.delay},Nt=b?[]:Q3(e,n,this.ast.animation,s,o,F,q,gt,f,w);let un=0;if(Nt.forEach(ki=>{un=Math.max(ki.duration+ki.delay,un)}),w.length)return C9(n,this._triggerName,t,r,Pe,F,q,[],[],Ae,De,un,w);Nt.forEach(ki=>{const Bc=ki.element,sT=Pc(Ae,Bc,new Set);ki.preStyleProps.forEach(Hm=>sT.add(Hm));const rh=Pc(De,Bc,new Set);ki.postStyleProps.forEach(Hm=>rh.add(Hm)),Bc!==n&&we.add(Bc)});const di=JP(we.values());return C9(n,this._triggerName,t,r,Pe,F,q,Nt,di,Ae,De,un)}}function whe(i,e){const n=dk(e);for(const t in i)i.hasOwnProperty(t)&&null!=i[t]&&(n[t]=i[t]);return n}class xhe{constructor(e,n,t){this.styles=e,this.defaultParams=n,this.normalizer=t}buildStyles(e,n){const t=new Map,r=dk(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(r[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,d)=>{o&&(o=hk(o,r,n));const m=this.normalizer.normalizePropertyName(d,n);o=this.normalizer.normalizeStyleValue(d,m,o,n),t.set(d,o)})}),t}}class Ehe{constructor(e,n,t){this.name=e,this.ast=n,this._normalizer=t,this.transitionFactories=[],this.states=new Map,n.states.forEach(r=>{this.states.set(r.name,new xhe(r.style,r.options&&r.options.params||{},t))}),I9(this.states,"true","1"),I9(this.states,"false","0"),n.transitions.forEach(r=>{this.transitionFactories.push(new E9(e,r,this.states))}),this.fallbackTransition=function Ihe(i,e,n){return new E9(i,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,n,t,r){return this.transitionFactories.find(o=>o.match(e,n,t,r))||null}matchStyles(e,n,t){return this.fallbackTransition.buildStyles(e,n,t)}}function I9(i,e,n){i.has(e)?i.has(n)||i.set(n,i.get(e)):i.has(n)&&i.set(e,i.get(n))}const Dhe=new iO;class khe{constructor(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,n){const t=[],s=Y3(this._driver,n,t,[]);if(t.length)throw function Mue(i){return new l.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,n,t){const r=e.element,s=a9(this._normalizer,e.keyframes,n,t);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,n,t={}){const r=[],s=this._animations.get(e);let o;const d=new Map;if(s?(o=Q3(this._driver,n,s,j3,ZP,new Map,new Map,t,Dhe,r),o.forEach(b=>{const w=Pc(d,b.element,new Map);b.postStyleProps.forEach(I=>w.set(I,null))})):(r.push(function Rue(){return new l.vHH(3300,!1)}()),o=[]),r.length)throw function Pue(i){return new l.vHH(3504,!1)}();d.forEach((b,w)=>{b.forEach((I,S)=>{b.set(S,this._driver.computeStyle(w,S,Rm))})});const f=Qp(o.map(b=>{const w=d.get(b.element);return this._buildPlayer(b,new Map,w)}));return this._playersById.set(e,f),f.onDestroy(()=>this.destroy(e)),this.players.push(f),f}destroy(e){const n=this._getPlayer(e);n.destroy(),this._playersById.delete(e);const t=this.players.indexOf(n);t>=0&&this.players.splice(t,1)}_getPlayer(e){const n=this._playersById.get(e);if(!n)throw function Oue(i){return new l.vHH(3301,!1)}();return n}listen(e,n,t,r){const s=U3(n,"","","");return B3(this._getPlayer(e),t,s,r),()=>{}}command(e,n,t,r){if("register"==t)return void this.register(e,r[0]);if("create"==t)return void this.create(e,n,r[0]||{});const s=this._getPlayer(e);switch(t){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const D9="ng-animate-queued",t4="ng-animate-disabled",Rhe=[],k9={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Phe={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Bd="__ng_removed";class n4{get params(){return this.options.params}constructor(e,n=""){this.namespaceId=n;const t=e&&e.hasOwnProperty("value");if(this.value=function Lhe(i){return i??null}(t?e.value:e),t){const s=dk(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const n=e.params;if(n){const t=this.options.params;Object.keys(n).forEach(r=>{null==t[r]&&(t[r]=n[r])})}}}const mk="void",r4=new n4(mk);class Ohe{constructor(e,n,t){this.id=e,this.hostElement=n,this._engine=t,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,Sl(n,this._hostClassName)}listen(e,n,t,r){if(!this._triggers.has(n))throw function Nue(i,e){return new l.vHH(3302,!1)}();if(null==t||0==t.length)throw function Fue(i){return new l.vHH(3303,!1)}();if(!function Bhe(i){return"start"==i||"done"==i}(t))throw function Lue(i,e){return new l.vHH(3400,!1)}();const s=Pc(this._elementListeners,e,[]),o={name:n,phase:t,callback:r};s.push(o);const d=Pc(this._engine.statesByElement,e,new Map);return d.has(n)||(Sl(e,KP),Sl(e,KP+"-"+n),d.set(n,r4)),()=>{this._engine.afterFlush(()=>{const m=s.indexOf(o);m>=0&&s.splice(m,1),this._triggers.has(n)||d.delete(n)})}}register(e,n){return!this._triggers.has(e)&&(this._triggers.set(e,n),!0)}_getTrigger(e){const n=this._triggers.get(e);if(!n)throw function Bue(i){return new l.vHH(3401,!1)}();return n}trigger(e,n,t,r=!0){const s=this._getTrigger(n),o=new s4(this.id,n,e);let d=this._engine.statesByElement.get(e);d||(Sl(e,KP),Sl(e,KP+"-"+n),this._engine.statesByElement.set(e,d=new Map));let m=d.get(n);const f=new n4(t,this.id);if(!(t&&t.hasOwnProperty("value"))&&m&&f.absorbOptions(m.options),d.set(n,f),m||(m=r4),f.value!==mk&&m.value===f.value){if(!function Hhe(i,e){const n=Object.keys(i),t=Object.keys(e);if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++){const s=n[r];if(!e.hasOwnProperty(s)||i[s]!==e[s])return!1}return!0}(m.params,f.params)){const z=[],q=s.matchStyles(m.value,m.params,z),we=s.matchStyles(f.value,f.params,z);z.length?this._engine.reportError(z):this._engine.afterFlush(()=>{ab(e,q),qu(e,we)})}return}const I=Pc(this._engine.playersByElement,e,[]);I.forEach(z=>{z.namespaceId==this.id&&z.triggerName==n&&z.queued&&z.destroy()});let S=s.matchTransition(m.value,f.value,e,f.params),F=!1;if(!S){if(!r)return;S=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:n,transition:S,fromState:m,toState:f,player:o,isFallbackTransition:F}),F||(Sl(e,D9),o.onStart(()=>{Bw(e,D9)})),o.onDone(()=>{let z=this.players.indexOf(o);z>=0&&this.players.splice(z,1);const q=this._engine.playersByElement.get(e);if(q){let we=q.indexOf(o);we>=0&&q.splice(we,1)}}),this.players.push(o),I.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(n=>n.delete(e)),this._elementListeners.forEach((n,t)=>{this._elementListeners.set(t,n.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const n=this._engine.playersByElement.get(e);n&&(n.forEach(t=>t.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,n){const t=this._engine.driver.query(e,QP,!0);t.forEach(r=>{if(r[Bd])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,n,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>t.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,n,t,r){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const d=[];if(s.forEach((m,f)=>{if(o.set(f,m.value),this._triggers.has(f)){const b=this.trigger(e,f,mk,r);b&&d.push(b)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,n,o),t&&Qp(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const n=this._elementListeners.get(e),t=this._engine.statesByElement.get(e);if(n&&t){const r=new Set;n.forEach(s=>{const o=s.name;if(r.has(o))return;r.add(o);const m=this._triggers.get(o).fallbackTransition,f=t.get(o)||r4,b=new n4(mk),w=new s4(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:m,fromState:f,toState:b,player:w,isFallbackTransition:!0})})}}removeNode(e,n){const t=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,n),this.triggerLeaveAnimation(e,n,!0))return;let r=!1;if(t.totalAnimations){const s=t.players.length?t.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(t.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)t.markElementAsRemoved(this.id,e,!1,n);else{const s=e[Bd];(!s||s===k9)&&(t.afterFlush(()=>this.clearElementCache(e)),t.destroyInnerAnimations(e),t._onRemovalComplete(e,n))}}insertNode(e,n){Sl(e,this._hostClassName)}drainQueuedTransitions(e){const n=[];return this._queue.forEach(t=>{const r=t.player;if(r.destroyed)return;const s=t.element,o=this._elementListeners.get(s);o&&o.forEach(d=>{if(d.name==t.triggerName){const m=U3(s,t.triggerName,t.fromState.value,t.toState.value);m._data=e,B3(t.player,d.phase,m,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):n.push(t)}),this._queue=[],n.sort((t,r)=>{const s=t.transition.ast.depCount,o=r.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(t.element,r.element)?1:-1})}destroy(e){this.players.forEach(n=>n.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}}class Nhe{_onRemovalComplete(e,n){this.onRemovalComplete(e,n)}constructor(e,n,t){this.bodyNode=e,this.driver=n,this._normalizer=t,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(n=>{n.players.forEach(t=>{t.queued&&e.push(t)})}),e}createNamespace(e,n){const t=new Ohe(e,n,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,n)?this._balanceNamespaceList(t,n):(this.newHostElements.set(n,t),this.collectEnterElement(n)),this._namespaceLookup[e]=t}_balanceNamespaceList(e,n){const t=this._namespaceList,r=this.namespacesByHostElement;if(t.length-1>=0){let o=!1,d=this.driver.getParentElement(n);for(;d;){const m=r.get(d);if(m){const f=t.indexOf(m);t.splice(f+1,0,e),o=!0;break}d=this.driver.getParentElement(d)}o||t.unshift(e)}else t.push(e);return r.set(n,e),e}register(e,n){let t=this._namespaceLookup[e];return t||(t=this.createNamespace(e,n)),t}registerTrigger(e,n,t){let r=this._namespaceLookup[e];r&&r.register(n,t)&&this.totalAnimations++}destroy(e,n){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const t=this._fetchNamespace(e);this.namespacesByHostElement.delete(t.hostElement);const r=this._namespaceList.indexOf(t);r>=0&&this._namespaceList.splice(r,1),t.destroy(n),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const n=new Set,t=this.statesByElement.get(e);if(t)for(let r of t.values())if(r.namespaceId){const s=this._fetchNamespace(r.namespaceId);s&&n.add(s)}return n}trigger(e,n,t,r){if(oO(n)){const s=this._fetchNamespace(e);if(s)return s.trigger(n,t,r),!0}return!1}insertNode(e,n,t,r){if(!oO(n))return;const s=n[Bd];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(n);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(n,t)}r&&this.collectEnterElement(n)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,n){n?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Sl(e,t4)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Bw(e,t4))}removeNode(e,n,t){if(oO(n)){const r=e?this._fetchNamespace(e):null;r?r.removeNode(n,t):this.markElementAsRemoved(e,n,!1,t);const s=this.namespacesByHostElement.get(n);s&&s.id!==e&&s.removeNode(n,t)}else this._onRemovalComplete(n,t)}markElementAsRemoved(e,n,t,r,s){this.collectedLeaveElements.push(n),n[Bd]={namespaceId:e,setForRemoval:r,hasAnimation:t,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,n,t,r,s){return oO(n)?this._fetchNamespace(e).listen(n,t,r,s):()=>{}}_buildInstruction(e,n,t,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,t,r,e.fromState.options,e.toState.options,n,s)}destroyInnerAnimations(e){let n=this.driver.query(e,QP,!0);n.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(n=this.driver.query(e,G3,!0),n.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(e){const n=this.playersByElement.get(e);n&&n.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(e){const n=this.playersByQueriedElement.get(e);n&&n.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Qp(this.players).onDone(()=>e());e()})}processLeaveNode(e){const n=e[Bd];if(n&&n.setForRemoval){if(e[Bd]=k9,n.namespaceId){this.destroyInnerAnimations(e);const t=this._fetchNamespace(n.namespaceId);t&&t.clearElementCache(e)}this._onRemovalComplete(e,n.setForRemoval)}e.classList?.contains(t4)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(e=-1){let n=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,r)=>this._balanceNamespaceList(t,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let t=0;t<this.collectedEnterElements.length;t++)Sl(this.collectedEnterElements[t],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const t=[];try{n=this._flushAnimations(t,e)}finally{for(let r=0;r<t.length;r++)t[r]()}}else for(let t=0;t<this.collectedLeaveElements.length;t++)this.processLeaveNode(this.collectedLeaveElements[t]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],n.length?Qp(n).onDone(()=>{t.forEach(r=>r())}):t.forEach(r=>r())}}reportError(e){throw function Vue(i){return new l.vHH(3402,!1)}()}_flushAnimations(e,n){const t=new iO,r=[],s=new Map,o=[],d=new Map,m=new Map,f=new Map,b=new Set;this.disabledNodes.forEach(At=>{b.add(At);const zt=this.driver.query(At,".ng-animate-queued",!0);for(let Qt=0;Qt<zt.length;Qt++)b.add(zt[Qt])});const w=this.bodyNode,I=Array.from(this.statesByElement.keys()),S=A9(I,this.collectedEnterElements),F=new Map;let z=0;S.forEach((At,zt)=>{const Qt=j3+z++;F.set(zt,Qt),At.forEach(Qn=>Sl(Qn,Qt))});const q=[],we=new Set,Ae=new Set;for(let At=0;At<this.collectedLeaveElements.length;At++){const zt=this.collectedLeaveElements[At],Qt=zt[Bd];Qt&&Qt.setForRemoval&&(q.push(zt),we.add(zt),Qt.hasAnimation?this.driver.query(zt,".ng-star-inserted",!0).forEach(Qn=>we.add(Qn)):Ae.add(zt))}const De=new Map,Pe=A9(I,Array.from(we));Pe.forEach((At,zt)=>{const Qt=ZP+z++;De.set(zt,Qt),At.forEach(Qn=>Sl(Qn,Qt))}),e.push(()=>{S.forEach((At,zt)=>{const Qt=F.get(zt);At.forEach(Qn=>Bw(Qn,Qt))}),Pe.forEach((At,zt)=>{const Qt=De.get(zt);At.forEach(Qn=>Bw(Qn,Qt))}),q.forEach(At=>{this.processLeaveNode(At)})});const gt=[],Nt=[];for(let At=this._namespaceList.length-1;At>=0;At--)this._namespaceList[At].drainQueuedTransitions(n).forEach(Qt=>{const Qn=Qt.player,Ks=Qt.element;if(gt.push(Qn),this.collectedEnterElements.length){const Ko=Ks[Bd];if(Ko&&Ko.setForMove){if(Ko.previousTriggersValues&&Ko.previousTriggersValues.has(Qt.triggerName)){const Cb=Ko.previousTriggersValues.get(Qt.triggerName),Nl=this.statesByElement.get(Qt.element);if(Nl&&Nl.has(Qt.triggerName)){const kN=Nl.get(Qt.triggerName);kN.value=Cb,Nl.set(Qt.triggerName,kN)}}return void Qn.destroy()}}const sh=!w||!this.driver.containsElement(w,Ks),Vc=De.get(Ks),u_=F.get(Ks),Er=this._buildInstruction(Qt,t,u_,Vc,sh);if(Er.errors&&Er.errors.length)return void Nt.push(Er);if(sh)return Qn.onStart(()=>ab(Ks,Er.fromStyles)),Qn.onDestroy(()=>qu(Ks,Er.toStyles)),void r.push(Qn);if(Qt.isFallbackTransition)return Qn.onStart(()=>ab(Ks,Er.fromStyles)),Qn.onDestroy(()=>qu(Ks,Er.toStyles)),void r.push(Qn);const ree=[];Er.timelines.forEach(Ko=>{Ko.stretchStartingKeyframe=!0,this.disabledNodes.has(Ko.element)||ree.push(Ko)}),Er.timelines=ree,t.append(Ks,Er.timelines),o.push({instruction:Er,player:Qn,element:Ks}),Er.queriedElements.forEach(Ko=>Pc(d,Ko,[]).push(Qn)),Er.preStyleProps.forEach((Ko,Cb)=>{if(Ko.size){let Nl=m.get(Cb);Nl||m.set(Cb,Nl=new Set),Ko.forEach((kN,kz)=>Nl.add(kz))}}),Er.postStyleProps.forEach((Ko,Cb)=>{let Nl=f.get(Cb);Nl||f.set(Cb,Nl=new Set),Ko.forEach((kN,kz)=>Nl.add(kz))})});if(Nt.length){const At=[];Nt.forEach(zt=>{At.push(function Uue(i,e){return new l.vHH(3505,!1)}())}),gt.forEach(zt=>zt.destroy()),this.reportError(At)}const un=new Map,di=new Map;o.forEach(At=>{const zt=At.element;t.has(zt)&&(di.set(zt,zt),this._beforeAnimationBuild(At.player.namespaceId,At.instruction,un))}),r.forEach(At=>{const zt=At.element;this._getPreviousPlayers(zt,!1,At.namespaceId,At.triggerName,null).forEach(Qn=>{Pc(un,zt,[]).push(Qn),Qn.destroy()})});const ki=q.filter(At=>R9(At,m,f)),Bc=new Map;S9(Bc,this.driver,Ae,f,Rm).forEach(At=>{R9(At,m,f)&&ki.push(At)});const rh=new Map;S.forEach((At,zt)=>{S9(rh,this.driver,new Set(At),m,"!")}),ki.forEach(At=>{const zt=Bc.get(At),Qt=rh.get(At);Bc.set(At,new Map([...zt?.entries()??[],...Qt?.entries()??[]]))});const Hm=[],oT=[],DN={};o.forEach(At=>{const{element:zt,player:Qt,instruction:Qn}=At;if(t.has(zt)){if(b.has(zt))return Qt.onDestroy(()=>qu(zt,Qn.toStyles)),Qt.disabled=!0,Qt.overrideTotalTime(Qn.totalTime),void r.push(Qt);let Ks=DN;if(di.size>1){let Vc=zt;const u_=[];for(;Vc=Vc.parentNode;){const Er=di.get(Vc);if(Er){Ks=Er;break}u_.push(Vc)}u_.forEach(Er=>di.set(Er,Ks))}const sh=this._buildAnimation(Qt.namespaceId,Qn,un,s,rh,Bc);if(Qt.setRealPlayer(sh),Ks===DN)Hm.push(Qt);else{const Vc=this.playersByElement.get(Ks);Vc&&Vc.length&&(Qt.parentPlayer=Qp(Vc)),r.push(Qt)}}else ab(zt,Qn.fromStyles),Qt.onDestroy(()=>qu(zt,Qn.toStyles)),oT.push(Qt),b.has(zt)&&r.push(Qt)}),oT.forEach(At=>{const zt=s.get(At.element);if(zt&&zt.length){const Qt=Qp(zt);At.setRealPlayer(Qt)}}),r.forEach(At=>{At.parentPlayer?At.syncPlayerEvents(At.parentPlayer):At.destroy()});for(let At=0;At<q.length;At++){const zt=q[At],Qt=zt[Bd];if(Bw(zt,ZP),Qt&&Qt.hasAnimation)continue;let Qn=[];if(d.size){let sh=d.get(zt);sh&&sh.length&&Qn.push(...sh);let Vc=this.driver.query(zt,G3,!0);for(let u_=0;u_<Vc.length;u_++){let Er=d.get(Vc[u_]);Er&&Er.length&&Qn.push(...Er)}}const Ks=Qn.filter(sh=>!sh.destroyed);Ks.length?Vhe(this,zt,Ks):this.processLeaveNode(zt)}return q.length=0,Hm.forEach(At=>{this.players.push(At),At.onDone(()=>{At.destroy();const zt=this.players.indexOf(At);this.players.splice(zt,1)}),At.play()}),Hm}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,n,t,r,s){let o=[];if(n){const d=this.playersByQueriedElement.get(e);d&&(o=d)}else{const d=this.playersByElement.get(e);if(d){const m=!s||s==mk;d.forEach(f=>{f.queued||!m&&f.triggerName!=r||o.push(f)})}}return(t||r)&&(o=o.filter(d=>!(t&&t!=d.namespaceId||r&&r!=d.triggerName))),o}_beforeAnimationBuild(e,n,t){const s=n.element,o=n.isRemovalTransition?void 0:e,d=n.isRemovalTransition?void 0:n.triggerName;for(const m of n.timelines){const f=m.element,b=f!==s,w=Pc(t,f,[]);this._getPreviousPlayers(f,b,o,d,n.toState).forEach(S=>{const F=S.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),S.destroy(),w.push(S)})}ab(s,n.fromStyles)}_buildAnimation(e,n,t,r,s,o){const d=n.triggerName,m=n.element,f=[],b=new Set,w=new Set,I=n.timelines.map(F=>{const z=F.element;b.add(z);const q=z[Bd];if(q&&q.removedBeforeQueried)return new ak(F.duration,F.delay);const we=z!==m,Ae=function Uhe(i){const e=[];return M9(i,e),e}((t.get(z)||Rhe).map(un=>un.getRealPlayer())).filter(un=>!!un.element&&un.element===z),De=s.get(z),Pe=o.get(z),gt=a9(this._normalizer,F.keyframes,De,Pe),Nt=this._buildPlayer(F,gt,Ae);if(F.subTimeline&&r&&w.add(z),we){const un=new s4(e,d,z);un.setRealPlayer(Nt),f.push(un)}return Nt});f.forEach(F=>{Pc(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function Fhe(i,e,n){let t=i.get(e);if(t){if(t.length){const r=t.indexOf(n);t.splice(r,1)}0==t.length&&i.delete(e)}return t}(this.playersByQueriedElement,F.element,F))}),b.forEach(F=>Sl(F,f9));const S=Qp(I);return S.onDestroy(()=>{b.forEach(F=>Bw(F,f9)),qu(m,n.toStyles)}),w.forEach(F=>{Pc(r,F,[]).push(S)}),S}_buildPlayer(e,n,t){return n.length>0?this.driver.animate(e.element,n,e.duration,e.delay,e.easing,t):new ak(e.duration,e.delay)}}class s4{constructor(e,n,t){this.namespaceId=e,this.triggerName=n,this.element=t,this._player=new ak,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((n,t)=>{n.forEach(r=>B3(e,t,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const n=this._player;n.triggerCallback&&e.onStart(()=>n.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,n){Pc(this._queuedCallbacks,e,[]).push(n)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const n=this._player;n.triggerCallback&&n.triggerCallback(e)}}function oO(i){return i&&1===i.nodeType}function T9(i,e){const n=i.style.display;return i.style.display=e??"none",n}function S9(i,e,n,t,r){const s=[];n.forEach(m=>s.push(T9(m)));const o=[];t.forEach((m,f)=>{const b=new Map;m.forEach(w=>{const I=e.computeStyle(f,w,r);b.set(w,I),(!I||0==I.length)&&(f[Bd]=Phe,o.push(f))}),i.set(f,b)});let d=0;return n.forEach(m=>T9(m,s[d++])),o}function A9(i,e){const n=new Map;if(i.forEach(d=>n.set(d,[])),0==e.length)return n;const r=new Set(e),s=new Map;function o(d){if(!d)return 1;let m=s.get(d);if(m)return m;const f=d.parentNode;return m=n.has(f)?f:r.has(f)?1:o(f),s.set(d,m),m}return e.forEach(d=>{const m=o(d);1!==m&&n.get(m).push(d)}),n}function Sl(i,e){i.classList?.add(e)}function Bw(i,e){i.classList?.remove(e)}function Vhe(i,e,n){Qp(n).onDone(()=>i.processLeaveNode(e))}function M9(i,e){for(let n=0;n<i.length;n++){const t=i[n];t instanceof $Y?M9(t.players,e):e.push(t)}}function R9(i,e,n){const t=n.get(i);if(!t)return!1;let r=e.get(i);return r?t.forEach(s=>r.add(s)):e.set(i,t),n.delete(i),!0}class aO{constructor(e,n,t){this.bodyNode=e,this._driver=n,this._normalizer=t,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new Nhe(e,n,t),this._timelineEngine=new khe(e,n,t),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,n,t,r,s){const o=e+"-"+r;let d=this._triggerCache[o];if(!d){const m=[],b=Y3(this._driver,s,m,[]);if(m.length)throw function Sue(i,e){return new l.vHH(3404,!1)}();d=function Che(i,e,n){return new Ehe(i,e,n)}(r,b,this._normalizer),this._triggerCache[o]=d}this._transitionEngine.registerTrigger(n,r,d)}register(e,n){this._transitionEngine.register(e,n)}destroy(e,n){this._transitionEngine.destroy(e,n)}onInsert(e,n,t,r){this._transitionEngine.insertNode(e,n,t,r)}onRemove(e,n,t){this._transitionEngine.removeNode(e,n,t)}disableAnimations(e,n){this._transitionEngine.markElementAsDisabled(e,n)}process(e,n,t,r){if("@"==t.charAt(0)){const[s,o]=c9(t);this._timelineEngine.command(s,n,o,r)}else this._transitionEngine.trigger(e,n,t,r)}listen(e,n,t,r,s){if("@"==t.charAt(0)){const[o,d]=c9(t);return this._timelineEngine.listen(o,n,d,s)}return this._transitionEngine.listen(e,n,t,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let jhe=(()=>{class e{constructor(t,r,s){this._element=t,this._startStyles=r,this._endStyles=s,this._state=0;let o=e.initialStylesByElement.get(t);o||e.initialStylesByElement.set(t,o=new Map),this._initialStyles=o}start(){this._state<1&&(this._startStyles&&qu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(qu(this._element,this._initialStyles),this._endStyles&&(qu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(e.initialStylesByElement.delete(this._element),this._startStyles&&(ab(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(ab(this._element,this._endStyles),this._endStyles=null),qu(this._element,this._initialStyles),this._state=3)}}return e.initialStylesByElement=new WeakMap,e})();function o4(i){let e=null;return i.forEach((n,t)=>{(function Ghe(i){return"display"===i||"position"===i})(t)&&(e=e||new Map,e.set(t,n))}),e}class P9{constructor(e,n,t,r){this.element=e,this.keyframes=n,this.options=t,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=t.duration,this._delay=t.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const n=[];return e.forEach(t=>{n.push(Object.fromEntries(t))}),n}_triggerWebAnimation(e,n,t){return e.animate(this._convertKeyframesToObject(n),t)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((t,r)=>{"offset"!==r&&e.set(r,this._finished?t:v9(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){const n="start"===e?this._onStartFns:this._onDoneFns;n.forEach(t=>t()),n.length=0}}class $he{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,n){return!1}containsElement(e,n){return d9(e,n)}getParentElement(e){return H3(e)}query(e,n,t){return u9(e,n,t)}computeStyle(e,n,t){return window.getComputedStyle(e)[n]}animate(e,n,t,r,s,o=[]){const m={duration:t,delay:r,fill:0==r?"both":"forwards"};s&&(m.easing=s);const f=new Map,b=o.filter(S=>S instanceof P9);(function Xue(i,e){return 0===i||0===e})(t,r)&&b.forEach(S=>{S.currentSnapshot.forEach((F,z)=>f.set(z,F))});let w=function Zue(i){return i.length?i[0]instanceof Map?i:i.map(e=>p9(e)):[]}(n).map(S=>Xp(S));w=function Jue(i,e,n){if(n.size&&e.length){let t=e[0],r=[];if(n.forEach((s,o)=>{t.has(o)||r.push(o),t.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(d=>o.set(d,v9(i,d)))}}return e}(e,w,f);const I=function zhe(i,e){let n=null,t=null;return Array.isArray(e)&&e.length?(n=o4(e[0]),e.length>1&&(t=o4(e[e.length-1]))):e instanceof Map&&(n=o4(e)),n||t?new jhe(i,n,t):null}(e,w);return new P9(e,w,m,I)}}let Whe=(()=>{var i;class e extends jY{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const s=Array.isArray(t)?GY(t):t;return O9(this._renderer,null,r,"register",[s]),new qhe(r,this._renderer)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(l.FYo),l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();class qhe extends hde{constructor(e,n){super(),this._id=e,this._renderer=n}create(e,n){return new Yhe(this._id,e,n||{},this._renderer)}}class Yhe{constructor(e,n,t,r){this.id=e,this.element=n,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",t)}_listen(e,n){return this._renderer.listen(this.element,`@@${this.id}:${e}`,n)}_command(e,...n){return O9(this._renderer,this.element,this.id,e,n)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function O9(i,e,n,t,r){return i.setProperty(e,`@@${n}:${t}`,r)}const N9="@.disabled";let Zhe=(()=>{var i;class e{constructor(t,r,s){this.delegate=t,this.engine=r,this._zone=s,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(o,d)=>{const m=d?.parentNode(o);m&&d.removeChild(m,o)}}createRenderer(t,r){const o=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let w=this._rendererCache.get(o);return w||(w=new F9("",o,this.engine,()=>this._rendererCache.delete(o)),this._rendererCache.set(o,w)),w}const d=r.id,m=r.id+"-"+this._currentId;this._currentId++,this.engine.register(m,t);const f=w=>{Array.isArray(w)?w.forEach(f):this.engine.registerTrigger(d,m,t,w.name,w)};return r.data.animation.forEach(f),new Khe(this,m,o,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,s){t>=0&&t<this._microtaskId?this._zone.run(()=>r(s)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(o=>{const[d,m]=o;d(m)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,s]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(l.FYo),l.LFG(aO),l.LFG(l.R0b))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();class F9{constructor(e,n,t,r){this.namespaceId=e,this.delegate=n,this.engine=t,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,n){this.delegate.appendChild(e,n),this.engine.onInsert(this.namespaceId,n,e,!1)}insertBefore(e,n,t,r=!0){this.delegate.insertBefore(e,n,t),this.engine.onInsert(this.namespaceId,n,e,r)}removeChild(e,n,t){this.engine.onRemove(this.namespaceId,n,this.delegate)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,t,r){this.delegate.setAttribute(e,n,t,r)}removeAttribute(e,n,t){this.delegate.removeAttribute(e,n,t)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,t,r){this.delegate.setStyle(e,n,t,r)}removeStyle(e,n,t){this.delegate.removeStyle(e,n,t)}setProperty(e,n,t){"@"==n.charAt(0)&&n==N9?this.disableAnimations(e,!!t):this.delegate.setProperty(e,n,t)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,t){return this.delegate.listen(e,n,t)}disableAnimations(e,n){this.engine.disableAnimations(e,n)}}class Khe extends F9{constructor(e,n,t,r,s){super(n,t,r,s),this.factory=e,this.namespaceId=n}setProperty(e,n,t){"@"==n.charAt(0)?"."==n.charAt(1)&&n==N9?this.disableAnimations(e,t=void 0===t||!!t):this.engine.process(this.namespaceId,e,n.slice(1),t):this.delegate.setProperty(e,n,t)}listen(e,n,t){if("@"==n.charAt(0)){const r=function Qhe(i){switch(i){case"body":return document.body;case"document":return document;case"window":return window;default:return i}}(e);let s=n.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Xhe(i){const e=i.indexOf(".");return[i.substring(0,e),i.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,o,d=>{this.factory.scheduleListenerCallback(d._data||-1,t,d)})}return this.delegate.listen(e,n,t)}}let Jhe=(()=>{var i;class e extends aO{constructor(t,r,s,o){super(t.body,r,s)}ngOnDestroy(){this.flush()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re),l.LFG(z3),l.LFG(J3),l.LFG(l.z2F))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();const L9=[{provide:jY,useClass:Whe},{provide:J3,useFactory:function eme(){return new bhe}},{provide:aO,useClass:Jhe},{provide:l.FYo,useFactory:function tme(i,e,n){return new Zhe(i,e,n)},deps:[Jc,aO,l.R0b]}],a4=[{provide:z3,useFactory:()=>new $he},{provide:l.QbO,useValue:"BrowserAnimations"},...L9],B9=[{provide:z3,useClass:h9},{provide:l.QbO,useValue:"NoopAnimations"},...L9];let nme=(()=>{var i;class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?B9:a4}}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:a4,imports:[Mh]}),e})();var ime=V(4266);const rme=["addListener","removeListener"],sme=["addEventListener","removeEventListener"],ome=["on","off"];function Vw(i,e,n,t){if((0,nr.m)(n)&&(t=n,n=void 0),t)return Vw(i,e,n).pipe(id(t));const[r,s]=function lme(i){return(0,nr.m)(i.addEventListener)&&(0,nr.m)(i.removeEventListener)}(i)?sme.map(o=>d=>i[o](e,d,n)):function ame(i){return(0,nr.m)(i.addListener)&&(0,nr.m)(i.removeListener)}(i)?rme.map(V9(i,e)):function cme(i){return(0,nr.m)(i.on)&&(0,nr.m)(i.off)}(i)?ome.map(V9(i,e)):[];if(!r&&(0,ime.z)(i))return(0,sr.z)(o=>Vw(o,e,n))((0,sa.Xf)(i));if(!r)throw new TypeError("Invalid event target");return new Bi.y(o=>{const d=(...m)=>o.next(1<m.length?m:m[0]);return r(d),()=>s(d)})}function V9(i,e){return n=>t=>i[n](e,t)}var U9=V(1954);const fk={schedule(i){let e=requestAnimationFrame,n=cancelAnimationFrame;const{delegate:t}=fk;t&&(e=t.requestAnimationFrame,n=t.cancelAnimationFrame);const r=e(s=>{n=void 0,i(s)});return new rr.w0(()=>n?.(r))},requestAnimationFrame(...i){const{delegate:e}=fk;return(e?.requestAnimationFrame||requestAnimationFrame)(...i)},cancelAnimationFrame(...i){const{delegate:e}=fk;return(e?.cancelAnimationFrame||cancelAnimationFrame)(...i)},delegate:void 0};var H9=V(2631);const z9=new class ume extends H9.v{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:t}=this;let r;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=t[0])&&e.id===n&&t.shift());if(this._active=!1,r){for(;(e=t[0])&&e.id===n&&t.shift();)e.unsubscribe();throw r}}}(class dme extends U9.o{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,t=0){return null!==t&&t>0?super.requestAsyncId(e,n,t):(e.actions.push(this),e._scheduled||(e._scheduled=fk.requestAnimationFrame(()=>e.flush(void 0))))}recycleAsyncId(e,n,t=0){var r;if(null!=t?t>0:this.delay>0)return super.recycleAsyncId(e,n,t);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(fk.cancelAnimationFrame(n),e._scheduled=void 0)}});let c4,hme=1;const lO={};function j9(i){return i in lO&&(delete lO[i],!0)}const mme={setImmediate(i){const e=hme++;return lO[e]=!0,c4||(c4=Promise.resolve()),c4.then(()=>j9(e)&&i()),e},clearImmediate(i){j9(i)}},{setImmediate:fme,clearImmediate:pme}=mme,dO={setImmediate(...i){const{delegate:e}=dO;return(e?.setImmediate||fme)(...i)},clearImmediate(i){const{delegate:e}=dO;return(e?.clearImmediate||pme)(i)},delegate:void 0};new class gme extends H9.v{flush(e){this._active=!0;const n=this._scheduled;this._scheduled=void 0;const{actions:t}=this;let r;e=e||t.shift();do{if(r=e.execute(e.state,e.delay))break}while((e=t[0])&&e.id===n&&t.shift());if(this._active=!1,r){for(;(e=t[0])&&e.id===n&&t.shift();)e.unsubscribe();throw r}}}(class _me extends U9.o{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}requestAsyncId(e,n,t=0){return null!==t&&t>0?super.requestAsyncId(e,n,t):(e.actions.push(this),e._scheduled||(e._scheduled=dO.setImmediate(e.flush.bind(e,void 0))))}recycleAsyncId(e,n,t=0){var r;if(null!=t?t>0:this.delay>0)return super.recycleAsyncId(e,n,t);const{actions:s}=e;null!=n&&(null===(r=s[s.length-1])||void 0===r?void 0:r.id)!==n&&(dO.clearImmediate(n),e._scheduled===n&&(e._scheduled=void 0))}});var yme=V(671);function l4(i=0,e,n=Cv.P){let t=-1;return null!=e&&((0,yme.K)(e)?n=e:t=e),new Bi.y(r=>{let s=function wme(i){return i instanceof Date&&!isNaN(i)}(i)?+i-n.now():i;s<0&&(s=0);let o=0;return n.schedule(function(){r.closed||(r.next(o++),0<=t?this.schedule(void 0,t):r.complete())},s)})}function G9(i,e=Cv.z){return function bme(i){return(0,yr.e)((e,n)=>{let t=!1,r=null,s=null,o=!1;const d=()=>{if(s?.unsubscribe(),s=null,t){t=!1;const f=r;r=null,n.next(f)}o&&n.complete()},m=()=>{s=null,o&&n.complete()};e.subscribe((0,Mi.x)(n,f=>{t=!0,r=f,s||(0,sa.Xf)(i(f)).subscribe(s=(0,Mi.x)(n,d,m))},()=>{o=!0,(!t||!s||s.closed)&&n.complete()}))})}(()=>l4(i,e))}let $9=(()=>{var i;class e{constructor(t,r,s){this._ngZone=t,this._platform=r,this._scrolled=new Xe.x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=s}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const r=this.scrollContainers.get(t);r&&(r.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new Bi.y(r=>{this._globalSubscription||this._addGlobalListener();const s=t>0?this._scrolled.pipe(G9(t)).subscribe(r):this._scrolled.subscribe(r);return this._scrolledCount++,()=>{s.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ft.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,r)=>this.deregister(r)),this._scrolled.complete()}ancestorScrolled(t,r){const s=this.getAncestorScrollContainers(t);return this.scrolled(r).pipe(Kn(o=>!o||s.indexOf(o)>-1))}getAncestorScrollContainers(t){const r=[];return this.scrollContainers.forEach((s,o)=>{this._scrollableContainsElement(o,t)&&r.push(o)}),r}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,r){let s=Br(r),o=t.getElementRef().nativeElement;do{if(s==o)return!0}while(s=s.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Vw(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(l.R0b),l.LFG(Kr),l.LFG(re,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),pk=(()=>{var i;class e{constructor(t,r,s){this._platform=t,this._change=new Xe.x,this._changeListener=o=>{this._change.next(o)},this._document=s,r.runOutsideAngular(()=>{if(t.isBrowser){const o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:r,height:s}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+s,right:t.left+r,height:s,width:r}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,r=this._getWindow(),s=t.documentElement,o=s.getBoundingClientRect();return{top:-o.top||t.body.scrollTop||r.scrollY||s.scrollTop||0,left:-o.left||t.body.scrollLeft||r.scrollX||s.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(G9(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Kr),l.LFG(l.R0b),l.LFG(re,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Yu=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})(),_k=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Rw,Yu,Rw,Yu]}),e})();class d4{attach(e){return this._attachedHost=e,e.attach(this)}detach(){let e=this._attachedHost;null!=e&&(this._attachedHost=null,e.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(e){this._attachedHost=e}}class u4 extends d4{constructor(e,n,t,r,s){super(),this.component=e,this.viewContainerRef=n,this.injector=t,this.componentFactoryResolver=r,this.projectableNodes=s}}class h4 extends d4{constructor(e,n,t,r){super(),this.templateRef=e,this.viewContainerRef=n,this.context=t,this.injector=r}get origin(){return this.templateRef.elementRef}attach(e,n=this.context){return this.context=n,super.attach(e)}detach(){return this.context=void 0,super.detach()}}class Eme extends d4{constructor(e){super(),this.element=e instanceof l.SBq?e.nativeElement:e}}class m4{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(e){return e instanceof u4?(this._attachedPortal=e,this.attachComponentPortal(e)):e instanceof h4?(this._attachedPortal=e,this.attachTemplatePortal(e)):this.attachDomPortal&&e instanceof Eme?(this._attachedPortal=e,this.attachDomPortal(e)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(e){this._disposeFn=e}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}class Ime extends m4{constructor(e,n,t,r,s){super(),this.outletElement=e,this._componentFactoryResolver=n,this._appRef=t,this._defaultInjector=r,this.attachDomPortal=o=>{const d=o.element,m=this._document.createComment("dom-portal");d.parentNode.insertBefore(m,d),this.outletElement.appendChild(d),this._attachedPortal=o,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(d,m)})},this._document=s}attachComponentPortal(e){const t=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component);let r;return e.viewContainerRef?(r=e.viewContainerRef.createComponent(t,e.viewContainerRef.length,e.injector||e.viewContainerRef.injector,e.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=t.create(e.injector||this._defaultInjector||l.zs3.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=e,r}attachTemplatePortal(e){let n=e.viewContainerRef,t=n.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return t.rootNodes.forEach(r=>this.outletElement.appendChild(r)),t.detectChanges(),this.setDisposeFn(()=>{let r=n.indexOf(t);-1!==r&&n.remove(r)}),this._attachedPortal=e,t}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(e){return e.hostView.rootNodes[0]}}let f4=(()=>{var i;class e extends m4{constructor(t,r,s){super(),this._componentFactoryResolver=t,this._viewContainerRef=r,this._isInitialized=!1,this.attached=new l.vpe,this.attachDomPortal=o=>{const d=o.element,m=this._document.createComment("dom-portal");o.setAttachedHost(this),d.parentNode.insertBefore(m,d),this._getRootNode().appendChild(d),this._attachedPortal=o,super.setDisposeFn(()=>{m.parentNode&&m.parentNode.replaceChild(d,m)})},this._document=s}get portal(){return this._attachedPortal}set portal(t){this.hasAttached()&&!t&&!this._isInitialized||(this.hasAttached()&&super.detach(),t&&super.attach(t),this._attachedPortal=t||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(t){t.setAttachedHost(this);const r=null!=t.viewContainerRef?t.viewContainerRef:this._viewContainerRef,o=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),d=r.createComponent(o,r.length,t.injector||r.injector,t.projectableNodes||void 0);return r!==this._viewContainerRef&&this._getRootNode().appendChild(d.hostView.rootNodes[0]),super.setDisposeFn(()=>d.destroy()),this._attachedPortal=t,this._attachedRef=d,this.attached.emit(d),d}attachTemplatePortal(t){t.setAttachedHost(this);const r=this._viewContainerRef.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=t,this._attachedRef=r,this.attached.emit(r),r}_getRootNode(){const t=this._viewContainerRef.element.nativeElement;return t.nodeType===t.ELEMENT_NODE?t:t.parentNode}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l._Vd),l.Y36(l.s_b),l.Y36(re))},i.\u0275dir=l.lG2({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:["cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],features:[l.qOj]}),e})(),Al=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})();const W9=Jae();class Dme{constructor(e,n){this._viewportRuler=e,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=n}attach(){}enable(){if(this._canBeEnabled()){const e=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=e.style.left||"",this._previousHTMLStyles.top=e.style.top||"",e.style.left=ms(-this._previousScrollPosition.left),e.style.top=ms(-this._previousScrollPosition.top),e.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const e=this._document.documentElement,t=e.style,r=this._document.body.style,s=t.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,t.left=this._previousHTMLStyles.left,t.top=this._previousHTMLStyles.top,e.classList.remove("cdk-global-scrollblock"),W9&&(t.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),W9&&(t.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const n=this._document.body,t=this._viewportRuler.getViewportSize();return n.scrollHeight>t.height||n.scrollWidth>t.width}}class kme{constructor(e,n,t,r){this._scrollDispatcher=e,this._ngZone=n,this._viewportRuler=t,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(e){this._overlayRef=e}enable(){if(this._scrollSubscription)return;const e=this._scrollDispatcher.scrolled(0).pipe(Kn(n=>!n||!this._overlayRef.overlayElement.contains(n.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=e.subscribe(()=>{const n=this._viewportRuler.getViewportScrollPosition().top;Math.abs(n-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=e.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class q9{enable(){}disable(){}attach(){}}function p4(i,e){return e.some(n=>i.bottom<n.top||i.top>n.bottom||i.right<n.left||i.left>n.right)}function Y9(i,e){return e.some(n=>i.top<n.top||i.bottom>n.bottom||i.left<n.left||i.right>n.right)}class Tme{constructor(e,n,t,r){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=t,this._config=r,this._scrollSubscription=null}attach(e){this._overlayRef=e}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const n=this._overlayRef.overlayElement.getBoundingClientRect(),{width:t,height:r}=this._viewportRuler.getViewportSize();p4(n,[{width:t,height:r,bottom:r,right:t,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let Sme=(()=>{var i;class e{constructor(t,r,s,o){this._scrollDispatcher=t,this._viewportRuler=r,this._ngZone=s,this.noop=()=>new q9,this.close=d=>new kme(this._scrollDispatcher,this._ngZone,this._viewportRuler,d),this.block=()=>new Dme(this._viewportRuler,this._document),this.reposition=d=>new Tme(this._scrollDispatcher,this._viewportRuler,this._ngZone,d),this._document=o}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG($9),l.LFG(pk),l.LFG(l.R0b),l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class _4{constructor(e){if(this.scrollStrategy=new q9,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,e){const n=Object.keys(e);for(const t of n)void 0!==e[t]&&(this[t]=e[t])}}}class Ame{constructor(e,n){this.connectionPair=e,this.scrollableViewProperties=n}}let Z9=(()=>{var i;class e{constructor(t){this._attachedOverlays=[],this._document=t}ngOnDestroy(){this.detach()}add(t){this.remove(t),this._attachedOverlays.push(t)}remove(t){const r=this._attachedOverlays.indexOf(t);r>-1&&this._attachedOverlays.splice(r,1),0===this._attachedOverlays.length&&this.detach()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Mme=(()=>{var i;class e extends Z9{constructor(t,r){super(t),this._ngZone=r,this._keydownListener=s=>{const o=this._attachedOverlays;for(let d=o.length-1;d>-1;d--)if(o[d]._keydownEvents.observers.length>0){const m=o[d]._keydownEvents;this._ngZone?this._ngZone.run(()=>m.next(s)):m.next(s);break}}}add(t){super.add(t),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re),l.LFG(l.R0b,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Rme=(()=>{var i;class e extends Z9{constructor(t,r,s){super(t),this._platform=r,this._ngZone=s,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Rc(o)},this._clickListener=o=>{const d=Rc(o),m="click"===o.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:d;this._pointerDownEventTarget=null;const f=this._attachedOverlays.slice();for(let b=f.length-1;b>-1;b--){const w=f[b];if(w._outsidePointerEvents.observers.length<1||!w.hasAttached())continue;if(w.overlayElement.contains(d)||w.overlayElement.contains(m))break;const I=w._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>I.next(o)):I.next(o)}}}add(t){if(super.add(t),!this._isAttached){const r=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(r)):this._addEventListeners(r),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=r.style.cursor,r.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const t=this._document.body;t.removeEventListener("pointerdown",this._pointerDownListener,!0),t.removeEventListener("click",this._clickListener,!0),t.removeEventListener("auxclick",this._clickListener,!0),t.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(t.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(t){t.addEventListener("pointerdown",this._pointerDownListener,!0),t.addEventListener("click",this._clickListener,!0),t.addEventListener("auxclick",this._clickListener,!0),t.addEventListener("contextmenu",this._clickListener,!0)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re),l.LFG(Kr),l.LFG(l.R0b,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),uO=(()=>{var i;class e{constructor(t,r){this._platform=r,this._document=t}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const t="cdk-overlay-container";if(this._platform.isBrowser||m3()){const s=this._document.querySelectorAll(`.${t}[platform="server"], .${t}[platform="test"]`);for(let o=0;o<s.length;o++)s[o].remove()}const r=this._document.createElement("div");r.classList.add(t),m3()?r.setAttribute("platform","test"):this._platform.isBrowser||r.setAttribute("platform","server"),this._document.body.appendChild(r),this._containerElement=r}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re),l.LFG(Kr))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();class gk{constructor(e,n,t,r,s,o,d,m,f,b=!1){this._portalOutlet=e,this._host=n,this._pane=t,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=d,this._location=m,this._outsideClickDispatcher=f,this._animationsDisabled=b,this._backdropElement=null,this._backdropClick=new Xe.x,this._attachments=new Xe.x,this._detachments=new Xe.x,this._locationChanges=rr.w0.EMPTY,this._backdropClickHandler=w=>this._backdropClick.next(w),this._backdropTransitionendHandler=w=>{this._disposeBackdrop(w.target)},this._keydownEvents=new Xe.x,this._outsidePointerEvents=new Xe.x,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(e){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);const n=this._portalOutlet.attach(e);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Mn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),"function"==typeof n?.onDestroy&&n.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),n}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const e=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),e}dispose(){const e=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,e&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(e){e!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=e,this.hasAttached()&&(e.attach(this),this.updatePosition()))}updateSize(e){this._config={...this._config,...e},this._updateElementSize()}setDirection(e){this._config={...this._config,direction:e},this._updateElementDirection()}addPanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!0)}removePanelClass(e){this._pane&&this._toggleClasses(this._pane,e,!1)}getDirection(){const e=this._config.direction;return e?"string"==typeof e?e:e.value:"ltr"}updateScrollStrategy(e){e!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=e,this.hasAttached()&&(e.attach(this),e.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const e=this._pane.style;e.width=ms(this._config.width),e.height=ms(this._config.height),e.minWidth=ms(this._config.minWidth),e.minHeight=ms(this._config.minHeight),e.maxWidth=ms(this._config.maxWidth),e.maxHeight=ms(this._config.maxHeight)}_togglePointerEvents(e){this._pane.style.pointerEvents=e?"":"none"}_attachBackdrop(){const e="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(e)})}):this._backdropElement.classList.add(e)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const e=this._backdropElement;if(e){if(this._animationsDisabled)return void this._disposeBackdrop(e);e.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{e.addEventListener("transitionend",this._backdropTransitionendHandler)}),e.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(e)},500))}}_toggleClasses(e,n,t){const r=XD(n||[]).filter(s=>!!s);r.length&&(t?e.classList.add(...r):e.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const e=this._ngZone.onStable.pipe(xn((0,wo.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),e.unsubscribe())})})}_disposeScrollStrategy(){const e=this._scrollStrategy;e&&(e.disable(),e.detach&&e.detach())}_disposeBackdrop(e){e&&(e.removeEventListener("click",this._backdropClickHandler),e.removeEventListener("transitionend",this._backdropTransitionendHandler),e.remove(),this._backdropElement===e&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}}const K9="cdk-overlay-connected-position-bounding-box",Pme=/([A-Za-z%]+)$/;class Ome{get positions(){return this._preferredPositions}constructor(e,n,t,r,s){this._viewportRuler=n,this._document=t,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Xe.x,this._resizeSubscription=rr.w0.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(e)}attach(e){this._validatePositions(),e.hostElement.classList.add(K9),this._overlayRef=e,this._boundingBox=e.hostElement,this._pane=e.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const e=this._originRect,n=this._overlayRect,t=this._viewportRect,r=this._containerRect,s=[];let o;for(let d of this._preferredPositions){let m=this._getOriginPoint(e,r,d),f=this._getOverlayPoint(m,n,d),b=this._getOverlayFit(f,n,t,d);if(b.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(d,m);this._canFitWithFlexibleDimensions(b,f,t)?s.push({position:d,origin:m,overlayRect:n,boundingBoxRect:this._calculateBoundingBoxRect(m,d)}):(!o||o.overlayFit.visibleArea<b.visibleArea)&&(o={overlayFit:b,overlayPoint:f,originPoint:m,position:d,overlayRect:n})}if(s.length){let d=null,m=-1;for(const f of s){const b=f.boundingBoxRect.width*f.boundingBoxRect.height*(f.position.weight||1);b>m&&(m=b,d=f)}return this._isPushed=!1,void this._applyPosition(d.position,d.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(o.position,o.originPoint);this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&lb(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(K9),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;const e=this._lastPosition;if(e){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();const n=this._getOriginPoint(this._originRect,this._containerRect,e);this._applyPosition(e,n)}else this.apply()}withScrollableContainers(e){return this._scrollables=e,this}withPositions(e){return this._preferredPositions=e,-1===e.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(e){return this._viewportMargin=e,this}withFlexibleDimensions(e=!0){return this._hasFlexibleDimensions=e,this}withGrowAfterOpen(e=!0){return this._growAfterOpen=e,this}withPush(e=!0){return this._canPush=e,this}withLockedPosition(e=!0){return this._positionLocked=e,this}setOrigin(e){return this._origin=e,this}withDefaultOffsetX(e){return this._offsetX=e,this}withDefaultOffsetY(e){return this._offsetY=e,this}withTransformOriginOn(e){return this._transformOriginSelector=e,this}_getOriginPoint(e,n,t){let r,s;if("center"==t.originX)r=e.left+e.width/2;else{const o=this._isRtl()?e.right:e.left,d=this._isRtl()?e.left:e.right;r="start"==t.originX?o:d}return n.left<0&&(r-=n.left),s="center"==t.originY?e.top+e.height/2:"top"==t.originY?e.top:e.bottom,n.top<0&&(s-=n.top),{x:r,y:s}}_getOverlayPoint(e,n,t){let r,s;return r="center"==t.overlayX?-n.width/2:"start"===t.overlayX?this._isRtl()?-n.width:0:this._isRtl()?0:-n.width,s="center"==t.overlayY?-n.height/2:"top"==t.overlayY?0:-n.height,{x:e.x+r,y:e.y+s}}_getOverlayFit(e,n,t,r){const s=X9(n);let{x:o,y:d}=e,m=this._getOffset(r,"x"),f=this._getOffset(r,"y");m&&(o+=m),f&&(d+=f);let I=0-d,S=d+s.height-t.height,F=this._subtractOverflows(s.width,0-o,o+s.width-t.width),z=this._subtractOverflows(s.height,I,S),q=F*z;return{visibleArea:q,isCompletelyWithinViewport:s.width*s.height===q,fitsInViewportVertically:z===s.height,fitsInViewportHorizontally:F==s.width}}_canFitWithFlexibleDimensions(e,n,t){if(this._hasFlexibleDimensions){const r=t.bottom-n.y,s=t.right-n.x,o=Q9(this._overlayRef.getConfig().minHeight),d=Q9(this._overlayRef.getConfig().minWidth);return(e.fitsInViewportVertically||null!=o&&o<=r)&&(e.fitsInViewportHorizontally||null!=d&&d<=s)}return!1}_pushOverlayOnScreen(e,n,t){if(this._previousPushAmount&&this._positionLocked)return{x:e.x+this._previousPushAmount.x,y:e.y+this._previousPushAmount.y};const r=X9(n),s=this._viewportRect,o=Math.max(e.x+r.width-s.width,0),d=Math.max(e.y+r.height-s.height,0),m=Math.max(s.top-t.top-e.y,0),f=Math.max(s.left-t.left-e.x,0);let b=0,w=0;return b=r.width<=s.width?f||-o:e.x<this._viewportMargin?s.left-t.left-e.x:0,w=r.height<=s.height?m||-d:e.y<this._viewportMargin?s.top-t.top-e.y:0,this._previousPushAmount={x:b,y:w},{x:e.x+b,y:e.y+w}}_applyPosition(e,n){if(this._setTransformOrigin(e),this._setOverlayElementStyles(n,e),this._setBoundingBoxStyles(n,e),e.panelClass&&this._addPanelClasses(e.panelClass),this._lastPosition=e,this._positionChanges.observers.length){const t=this._getScrollVisibility(),r=new Ame(e,t);this._positionChanges.next(r)}this._isInitialRender=!1}_setTransformOrigin(e){if(!this._transformOriginSelector)return;const n=this._boundingBox.querySelectorAll(this._transformOriginSelector);let t,r=e.overlayY;t="center"===e.overlayX?"center":this._isRtl()?"start"===e.overlayX?"right":"left":"start"===e.overlayX?"left":"right";for(let s=0;s<n.length;s++)n[s].style.transformOrigin=`${t} ${r}`}_calculateBoundingBoxRect(e,n){const t=this._viewportRect,r=this._isRtl();let s,o,d,b,w,I;if("top"===n.overlayY)o=e.y,s=t.height-o+this._viewportMargin;else if("bottom"===n.overlayY)d=t.height-e.y+2*this._viewportMargin,s=t.height-d+this._viewportMargin;else{const S=Math.min(t.bottom-e.y+t.top,e.y),F=this._lastBoundingBoxSize.height;s=2*S,o=e.y-S,s>F&&!this._isInitialRender&&!this._growAfterOpen&&(o=e.y-F/2)}if("end"===n.overlayX&&!r||"start"===n.overlayX&&r)I=t.width-e.x+this._viewportMargin,b=e.x-this._viewportMargin;else if("start"===n.overlayX&&!r||"end"===n.overlayX&&r)w=e.x,b=t.right-e.x;else{const S=Math.min(t.right-e.x+t.left,e.x),F=this._lastBoundingBoxSize.width;b=2*S,w=e.x-S,b>F&&!this._isInitialRender&&!this._growAfterOpen&&(w=e.x-F/2)}return{top:o,left:w,bottom:d,right:I,width:b,height:s}}_setBoundingBoxStyles(e,n){const t=this._calculateBoundingBoxRect(e,n);!this._isInitialRender&&!this._growAfterOpen&&(t.height=Math.min(t.height,this._lastBoundingBoxSize.height),t.width=Math.min(t.width,this._lastBoundingBoxSize.width));const r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{const s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ms(t.height),r.top=ms(t.top),r.bottom=ms(t.bottom),r.width=ms(t.width),r.left=ms(t.left),r.right=ms(t.right),r.alignItems="center"===n.overlayX?"center":"end"===n.overlayX?"flex-end":"flex-start",r.justifyContent="center"===n.overlayY?"center":"bottom"===n.overlayY?"flex-end":"flex-start",s&&(r.maxHeight=ms(s)),o&&(r.maxWidth=ms(o))}this._lastBoundingBoxSize=t,lb(this._boundingBox.style,r)}_resetBoundingBoxStyles(){lb(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){lb(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(e,n){const t={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){const b=this._viewportRuler.getViewportScrollPosition();lb(t,this._getExactOverlayY(n,e,b)),lb(t,this._getExactOverlayX(n,e,b))}else t.position="static";let d="",m=this._getOffset(n,"x"),f=this._getOffset(n,"y");m&&(d+=`translateX(${m}px) `),f&&(d+=`translateY(${f}px)`),t.transform=d.trim(),o.maxHeight&&(r?t.maxHeight=ms(o.maxHeight):s&&(t.maxHeight="")),o.maxWidth&&(r?t.maxWidth=ms(o.maxWidth):s&&(t.maxWidth="")),lb(this._pane.style,t)}_getExactOverlayY(e,n,t){let r={top:"",bottom:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,t)),"bottom"===e.overlayY?r.bottom=this._document.documentElement.clientHeight-(s.y+this._overlayRect.height)+"px":r.top=ms(s.y),r}_getExactOverlayX(e,n,t){let o,r={left:"",right:""},s=this._getOverlayPoint(n,this._overlayRect,e);return this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,t)),o=this._isRtl()?"end"===e.overlayX?"left":"right":"end"===e.overlayX?"right":"left","right"===o?r.right=this._document.documentElement.clientWidth-(s.x+this._overlayRect.width)+"px":r.left=ms(s.x),r}_getScrollVisibility(){const e=this._getOriginRect(),n=this._pane.getBoundingClientRect(),t=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Y9(e,t),isOriginOutsideView:p4(e,t),isOverlayClipped:Y9(n,t),isOverlayOutsideView:p4(n,t)}}_subtractOverflows(e,...n){return n.reduce((t,r)=>t-Math.max(r,0),e)}_getNarrowedViewportRect(){const e=this._document.documentElement.clientWidth,n=this._document.documentElement.clientHeight,t=this._viewportRuler.getViewportScrollPosition();return{top:t.top+this._viewportMargin,left:t.left+this._viewportMargin,right:t.left+e-this._viewportMargin,bottom:t.top+n-this._viewportMargin,width:e-2*this._viewportMargin,height:n-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(e,n){return"x"===n?null==e.offsetX?this._offsetX:e.offsetX:null==e.offsetY?this._offsetY:e.offsetY}_validatePositions(){}_addPanelClasses(e){this._pane&&XD(e).forEach(n=>{""!==n&&-1===this._appliedPanelClasses.indexOf(n)&&(this._appliedPanelClasses.push(n),this._pane.classList.add(n))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(e=>{this._pane.classList.remove(e)}),this._appliedPanelClasses=[])}_getOriginRect(){const e=this._origin;if(e instanceof l.SBq)return e.nativeElement.getBoundingClientRect();if(e instanceof Element)return e.getBoundingClientRect();const n=e.width||0,t=e.height||0;return{top:e.y,bottom:e.y+t,left:e.x,right:e.x+n,height:t,width:n}}}function lb(i,e){for(let n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i}function Q9(i){if("number"!=typeof i&&null!=i){const[e,n]=i.split(Pme);return n&&"px"!==n?null:parseFloat(e)}return i||null}function X9(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}const J9="cdk-global-overlay-wrapper";class Nme{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(e){const n=e.getConfig();this._overlayRef=e,this._width&&!n.width&&e.updateSize({width:this._width}),this._height&&!n.height&&e.updateSize({height:this._height}),e.hostElement.classList.add(J9),this._isDisposed=!1}top(e=""){return this._bottomOffset="",this._topOffset=e,this._alignItems="flex-start",this}left(e=""){return this._xOffset=e,this._xPosition="left",this}bottom(e=""){return this._topOffset="",this._bottomOffset=e,this._alignItems="flex-end",this}right(e=""){return this._xOffset=e,this._xPosition="right",this}start(e=""){return this._xOffset=e,this._xPosition="start",this}end(e=""){return this._xOffset=e,this._xPosition="end",this}width(e=""){return this._overlayRef?this._overlayRef.updateSize({width:e}):this._width=e,this}height(e=""){return this._overlayRef?this._overlayRef.updateSize({height:e}):this._height=e,this}centerHorizontally(e=""){return this.left(e),this._xPosition="center",this}centerVertically(e=""){return this.top(e),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement.style,t=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:d}=t,m=!("100%"!==r&&"100vw"!==r||o&&"100%"!==o&&"100vw"!==o),f=!("100%"!==s&&"100vh"!==s||d&&"100%"!==d&&"100vh"!==d),b=this._xPosition,w=this._xOffset,I="rtl"===this._overlayRef.getConfig().direction;let S="",F="",z="";m?z="flex-start":"center"===b?(z="center",I?F=w:S=w):I?"left"===b||"end"===b?(z="flex-end",S=w):("right"===b||"start"===b)&&(z="flex-start",F=w):"left"===b||"start"===b?(z="flex-start",S=w):("right"===b||"end"===b)&&(z="flex-end",F=w),e.position=this._cssPosition,e.marginLeft=m?"0":S,e.marginTop=f?"0":this._topOffset,e.marginBottom=this._bottomOffset,e.marginRight=m?"0":F,n.justifyContent=z,n.alignItems=f?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const e=this._overlayRef.overlayElement.style,n=this._overlayRef.hostElement,t=n.style;n.classList.remove(J9),t.justifyContent=t.alignItems=e.marginTop=e.marginBottom=e.marginLeft=e.marginRight=e.position="",this._overlayRef=null,this._isDisposed=!0}}let Fme=(()=>{var i;class e{constructor(t,r,s,o){this._viewportRuler=t,this._document=r,this._platform=s,this._overlayContainer=o}global(){return new Nme}flexibleConnectedTo(t){return new Ome(t,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(pk),l.LFG(re),l.LFG(Kr),l.LFG(uO))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),Lme=0,Ml=(()=>{var i;class e{constructor(t,r,s,o,d,m,f,b,w,I,S,F){this.scrollStrategies=t,this._overlayContainer=r,this._componentFactoryResolver=s,this._positionBuilder=o,this._keyboardDispatcher=d,this._injector=m,this._ngZone=f,this._document=b,this._directionality=w,this._location=I,this._outsideClickDispatcher=S,this._animationsModuleType=F}create(t){const r=this._createHostElement(),s=this._createPaneElement(r),o=this._createPortalOutlet(s),d=new _4(t);return d.direction=d.direction||this._directionality.value,new gk(o,r,s,d,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,"NoopAnimations"===this._animationsModuleType)}position(){return this._positionBuilder}_createPaneElement(t){const r=this._document.createElement("div");return r.id="cdk-overlay-"+Lme++,r.classList.add("cdk-overlay-pane"),t.appendChild(r),r}_createHostElement(){const t=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(t),t}_createPortalOutlet(t){return this._appRef||(this._appRef=this._injector.get(l.z2F)),new Ime(t,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Sme),l.LFG(uO),l.LFG(l._Vd),l.LFG(Fme),l.LFG(Mme),l.LFG(l.zs3),l.LFG(l.R0b),l.LFG(re),l.LFG(Ld),l.LFG(et),l.LFG(Rme),l.LFG(l.QbO,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const Ume={provide:new l.OlP("cdk-connected-overlay-scroll-strategy"),deps:[Ml],useFactory:function Vme(i){return()=>i.scrollStrategies.reposition()}};let Zu=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[Ml,Ume],imports:[Rw,Al,_k,_k]}),e})();const qme={provide:new l.OlP("mat-autocomplete-scroll-strategy"),deps:[Ml],useFactory:function Wme(i){return()=>i.scrollStrategies.reposition()}};let nZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[qme],imports:[Zu,UP,Tt,$t,Yu,UP,Tt]}),e})(),iZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[tb,Tt,Tt]}),e})();function Kme(i,e){}class hO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}}let rZ=(()=>{var i;class e extends m4{constructor(t,r,s,o,d,m,f,b){super(),this._elementRef=t,this._focusTrapFactory=r,this._config=o,this._interactivityChecker=d,this._ngZone=m,this._overlayRef=f,this._focusMonitor=b,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this.attachDomPortal=w=>{this._portalOutlet.hasAttached();const I=this._portalOutlet.attachDomPortal(w);return this._contentAttached(),I},this._document=s,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachComponentPortal(t);return this._contentAttached(),r}attachTemplatePortal(t){this._portalOutlet.hasAttached();const r=this._portalOutlet.attachTemplatePortal(t);return this._contentAttached(),r}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(t,r){this._interactivityChecker.isFocusable(t)||(t.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{const s=()=>{t.removeEventListener("blur",s),t.removeEventListener("mousedown",s),t.removeAttribute("tabindex")};t.addEventListener("blur",s),t.addEventListener("mousedown",s)})),t.focus(r)}_focusByCssSelector(t,r){let s=this._elementRef.nativeElement.querySelector(t);s&&this._forceFocus(s,r)}_trapFocus(){const t=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||t.focus();break;case!0:case"first-tabbable":this._focusTrap.focusInitialElementWhenReady().then(r=>{r||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus)}}_restoreFocus(){const t=this._config.restoreFocus;let r=null;if("string"==typeof t?r=this._document.querySelector(t):"boolean"==typeof t?r=t?this._elementFocusedBeforeDialogWasOpened:null:t&&(r=t),this._config.restoreFocus&&r&&"function"==typeof r.focus){const s=PP(),o=this._elementRef.nativeElement;(!s||s===this._document.body||s===o||o.contains(s))&&(this._focusMonitor?(this._focusMonitor.focusVia(r,this._closeInteractionType),this._closeInteractionType=null):r.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){const t=this._elementRef.nativeElement,r=PP();return t===r||t.contains(r)}_initializeFocusTrap(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=PP())}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(v3),l.Y36(re,8),l.Y36(hO),l.Y36(LP),l.Y36(l.R0b),l.Y36(gk),l.Y36(Am))},i.\u0275cmp=l.Xpm({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(t,r){if(1&t&&l.Gf(f4,7),2&t){let s;l.iGM(s=l.CRH())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(t,r){2&t&&l.uIk("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},features:[l.qOj],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(t,r){1&t&&l.YNc(0,Kme,0,0,"ng-template",0)},dependencies:[f4],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2}),e})();class g4{constructor(e,n){this.overlayRef=e,this.config=n,this.closed=new Xe.x,this.disableClose=n.disableClose,this.backdropClick=e.backdropClick(),this.keydownEvents=e.keydownEvents(),this.outsidePointerEvents=e.outsidePointerEvents(),this.id=n.id,this.keydownEvents.subscribe(t=>{27===t.keyCode&&!this.disableClose&&!Fd(t)&&(t.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=e.detachments().subscribe(()=>{!1!==n.closeOnOverlayDetachments&&this.close()})}close(e,n){if(this.containerInstance){const t=this.closed;this.containerInstance._closeInteractionType=n?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),t.next(e),t.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(e="",n=""){return this.overlayRef.updateSize({width:e,height:n}),this}addPanelClass(e){return this.overlayRef.addPanelClass(e),this}removePanelClass(e){return this.overlayRef.removePanelClass(e),this}}const sZ=new l.OlP("DialogScrollStrategy"),Qme=new l.OlP("DialogData"),Xme=new l.OlP("DefaultDialogConfig"),efe={provide:sZ,deps:[Ml],useFactory:function Jme(i){return()=>i.scrollStrategies.block()}};let tfe=0,oZ=(()=>{var i;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(t,r,s,o,d,m){this._overlay=t,this._injector=r,this._defaultOptions=s,this._parentDialog=o,this._overlayContainer=d,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Xe.x,this._afterOpenedAtThisLevel=new Xe.x,this._ariaHiddenElements=new Map,this.afterAllClosed=Fh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(wr(void 0))),this._scrollStrategy=m}open(t,r){(r={...this._defaultOptions||new hO,...r}).id=r.id||"cdk-dialog-"+tfe++,r.id&&this.getDialogById(r.id);const o=this._getOverlayConfig(r),d=this._overlay.create(o),m=new g4(d,r),f=this._attachContainer(d,m,r);return m.containerInstance=f,this._attachDialogContent(t,m,f,r),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(m),m.closed.subscribe(()=>this._removeOpenDialog(m,!0)),this.afterOpened.next(m),m}closeAll(){v4(this.openDialogs,t=>t.close())}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){v4(this._openDialogsAtThisLevel,t=>{!1===t.config.closeOnDestroy&&this._removeOpenDialog(t,!1)}),v4(this._openDialogsAtThisLevel,t=>t.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(t){const r=new _4({positionStrategy:t.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:t.scrollStrategy||this._scrollStrategy(),panelClass:t.panelClass,hasBackdrop:t.hasBackdrop,direction:t.direction,minWidth:t.minWidth,minHeight:t.minHeight,maxWidth:t.maxWidth,maxHeight:t.maxHeight,width:t.width,height:t.height,disposeOnNavigation:t.closeOnNavigation});return t.backdropClass&&(r.backdropClass=t.backdropClass),r}_attachContainer(t,r,s){const o=s.injector||s.viewContainerRef?.injector,d=[{provide:hO,useValue:s},{provide:g4,useValue:r},{provide:gk,useValue:t}];let m;s.container?"function"==typeof s.container?m=s.container:(m=s.container.type,d.push(...s.container.providers(s))):m=rZ;const f=new u4(m,s.viewContainerRef,l.zs3.create({parent:o||this._injector,providers:d}),s.componentFactoryResolver);return t.attach(f).instance}_attachDialogContent(t,r,s,o){if(t instanceof l.Rgc){const d=this._createInjector(o,r,s,void 0);let m={$implicit:o.data,dialogRef:r};o.templateContext&&(m={...m,..."function"==typeof o.templateContext?o.templateContext():o.templateContext}),s.attachTemplatePortal(new h4(t,null,m,d))}else{const d=this._createInjector(o,r,s,this._injector),m=s.attachComponentPortal(new u4(t,o.viewContainerRef,d,o.componentFactoryResolver));r.componentRef=m,r.componentInstance=m.instance}}_createInjector(t,r,s,o){const d=t.injector||t.viewContainerRef?.injector,m=[{provide:Qme,useValue:t.data},{provide:g4,useValue:r}];return t.providers&&("function"==typeof t.providers?m.push(...t.providers(r,t,s)):m.push(...t.providers)),t.direction&&(!d||!d.get(Ld,null,{optional:!0}))&&m.push({provide:Ld,useValue:{value:t.direction,change:(0,ft.of)()}}),l.zs3.create({parent:d||o,providers:m})}_removeOpenDialog(t,r){const s=this.openDialogs.indexOf(t);s>-1&&(this.openDialogs.splice(s,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((o,d)=>{o?d.setAttribute("aria-hidden",o):d.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),r&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){const t=this._overlayContainer.getContainerElement();if(t.parentElement){const r=t.parentElement.children;for(let s=r.length-1;s>-1;s--){const o=r[s];o!==t&&"SCRIPT"!==o.nodeName&&"STYLE"!==o.nodeName&&!o.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(o,o.getAttribute("aria-hidden")),o.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Ml),l.LFG(l.zs3),l.LFG(Xme,8),l.LFG(i,12),l.LFG(uO),l.LFG(sZ))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})();function v4(i,e){let n=i.length;for(;n--;)e(i[n])}let aZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[oZ,efe],imports:[Zu,Al,tb,Al]}),e})(),cZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[aZ,Tt,Al,Tt]}),e})(),pZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,qa,Tt]}),e})(),vZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})(),bZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,qa,vZ,Tt,vZ]}),e})();const fO=new l.OlP("mat-chips-default-options");let kZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[VP,{provide:fO,useValue:{separatorKeyCodes:[13]}}],imports:[Tt,$t,qa,Tt]}),e})(),Xfe=(()=>{var i;class e{constructor(){this.changes=new Xe.x,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(t,r){return`${t} \u2013 ${r}`}formatYearRangeLabel(t,r){return`${t} to ${r}`}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const cpe={provide:new l.OlP("mat-datepicker-scroll-strategy"),deps:[Ml],useFactory:function ape(i){return()=>i.scrollStrategies.reposition()}};let RZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[Xfe,cpe],imports:[$t,ok,Zu,tb,Al,Tt,Yu]}),e})();function ppe(i,e){}class bO{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.maxWidth="80vw",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}}const k4="mdc-dialog--open",PZ="mdc-dialog--opening",OZ="mdc-dialog--closing";let vpe=(()=>{var i;class e extends rZ{constructor(t,r,s,o,d,m,f,b){super(t,r,s,o,d,m,f,b),this._animationStateChanged=new l.vpe}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(t){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:t})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(v3),l.Y36(re,8),l.Y36(bO),l.Y36(LP),l.Y36(l.R0b),l.Y36(gk),l.Y36(Am))},i.\u0275cmp=l.Xpm({type:i,selectors:[["ng-component"]],features:[l.qOj],decls:0,vars:0,template:function(t,r){},encapsulation:2}),e})();const NZ="--mat-dialog-transition-duration";function FZ(i){return null==i?null:"number"==typeof i?i:i.endsWith("ms")?Ms(i.substring(0,i.length-2)):i.endsWith("s")?1e3*Ms(i.substring(0,i.length-1)):"0"===i?0:null}let bpe=(()=>{var i;class e extends vpe{constructor(t,r,s,o,d,m,f,b,w){super(t,r,s,o,d,m,f,w),this._animationMode=b,this._animationsEnabled="NoopAnimations"!==this._animationMode,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?FZ(this._config.enterAnimationDuration)??150:0,this._exitAnimationDuration=this._animationsEnabled?FZ(this._config.exitAnimationDuration)??75:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}ngOnDestroy(){super.ngOnDestroy(),null!==this._animationTimer&&clearTimeout(this._animationTimer)}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(NZ,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(PZ,k4)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(k4),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(k4),this._animationsEnabled?(this._hostElement.style.setProperty(NZ,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(OZ)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_clearAnimationClasses(){this._hostElement.classList.remove(PZ,OZ)}_waitForAnimationToComplete(t,r){null!==this._animationTimer&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(r,t)}_requestAnimationFrame(t){this._ngZone.runOutsideAngular(()=>{"function"==typeof requestAnimationFrame?requestAnimationFrame(t):t()})}}return(i=e).\u0275fac=function(t){return new(t||i)(l.Y36(l.SBq),l.Y36(v3),l.Y36(re,8),l.Y36(bO),l.Y36(LP),l.Y36(l.R0b),l.Y36(gk),l.Y36(l.QbO,8),l.Y36(Am))},i.\u0275cmp=l.Xpm({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:8,hostBindings:function(t,r){2&t&&(l.Ikx("id",r._config.id),l.uIk("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),l.ekj("_mat-animation-noopable",!r._animationsEnabled))},features:[l.qOj],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(t,r){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l.YNc(2,ppe,0,0,"ng-template",2),l.qZA()())},dependencies:[f4],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;transform:scale(0.8);opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{transform:none;opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{display:block;width:100%;height:100%}.mat-mdc-dialog-container{--mdc-dialog-container-elevation-shadow:0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12);--mdc-dialog-container-shadow-color:#000;--mdc-dialog-container-shape:4px;--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition-duration:var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container{transition:none}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-actions{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2}),e})();class ype{constructor(e,n,t){this._ref=e,this._containerInstance=t,this._afterOpened=new Xe.x,this._beforeClosed=new Xe.x,this._state=0,this.disableClose=n.disableClose,this.id=e.id,t._animationStateChanged.pipe(Kn(r=>"opened"===r.state),Mn(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),t._animationStateChanged.pipe(Kn(r=>"closed"===r.state),Mn(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),e.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),(0,wo.T)(this.backdropClick(),this.keydownEvents().pipe(Kn(r=>27===r.keyCode&&!this.disableClose&&!Fd(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),function wpe(i,e,n){i._closeInteractionType=e,i.close(n)}(this,"keydown"===r.type?"keyboard":"mouse"))})}close(e){this._result=e,this._containerInstance._animationStateChanged.pipe(Kn(n=>"closing"===n.state),Mn(1)).subscribe(n=>{this._beforeClosed.next(e),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),n.totalTime+100)}),this._state=1,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(e){let n=this._ref.config.positionStrategy;return e&&(e.left||e.right)?e.left?n.left(e.left):n.right(e.right):n.centerHorizontally(),e&&(e.top||e.bottom)?e.top?n.top(e.top):n.bottom(e.bottom):n.centerVertically(),this._ref.updatePosition(),this}updateSize(e="",n=""){return this._ref.updateSize(e,n),this}addPanelClass(e){return this._ref.addPanelClass(e),this}removePanelClass(e){return this._ref.removePanelClass(e),this}getState(){return this._state}_finishDialogClose(){this._state=2,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}}const xpe=new l.OlP("MatMdcDialogData"),Cpe=new l.OlP("mat-mdc-dialog-default-options"),LZ=new l.OlP("mat-mdc-dialog-scroll-strategy"),Ipe={provide:LZ,deps:[Ml],useFactory:function Epe(i){return()=>i.scrollStrategies.block()}};let Dpe=0,kpe=(()=>{var i;class e{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){const t=this._parentDialog;return t?t._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(t,r,s,o,d,m,f,b,w,I){this._overlay=t,this._defaultOptions=s,this._parentDialog=o,this._dialogRefConstructor=f,this._dialogContainerType=b,this._dialogDataToken=w,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new Xe.x,this._afterOpenedAtThisLevel=new Xe.x,this._idPrefix="mat-dialog-",this.dialogConfigClass=bO,this.afterAllClosed=Fh(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(wr(void 0))),this._scrollStrategy=m,this._dialog=r.get(oZ)}open(t,r){let s;(r={...this._defaultOptions||new bO,...r}).id=r.id||`${this._idPrefix}${Dpe++}`,r.scrollStrategy=r.scrollStrategy||this._scrollStrategy();const o=this._dialog.open(t,{...r,positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:r},{provide:hO,useValue:r}]},templateContext:()=>({dialogRef:s}),providers:(d,m,f)=>(s=new this._dialogRefConstructor(d,r,f),s.updatePosition(r?.position),[{provide:this._dialogContainerType,useValue:f},{provide:this._dialogDataToken,useValue:m.data},{provide:this._dialogRefConstructor,useValue:s}])});return s.componentRef=o.componentRef,s.componentInstance=o.componentInstance,this.openDialogs.push(s),this.afterOpened.next(s),s.afterClosed().subscribe(()=>{const d=this.openDialogs.indexOf(s);d>-1&&(this.openDialogs.splice(d,1),this.openDialogs.length||this._getAfterAllClosed().next())}),s}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(t){return this.openDialogs.find(r=>r.id===t)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(t){let r=t.length;for(;r--;)t[r].close()}}return(i=e).\u0275fac=function(t){l.$Z()},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})(),Tpe=(()=>{var i;class e extends kpe{constructor(t,r,s,o,d,m,f,b){super(t,r,o,m,f,d,ype,bpe,xpe,b),this._idPrefix="mat-mdc-dialog-"}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(Ml),l.LFG(l.zs3),l.LFG(et,8),l.LFG(Cpe,8),l.LFG(LZ),l.LFG(i,12),l.LFG(uO),l.LFG(l.QbO,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac}),e})(),BZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[Tpe,Ipe],imports:[aZ,Zu,Al,Tt,Tt]}),e})(),T4=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,Tt]}),e})(),Spe=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})(),HZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[$t,Tt,Spe,Al]}),e})(),jZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[dY,Tt,dY,Tt]}),e})(),yO=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Aw,$t,Tt,qa,_Y,T4]}),e})();const d_e={provide:new l.OlP("mat-menu-scroll-strategy"),deps:[Ml],useFactory:function l_e(i){return()=>i.scrollStrategies.reposition()}};let ZZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[d_e],imports:[$t,qa,Tt,Zu,Yu,Tt]}),e})();const p_e={provide:new l.OlP("mat-select-scroll-strategy"),deps:[Ml],useFactory:function f_e(i){return()=>i.scrollStrategies.reposition()}};let A4=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[p_e],imports:[$t,Zu,UP,Tt,Yu,lk,UP,Tt]}),e})();const b_e={provide:new l.OlP("mat-tooltip-scroll-strategy"),deps:[Ml],useFactory:function v_e(i){return()=>i.scrollStrategies.reposition({scrollThrottle:20})}};let M4=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[b_e],imports:[tb,$t,Zu,Tt,Tt,Yu]}),e})(),R4=(()=>{var i;class e{constructor(){this.changes=new Xe.x,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(t,r,s)=>{if(0==s||0==r)return`0 of ${s}`;const o=t*r;return`${o+1} \u2013 ${o<(s=Math.max(s,0))?Math.min(o+r,s):o+r} of ${s}`}}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const I_e={provide:R4,deps:[[new l.FiY,new l.tp0,R4]],useFactory:function E_e(i){return i||new R4}};let KZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[I_e],imports:[$t,ok,A4,M4]}),e})(),QZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt]}),e})(),XZ=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[$t,Tt]}),e})(),nK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,$t,qa,Tt]}),e})(),wO=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[$t,Tt,Yu,Yu,Tt]}),e})(),rK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})(),sK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[rK,Tt,qa,$t,rK,Tt]}),e})(),cK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,$t,qa]}),e})(),lK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Zu,Al,$t,ok,Tt,Tt]}),e})(),P4=(()=>{var i;class e{constructor(){this.changes=new Xe.x}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const dge={provide:P4,deps:[[new l.FiY,new l.tp0,P4]],useFactory:function lge(i){return i||new P4}};let dK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[dge],imports:[$t,Tt]}),e})(),O4=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Rw]}),e})(),N4=(()=>{var i;class e{constructor(){this.changes=new Xe.x,this.optionalLabel="Optional",this.completedLabel="Completed",this.editableLabel="Editable"}}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const wge={provide:N4,deps:[[new l.FiY,new l.tp0,N4]],useFactory:function yge(i){return i||new N4}};let fK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[wge,VP],imports:[Tt,$t,Al,O4,sk,qa,Tt]}),e})(),W4=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[_k]}),e})(),IK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,W4,Tt]}),e})(),kK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[$t,Tt,Al,qa,Aw,tb,Tt]}),e})(),MO=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[Tt,Tt]}),e})();function Y4(i,e,n){for(let t in e)if(e.hasOwnProperty(t)){const r=e[t];r?i.setProperty(t,r,n?.has(t)?"important":""):i.removeProperty(t)}return i}function Ww(i,e){const n=e?"":"none";Y4(i.style,{"touch-action":e?"":"none","-webkit-user-drag":e?"":"none","-webkit-tap-highlight-color":e?"":"transparent","user-select":n,"-ms-user-select":n,"-webkit-user-select":n,"-moz-user-select":n})}function TK(i,e,n){Y4(i.style,{position:e?"":"fixed",top:e?"":"0",opacity:e?"":"0",left:e?"":"-999em"},n)}function RO(i,e){return e&&"none"!=e?i+" "+e:i}function SK(i){const e=i.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(i)*e}function Z4(i,e){return i.getPropertyValue(e).split(",").map(t=>t.trim())}function K4(i){const e=i.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height,x:e.x,y:e.y}}function Q4(i,e,n){const{top:t,bottom:r,left:s,right:o}=i;return n>=t&&n<=r&&e>=s&&e<=o}function xk(i,e,n){i.top+=e,i.bottom=i.top+i.height,i.left+=n,i.right=i.left+i.width}function AK(i,e,n,t){const{top:r,right:s,bottom:o,left:d,width:m,height:f}=i,b=m*e,w=f*e;return t>r-w&&t<o+w&&n>d-b&&n<s+b}class MK{constructor(e){this._document=e,this.positions=new Map}clear(){this.positions.clear()}cache(e){this.clear(),this.positions.set(this._document,{scrollPosition:this.getViewportScrollPosition()}),e.forEach(n=>{this.positions.set(n,{scrollPosition:{top:n.scrollTop,left:n.scrollLeft},clientRect:K4(n)})})}handleScroll(e){const n=Rc(e),t=this.positions.get(n);if(!t)return null;const r=t.scrollPosition;let s,o;if(n===this._document){const f=this.getViewportScrollPosition();s=f.top,o=f.left}else s=n.scrollTop,o=n.scrollLeft;const d=r.top-s,m=r.left-o;return this.positions.forEach((f,b)=>{f.clientRect&&n!==b&&n.contains(b)&&xk(f.clientRect,d,m)}),r.top=s,r.left=o,{top:d,left:m}}getViewportScrollPosition(){return{top:window.scrollY,left:window.scrollX}}}function RK(i){const e=i.cloneNode(!0),n=e.querySelectorAll("[id]"),t=i.nodeName.toLowerCase();e.removeAttribute("id");for(let r=0;r<n.length;r++)n[r].removeAttribute("id");return"canvas"===t?NK(i,e):("input"===t||"select"===t||"textarea"===t)&&OK(i,e),PK("canvas",i,e,NK),PK("input, textarea, select",i,e,OK),e}function PK(i,e,n,t){const r=e.querySelectorAll(i);if(r.length){const s=n.querySelectorAll(i);for(let o=0;o<r.length;o++)t(r[o],s[o])}}let Kge=0;function OK(i,e){"file"!==e.type&&(e.value=i.value),"radio"===e.type&&e.name&&(e.name=`mat-clone-${e.name}-${Kge++}`)}function NK(i,e){const n=e.getContext("2d");if(n)try{n.drawImage(i,0,0)}catch{}}const FK=Wa({passive:!0}),PO=Wa({passive:!1}),X4=new Set(["position"]);class Xge{get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(e){const n=Et(e);n!==this._disabled&&(this._disabled=n,this._toggleNativeDragInteractions(),this._handles.forEach(t=>Ww(t,n)))}constructor(e,n,t,r,s,o){this._config=n,this._document=t,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._hasStartedDragging=!1,this._moveEvents=new Xe.x,this._pointerMoveSubscription=rr.w0.EMPTY,this._pointerUpSubscription=rr.w0.EMPTY,this._scrollSubscription=rr.w0.EMPTY,this._resizeSubscription=rr.w0.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new Xe.x,this.started=new Xe.x,this.released=new Xe.x,this.ended=new Xe.x,this.entered=new Xe.x,this.exited=new Xe.x,this.dropped=new Xe.x,this.moved=this._moveEvents,this._pointerDown=d=>{if(this.beforeStarted.next(),this._handles.length){const m=this._getTargetHandle(d);m&&!this._disabledHandles.has(m)&&!this.disabled&&this._initializeDragSequence(m,d)}else this.disabled||this._initializeDragSequence(this._rootElement,d)},this._pointerMove=d=>{const m=this._getPointerPositionOnPage(d);if(!this._hasStartedDragging){if(Math.abs(m.x-this._pickupPositionOnPage.x)+Math.abs(m.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){const S=Date.now()>=this._dragStartTime+this._getDragStartDelay(d),F=this._dropContainer;if(!S)return void this._endDragSequence(d);(!F||!F.isDragging()&&!F.isReceiving())&&(d.preventDefault(),this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(d)))}return}d.preventDefault();const f=this._getConstrainedPointerPosition(m);if(this._hasMoved=!0,this._lastKnownPointerPosition=m,this._updatePointerDirectionDelta(f),this._dropContainer)this._updateActiveDropContainer(f,m);else{const b=this.constrainPosition?this._initialClientRect:this._pickupPositionOnPage,w=this._activeTransform;w.x=f.x-b.x+this._passiveTransform.x,w.y=f.y-b.y+this._passiveTransform.y,this._applyRootElementTransform(w.x,w.y)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:f,event:d,distance:this._getDragDistance(f),delta:this._pointerDirectionDelta})})},this._pointerUp=d=>{this._endDragSequence(d)},this._nativeDragStart=d=>{if(this._handles.length){const m=this._getTargetHandle(d);m&&!this._disabledHandles.has(m)&&!this.disabled&&d.preventDefault()}else this.disabled||d.preventDefault()},this.withRootElement(e).withParent(n.parentDragRef||null),this._parentPositions=new MK(t),o.registerDragItem(this)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(e){this._handles=e.map(t=>Br(t)),this._handles.forEach(t=>Ww(t,this.disabled)),this._toggleNativeDragInteractions();const n=new Set;return this._disabledHandles.forEach(t=>{this._handles.indexOf(t)>-1&&n.add(t)}),this._disabledHandles=n,this}withPreviewTemplate(e){return this._previewTemplate=e,this}withPlaceholderTemplate(e){return this._placeholderTemplate=e,this}withRootElement(e){const n=Br(e);return n!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{n.addEventListener("mousedown",this._pointerDown,PO),n.addEventListener("touchstart",this._pointerDown,FK),n.addEventListener("dragstart",this._nativeDragStart,PO)}),this._initialTransform=void 0,this._rootElement=n),typeof SVGElement<"u"&&this._rootElement instanceof SVGElement&&(this._ownerSVGElement=this._rootElement.ownerSVGElement),this}withBoundaryElement(e){return this._boundaryElement=e?Br(e):null,this._resizeSubscription.unsubscribe(),e&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}withParent(e){return this._parentDragRef=e,this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&this._rootElement?.remove(),this._anchor?.remove(),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._ownerSVGElement=this._placeholderTemplate=this._previewTemplate=this._anchor=this._parentDragRef=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(e){!this._disabledHandles.has(e)&&this._handles.indexOf(e)>-1&&(this._disabledHandles.add(e),Ww(e,!0))}enableHandle(e){this._disabledHandles.has(e)&&(this._disabledHandles.delete(e),Ww(e,this.disabled))}withDirection(e){return this._direction=e,this}_withDropContainer(e){this._dropContainer=e}getFreeDragPosition(){const e=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:e.x,y:e.y}}setFreeDragPosition(e){return this._activeTransform={x:0,y:0},this._passiveTransform.x=e.x,this._passiveTransform.y=e.y,this._dropContainer||this._applyRootElementTransform(e.x,e.y),this}withPreviewContainer(e){return this._previewContainer=e,this}_sortFromLastPointerPosition(){const e=this._lastKnownPointerPosition;e&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(e),e)}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder?.remove(),this._placeholderRef?.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(e){if(this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging))if(this.released.next({source:this,event:e}),this._dropContainer)this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(e),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)});else{this._passiveTransform.x=this._activeTransform.x;const n=this._getPointerPositionOnPage(e);this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(n),dropPoint:n,event:e})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)}}_startDragSequence(e){Ck(e)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const n=this._dropContainer;if(n){const t=this._rootElement,r=t.parentNode,s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment(""),d=this._getShadowRoot();r.insertBefore(o,t),this._initialTransform=t.style.transform||"",this._preview=this._createPreviewElement(),TK(t,!1,X4),this._document.body.appendChild(r.replaceChild(s,t)),this._getPreviewInsertionPoint(r,d).appendChild(this._preview),this.started.next({source:this,event:e}),n.start(),this._initialContainer=n,this._initialIndex=n.getItemIndex(this)}else this.started.next({source:this,event:e}),this._initialContainer=this._initialIndex=void 0;this._parentPositions.cache(n?n.getScrollableParents():[])}_initializeDragSequence(e,n){this._parentDragRef&&n.stopPropagation();const t=this.isDragging(),r=Ck(n),s=!r&&0!==n.button,o=this._rootElement,d=Rc(n),m=!r&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now(),f=r?y3(n):b3(n);if(d&&d.draggable&&"mousedown"===n.type&&n.preventDefault(),t||s||m||f)return;if(this._handles.length){const I=o.style;this._rootElementTapHighlight=I.webkitTapHighlightColor||"",I.webkitTapHighlightColor="transparent"}this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._initialClientRect=this._rootElement.getBoundingClientRect(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(I=>this._updateOnScroll(I)),this._boundaryElement&&(this._boundaryRect=K4(this._boundaryElement));const b=this._previewTemplate;this._pickupPositionInElement=b&&b.template&&!b.matchSize?{x:0,y:0}:this._getPointerPositionInElement(this._initialClientRect,e,n);const w=this._pickupPositionOnPage=this._lastKnownPointerPosition=this._getPointerPositionOnPage(n);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:w.x,y:w.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,n)}_cleanupDragArtifacts(e){TK(this._rootElement,!0,X4),this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._initialClientRect=this._boundaryRect=this._previewRect=this._initialTransform=void 0,this._ngZone.run(()=>{const n=this._dropContainer,t=n.getItemIndex(this),r=this._getPointerPositionOnPage(e),s=this._getDragDistance(r),o=n._isOverContainer(r.x,r.y);this.ended.next({source:this,distance:s,dropPoint:r,event:e}),this.dropped.next({item:this,currentIndex:t,previousIndex:this._initialIndex,container:n,previousContainer:this._initialContainer,isPointerOverContainer:o,distance:s,dropPoint:r,event:e}),n.drop(this,t,this._initialIndex,this._initialContainer,o,s,r,e),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:n},{x:t,y:r}){let s=this._initialContainer._getSiblingContainerFromPosition(this,e,n);!s&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(e,n)&&(s=this._initialContainer),s&&s!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=s,this._dropContainer.enter(this,e,n,s===this._initialContainer&&s.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:s,currentIndex:s.getItemIndex(this)})}),this.isDragging()&&(this._dropContainer._startScrollingIfNecessary(t,r),this._dropContainer._sortItem(this,e,n,this._pointerDirectionDelta),this.constrainPosition?this._applyPreviewTransform(e,n):this._applyPreviewTransform(e-this._pickupPositionInElement.x,n-this._pickupPositionInElement.y))}_createPreviewElement(){const e=this._previewTemplate,n=this.previewClass,t=e?e.template:null;let r;if(t&&e){const s=e.matchSize?this._initialClientRect:null,o=e.viewContainer.createEmbeddedView(t,e.context);o.detectChanges(),r=BK(o,this._document),this._previewRef=o,e.matchSize?VK(r,s):r.style.transform=OO(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else r=RK(this._rootElement),VK(r,this._initialClientRect),this._initialTransform&&(r.style.transform=this._initialTransform);return Y4(r.style,{"pointer-events":"none",margin:"0",position:"fixed",top:"0",left:"0","z-index":`${this._config.zIndex||1e3}`},X4),Ww(r,!1),r.classList.add("cdk-drag-preview"),r.setAttribute("dir",this._direction),n&&(Array.isArray(n)?n.forEach(s=>r.classList.add(s)):r.classList.add(n)),r}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._applyPreviewTransform(e.left,e.top);const n=function Zge(i){const e=getComputedStyle(i),n=Z4(e,"transition-property"),t=n.find(d=>"transform"===d||"all"===d);if(!t)return 0;const r=n.indexOf(t),s=Z4(e,"transition-duration"),o=Z4(e,"transition-delay");return SK(s[r])+SK(o[r])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const r=o=>{(!o||Rc(o)===this._preview&&"transform"===o.propertyName)&&(this._preview?.removeEventListener("transitionend",r),t(),clearTimeout(s))},s=setTimeout(r,1.5*n);this._preview.addEventListener("transitionend",r)}))}_createPlaceholderElement(){const e=this._placeholderTemplate,n=e?e.template:null;let t;return n?(this._placeholderRef=e.viewContainer.createEmbeddedView(n,e.context),this._placeholderRef.detectChanges(),t=BK(this._placeholderRef,this._document)):t=RK(this._rootElement),t.style.pointerEvents="none",t.classList.add("cdk-drag-placeholder"),t}_getPointerPositionInElement(e,n,t){const r=n===this._rootElement?null:n,s=r?r.getBoundingClientRect():e,o=Ck(t)?t.targetTouches[0]:t,d=this._getViewportScrollPosition();return{x:s.left-e.left+(o.pageX-s.left-d.left),y:s.top-e.top+(o.pageY-s.top-d.top)}}_getPointerPositionOnPage(e){const n=this._getViewportScrollPosition(),t=Ck(e)?e.touches[0]||e.changedTouches[0]||{pageX:0,pageY:0}:e,r=t.pageX-n.left,s=t.pageY-n.top;if(this._ownerSVGElement){const o=this._ownerSVGElement.getScreenCTM();if(o){const d=this._ownerSVGElement.createSVGPoint();return d.x=r,d.y=s,d.matrixTransform(o.inverse())}}return{x:r,y:s}}_getConstrainedPointerPosition(e){const n=this._dropContainer?this._dropContainer.lockAxis:null;let{x:t,y:r}=this.constrainPosition?this.constrainPosition(e,this,this._initialClientRect,this._pickupPositionInElement):e;if("x"===this.lockAxis||"x"===n?r=this._pickupPositionOnPage.y-(this.constrainPosition?this._pickupPositionInElement.y:0):("y"===this.lockAxis||"y"===n)&&(t=this._pickupPositionOnPage.x-(this.constrainPosition?this._pickupPositionInElement.x:0)),this._boundaryRect){const{x:s,y:o}=this.constrainPosition?{x:0,y:0}:this._pickupPositionInElement,d=this._boundaryRect,{width:m,height:f}=this._getPreviewRect(),b=d.top+o,w=d.bottom-(f-o);t=LK(t,d.left+s,d.right-(m-s)),r=LK(r,b,w)}return{x:t,y:r}}_updatePointerDirectionDelta(e){const{x:n,y:t}=e,r=this._pointerDirectionDelta,s=this._pointerPositionAtLastDirectionChange,o=Math.abs(n-s.x),d=Math.abs(t-s.y);return o>this._config.pointerDirectionChangeThreshold&&(r.x=n>s.x?1:-1,s.x=n),d>this._config.pointerDirectionChangeThreshold&&(r.y=t>s.y?1:-1,s.y=t),r}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const e=this._handles.length>0||!this.isDragging();e!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=e,Ww(this._rootElement,e))}_removeRootElementListeners(e){e.removeEventListener("mousedown",this._pointerDown,PO),e.removeEventListener("touchstart",this._pointerDown,FK),e.removeEventListener("dragstart",this._nativeDragStart,PO)}_applyRootElementTransform(e,n){const t=OO(e,n),r=this._rootElement.style;null==this._initialTransform&&(this._initialTransform=r.transform&&"none"!=r.transform?r.transform:""),r.transform=RO(t,this._initialTransform)}_applyPreviewTransform(e,n){const t=this._previewTemplate?.template?void 0:this._initialTransform,r=OO(e,n);this._preview.style.transform=RO(r,t)}_getDragDistance(e){const n=this._pickupPositionOnPage;return n?{x:e.x-n.x,y:e.y-n.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:e,y:n}=this._passiveTransform;if(0===e&&0===n||this.isDragging()||!this._boundaryElement)return;const t=this._rootElement.getBoundingClientRect(),r=this._boundaryElement.getBoundingClientRect();if(0===r.width&&0===r.height||0===t.width&&0===t.height)return;const s=r.left-t.left,o=t.right-r.right,d=r.top-t.top,m=t.bottom-r.bottom;r.width>t.width?(s>0&&(e+=s),o>0&&(e-=o)):e=0,r.height>t.height?(d>0&&(n+=d),m>0&&(n-=m)):n=0,(e!==this._passiveTransform.x||n!==this._passiveTransform.y)&&this.setFreeDragPosition({y:n,x:e})}_getDragStartDelay(e){const n=this.dragStartDelay;return"number"==typeof n?n:Ck(e)?n.touch:n?n.mouse:0}_updateOnScroll(e){const n=this._parentPositions.handleScroll(e);if(n){const t=Rc(e);this._boundaryRect&&t!==this._boundaryElement&&t.contains(this._boundaryElement)&&xk(this._boundaryRect,n.top,n.left),this._pickupPositionOnPage.x+=n.left,this._pickupPositionOnPage.y+=n.top,this._dropContainer||(this._activeTransform.x-=n.left,this._activeTransform.y-=n.top,this._applyRootElementTransform(this._activeTransform.x,this._activeTransform.y))}}_getViewportScrollPosition(){return this._parentPositions.positions.get(this._document)?.scrollPosition||this._parentPositions.getViewportScrollPosition()}_getShadowRoot(){return void 0===this._cachedShadowRoot&&(this._cachedShadowRoot=h3(this._rootElement)),this._cachedShadowRoot}_getPreviewInsertionPoint(e,n){const t=this._previewContainer||"global";if("parent"===t)return e;if("global"===t){const r=this._document;return n||r.fullscreenElement||r.webkitFullscreenElement||r.mozFullScreenElement||r.msFullscreenElement||r.body}return Br(t)}_getPreviewRect(){return(!this._previewRect||!this._previewRect.width&&!this._previewRect.height)&&(this._previewRect=this._preview?this._preview.getBoundingClientRect():this._initialClientRect),this._previewRect}_getTargetHandle(e){return this._handles.find(n=>e.target&&(e.target===n||n.contains(e.target)))}}function OO(i,e){return`translate3d(${Math.round(i)}px, ${Math.round(e)}px, 0)`}function LK(i,e,n){return Math.max(e,Math.min(n,i))}function Ck(i){return"t"===i.type[0]}function BK(i,e){const n=i.rootNodes;if(1===n.length&&n[0].nodeType===e.ELEMENT_NODE)return n[0];const t=e.createElement("div");return n.forEach(r=>t.appendChild(r)),t}function VK(i,e){i.style.width=`${e.width}px`,i.style.height=`${e.height}px`,i.style.transform=OO(e.left,e.top)}function Ek(i,e){return Math.max(0,Math.min(e,i))}class eve{constructor(e,n){this._element=e,this._dragDropRegistry=n,this._itemPositions=[],this.orientation="vertical",this._previousSwap={drag:null,delta:0,overlaps:!1}}start(e){this.withItems(e)}sort(e,n,t,r){const s=this._itemPositions,o=this._getItemIndexFromPointerPosition(e,n,t,r);if(-1===o&&s.length>0)return null;const d="horizontal"===this.orientation,m=s.findIndex(q=>q.drag===e),f=s[o],w=f.clientRect,I=m>o?1:-1,S=this._getItemOffsetPx(s[m].clientRect,w,I),F=this._getSiblingOffsetPx(m,s,I),z=s.slice();return function Jge(i,e,n){const t=Ek(e,i.length-1),r=Ek(n,i.length-1);if(t===r)return;const s=i[t],o=r<t?-1:1;for(let d=t;d!==r;d+=o)i[d]=i[d+o];i[r]=s}(s,m,o),s.forEach((q,we)=>{if(z[we]===q)return;const Ae=q.drag===e,De=Ae?S:F,Pe=Ae?e.getPlaceholderElement():q.drag.getRootElement();q.offset+=De,d?(Pe.style.transform=RO(`translate3d(${Math.round(q.offset)}px, 0, 0)`,q.initialTransform),xk(q.clientRect,0,De)):(Pe.style.transform=RO(`translate3d(0, ${Math.round(q.offset)}px, 0)`,q.initialTransform),xk(q.clientRect,De,0))}),this._previousSwap.overlaps=Q4(w,n,t),this._previousSwap.drag=f.drag,this._previousSwap.delta=d?r.x:r.y,{previousIndex:m,currentIndex:o}}enter(e,n,t,r){const s=null==r||r<0?this._getItemIndexFromPointerPosition(e,n,t):r,o=this._activeDraggables,d=o.indexOf(e),m=e.getPlaceholderElement();let f=o[s];if(f===e&&(f=o[s+1]),!f&&(null==s||-1===s||s<o.length-1)&&this._shouldEnterAsFirstChild(n,t)&&(f=o[0]),d>-1&&o.splice(d,1),f&&!this._dragDropRegistry.isDragging(f)){const b=f.getRootElement();b.parentElement.insertBefore(m,b),o.splice(s,0,e)}else Br(this._element).appendChild(m),o.push(e);m.style.transform="",this._cacheItemPositions()}withItems(e){this._activeDraggables=e.slice(),this._cacheItemPositions()}withSortPredicate(e){this._sortPredicate=e}reset(){this._activeDraggables.forEach(e=>{const n=e.getRootElement();if(n){const t=this._itemPositions.find(r=>r.drag===e)?.initialTransform;n.style.transform=t||""}}),this._itemPositions=[],this._activeDraggables=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._previousSwap.overlaps=!1}getActiveItemsSnapshot(){return this._activeDraggables}getItemIndex(e){return("horizontal"===this.orientation&&"rtl"===this.direction?this._itemPositions.slice().reverse():this._itemPositions).findIndex(t=>t.drag===e)}updateOnScroll(e,n){this._itemPositions.forEach(({clientRect:t})=>{xk(t,e,n)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()})}_cacheItemPositions(){const e="horizontal"===this.orientation;this._itemPositions=this._activeDraggables.map(n=>{const t=n.getVisibleElement();return{drag:n,offset:0,initialTransform:t.style.transform||"",clientRect:K4(t)}}).sort((n,t)=>e?n.clientRect.left-t.clientRect.left:n.clientRect.top-t.clientRect.top)}_getItemOffsetPx(e,n,t){const r="horizontal"===this.orientation;let s=r?n.left-e.left:n.top-e.top;return-1===t&&(s+=r?n.width-e.width:n.height-e.height),s}_getSiblingOffsetPx(e,n,t){const r="horizontal"===this.orientation,s=n[e].clientRect,o=n[e+-1*t];let d=s[r?"width":"height"]*t;if(o){const m=r?"left":"top",f=r?"right":"bottom";-1===t?d-=o.clientRect[m]-s[f]:d+=s[m]-o.clientRect[f]}return d}_shouldEnterAsFirstChild(e,n){if(!this._activeDraggables.length)return!1;const t=this._itemPositions,r="horizontal"===this.orientation;if(t[0].drag!==this._activeDraggables[0]){const o=t[t.length-1].clientRect;return r?e>=o.right:n>=o.bottom}{const o=t[0].clientRect;return r?e<=o.left:n<=o.top}}_getItemIndexFromPointerPosition(e,n,t,r){const s="horizontal"===this.orientation,o=this._itemPositions.findIndex(({drag:d,clientRect:m})=>d!==e&&((!r||d!==this._previousSwap.drag||!this._previousSwap.overlaps||(s?r.x:r.y)!==this._previousSwap.delta)&&(s?n>=Math.floor(m.left)&&n<Math.floor(m.right):t>=Math.floor(m.top)&&t<Math.floor(m.bottom))));return-1!==o&&this._sortPredicate(o,e)?o:-1}}class tve{constructor(e,n,t,r,s){this._dragDropRegistry=n,this._ngZone=r,this._viewportRuler=s,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.autoScrollStep=2,this.enterPredicate=()=>!0,this.sortPredicate=()=>!0,this.beforeStarted=new Xe.x,this.entered=new Xe.x,this.exited=new Xe.x,this.dropped=new Xe.x,this.sorted=new Xe.x,this.receivingStarted=new Xe.x,this.receivingStopped=new Xe.x,this._isDragging=!1,this._draggables=[],this._siblings=[],this._activeSiblings=new Set,this._viewportScrollSubscription=rr.w0.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new Xe.x,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),function Yge(i=0,e=Cv.z){return i<0&&(i=0),l4(i,i,e)}(0,z9).pipe(xn(this._stopScrollTimers)).subscribe(()=>{const o=this._scrollNode,d=this.autoScrollStep;1===this._verticalScrollDirection?o.scrollBy(0,-d):2===this._verticalScrollDirection&&o.scrollBy(0,d),1===this._horizontalScrollDirection?o.scrollBy(-d,0):2===this._horizontalScrollDirection&&o.scrollBy(d,0)})},this.element=Br(e),this._document=t,this.withScrollableParents([this.element]),n.registerDropContainer(this),this._parentPositions=new MK(t),this._sortStrategy=new eve(this.element,n),this._sortStrategy.withSortPredicate((o,d)=>this.sortPredicate(o,d,this))}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this.receivingStarted.complete(),this.receivingStopped.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){this._draggingStarted(),this._notifyReceivingSiblings()}enter(e,n,t,r){this._draggingStarted(),null==r&&this.sortingDisabled&&(r=this._draggables.indexOf(e)),this._sortStrategy.enter(e,n,t,r),this._cacheParentPositions(),this._notifyReceivingSiblings(),this.entered.next({item:e,container:this,currentIndex:this.getItemIndex(e)})}exit(e){this._reset(),this.exited.next({item:e,container:this})}drop(e,n,t,r,s,o,d,m={}){this._reset(),this.dropped.next({item:e,currentIndex:n,previousIndex:t,container:this,previousContainer:r,isPointerOverContainer:s,distance:o,dropPoint:d,event:m})}withItems(e){const n=this._draggables;return this._draggables=e,e.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(n.filter(r=>r.isDragging()).every(r=>-1===e.indexOf(r))?this._reset():this._sortStrategy.withItems(this._draggables)),this}withDirection(e){return this._sortStrategy.direction=e,this}connectedTo(e){return this._siblings=e.slice(),this}withOrientation(e){return this._sortStrategy.orientation=e,this}withScrollableParents(e){const n=Br(this.element);return this._scrollableElements=-1===e.indexOf(n)?[n,...e]:e.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(e){return this._isDragging?this._sortStrategy.getItemIndex(e):this._draggables.indexOf(e)}isReceiving(){return this._activeSiblings.size>0}_sortItem(e,n,t,r){if(this.sortingDisabled||!this._clientRect||!AK(this._clientRect,.05,n,t))return;const s=this._sortStrategy.sort(e,n,t,r);s&&this.sorted.next({previousIndex:s.previousIndex,currentIndex:s.currentIndex,container:this,item:e})}_startScrollingIfNecessary(e,n){if(this.autoScrollDisabled)return;let t,r=0,s=0;if(this._parentPositions.positions.forEach((o,d)=>{d===this._document||!o.clientRect||t||AK(o.clientRect,.05,e,n)&&([r,s]=function nve(i,e,n,t){const r=zK(e,t),s=jK(e,n);let o=0,d=0;if(r){const m=i.scrollTop;1===r?m>0&&(o=1):i.scrollHeight-m>i.clientHeight&&(o=2)}if(s){const m=i.scrollLeft;1===s?m>0&&(d=1):i.scrollWidth-m>i.clientWidth&&(d=2)}return[o,d]}(d,o.clientRect,e,n),(r||s)&&(t=d))}),!r&&!s){const{width:o,height:d}=this._viewportRuler.getViewportSize(),m={width:o,height:d,top:0,right:o,bottom:d,left:0};r=zK(m,n),s=jK(m,e),t=window}t&&(r!==this._verticalScrollDirection||s!==this._horizontalScrollDirection||t!==this._scrollNode)&&(this._verticalScrollDirection=r,this._horizontalScrollDirection=s,this._scrollNode=t,(r||s)&&t?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_draggingStarted(){const e=Br(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=e.msScrollSnapType||e.scrollSnapType||"",e.scrollSnapType=e.msScrollSnapType="none",this._sortStrategy.start(this._draggables),this._cacheParentPositions(),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}_cacheParentPositions(){const e=Br(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(e).clientRect}_reset(){this._isDragging=!1;const e=Br(this.element).style;e.scrollSnapType=e.msScrollSnapType=this._initialScrollSnap,this._siblings.forEach(n=>n._stopReceiving(this)),this._sortStrategy.reset(),this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_isOverContainer(e,n){return null!=this._clientRect&&Q4(this._clientRect,e,n)}_getSiblingContainerFromPosition(e,n,t){return this._siblings.find(r=>r._canReceive(e,n,t))}_canReceive(e,n,t){if(!this._clientRect||!Q4(this._clientRect,n,t)||!this.enterPredicate(e,this))return!1;const r=this._getShadowRoot().elementFromPoint(n,t);if(!r)return!1;const s=Br(this.element);return r===s||s.contains(r)}_startReceiving(e,n){const t=this._activeSiblings;!t.has(e)&&n.every(r=>this.enterPredicate(r,this)||this._draggables.indexOf(r)>-1)&&(t.add(e),this._cacheParentPositions(),this._listenToScrollEvents(),this.receivingStarted.next({initiator:e,receiver:this,items:n}))}_stopReceiving(e){this._activeSiblings.delete(e),this._viewportScrollSubscription.unsubscribe(),this.receivingStopped.next({initiator:e,receiver:this})}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scrolled(this._getShadowRoot()).subscribe(e=>{if(this.isDragging()){const n=this._parentPositions.handleScroll(e);n&&this._sortStrategy.updateOnScroll(n.top,n.left)}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const e=h3(Br(this.element));this._cachedShadowRoot=e||this._document}return this._cachedShadowRoot}_notifyReceivingSiblings(){const e=this._sortStrategy.getActiveItemsSnapshot().filter(n=>n.isDragging());this._siblings.forEach(n=>n._startReceiving(this,e))}}function zK(i,e){const{top:n,bottom:t,height:r}=i,s=.05*r;return e>=n-s&&e<=n+s?1:e>=t-s&&e<=t+s?2:0}function jK(i,e){const{left:n,right:t,width:r}=i,s=.05*r;return e>=n-s&&e<=n+s?1:e>=t-s&&e<=t+s?2:0}const NO=Wa({passive:!1,capture:!0});let ive=(()=>{var i;class e{constructor(t,r){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=[],this._globalListeners=new Map,this._draggingPredicate=s=>s.isDragging(),this.pointerMove=new Xe.x,this.pointerUp=new Xe.x,this.scroll=new Xe.x,this._preventDefaultWhileDragging=s=>{this._activeDragInstances.length>0&&s.preventDefault()},this._persistentTouchmoveListener=s=>{this._activeDragInstances.length>0&&(this._activeDragInstances.some(this._draggingPredicate)&&s.preventDefault(),this.pointerMove.next(s))},this._document=r}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._persistentTouchmoveListener,NO)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._persistentTouchmoveListener,NO)}startDragging(t,r){if(!(this._activeDragInstances.indexOf(t)>-1)&&(this._activeDragInstances.push(t),1===this._activeDragInstances.length)){const s=r.type.startsWith("touch");this._globalListeners.set(s?"touchend":"mouseup",{handler:o=>this.pointerUp.next(o),options:!0}).set("scroll",{handler:o=>this.scroll.next(o),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:NO}),s||this._globalListeners.set("mousemove",{handler:o=>this.pointerMove.next(o),options:NO}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((o,d)=>{this._document.addEventListener(d,o.handler,o.options)})})}}stopDragging(t){const r=this._activeDragInstances.indexOf(t);r>-1&&(this._activeDragInstances.splice(r,1),0===this._activeDragInstances.length&&this._clearGlobalListeners())}isDragging(t){return this._activeDragInstances.indexOf(t)>-1}scrolled(t){const r=[this.scroll];return t&&t!==this._document&&r.push(new Bi.y(s=>this._ngZone.runOutsideAngular(()=>{const d=m=>{this._activeDragInstances.length&&s.next(m)};return t.addEventListener("scroll",d,!0),()=>{t.removeEventListener("scroll",d,!0)}}))),(0,wo.T)(...r)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,r)=>{this._document.removeEventListener(r,t.handler,t.options)}),this._globalListeners.clear()}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(l.R0b),l.LFG(re))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})();const rve={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let J4=(()=>{var i;class e{constructor(t,r,s,o){this._document=t,this._ngZone=r,this._viewportRuler=s,this._dragDropRegistry=o}createDrag(t,r=rve){return new Xge(t,r,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new tve(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return(i=e).\u0275fac=function(t){return new(t||i)(l.LFG(re),l.LFG(l.R0b),l.LFG(pk),l.LFG(ive))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),e})(),YK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[J4],imports:[Yu]}),e})(),oH=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),e})(),ZK=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[oH,Tt,Tt]}),e})(),wve=[wO,MO,sk,yO,nZ,iZ,cZ,ok,pZ,zY,bZ,kZ,RZ,lY,BZ,T4,HZ,lk,jZ,sk,s9,yO,ZZ,KZ,QZ,XZ,nK,qa,A4,wO,sK,cK,lK,dK,fK,IK,kK,MO,M4,tb,YK,Wq,Aw,Zu,Uq,Al,_k,O4,W4,L3,oH,ZK],xve=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[Ja],imports:[wve,wO,MO,sk,yO,nZ,iZ,cZ,ok,pZ,zY,bZ,kZ,RZ,lY,BZ,T4,HZ,lk,jZ,sk,s9,yO,ZZ,KZ,QZ,XZ,nK,qa,A4,wO,sK,cK,lK,dK,fK,IK,kK,MO,M4,tb,YK,Wq,Aw,Zu,Uq,Al,_k,O4,W4,L3,oH,ZK]}),e})();class Cve{constructor(e,n){this._delegate=e,this.firebase=n,(0,cn._addComponent)(e,new cs.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,cn.deleteApp)(this._delegate)))}_getService(e,n=cn._DEFAULT_ENTRY_NAME){var t;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)&&r.initialize(),r.getImmediate({identifier:n})}_removeServiceInstance(e,n=cn._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){(0,cn._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,cn._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const KK=new R.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Dve=function QK(){const i=function Ive(i){const e={},n={__esModule:!0,initializeApp:function s(f,b={}){const w=cn.initializeApp(f,b);if((0,R.r3)(e,w.name))return e[w.name];const I=new i(w,n);return e[w.name]=I,I},app:r,registerVersion:cn.registerVersion,setLogLevel:cn.setLogLevel,onLog:cn.onLog,apps:null,SDK_VERSION:cn.SDK_VERSION,INTERNAL:{registerComponent:function d(f){const b=f.name,w=b.replace("-compat","");if(cn._registerComponent(f)&&"PUBLIC"===f.type){const I=(S=r())=>{if("function"!=typeof S[w])throw KK.create("invalid-app-argument",{appName:b});return S[w]()};void 0!==f.serviceProps&&(0,R.ZB)(I,f.serviceProps),n[w]=I,i.prototype[w]=function(...S){return this._getService.bind(this,b).apply(this,f.multipleInstances?S:[])}}return"PUBLIC"===f.type?n[w]:null},removeApp:function t(f){delete e[f]},useAsService:function m(f,b){return"serverAuth"===b?null:b},modularAPIs:cn}};function r(f){if(!(0,R.r3)(e,f=f||cn._DEFAULT_ENTRY_NAME))throw KK.create("no-app",{appName:f});return e[f]}return n.default=n,Object.defineProperty(n,"apps",{get:function o(){return Object.keys(e).map(f=>e[f])}}),r.App=i,n}(Cve);return i.INTERNAL=Object.assign(Object.assign({},i.INTERNAL),{createFirebaseNamespace:QK,extendNamespace:function e(n){(0,R.ZB)(i,n)},createSubscribe:R.ne,ErrorFactory:R.LL,deepExtend:R.ZB}),i}(),XK=new Cs.Yd("@firebase/app-compat");if((0,R.jU)()&&void 0!==self.firebase){XK.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const i=self.firebase.SDK_VERSION;i&&i.indexOf("LITE")>=0&&XK.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ave=Dve;var JK;!function Sve(i){(0,cn.registerVersion)("@firebase/app-compat","0.2.18",i)}();const eQ="firebasestorage.googleapis.com",tQ="storageBucket";class xr extends R.ZR{constructor(e,n,t=0){super(cH(e),`Firebase Storage: ${n} (${cH(e)})`),this.status_=t,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,xr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return cH(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ur=function(i){return i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment",i}(ur||{});function cH(i){return"storage/"+i}function lH(){return new xr(ur.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function nQ(){return new xr(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function iQ(){return new xr(ur.CANCELED,"User canceled the upload/download.")}function rQ(){return new xr(ur.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function qw(i){return new xr(ur.INVALID_ARGUMENT,i)}function sQ(){return new xr(ur.APP_DELETED,"The Firebase app was deleted.")}function oQ(i){return new xr(ur.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dk(i,e){return new xr(ur.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function kk(i){throw new xr(ur.INTERNAL_ERROR,"Internal error: "+i)}class Yo{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let t;try{t=Yo.makeFromUrl(e,n)}catch{return new Yo(e,"")}if(""===t.path)return t;throw function Uve(i){return new xr(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}(e)}static makeFromUrl(e,n){let t=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function f(Pe){Pe.path_=decodeURIComponent(Pe.path)}const w=n.replace(/[.]/g,"\\."),De=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Pe){"/"===Pe.path.charAt(Pe.path.length-1)&&(Pe.path_=Pe.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${w}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:f},{regex:new RegExp(`^https?://${n===eQ?"(?:storage.googleapis.com|storage.cloud.google.com)":n}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:f}];for(let Pe=0;Pe<De.length;Pe++){const gt=De[Pe],Nt=gt.regex.exec(e);if(Nt){let di=Nt[gt.indices.path];di||(di=""),t=new Yo(Nt[gt.indices.bucket],di),gt.postModify(t);break}}if(null==t)throw function Vve(i){return new xr(ur.INVALID_URL,"Invalid URL '"+i+"'.")}(e);return t}}class $ve{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function BO(i){return"string"==typeof i||i instanceof String}function aQ(i){return dH()&&i instanceof Blob}function dH(){return typeof Blob<"u"&&!(0,R.UG)()}function uH(i,e,n,t){if(t<e)throw qw(`Invalid value for '${i}'. Expected ${e} or greater.`);if(t>n)throw qw(`Invalid value for '${i}'. Expected ${n} or less.`)}function Lm(i,e,n){let t=e;return null==n&&(t=`https://${e}`),`${n}://${t}/v0${i}`}function cQ(i){const e=encodeURIComponent;let n="?";for(const t in i)i.hasOwnProperty(t)&&(n=n+(e(t)+"=")+e(i[t])+"&");return n=n.slice(0,-1),n}var Yw=function(i){return i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT",i}(Yw||{});function lQ(i,e){const n=i>=500&&i<600,r=-1!==[408,429].indexOf(i),s=-1!==e.indexOf(i);return n||r||s}class Qve{constructor(e,n,t,r,s,o,d,m,f,b,w,I=!0){this.url_=e,this.method_=n,this.headers_=t,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=d,this.errorCallback_=m,this.timeout_=f,this.progressCallback_=b,this.connectionFactory_=w,this.retry=I,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((S,F)=>{this.resolve_=S,this.reject_=F,this.start_()})}start_(){const n=(t,r)=>{const s=this.resolve_,o=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const m=this.callback_(d,d.getResponse());!function Yve(i){return void 0!==i}(m)?s():s(m)}catch(m){o(m)}else if(null!==d){const m=lH();m.serverResponse=d.getErrorText(),o(this.errorCallback_?this.errorCallback_(d,m):m)}else o(r.canceled?this.appDelete_?sQ():iQ():nQ())};this.canceled_?n(0,new VO(!1,null,!0)):this.backoffId_=function Wve(i,e,n){let t=1,r=null,s=null,o=!1,d=0;function m(){return 2===d}let f=!1;function b(...q){f||(f=!0,e.apply(null,q))}function w(q){r=setTimeout(()=>{r=null,i(S,m())},q)}function I(){s&&clearTimeout(s)}function S(q,...we){if(f)return void I();if(q)return I(),void b.call(null,q,...we);if(m()||o)return I(),void b.call(null,q,...we);let De;t<64&&(t*=2),1===d?(d=2,De=0):De=1e3*(t+Math.random()),w(De)}let F=!1;function z(q){F||(F=!0,I(),!f&&(null!==r?(q||(d=2),clearTimeout(r),w(0)):q||(d=1)))}return w(0),s=setTimeout(()=>{o=!0,z(!0)},n),z}((t,r)=>{if(r)return void t(!1,new VO(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const d=s.getErrorCode()===Yw.NO_ERROR,m=s.getStatus();if(!d||lQ(m,this.additionalRetryCodes_)&&this.retry){const b=s.getErrorCode()===Yw.ABORT;return void t(!1,new VO(!1,null,b))}const f=-1!==this.successCodes_.indexOf(m);t(!0,new VO(f,s))})},n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function qve(i){i(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class VO{constructor(e,n,t){this.wasSuccessCode=e,this.connection=n,this.canceled=!!t}}function rbe(...i){const e=function ibe(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const n=new e;for(let t=0;t<i.length;t++)n.append(i[t]);return n.getBlob()}if(dH())return new Blob(i);throw new xr(ur.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Nc={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class hH{constructor(e,n){this.data=e,this.contentType=n||null}}function mH(i,e){switch(i){case Nc.RAW:return new hH(dQ(e));case Nc.BASE64:case Nc.BASE64URL:return new hH(uQ(i,e));case Nc.DATA_URL:return new hH(function cbe(i){const e=new hQ(i);return e.base64?uQ(Nc.BASE64,e.rest):function abe(i){let e;try{e=decodeURIComponent(i)}catch{throw Dk(Nc.DATA_URL,"Malformed data URL.")}return dQ(e)}(e.rest)}(e),function lbe(i){return new hQ(i).contentType}(e))}throw lH()}function dQ(i){const e=[];for(let n=0;n<i.length;n++){let t=i.charCodeAt(n);t<=127?e.push(t):t<=2047?e.push(192|t>>6,128|63&t):55296==(64512&t)?n<i.length-1&&56320==(64512&i.charCodeAt(n+1))?(t=65536|(1023&t)<<10|1023&i.charCodeAt(++n),e.push(240|t>>18,128|t>>12&63,128|t>>6&63,128|63&t)):e.push(239,191,189):56320==(64512&t)?e.push(239,191,189):e.push(224|t>>12,128|t>>6&63,128|63&t)}return new Uint8Array(e)}function uQ(i,e){switch(i){case Nc.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Dk(i,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Nc.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Dk(i,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=function obe(i){if(typeof atob>"u")throw function Gve(i){return new xr(ur.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(i)}(e)}catch(r){throw r.message.includes("polyfill")?r:Dk(i,"Invalid character found")}const t=new Uint8Array(n.length);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}class hQ{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(null===n)throw Dk(Nc.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const t=n[1]||null;null!=t&&(this.base64=function dbe(i,e){return i.length>=e.length&&i.substring(i.length-e.length)===e}(t,";base64"),this.contentType=this.base64?t.substring(0,t.length-7):t),this.rest=e.substring(e.indexOf(",")+1)}}class Qu{constructor(e,n){let t=0,r="";aQ(e)?(this.data_=e,t=e.size,r=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),t=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),t=e.length),this.size_=t,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,n){if(aQ(this.data_)){const r=function sbe(i,e,n){return i.webkitSlice?i.webkitSlice(e,n):i.mozSlice?i.mozSlice(e,n):i.slice?i.slice(e,n):null}(this.data_,e,n);return null===r?null:new Qu(r)}{const t=new Uint8Array(this.data_.buffer,e,n-e);return new Qu(t,!0)}}static getBlob(...e){if(dH()){const n=e.map(t=>t instanceof Qu?t.data_:t);return new Qu(rbe.apply(null,n))}{const n=e.map(o=>BO(o)?mH(Nc.RAW,o).data:o.data_);let t=0;n.forEach(o=>{t+=o.byteLength});const r=new Uint8Array(t);let s=0;return n.forEach(o=>{for(let d=0;d<o.length;d++)r[s++]=o[d]}),new Qu(r,!0)}}uploadData(){return this.data_}}function fH(i){let e;try{e=JSON.parse(i)}catch{return null}return function Kve(i){return"object"==typeof i&&!Array.isArray(i)}(e)?e:null}function mQ(i){const e=i.lastIndexOf("/",i.length-2);return-1===e?i:i.slice(e+1)}function mbe(i,e){return e}class ba{constructor(e,n,t,r){this.server=e,this.local=n||e,this.writable=!!t,this.xform=r||mbe}}let UO=null;function Tk(){if(UO)return UO;const i=[];i.push(new ba("bucket")),i.push(new ba("generation")),i.push(new ba("metageneration")),i.push(new ba("name","fullPath",!0));const n=new ba("name");n.xform=function e(s,o){return function fbe(i){return!BO(i)||i.length<2?i:mQ(i)}(o)},i.push(n);const r=new ba("size");return r.xform=function t(s,o){return void 0!==o?Number(o):o},i.push(r),i.push(new ba("timeCreated")),i.push(new ba("updated")),i.push(new ba("md5Hash",null,!0)),i.push(new ba("cacheControl",null,!0)),i.push(new ba("contentDisposition",null,!0)),i.push(new ba("contentEncoding",null,!0)),i.push(new ba("contentLanguage",null,!0)),i.push(new ba("contentType",null,!0)),i.push(new ba("metadata","customMetadata",!0)),UO=i,UO}function fQ(i,e,n){const t=fH(e);return null===t?null:function _be(i,e,n){const t={type:"file"},r=n.length;for(let s=0;s<r;s++){const o=n[s];t[o.local]=o.xform(t,e[o.server])}return function pbe(i,e){Object.defineProperty(i,"ref",{get:function n(){const s=new Yo(i.bucket,i.fullPath);return e._makeStorageReference(s)}})}(t,i),t}(i,t,n)}function pH(i,e){const n={},t=e.length;for(let r=0;r<t;r++){const s=e[r];s.writable&&(n[s.server]=i[s.local])}return JSON.stringify(n)}const pQ="prefixes",_Q="items";class Xu{constructor(e,n,t,r){this.url=e,this.method=n,this.handler=t,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ju(i){if(!i)throw lH()}function HO(i,e){return function n(t,r){const s=fQ(i,r,e);return Ju(null!==s),s}}function Zw(i){return function e(n,t){let r;return r=401===n.getStatus()?n.getErrorText().includes("Firebase App Check token is invalid")?function Lve(){return new xr(ur.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Fve(){return new xr(ur.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===n.getStatus()?function Nve(i){return new xr(ur.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(i.bucket):403===n.getStatus()?function Bve(i){return new xr(ur.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}(i.path):t,r.status=n.getStatus(),r.serverResponse=t.serverResponse,r}}function Sk(i){const e=Zw(i);return function n(t,r){let s=e(t,r);return 404===t.getStatus()&&(s=function Ove(i){return new xr(ur.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}(i.path)),s.serverResponse=r.serverResponse,s}}function gQ(i,e,n){const r=Lm(e.fullServerUrl(),i.host,i._protocol),o=i.maxOperationRetryTime,d=new Xu(r,"GET",HO(i,n),o);return d.errorHandler=Sk(e),d}function xbe(i,e,n,t,r){const s={};s.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(s.delimiter=n),t&&(s.pageToken=t),r&&(s.maxResults=r);const d=Lm(e.bucketOnlyServerUrl(),i.host,i._protocol),f=i.maxOperationRetryTime,b=new Xu(d,"GET",function ybe(i,e){return function n(t,r){const s=function bbe(i,e,n){const t=fH(n);return null===t?null:function vbe(i,e,n){const t={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[pQ])for(const r of n[pQ]){const s=r.replace(/\/$/,""),o=i._makeStorageReference(new Yo(e,s));t.prefixes.push(o)}if(n[_Q])for(const r of n[_Q]){const s=i._makeStorageReference(new Yo(e,r.name));t.items.push(s)}return t}(i,e,t)}(i,e,r);return Ju(null!==s),s}}(i,e.bucket),f);return b.urlParams=s,b.errorHandler=Zw(e),b}function bQ(i,e,n){const t=Object.assign({},n);return t.fullPath=i.path,t.size=e.size(),t.contentType||(t.contentType=function Dbe(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}(null,e)),t}class zO{constructor(e,n,t,r){this.current=e,this.total=n,this.finalized=!!t,this.metadata=r||null}}function _H(i,e){let n=null;try{n=i.getResponseHeader("X-Goog-Upload-Status")}catch{Ju(!1)}return Ju(!!n&&-1!==(e||["active"]).indexOf(n)),n}const Abe={STATE_CHANGED:"state_changed"},ya={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function gH(i){switch(i){case"running":case"pausing":case"canceling":return ya.RUNNING;case"paused":return ya.PAUSED;case"success":return ya.SUCCESS;case"canceled":return ya.CANCELED;default:return ya.ERROR}}class Mbe{constructor(e,n,t){if(function Zve(i){return"function"==typeof i}(e)||null!=n||null!=t)this.next=e,this.error=n??void 0,this.complete=t??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Kw(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}let xQ=null;class Rbe{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yw.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yw.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yw.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,t,r){if(this.sent_)throw kk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==t?this.xhr_.send(t):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw kk("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw kk("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw kk("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw kk("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Pbe extends Rbe{initXhr(){this.xhr_.responseType="text"}}function Vd(){return xQ?xQ():new Pbe}class CQ{constructor(e,n,t=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=t,this._mappings=Tk(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals(ur.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(lQ(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=nQ()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals(ur.CANCELED)?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,t])=>{switch(this._state){case"running":e(n,t);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,n)=>{const t=function kbe(i,e,n,t,r){const s=e.bucketOnlyServerUrl(),o=bQ(e,t,r),d={name:o.fullPath},m=Lm(s,i.host,i._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},w=pH(o,n),F=new Xu(m,"POST",function S(z){let q;_H(z);try{q=z.getResponseHeader("X-Goog-Upload-URL")}catch{Ju(!1)}return Ju(BO(q)),q},i.maxUploadRetryTime);return F.urlParams=d,F.headers=b,F.body=w,F.errorHandler=Zw(e),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(t,Vd,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,t)=>{const r=function Tbe(i,e,n,t){const m=new Xu(n,"POST",function s(f){const b=_H(f,["active","final"]);let w=null;try{w=f.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ju(!1)}w||Ju(!1);const I=Number(w);return Ju(!isNaN(I)),new zO(I,t.size(),"final"===b)},i.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Zw(e),m}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,Vd,n,t);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,n=new zO(this._transferred,this._blob.size()),t=this._uploadUrl;this._resolveToken((r,s)=>{let o;try{o=function Sbe(i,e,n,t,r,s,o,d){const m=new zO(0,0);if(o?(m.current=o.current,m.total=o.total):(m.current=0,m.total=t.size()),t.size()!==m.total)throw function zve(){return new xr(ur.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const f=m.total-m.current;let b=f;r>0&&(b=Math.min(b,r));const w=m.current;let S="";S=0===b?"finalize":f===b?"upload, finalize":"upload";const F={"X-Goog-Upload-Command":S,"X-Goog-Upload-Offset":`${m.current}`},z=t.slice(w,w+b);if(null===z)throw rQ();const De=new Xu(n,"POST",function q(Pe,gt){const Nt=_H(Pe,["active","final"]),un=m.current+b,di=t.size();let ki;return ki="final"===Nt?HO(e,s)(Pe,gt):null,new zO(un,di,"final"===Nt,ki)},e.maxUploadRetryTime);return De.headers=F,De.body=z.uploadData(),De.progressCallback=d||null,De.errorHandler=Zw(i),De}(this._ref._location,this._ref.storage,t,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const d=this._ref.storage._makeRequest(o,Vd,r,s,!1);this._request=d,d.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const t=gQ(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(t,Vd,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const t=function yQ(i,e,n,t,r){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},m=function d(){let De="";for(let Pe=0;Pe<2;Pe++)De+=Math.random().toString().slice(2);return De}();o["Content-Type"]="multipart/related; boundary="+m;const f=bQ(e,t,r),b=pH(f,n),S=Qu.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+m+"\r\nContent-Type: "+f.contentType+"\r\n\r\n",t,"\r\n--"+m+"--");if(null===S)throw rQ();const F={name:f.fullPath},z=Lm(s,i.host,i._protocol),we=i.maxUploadRetryTime,Ae=new Xu(z,"POST",HO(i,n),we);return Ae.urlParams=F,Ae.headers=o,Ae.body=S.uploadData(),Ae.errorHandler=Zw(e),Ae}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(t,Vd,e,n);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n="paused"===this._state;this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=iQ(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=gH(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,t,r){const s=new Mbe(n||void 0,t||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);-1!==n&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(gH(this._state)){case ya.SUCCESS:Kw(this._resolve.bind(null,this.snapshot))();break;case ya.CANCELED:case ya.ERROR:Kw(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(gH(this._state)){case ya.RUNNING:case ya.PAUSED:e.next&&Kw(e.next.bind(e,this.snapshot))();break;case ya.SUCCESS:e.complete&&Kw(e.complete.bind(e))();break;default:e.error&&Kw(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class ub{constructor(e,n){this._service=e,this._location=n instanceof Yo?n:Yo.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ub(e,n)}get root(){const e=new Yo(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return mQ(this._location.path)}get storage(){return this._service}get parent(){const e=function ube(i){if(0===i.length)return null;const e=i.lastIndexOf("/");return-1===e?"":i.slice(0,e)}(this._location.path);if(null===e)return null;const n=new Yo(this._location.bucket,e);return new ub(this._service,n)}_throwIfRoot(e){if(""===this._location.path)throw oQ(e)}}function zbe(i){const e={prefixes:[],items:[]};return IQ(i,e).then(()=>e)}function IQ(i,e,n){return(JK=JK||(0,ee.Z)(function*(t,r,s){const d=yield DQ(t,{pageToken:s});r.prefixes.push(...d.prefixes),r.items.push(...d.items),null!=d.nextPageToken&&(yield IQ(t,r,d.nextPageToken))})).apply(this,arguments)}function DQ(i,e){null!=e&&"number"==typeof e.maxResults&&uH("options.maxResults",1,1e3,e.maxResults);const n=e||{},t=xbe(i.storage,i._location,"/",n.pageToken,n.maxResults);return i.storage.makeRequestWithTokens(t,Vd)}function $be(i){i._throwIfRoot("getDownloadURL");const e=function Cbe(i,e,n){const r=Lm(e.fullServerUrl(),i.host,i._protocol),o=i.maxOperationRetryTime,d=new Xu(r,"GET",function wbe(i,e){return function n(t,r){const s=fQ(i,r,e);return Ju(null!==s),function gbe(i,e,n,t){const r=fH(e);if(null===r||!BO(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(f=>{const w=i.fullPath;return Lm("/b/"+o(i.bucket)+"/o/"+o(w),n,t)+cQ({alt:"media",token:f})})[0]}(s,r,i.host,i._protocol)}}(i,n),o);return d.errorHandler=Sk(e),d}(i.storage,i._location,Tk());return i.storage.makeRequestWithTokens(e,Vd).then(n=>{if(null===n)throw function jve(){return new xr(ur.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return n})}function kQ(i,e){const n=function hbe(i,e){const n=e.split("/").filter(t=>t.length>0).join("/");return 0===i.length?n:i+"/"+n}(i._location.path,e),t=new Yo(i._location.bucket,n);return new ub(i.storage,t)}function TQ(i,e){if(i instanceof vH){const n=i;if(null==n._bucket)throw function Hve(){return new xr(ur.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+tQ+"' property when initializing the app?")}();const t=new ub(n,n._bucket);return null!=e?TQ(t,e):t}return void 0!==e?kQ(i,e):i}function Zbe(i,e){if(e&&function qbe(i){return/^[A-Za-z]+:\/\//.test(i)}(e)){if(i instanceof vH)return function Ybe(i,e){return new ub(i,e)}(i,e);throw qw("To use ref(service, url), the first argument must be a Storage instance.")}return TQ(i,e)}function SQ(i,e){const n=e?.[tQ];return null==n?null:Yo.makeFromBucketSpec(n,i)}class vH{constructor(e,n,t,r,s){this.app=e,this._authProvider=n,this._appCheckProvider=t,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=eQ,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Yo.makeFromBucketSpec(r,this._host):SQ(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Yo.makeFromBucketSpec(this._url,e):SQ(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){uH("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){uH("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const n=e._authProvider.getImmediate({optional:!0});if(n){const t=yield n.getToken();if(null!==t)return t.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,ee.Z)(function*(){const n=e._appCheckProvider.getImmediate({optional:!0});return n?(yield n.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ub(this,e)}_makeRequest(e,n,t,r,s=!0){if(this._deleted)return new $ve(sQ());{const o=function nbe(i,e,n,t,r,s,o=!0){const d=cQ(i.urlParams),m=i.url+d,f=Object.assign({},i.headers);return function ebe(i,e){e&&(i["X-Firebase-GMPID"]=e)}(f,e),function Xve(i,e){null!==e&&e.length>0&&(i.Authorization="Firebase "+e)}(f,n),function Jve(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(f,s),function tbe(i,e){null!==e&&(i["X-Firebase-AppCheck"]=e)}(f,t),new Qve(m,i.method,f,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,r,o)}(e,this._appId,t,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,n){var t=this;return(0,ee.Z)(function*(){const[r,s]=yield Promise.all([t._getAuthToken(),t._getAppCheckToken()]);return t._makeRequest(e,n,r,s).getPromise()})()}}const AQ="@firebase/storage";function PQ(i,e){return Zbe(i=(0,R.m9)(i),e)}function sye(i,{instanceIdentifier:e}){const n=i.getProvider("app").getImmediate(),t=i.getProvider("auth-internal"),r=i.getProvider("app-check-internal");return new vH(n,t,r,e,cn.SDK_VERSION)}!function oye(){(0,cn._registerComponent)(new cs.wA("storage",sye,"PUBLIC").setMultipleInstances(!0)),(0,cn.registerVersion)(AQ,"0.11.2",""),(0,cn.registerVersion)(AQ,"0.11.2","esm2017")}();class jO{constructor(e,n,t){this._delegate=e,this.task=n,this.ref=t}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class NQ{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new jO(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(t=>{if(e)return e(new jO(t,this,this._ref))},n)}on(e,n,t,r){let s;return n&&(s="function"==typeof n?o=>n(new jO(o,this,this._ref)):{next:n.next?o=>n.next(new jO(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,t||void 0,r||void 0)}}class FQ{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Bm(e,this._service))}get items(){return this._delegate.items.map(e=>new Bm(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Bm{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=function rye(i,e){return kQ(i,e)}(this._delegate,e);return new Bm(n,this.storage)}get root(){return new Bm(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Bm(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new NQ(function Qbe(i,e,n){return function Ube(i,e,n){return i._throwIfRoot("uploadBytesResumable"),new CQ(i,new Qu(e),n)}(i=(0,R.m9)(i),e,n)}(this._delegate,e,n),this)}putString(e,n=Nc.RAW,t){this._throwIfRoot("putString");const r=mH(n,e),s=Object.assign({},t);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new NQ(new CQ(this._delegate,new Qu(r.data,!0),s),this)}listAll(){return function tye(i){return zbe(i=(0,R.m9)(i))}(this._delegate).then(e=>new FQ(e,this.storage))}list(e){return function eye(i,e){return DQ(i=(0,R.m9)(i),e)}(this._delegate,e||void 0).then(n=>new FQ(n,this.storage))}getMetadata(){return function Xbe(i){return function jbe(i){i._throwIfRoot("getMetadata");const e=gQ(i.storage,i._location,Tk());return i.storage.makeRequestWithTokens(e,Vd)}(i=(0,R.m9)(i))}(this._delegate)}updateMetadata(e){return function Jbe(i,e){return function Gbe(i,e){i._throwIfRoot("updateMetadata");const n=function Ebe(i,e,n,t){const s=Lm(e.fullServerUrl(),i.host,i._protocol),d=pH(n,t),f=i.maxOperationRetryTime,b=new Xu(s,"PATCH",HO(i,t),f);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=d,b.errorHandler=Sk(e),b}(i.storage,i._location,e,Tk());return i.storage.makeRequestWithTokens(n,Vd)}(i=(0,R.m9)(i),e)}(this._delegate,e)}getDownloadURL(){return function nye(i){return $be(i=(0,R.m9)(i))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function iye(i){return function Wbe(i){i._throwIfRoot("deleteObject");const e=function Ibe(i,e){const t=Lm(e.fullServerUrl(),i.host,i._protocol),d=new Xu(t,"DELETE",function o(m,f){},i.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=Sk(e),d}(i.storage,i._location);return i.storage.makeRequestWithTokens(e,Vd)}(i=(0,R.m9)(i))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw oQ(e)}}class LQ{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(BQ(e))throw qw("ref() expected a child path but got a URL, use refFromURL instead.");return new Bm(PQ(this._delegate,e),this)}refFromURL(e){if(!BQ(e))throw qw("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Yo.makeFromUrl(e,this._delegate.host)}catch{throw qw("refFromUrl() expected a valid full URL but got an invalid one.")}return new Bm(PQ(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,t={}){!function OQ(i,e,n,t={}){!function Kbe(i,e,n,t={}){i.host=`${e}:${n}`,i._protocol="http";const{mockUserToken:r}=t;r&&(i._overrideAuthToken="string"==typeof r?r:(0,R.Sg)(r,i.app.options.projectId))}(i,e,n,t)}(this._delegate,e,n,t)}}function BQ(i){return/^[A-Za-z]+:\/\//.test(i)}function dye(i,{instanceIdentifier:e}){const n=i.getProvider("app-compat").getImmediate(),t=i.getProvider("storage").getImmediate({identifier:e});return new LQ(n,t)}function VQ(i){const e=function hye(i){return new Bi.y(e=>{const n=o=>e.next(o);n(i.snapshot);const s=i.on("state_changed",n);return i.then(o=>{n(o),e.complete()},o=>{n(i.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(FP(0))}(i);return{task:i,then:i.then.bind(i),catch:i.catch.bind(i),pause:i.pause.bind(i),cancel:i.cancel.bind(i),resume:i.resume.bind(i),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Ct.U)(n=>n.bytesTransferred/n.totalBytes*100))}}function GO(i){return{getDownloadURL:()=>(0,ft.of)(void 0).pipe(ti.fc,(0,ri.w)(()=>i.getDownloadURL()),ti.iC),getMetadata:()=>(0,ft.of)(void 0).pipe(ti.fc,(0,ri.w)(()=>i.getMetadata()),ti.iC),delete:()=>(0,zn.D)(i.delete()),child:e=>GO(i.child(e)),updateMetadata:e=>(0,zn.D)(i.updateMetadata(e)),put:(e,n)=>VQ(i.put(e,n)),putString:(e,n,t)=>VQ(i.putString(e,n,t)),list:e=>(0,zn.D)(i.list(e)),listAll:()=>(0,zn.D)(i.listAll())}}!function uye(i){const e={TaskState:ya,TaskEvent:Abe,StringFormat:Nc,Storage:LQ,Reference:Bm};i.INTERNAL.registerComponent(new cs.wA("storage-compat",dye,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),i.registerVersion("@firebase/storage-compat","0.3.2")}(Ave);const mye=new l.OlP("angularfire2.storageBucket"),fye=new l.OlP("angularfire2.storage.maxUploadRetryTime"),pye=new l.OlP("angularfire2.storage.maxOperationRetryTime"),_ye=new l.OlP("angularfire2.storage.use-emulator");let gye=(()=>{class i{constructor(n,t,r,s,o,d,m,f,b,w){const I=(0,ks.on)(n,o,t);this.storage=(0,ks.cc)(`${I.name}.storage.${r}`,"AngularFireStorage",I.name,()=>{const S=o.runOutsideAngular(()=>I.storage(r||void 0)),F=b;return F&&S.useEmulator(...F),m&&S.setMaxUploadRetryTime(m),f&&S.setMaxOperationRetryTime(f),S},[m,f])}ref(n){return GO(this.storage.ref(n))}refFromURL(n){return GO(this.storage.refFromURL(n))}upload(n,t,r){return GO(this.storage.ref(n)).put(t,r)}}return i.\u0275fac=function(n){return new(n||i)(l.LFG(ks.Dh),l.LFG(ks.xv,8),l.LFG(mye,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(ti.HU),l.LFG(fye,8),l.LFG(pye,8),l.LFG(_ye,8),l.LFG(HD,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),vye=(()=>{class i{}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),i})(),bye=(()=>{class i{constructor(){vP.Z.registerVersion("angularfire",ti.q4.full,"gcs-compat")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[gye],imports:[vye]}),i})();const UQ="@firebase/database";let bH="";function zQ(i){bH=i}class xye{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){null==n?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Wl)(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return null==n?null:(0,R.cI)(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Cye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){null==n?delete this.cache_[e]:this.cache_[e]=n}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const jQ=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new xye(e)}}catch{}return new Cye},hb=jQ("localStorage"),yH=jQ("sessionStorage"),Qw=new Cs.Yd("@firebase/database"),GQ=function(){let i=1;return function(){return i++}}(),$Q=function(i){const e=(0,R.dS)(i),n=new R.gQ;n.update(e);const t=n.digest();return R.US.encodeByteArray(t)},Ak=function(...i){let e="";for(let n=0;n<i.length;n++){const t=i[n];Array.isArray(t)||t&&"object"==typeof t&&"number"==typeof t.length?e+=Ak.apply(null,t):e+="object"==typeof t?(0,R.Wl)(t):t,e+=" "}return e};let mb=null,WQ=!0;const qQ=function(i,e){(0,R.hu)(!e||!0===i||!1===i,"Can't turn on custom loggers persistently."),!0===i?(Qw.logLevel=Cs.in.VERBOSE,mb=Qw.log.bind(Qw),e&&yH.set("logging_enabled",!0)):"function"==typeof i?mb=i:(mb=null,yH.remove("logging_enabled"))},Ys=function(...i){if(!0===WQ&&(WQ=!1,null===mb&&!0===yH.get("logging_enabled")&&qQ(!0)),mb){const e=Ak.apply(null,i);mb(e)}},Mk=function(i){return function(...e){Ys(i,...e)}},wH=function(...i){const e="FIREBASE INTERNAL ERROR: "+Ak(...i);Qw.error(e)},eh=function(...i){const e=`FIREBASE FATAL ERROR: ${Ak(...i)}`;throw Qw.error(e),new Error(e)},Zo=function(...i){const e="FIREBASE WARNING: "+Ak(...i);Qw.warn(e)},$O=function(i){return"number"==typeof i&&(i!=i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},e_="[MIN_NAME]",Vm="[MAX_NAME]",fb=function(i,e){if(i===e)return 0;if(i===e_||e===Vm)return-1;if(e===e_||i===Vm)return 1;{const n=KQ(i),t=KQ(e);return null!==n?null!==t?n-t==0?i.length-e.length:n-t:-1:null!==t?1:i<e?-1:1}},Dye=function(i,e){return i===e?0:i<e?-1:1},Rk=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+(0,R.Wl)(e))},xH=function(i){if("object"!=typeof i||null===i)return(0,R.Wl)(i);const e=[];for(const t in i)e.push(t);e.sort();let n="{";for(let t=0;t<e.length;t++)0!==t&&(n+=","),n+=(0,R.Wl)(e[t]),n+=":",n+=xH(i[e[t]]);return n+="}",n},YQ=function(i,e){const n=i.length;if(n<=e)return[i];const t=[];for(let r=0;r<n;r+=e)t.push(i.substring(r,r+e>n?n:r+e));return t};function Zs(i,e){for(const n in i)i.hasOwnProperty(n)&&e(n,i[n])}const ZQ=function(i){(0,R.hu)(!$O(i),"Invalid JSON number");const t=1023;let r,s,o,d,m;0===i?(s=0,o=0,r=1/i==-1/0?1:0):(r=i<0,(i=Math.abs(i))>=Math.pow(2,1-t)?(d=Math.min(Math.floor(Math.log(i)/Math.LN2),t),s=d+t,o=Math.round(i*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,o=Math.round(i/Math.pow(2,-1074))));const f=[];for(m=52;m;m-=1)f.push(o%2?1:0),o=Math.floor(o/2);for(m=11;m;m-=1)f.push(s%2?1:0),s=Math.floor(s/2);f.push(r?1:0),f.reverse();const b=f.join("");let w="";for(m=0;m<64;m+=8){let I=parseInt(b.substr(m,8),2).toString(16);1===I.length&&(I="0"+I),w+=I}return w.toLowerCase()},Aye=new RegExp("^-?(0*)\\d{1,10}$"),KQ=function(i){if(Aye.test(i)){const e=Number(i);if(e>=-2147483648&&e<=2147483647)return e}return null},Xw=function(i){try{i()}catch(e){setTimeout(()=>{throw Zo("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},Pk=function(i,e){const n=setTimeout(i,e);return"number"==typeof n&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):"object"==typeof n&&n.unref&&n.unref(),n};class Oye{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(t=>this.appCheck=t)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,t)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,t):n(null)},0)})}addTokenChangeListener(e){var n;null===(n=this.appCheckProvider)||void 0===n||n.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){Zo(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Nye{constructor(e,n,t){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&"auth/token-not-initialized"===n.code?(Ys("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,t)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,t):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Zo(e)}}let Ok=(()=>{class i{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}return i.OWNER="owner",i})();const tX=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,rX="websocket",sX="long_polling";class EH{constructor(e,n,t,r,s=!1,o="",d=!1,m=!1){this.secure=n,this.namespace=t,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=hb.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&hb.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function oX(i,e,n){let t;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof n,"typeof params must == object"),e===rX)t=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else{if(e!==sX)throw new Error("Unknown connection type: "+e);t=(i.secure?"https://":"http://")+i.internalHost+"/.lp?"}(function Fye(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams})(i)&&(n.ns=i.namespace);const r=[];return Zs(n,(s,o)=>{r.push(s+"="+o)}),t+r.join("&")}class Lye{constructor(){this.counters_={}}incrementCounter(e,n=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return(0,R.p$)(this.counters_)}}const IH={},DH={};function kH(i){const e=i.toString();return IH[e]||(IH[e]=new Lye),IH[e]}class Vye{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const t=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<t.length;++r)t[r]&&Xw(()=>{this.onMessage_(t[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class t_{constructor(e,n,t,r,s,o,d){this.connId=e,this.repoInfo=n,this.applicationId=t,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Mk(e),this.stats_=kH(n),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),oX(n,sX,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new Vye(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(i){if((0,R.Yr)()||"complete"===document.readyState)i();else{let e=!1;const n=function(){document.body?e||(e=!0,i()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new TH((...s)=>{const[o,d,m,f,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=d,this.password=m;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,d)},()=>{this.onClosed_()},this.urlFn);const t={start:"t"};t.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=this.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",this.transportSessionId&&(t.s=this.transportSessionId),this.lastSessionId&&(t.ls=this.lastSessionId),this.applicationId&&(t.p=this.applicationId),this.appCheckToken&&(t.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&tX.test(location.hostname)&&(t.r="f");const r=this.urlFn(t);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t_.forceAllow_=!0}static forceDisallow(){t_.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!t_.forceAllow_&&(t_.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=(0,R.Wl)(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const t=(0,R.h$)(n),r=YQ(t,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const t={dframe:"t"};t.id=e,t.pw=n,this.myDisconnFrame.src=this.urlFn(t),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=(0,R.Wl)(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class TH{constructor(e,n,t,r){if(this.onDisconnect=t,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=GQ(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=TH.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(d){Ys("frame writing exception"),d.stack&&Ys(d.stack),Ys(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ys("No IE domain setting required")}catch{const t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let n=this.urlFn(e),t="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+t.length<=1870;){const o=this.pendingSegs.shift();t=t+"&seg"+r+"="+o.seg+"&ts"+r+"="+o.ts+"&d"+r+"="+o.d,r++}return n+=t,this.addLongPollTag_(n,this.currentSerial),!0}return!1}enqueueSegment(e,n,t){this.pendingSegs.push({seg:e,ts:n,d:t}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const t=()=>{this.outstandingRequests.delete(n),this.newRequest_()},r=setTimeout(t,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),t()})}addTag(e,n){(0,R.Yr)()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;const t=this.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){const r=t.readyState;(!r||"loaded"===r||"complete"===r)&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),n())},t.onerror=()=>{Ys("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(t)}catch{}},Math.floor(1))}}let qO=null;typeof MozWebSocket<"u"?qO=MozWebSocket:typeof WebSocket<"u"&&(qO=WebSocket);let Jw=(()=>{class i{constructor(n,t,r,s,o,d,m){this.connId=n,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Mk(this.connId),this.stats_=kH(t),this.connURL=i.connectionURL_(t,d,m,s,r),this.nodeAdmin=t.nodeAdmin}static connectionURL_(n,t,r,s,o){const d={v:"5"};return!(0,R.Yr)()&&typeof location<"u"&&location.hostname&&tX.test(location.hostname)&&(d.r="f"),t&&(d.s=t),r&&(d.ls=r),s&&(d.ac=s),o&&(d.p=o),oX(n,rX,d)}open(n,t){this.onDisconnect=t,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,hb.set("previous_websocket_failure",!0);try{let r;if((0,R.Yr)()){r={headers:{"User-Agent":`Firebase/5/${bH}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,d=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new qO(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(n=!0)}return!n&&null!==qO&&!i.forceDisallow_}static previouslyFailed(){return hb.isInMemoryStorage||!0===hb.get("previous_websocket_failure")}markConnectionHealthy(){hb.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const r=(0,R.cI)(t);this.onMessage(r)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),n.length<=6){const t=Number(n);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(null===this.mySock)return;const t=n.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const r=this.extractFrameCount_(t);null!==r&&this.appendFrame_(r)}}send(n){this.resetKeepAlive();const t=(0,R.Wl)(n);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=YQ(t,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(n){try{this.mySock.send(n)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),mX=(()=>{class i{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[t_,Jw]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){const t=Jw&&Jw.isAvailable();let r=t&&!Jw.previouslyFailed();if(n.webSocketOnly&&(t||Zo("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Jw];else{const s=this.transports_=[];for(const o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return i.globalTransportInitialized_=!1,i})();class yX{constructor(e,n,t,r,s,o,d,m,f,b){this.id=e,this.repoInfo_=n,this.applicationId_=t,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=d,this.onDisconnect_=m,this.onKill_=f,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Mk("c:"+this.id+":"),this.transportManager_=new mX(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),t=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,t)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=Pk(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const n=e.t;"a"===n?this.upgradeIfSecondaryHealthy_():"r"===n?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===n&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Rk("t",e),t=Rk("d",e);if("c"===n)this.onSecondaryControl_(t);else{if("d"!==n)throw new Error("Unknown protocol layer: "+n);this.pendingDataMessages.push(t)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Rk("t",e),t=Rk("d",e);"c"===n?this.onControl_(t):"d"===n&&this.onDataMessage_(t)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Rk("t",e);if("d"in e){const t=e.d;if("h"===n){const r=Object.assign({},t);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if("n"===n){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===n?this.onConnectionShutdown_(t):"r"===n?this.onReset_(t):"e"===n?wH("Server Error: "+t):"o"===n?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wH("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,t=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),"5"!==t&&Zo("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Pk(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pk(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(hb.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class wX{put(e,n,t,r){}merge(e,n,t,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,t){}onDisconnectMerge(e,n,t){}onDisconnectCancel(e,n){}reportStats(e){}}class xX{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const t=[...this.listeners_[e]];for(let r=0;r<t.length;r++)t[r].callback.apply(t[r].context,n)}}on(e,n,t){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:t});const r=this.getInitialEvent(e);r&&n.apply(t,r)}off(e,n,t){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===n&&(!t||t===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}class YO extends xX{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new YO}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class li{constructor(e,n){if(void 0===n){this.pieces_=e.split("/");let t=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[t]=this.pieces_[r],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)""!==this.pieces_[n]&&(e+="/"+this.pieces_[n]);return e||"/"}}function ni(){return new li("")}function Tn(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function n_(i){return i.pieces_.length-i.pieceNum_}function Ri(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new li(i.pieces_,e)}function AH(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Nk(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function IX(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)e.push(i.pieces_[n]);return new li(e,0)}function hr(i,e){const n=[];for(let t=i.pieceNum_;t<i.pieces_.length;t++)n.push(i.pieces_[t]);if(e instanceof li)for(let t=e.pieceNum_;t<e.pieces_.length;t++)n.push(e.pieces_[t]);else{const t=e.split("/");for(let r=0;r<t.length;r++)t[r].length>0&&n.push(t[r])}return new li(n,0)}function Sn(i){return i.pieceNum_>=i.pieces_.length}function wa(i,e){const n=Tn(i),t=Tn(e);if(null===n)return e;if(n===t)return wa(Ri(i),Ri(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function a0e(i,e){const n=Nk(i,0),t=Nk(e,0);for(let r=0;r<n.length&&r<t.length;r++){const s=fb(n[r],t[r]);if(0!==s)return s}return n.length===t.length?0:n.length<t.length?-1:1}function MH(i,e){if(n_(i)!==n_(e))return!1;for(let n=i.pieceNum_,t=e.pieceNum_;n<=i.pieces_.length;n++,t++)if(i.pieces_[n]!==e.pieces_[t])return!1;return!0}function Rl(i,e){let n=i.pieceNum_,t=e.pieceNum_;if(n_(i)>n_(e))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==e.pieces_[t])return!1;++n,++t}return!0}class c0e{constructor(e,n){this.errorPrefix_=n,this.parts_=Nk(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let t=0;t<this.parts_.length;t++)this.byteLength_+=(0,R.ug)(this.parts_[t]);DX(this)}}function DX(i){if(i.byteLength_>768)throw new Error(i.errorPrefix_+"has a key path longer than 768 bytes ("+i.byteLength_+").");if(i.parts_.length>32)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+pb(i))}function pb(i){return 0===i.parts_.length?"":"in property '"+i.parts_.join(".")+"'"}class RH extends xX{constructor(){let e,n;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new RH}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Fk=1e3;let KO,_b=(()=>{class i extends wX{constructor(n,t,r,s,o,d,m,f){if(super(),this.repoInfo_=n,this.applicationId_=t,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=m,this.authOverride_=f,this.id=i.nextPersistentConnectionId_++,this.log_=Mk("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Fk,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");RH.getInstance().on("visible",this.onVisible_,this),-1===n.host.indexOf("fblocal")&&YO.getInstance().on("online",this.onOnline_,this)}sendRequest(n,t,r){const s=++this.requestNumber_,o={r:s,a:n,b:t};this.log_((0,R.Wl)(o)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(n){this.initConnection_();const t=new R.BH,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:d=>{const m=d.d;"ok"===d.s?t.resolve(m):t.reject(m)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),t.promise}listen(n,t,r,s){this.initConnection_();const o=n._queryIdentifier,d=n._path.toString();this.log_("Listen called for "+d+" "+o),this.listens.has(d)||this.listens.set(d,new Map),(0,R.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(d).has(o),"listen() called twice for same path/queryId.");const m={onComplete:s,hashFn:t,query:n,tag:r};this.listens.get(d).set(o,m),this.connected_&&this.sendListen_(m)}sendGet_(n){const t=this.outstandingGets_[n];this.sendRequest("g",t.request,r=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(r)})}sendListen_(n){const t=n.query,r=t._path.toString(),s=t._queryIdentifier;this.log_("Listen on "+r+" for "+s);const o={p:r};n.tag&&(o.q=t._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest("q",o,m=>{const f=m.d,b=m.s;i.warnOnListenWarnings_(f,t),(this.listens.get(r)&&this.listens.get(r).get(s))===n&&(this.log_("listen response",m),"ok"!==b&&this.removeListen_(r,s),n.onComplete&&n.onComplete(b,f))})}static warnOnListenWarnings_(n,t){if(n&&"object"==typeof n&&(0,R.r3)(n,"w")){const r=(0,R.DV)(n,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+t._queryParams.getIndex().toString()+'"',o=t._path.toString();Zo(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&40===n.length||(0,R.GJ)(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const n=this.authToken_,t=(0,R.w9)(n)?"auth":"gauth",r={cred:n};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(t,r,s=>{const o=s.s,d=s.d||"error";this.authToken_===n&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{const t=n.s,r=n.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,r)})}unlisten(n,t){const r=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,R.hu)(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,n._queryObject,t)}sendUnlisten_(n,t,r,s){this.log_("Unlisten on "+n+" for "+t);const o={p:n};s&&(o.q=r,o.t=s),this.sendRequest("n",o)}onDisconnectPut(n,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,t,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:t,onComplete:r})}onDisconnectMerge(n,t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,t,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:t,onComplete:r})}onDisconnectCancel(n,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,t):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(n,t,r,s){const o={p:t,d:r};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(n,t,r,s){this.putInternal("p",n,t,r,s)}merge(n,t,r,s){this.putInternal("m",n,t,r,s)}putInternal(n,t,r,s,o){this.initConnection_();const d={p:t,d:r};void 0!==o&&(d.h=o),this.outstandingPuts_.push({action:n,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(n){const t=this.outstandingPuts_[n].action,r=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(t,r,o=>{this.log_(t+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){const t={c:n};this.log_("reportStats",t),this.sendRequest("s",t,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+(0,R.Wl)(n));const t=n.r,r=this.requestCBHash_[t];r&&(delete this.requestCBHash_[t],r(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,t){this.log_("handleServerMessage",n,t),"d"===n?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===n?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===n?this.onListenRevoked_(t.p,t.q):"ac"===n?this.onAuthRevoked_(t.s,t.d):"apc"===n?this.onAppCheckRevoked_(t.s,t.d):"sd"===n?this.onSecurityDebugPacket_(t):wH("Unrecognized action received from server: "+(0,R.Wl)(n)+"\nAre you using the latest client?")}onReady_(n,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(n),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fk,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Fk,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fk),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const n=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-n);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var n=this;return(0,ee.Z)(function*(){if(n.shouldReconnect_()){n.log_("Making a connection attempt"),n.lastConnectionAttemptTime_=(new Date).getTime(),n.lastConnectionEstablishedTime_=null;const t=n.onDataMessage_.bind(n),r=n.onReady_.bind(n),s=n.onRealtimeDisconnect_.bind(n),o=n.id+":"+i.nextConnectionId_++,d=n.lastSessionId;let m=!1,f=null;const b=function(){f?f.close():(m=!0,s())};n.realtime_={close:b,sendRequest:function(S){(0,R.hu)(f,"sendRequest call when we're not connected not allowed."),f.sendRequest(S)}};const I=n.forceTokenRefresh_;n.forceTokenRefresh_=!1;try{const[S,F]=yield Promise.all([n.authTokenProvider_.getToken(I),n.appCheckTokenProvider_.getToken(I)]);m?Ys("getToken() completed but was canceled"):(Ys("getToken() completed. Creating connection."),n.authToken_=S&&S.accessToken,n.appCheckToken_=F&&F.token,f=new yX(o,n.repoInfo_,n.applicationId_,n.appCheckToken_,n.authToken_,t,r,s,z=>{Zo(z+" ("+n.repoInfo_.toString()+")"),n.interrupt("server_kill")},d))}catch(S){n.log_("Failed to get token: "+S),m||(n.repoInfo_.nodeAdmin&&Zo(S),b())}}})()}interrupt(n){Ys("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){Ys("Resuming connection for reason: "+n),delete this.interruptReasons_[n],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Fk,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){const t=n-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){const t=this.outstandingPuts_[n];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(n,t){let r;r=t?t.map(o=>xH(o)).join("$"):"default";const s=this.removeListen_(n,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,t){const r=new li(n).toString();let s;if(this.listens.has(r)){const o=this.listens.get(r);s=o.get(t),o.delete(t),0===o.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(n,t){Ys("Auth token revoked: "+n+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===n||"permission_denied"===n)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,t){Ys("App check token revoked: "+n+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===n||"permission_denied"===n)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const n of this.listens.values())for(const t of n.values())this.sendListen_(t);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){const n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){const n={};let t="js";(0,R.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),n["sdk."+t+"."+bH.replace(/\./g,"-")]=1,(0,R.uI)()?n["framework.cordova"]=1:(0,R.b$)()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){const n=YO.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&n}}return i.nextPersistentConnectionId_=0,i.nextConnectionId_=0,i})();class Rn{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Rn(e,n)}}class ZO{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const t=new Rn(e_,e),r=new Rn(e_,n);return 0!==this.compare(t,r)}minPost(){return Rn.MIN}}class SX extends ZO{static get __EMPTY_NODE(){return KO}static set __EMPTY_NODE(e){KO=e}compare(e,n){return fb(e.name,n.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Rn.MIN}maxPost(){return new Rn(Vm,KO)}makePost(e,n){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Rn(e,KO)}toString(){return".key"}}const th=new SX;class QO{constructor(e,n,t,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=n?t(e.key,n):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let n,e=this.nodeStack_.pop();if(n=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let OH,Ud=(()=>{class i{constructor(n,t,r,s,o){this.key=n,this.value=t,this.color=r??i.RED,this.left=s??Ya.EMPTY_NODE,this.right=o??Ya.EMPTY_NODE}copy(n,t,r,s,o){return new i(n??this.key,t??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,t,r){let s=this;const o=r(n,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(n,t,r),null):0===o?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(n,t,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ya.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,t){let r,s;if(r=this,t(n,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(n,t),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===t(n,r.key)){if(r.right.isEmpty())return Ya.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(n,t))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){const n=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){const n=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){const n=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,t)}checkMaxDepth_(){const n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})();class Ya{constructor(e,n=Ya.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Ya(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ud.BLACK,null,null))}remove(e){return new Ya(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ud.BLACK,null,null))}get(e){let n,t=this.root_;for(;!t.isEmpty();){if(n=this.comparator_(e,t.key),0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}getPredecessorKey(e){let n,t=this.root_,r=null;for(;!t.isEmpty();){if(n=this.comparator_(e,t.key),0===n){if(t.left.isEmpty())return r?r.key:null;for(t=t.left;!t.right.isEmpty();)t=t.right;return t.key}n<0?t=t.left:n>0&&(r=t,t=t.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new QO(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new QO(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new QO(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new QO(this.root_,null,this.comparator_,!0,e)}}function _0e(i,e){return fb(i.name,e.name)}function PH(i,e){return fb(i,e)}Ya.EMPTY_NODE=new class p0e{copy(e,n,t,r,s){return this}insert(e,n,t){return new Ud(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const AX=function(i){return"number"==typeof i?"number:"+ZQ(i):"string:"+i},MX=function(i){if(i.isLeafNode()){const e=i.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(i===OH||i.isEmpty(),"priority of unexpected type.");(0,R.hu)(i===OH||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let RX,PX,OX,ex=(()=>{class i{constructor(n,t=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=t,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),MX(this.priorityNode_)}static set __childrenNodeConstructor(n){RX=n}static get __childrenNodeConstructor(){return RX}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new i(this.value_,n)}getImmediateChild(n){return".priority"===n?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return Sn(n)?this:".priority"===Tn(n)?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,t){return null}updateImmediateChild(n,t){return".priority"===n?this.updatePriority(t):t.isEmpty()&&".priority"!==n?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,t).updatePriority(this.priorityNode_)}updateChild(n,t){const r=Tn(n);return null===r?t:t.isEmpty()&&".priority"!==r?this:((0,R.hu)(".priority"!==r||1===n_(n),".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ri(n),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,t){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+AX(this.priorityNode_.val())+":");const t=typeof this.value_;n+=t+":",n+="number"===t?ZQ(this.value_):this.value_,this.lazyHash_=$Q(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===i.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof i.__childrenNodeConstructor?-1:((0,R.hu)(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){const t=typeof n.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(t),o=i.VALUE_TYPE_ORDER.indexOf(r);return(0,R.hu)(s>=0,"Unknown leaf type: "+t),(0,R.hu)(o>=0,"Unknown leaf type: "+r),s===o?"object"===r?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){return n===this||!!n.isLeafNode()&&(this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_))}}return i.VALUE_TYPE_ORDER=["object","boolean","number","string"],i})();const $i=new class y0e extends ZO{compare(e,n){const t=e.node.getPriority(),r=n.node.getPriority(),s=t.compareTo(r);return 0===s?fb(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Rn.MIN}maxPost(){return new Rn(Vm,new ex("[PRIORITY-POST]",OX))}makePost(e,n){const t=PX(e);return new Rn(n,new ex("[PRIORITY-POST]",t))}toString(){return".priority"}},w0e=Math.log(2);class x0e{constructor(e){this.count=parseInt(Math.log(e+1)/w0e,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const XO=function(i,e,n,t){i.sort(e);const r=function(m,f){const b=f-m;let w,I;if(0===b)return null;if(1===b)return w=i[m],I=n?n(w):w,new Ud(I,w.node,Ud.BLACK,null,null);{const S=parseInt(b/2,10)+m,F=r(m,S),z=r(S+1,f);return w=i[S],I=n?n(w):w,new Ud(I,w.node,Ud.BLACK,F,z)}},d=function(m){let f=null,b=null,w=i.length;const I=function(F,z){const q=w-F,we=w;w-=F;const Ae=r(q+1,we),De=i[q],Pe=n?n(De):De;S(new Ud(Pe,De.node,z,null,Ae))},S=function(F){f?(f.left=F,f=F):(b=F,f=F)};for(let F=0;F<m.count;++F){const z=m.nextBitIsOne(),q=Math.pow(2,m.count-(F+1));z?I(q,Ud.BLACK):(I(q,Ud.BLACK),I(q,Ud.RED))}return b}(new x0e(i.length));return new Ya(t||e,d)};let NH;const tx={};class Um{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return(0,R.hu)(tx&&$i,"ChildrenNode.ts has not been loaded"),NH=NH||new Um({".priority":tx},{".priority":$i}),NH}get(e){const n=(0,R.DV)(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Ya?n:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,n){(0,R.hu)(e!==th,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const t=[];let r=!1;const s=n.getIterator(Rn.Wrap);let d,o=s.getNext();for(;o;)r=r||e.isDefinedOn(o.node),t.push(o),o=s.getNext();d=r?XO(t,e.getCompare()):tx;const m=e.toString(),f=Object.assign({},this.indexSet_);f[m]=e;const b=Object.assign({},this.indexes_);return b[m]=d,new Um(b,f)}addToIndexes(e,n){const t=(0,R.UI)(this.indexes_,(r,s)=>{const o=(0,R.DV)(this.indexSet_,s);if((0,R.hu)(o,"Missing index implementation for "+s),r===tx){if(o.isDefinedOn(e.node)){const d=[],m=n.getIterator(Rn.Wrap);let f=m.getNext();for(;f;)f.name!==e.name&&d.push(f),f=m.getNext();return d.push(e),XO(d,o.getCompare())}return tx}{const d=n.get(e.name);let m=r;return d&&(m=m.remove(new Rn(e.name,d))),m.insert(e,e.node)}});return new Um(t,this.indexSet_)}removeFromIndexes(e,n){const t=(0,R.UI)(this.indexes_,r=>{if(r===tx)return r;{const s=n.get(e.name);return s?r.remove(new Rn(e.name,s)):r}});return new Um(t,this.indexSet_)}}let Lk,dn=(()=>{class i{constructor(n,t,r){this.children_=n,this.priorityNode_=t,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&MX(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Lk||(Lk=new i(new Ya(PH),null,Um.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Lk}updatePriority(n){return this.children_.isEmpty()?this:new i(this.children_,n,this.indexMap_)}getImmediateChild(n){if(".priority"===n)return this.getPriority();{const t=this.children_.get(n);return null===t?Lk:t}}getChild(n){const t=Tn(n);return null===t?this:this.getImmediateChild(t).getChild(Ri(n))}hasChild(n){return null!==this.children_.get(n)}updateImmediateChild(n,t){if((0,R.hu)(t,"We should always be passing snapshot nodes"),".priority"===n)return this.updatePriority(t);{const r=new Rn(n,t);let s,o;t.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(n,t),o=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Lk:this.priorityNode_;return new i(s,d,o)}}updateChild(n,t){const r=Tn(n);if(null===r)return t;{(0,R.hu)(".priority"!==Tn(n)||1===n_(n),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Ri(n),t);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;const t={};let r=0,s=0,o=!0;if(this.forEachChild($i,(d,m)=>{t[d]=m.val(n),r++,o&&i.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):o=!1}),!n&&o&&s<2*r){const d=[];for(const m in t)d[m]=t[m];return d}return n&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(null===this.lazyHash_){let n="";this.getPriority().isEmpty()||(n+="priority:"+AX(this.getPriority().val())+":"),this.forEachChild($i,(t,r)=>{const s=r.hash();""!==s&&(n+=":"+t+":"+s)}),this.lazyHash_=""===n?"":$Q(n)}return this.lazyHash_}getPredecessorChildName(n,t,r){const s=this.resolveIndex_(r);if(s){const o=s.getPredecessorKey(new Rn(n,t));return o?o.name:null}return this.children_.getPredecessorKey(n)}getFirstChildName(n){const t=this.resolveIndex_(n);if(t){const r=t.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(n){const t=this.getFirstChildName(n);return t?new Rn(t,this.children_.get(t)):null}getLastChildName(n){const t=this.resolveIndex_(n);if(t){const r=t.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(n){const t=this.getLastChildName(n);return t?new Rn(t,this.children_.get(t)):null}forEachChild(n,t){const r=this.resolveIndex_(n);return r?r.inorderTraversal(s=>t(s.name,s.node)):this.children_.inorderTraversal(t)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,t){const r=this.resolveIndex_(t);if(r)return r.getIteratorFrom(n,s=>s);{const s=this.children_.getIteratorFrom(n.name,Rn.Wrap);let o=s.peek();for(;null!=o&&t.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,t){const r=this.resolveIndex_(t);if(r)return r.getReverseIteratorFrom(n,s=>s);{const s=this.children_.getReverseIteratorFrom(n.name,Rn.Wrap);let o=s.peek();for(;null!=o&&t.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Bk?-1:0}withIndex(n){if(n===th||this.indexMap_.hasIndex(n))return this;{const t=this.indexMap_.addIndex(n,this.children_);return new i(this.children_,this.priorityNode_,t)}}isIndexed(n){return n===th||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{const t=n;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const r=this.getIterator($i),s=t.getIterator($i);let o=r.getNext(),d=s.getNext();for(;o&&d;){if(o.name!==d.name||!o.node.equals(d.node))return!1;o=r.getNext(),d=s.getNext()}return null===o&&null===d}return!1}return!1}}resolveIndex_(n){return n===th?null:this.indexMap_.get(n.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})();const Bk=new class C0e extends dn{constructor(){super(new Ya(PH),dn.EMPTY_NODE,Um.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return dn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Rn,{MIN:{value:new Rn(e_,dn.EMPTY_NODE)},MAX:{value:new Rn(Vm,Bk)}}),SX.__EMPTY_NODE=dn.EMPTY_NODE,ex.__childrenNodeConstructor=dn,function g0e(i){OH=i}(Bk),function b0e(i){OX=i}(Bk);const E0e=!0;function Cr(i,e=null){if(null===i)return dn.EMPTY_NODE;if("object"==typeof i&&".priority"in i&&(e=i[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof i&&".value"in i&&null!==i[".value"]&&(i=i[".value"]),"object"!=typeof i||".sv"in i)return new ex(i,Cr(e));if(i instanceof Array||!E0e){let n=dn.EMPTY_NODE;return Zs(i,(t,r)=>{if((0,R.r3)(i,t)&&"."!==t.substring(0,1)){const s=Cr(r);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(t,s))}}),n.updatePriority(Cr(e))}{const n=[];let t=!1;if(Zs(i,(o,d)=>{if("."!==o.substring(0,1)){const m=Cr(d);m.isEmpty()||(t=t||!m.getPriority().isEmpty(),n.push(new Rn(o,m)))}}),0===n.length)return dn.EMPTY_NODE;const s=XO(n,_0e,o=>o.name,PH);if(t){const o=XO(n,$i.getCompare());return new dn(s,Cr(e),new Um({".priority":o},{".priority":$i}))}return new dn(s,Cr(e),Um.Default)}}!function v0e(i){PX=i}(Cr);class FH extends ZO{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!Sn(e)&&".priority"!==Tn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const t=this.extractChild(e.node),r=this.extractChild(n.node),s=t.compareTo(r);return 0===s?fb(e.name,n.name):s}makePost(e,n){const t=Cr(e),r=dn.EMPTY_NODE.updateChild(this.indexPath_,t);return new Rn(n,r)}maxPost(){const e=dn.EMPTY_NODE.updateChild(this.indexPath_,Bk);return new Rn(Vm,e)}toString(){return Nk(this.indexPath_,0).join("/")}}const LH=new class I0e extends ZO{compare(e,n){const t=e.node.compareTo(n.node);return 0===t?fb(e.name,n.name):t}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Rn.MIN}maxPost(){return Rn.MAX}makePost(e,n){const t=Cr(e);return new Rn(n,t)}toString(){return".value"}};function NX(i){return{type:"value",snapshotNode:i}}function nx(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function Vk(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function Uk(i,e,n){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:n}}class BH{constructor(e){this.index_=e}updateChild(e,n,t,r,s,o){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(n);return d.getChild(r).equals(t.getChild(r))&&d.isEmpty()===t.isEmpty()||(null!=o&&(t.isEmpty()?e.hasChild(n)?o.trackChildChange(Vk(n,d)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?o.trackChildChange(nx(n,t)):o.trackChildChange(Uk(n,t,d))),e.isLeafNode()&&t.isEmpty())?e:e.updateImmediateChild(n,t).withIndex(this.index_)}updateFullNode(e,n,t){return null!=t&&(e.isLeafNode()||e.forEachChild($i,(r,s)=>{n.hasChild(r)||t.trackChildChange(Vk(r,s))}),n.isLeafNode()||n.forEachChild($i,(r,s)=>{if(e.hasChild(r)){const o=e.getImmediateChild(r);o.equals(s)||t.trackChildChange(Uk(r,s,o))}else t.trackChildChange(nx(r,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?dn.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Hk{constructor(e){this.indexedFilter_=new BH(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Hk.getStartPost_(e),this.endPost_=Hk.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,t=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&t}updateChild(e,n,t,r,s,o){return this.matches(new Rn(n,t))||(t=dn.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,t,r,s,o)}updateFullNode(e,n,t){n.isLeafNode()&&(n=dn.EMPTY_NODE);let r=n.withIndex(this.index_);r=r.updatePriority(dn.EMPTY_NODE);const s=this;return n.forEachChild($i,(o,d)=>{s.matches(new Rn(o,d))||(r=r.updateImmediateChild(o,dn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,t)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}return e.getIndex().maxPost()}}class k0e{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const t=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?t<=0:t<0},this.withinEndPost=n=>{const t=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?t<=0:t<0},this.rangedFilter_=new Hk(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,t,r,s,o){return this.rangedFilter_.matches(new Rn(n,t))||(t=dn.EMPTY_NODE),e.getImmediateChild(n).equals(t)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,t,r,s,o):this.fullLimitUpdateChild_(e,n,t,s,o)}updateFullNode(e,n,t){let r;if(n.isLeafNode()||n.isEmpty())r=dn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<n.numChildren()&&n.isIndexed(this.index_)){let s;r=dn.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const d=s.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;r=r.updateImmediateChild(d.name,d.node),o++}}}else{let s;r=n.withIndex(this.index_),r=r.updatePriority(dn.EMPTY_NODE),s=this.reverse_?r.getReverseIterator(this.index_):r.getIterator(this.index_);let o=0;for(;s.hasNext();){const d=s.getNext();o<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?o++:r=r.updateImmediateChild(d.name,dn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,t)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,t,r,s){let o;if(this.reverse_){const w=this.index_.getCompare();o=(I,S)=>w(S,I)}else o=this.index_.getCompare();const d=e;(0,R.hu)(d.numChildren()===this.limit_,"");const m=new Rn(n,t),f=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),b=this.rangedFilter_.matches(m);if(d.hasChild(n)){const w=d.getImmediateChild(n);let I=r.getChildAfterChild(this.index_,f,this.reverse_);for(;null!=I&&(I.name===n||d.hasChild(I.name));)I=r.getChildAfterChild(this.index_,I,this.reverse_);const S=null==I?1:o(I,m);if(b&&!t.isEmpty()&&S>=0)return s?.trackChildChange(Uk(n,t,w)),d.updateImmediateChild(n,t);{s?.trackChildChange(Vk(n,w));const z=d.updateImmediateChild(n,dn.EMPTY_NODE);return null!=I&&this.rangedFilter_.matches(I)?(s?.trackChildChange(nx(I.name,I.node)),z.updateImmediateChild(I.name,I.node)):z}}return t.isEmpty()?e:b&&o(f,m)>=0?(null!=s&&(s.trackChildChange(Vk(f.name,f.node)),s.trackChildChange(nx(n,t))),d.updateImmediateChild(n,t).updateImmediateChild(f.name,dn.EMPTY_NODE)):e}}class JO{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=$i}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:e_}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Vm}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===$i}copy(){const e=new JO;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function VH(i,e,n){const t=i.copy();return t.startSet_=!0,void 0===e&&(e=null),t.indexStartValue_=e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function UH(i,e,n){const t=i.copy();return t.endSet_=!0,void 0===e&&(e=null),t.indexEndValue_=e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function eN(i,e){const n=i.copy();return n.index_=e,n}function FX(i){const e={};if(i.isDefault())return e;let n;if(i.index_===$i?n="$priority":i.index_===LH?n="$value":i.index_===th?n="$key":((0,R.hu)(i.index_ instanceof FH,"Unrecognized index type!"),n=i.index_.toString()),e.orderBy=(0,R.Wl)(n),i.startSet_){const t=i.startAfterSet_?"startAfter":"startAt";e[t]=(0,R.Wl)(i.indexStartValue_),i.startNameSet_&&(e[t]+=","+(0,R.Wl)(i.indexStartName_))}if(i.endSet_){const t=i.endBeforeSet_?"endBefore":"endAt";e[t]=(0,R.Wl)(i.indexEndValue_),i.endNameSet_&&(e[t]+=","+(0,R.Wl)(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function LX(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let n=i.viewFrom_;""===n&&(n=i.isViewFromLeft()?"l":"r"),e.vf=n}return i.index_!==$i&&(e.i=i.index_.toString()),e}class tN extends wX{constructor(e,n,t,r){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=t,this.appCheckTokenProvider_=r,this.log_=Mk("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return void 0!==n?"tag$"+n:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,t,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=tN.getListenId_(e,t),d={};this.listens_[o]=d;const m=FX(e._queryParams);this.restRequest_(s+".json",m,(f,b)=>{let w=b;if(404===f&&(w=null,f=null),null===f&&this.onDataUpdate_(s,w,!1,t),(0,R.DV)(this.listens_,o)===d){let I;I=f?401===f?"permission_denied":"rest_error:"+f:"ok",r(I,null)}})}unlisten(e,n){const t=tN.getListenId_(e,n);delete this.listens_[t]}get(e){const n=FX(e._queryParams),t=e._path.toString(),r=new R.BH;return this.restRequest_(t+".json",n,(s,o)=>{let d=o;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(t,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,n={},t){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(n.auth=r.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(n);this.log_("Sending REST request for "+o);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(t&&4===d.readyState){this.log_("REST Response for "+o+" received. status:",d.status,"response:",d.responseText);let m=null;if(d.status>=200&&d.status<300){try{m=(0,R.cI)(d.responseText)}catch{Zo("Failed to parse JSON response for "+o+": "+d.responseText)}t(null,m)}else 401!==d.status&&404!==d.status&&Zo("Got unsuccessful REST response for "+o+" Status: "+d.status),t(d.status);t=null}},d.open("GET",o,!0),d.send()})}}class P0e{constructor(){this.rootNode_=dn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}function nN(){return{value:null,children:new Map}}function ix(i,e,n){if(Sn(e))i.value=n,i.children.clear();else if(null!==i.value)i.value=i.value.updateChild(e,n);else{const t=Tn(e);i.children.has(t)||i.children.set(t,nN()),ix(i.children.get(t),e=Ri(e),n)}}function HH(i,e){if(Sn(e))return i.value=null,i.children.clear(),!0;if(null!==i.value){if(i.value.isLeafNode())return!1;{const n=i.value;return i.value=null,n.forEachChild($i,(t,r)=>{ix(i,new li(t),r)}),HH(i,e)}}if(i.children.size>0){const n=Tn(e);return e=Ri(e),i.children.has(n)&&HH(i.children.get(n),e)&&i.children.delete(n),0===i.children.size}return!0}function zH(i,e,n){null!==i.value?n(e,i.value):function O0e(i,e){i.children.forEach((n,t)=>{e(t,n)})}(i,(t,r)=>{zH(r,new li(e.toString()+"/"+t),n)})}class N0e{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Zs(this.last_,(t,r)=>{n[t]=n[t]-r}),this.last_=e,n}}class B0e{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new N0e(e);const t=1e4+2e4*Math.random();Pk(this.reportStats_.bind(this),Math.floor(t))}reportStats_(){const e=this.statsListener_.get(),n={};let t=!1;Zs(e,(r,s)=>{s>0&&(0,R.r3)(this.statsToReport_,r)&&(n[r]=s,t=!0)}),t&&this.server_.reportStats(n),Pk(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var nh=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(nh||{});function $H(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}class iN{constructor(e,n,t){this.path=e,this.affectedTree=n,this.revert=t,this.type=nh.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Sn(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new li(e));return new iN(ni(),n,this.revert)}}return(0,R.hu)(Tn(this.path)===e,"operationForChild called for unrelated child."),new iN(Ri(this.path),this.affectedTree,this.revert)}}class zk{constructor(e,n){this.source=e,this.path=n,this.type=nh.LISTEN_COMPLETE}operationForChild(e){return Sn(this.path)?new zk(this.source,ni()):new zk(this.source,Ri(this.path))}}class gb{constructor(e,n,t){this.source=e,this.path=n,this.snap=t,this.type=nh.OVERWRITE}operationForChild(e){return Sn(this.path)?new gb(this.source,ni(),this.snap.getImmediateChild(e)):new gb(this.source,Ri(this.path),this.snap)}}class rx{constructor(e,n,t){this.source=e,this.path=n,this.children=t,this.type=nh.MERGE}operationForChild(e){if(Sn(this.path)){const n=this.children.subtree(new li(e));return n.isEmpty()?null:n.value?new gb(this.source,ni(),n.value):new rx(this.source,ni(),n)}return(0,R.hu)(Tn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rx(this.source,Ri(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class i_{constructor(e,n,t){this.node_=e,this.fullyInitialized_=n,this.filtered_=t}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Sn(e))return this.isFullyInitialized()&&!this.filtered_;const n=Tn(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class V0e{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function jk(i,e,n,t,r,s){const o=t.filter(d=>d.type===n);o.sort((d,m)=>function z0e(i,e,n){if(null==e.childName||null==n.childName)throw(0,R.g5)("Should only compare child_ events.");const t=new Rn(e.childName,e.snapshotNode),r=new Rn(n.childName,n.snapshotNode);return i.index_.compare(t,r)}(i,d,m)),o.forEach(d=>{const m=function H0e(i,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}(i,d,s);r.forEach(f=>{f.respondsTo(d.type)&&e.push(f.createEvent(m,i.query_))})})}function rN(i,e){return{eventCache:i,serverCache:e}}function Gk(i,e,n,t){return rN(new i_(e,n,t),i.serverCache)}function VX(i,e,n,t){return rN(i.eventCache,new i_(e,n,t))}function sN(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function vb(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}let WH;class Wi{constructor(e,n=(()=>(WH||(WH=new Ya(Dye)),WH))()){this.value=e,this.children=n}static fromObject(e){let n=new Wi(null);return Zs(e,(t,r)=>{n=n.set(new li(t),r)}),n}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(null!=this.value&&n(this.value))return{path:ni(),value:this.value};if(Sn(e))return null;{const t=Tn(e),r=this.children.get(t);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Ri(e),n);return null!=s?{path:hr(new li(t),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Sn(e))return this;{const n=Tn(e),t=this.children.get(n);return null!==t?t.subtree(Ri(e)):new Wi(null)}}set(e,n){if(Sn(e))return new Wi(n,this.children);{const t=Tn(e),s=(this.children.get(t)||new Wi(null)).set(Ri(e),n),o=this.children.insert(t,s);return new Wi(this.value,o)}}remove(e){if(Sn(e))return this.children.isEmpty()?new Wi(null):new Wi(null,this.children);{const n=Tn(e),t=this.children.get(n);if(t){const r=t.remove(Ri(e));let s;return s=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),null===this.value&&s.isEmpty()?new Wi(null):new Wi(this.value,s)}return this}}get(e){if(Sn(e))return this.value;{const n=Tn(e),t=this.children.get(n);return t?t.get(Ri(e)):null}}setTree(e,n){if(Sn(e))return n;{const t=Tn(e),s=(this.children.get(t)||new Wi(null)).setTree(Ri(e),n);let o;return o=s.isEmpty()?this.children.remove(t):this.children.insert(t,s),new Wi(this.value,o)}}fold(e){return this.fold_(ni(),e)}fold_(e,n){const t={};return this.children.inorderTraversal((r,s)=>{t[r]=s.fold_(hr(e,r),n)}),n(e,this.value,t)}findOnPath(e,n){return this.findOnPath_(e,ni(),n)}findOnPath_(e,n,t){const r=!!this.value&&t(n,this.value);if(r)return r;if(Sn(e))return null;{const s=Tn(e),o=this.children.get(s);return o?o.findOnPath_(Ri(e),hr(n,s),t):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ni(),n)}foreachOnPath_(e,n,t){if(Sn(e))return this;{this.value&&t(n,this.value);const r=Tn(e),s=this.children.get(r);return s?s.foreachOnPath_(Ri(e),hr(n,r),t):new Wi(null)}}foreach(e){this.foreach_(ni(),e)}foreach_(e,n){this.children.inorderTraversal((t,r)=>{r.foreach_(hr(e,t),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,t)=>{t.value&&e(n,t.value)})}}class Hd{constructor(e){this.writeTree_=e}static empty(){return new Hd(new Wi(null))}}function $k(i,e,n){if(Sn(e))return new Hd(new Wi(n));{const t=i.writeTree_.findRootMostValueAndPath(e);if(null!=t){const r=t.path;let s=t.value;const o=wa(r,e);return s=s.updateChild(o,n),new Hd(i.writeTree_.set(r,s))}{const r=new Wi(n),s=i.writeTree_.setTree(e,r);return new Hd(s)}}}function qH(i,e,n){let t=i;return Zs(n,(r,s)=>{t=$k(t,hr(e,r),s)}),t}function UX(i,e){if(Sn(e))return Hd.empty();{const n=i.writeTree_.setTree(e,new Wi(null));return new Hd(n)}}function YH(i,e){return null!=bb(i,e)}function bb(i,e){const n=i.writeTree_.findRootMostValueAndPath(e);return null!=n?i.writeTree_.get(n.path).getChild(wa(n.path,e)):null}function HX(i){const e=[],n=i.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild($i,(t,r)=>{e.push(new Rn(t,r))}):i.writeTree_.children.inorderTraversal((t,r)=>{null!=r.value&&e.push(new Rn(t,r.value))}),e}function r_(i,e){if(Sn(e))return i;{const n=bb(i,e);return new Hd(null!=n?new Wi(n):i.writeTree_.subtree(e))}}function ZH(i){return i.writeTree_.isEmpty()}function sx(i,e){return zX(ni(),i.writeTree_,e)}function zX(i,e,n){if(null!=e.value)return n.updateChild(i,e.value);{let t=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,R.hu)(null!==s.value,"Priority writes must always be leaf nodes"),t=s.value):n=zX(hr(i,r),s,n)}),!n.getChild(i).isEmpty()&&null!==t&&(n=n.updateChild(hr(i,".priority"),t)),n}}function oN(i,e){return qX(e,i)}function Y0e(i,e){if(i.snap)return Rl(i.path,e);for(const n in i.children)if(i.children.hasOwnProperty(n)&&Rl(hr(i.path,n),e))return!0;return!1}function K0e(i){return i.visible}function jX(i,e,n){let t=Hd.empty();for(let r=0;r<i.length;++r){const s=i[r];if(e(s)){const o=s.path;let d;if(s.snap)Rl(n,o)?(d=wa(n,o),t=$k(t,d,s.snap)):Rl(o,n)&&(d=wa(o,n),t=$k(t,ni(),s.snap.getChild(d)));else{if(!s.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(Rl(n,o))d=wa(n,o),t=qH(t,d,s.children);else if(Rl(o,n))if(d=wa(o,n),Sn(d))t=qH(t,ni(),s.children);else{const m=(0,R.DV)(s.children,Tn(d));if(m){const f=m.getChild(Ri(d));t=$k(t,ni(),f)}}}}}return t}function GX(i,e,n,t,r){if(t||r){const s=r_(i.visibleWrites,e);return!r&&ZH(s)?n:r||null!=n||YH(s,ni())?sx(jX(i.allWrites,function(f){return(f.visible||r)&&(!t||!~t.indexOf(f.writeId))&&(Rl(f.path,e)||Rl(e,f.path))},e),n||dn.EMPTY_NODE):null}{const s=bb(i.visibleWrites,e);if(null!=s)return s;{const o=r_(i.visibleWrites,e);return ZH(o)?n:null!=n||YH(o,ni())?sx(o,n||dn.EMPTY_NODE):null}}}function aN(i,e,n,t){return GX(i.writeTree,i.treePath,e,n,t)}function KH(i,e){return function Q0e(i,e,n){let t=dn.EMPTY_NODE;const r=bb(i.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild($i,(s,o)=>{t=t.updateImmediateChild(s,o)}),t;if(n){const s=r_(i.visibleWrites,e);return n.forEachChild($i,(o,d)=>{const m=sx(r_(s,new li(o)),d);t=t.updateImmediateChild(o,m)}),HX(s).forEach(o=>{t=t.updateImmediateChild(o.name,o.node)}),t}return HX(r_(i.visibleWrites,e)).forEach(o=>{t=t.updateImmediateChild(o.name,o.node)}),t}(i.writeTree,i.treePath,e)}function $X(i,e,n,t){return function X0e(i,e,n,t,r){(0,R.hu)(t||r,"Either existingEventSnap or existingServerSnap must exist");const s=hr(e,n);if(YH(i.visibleWrites,s))return null;{const o=r_(i.visibleWrites,s);return ZH(o)?r.getChild(n):sx(o,r.getChild(n))}}(i.writeTree,i.treePath,e,n,t)}function cN(i,e){return function ewe(i,e){return bb(i.visibleWrites,e)}(i.writeTree,hr(i.treePath,e))}function QH(i,e,n){return function J0e(i,e,n,t){const r=hr(e,n),s=bb(i.visibleWrites,r);return null!=s?s:t.isCompleteForChild(n)?sx(r_(i.visibleWrites,r),t.getNode().getImmediateChild(n)):null}(i.writeTree,i.treePath,e,n)}function WX(i,e){return qX(hr(i.treePath,e),i.writeTree)}function qX(i,e){return{treePath:i,writeTree:e}}class rwe{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,t=e.childName;(0,R.hu)("child_added"===n||"child_changed"===n||"child_removed"===n,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==t,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(t);if(r){const s=r.type;if("child_added"===n&&"child_removed"===s)this.changeMap.set(t,Uk(t,e.snapshotNode,r.snapshotNode));else if("child_removed"===n&&"child_added"===s)this.changeMap.delete(t);else if("child_removed"===n&&"child_changed"===s)this.changeMap.set(t,Vk(t,r.oldSnap));else if("child_changed"===n&&"child_added"===s)this.changeMap.set(t,nx(t,e.snapshotNode));else{if("child_changed"!==n||"child_changed"!==s)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(t,Uk(t,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(t,e)}getChanges(){return Array.from(this.changeMap.values())}}const YX=new class swe{getCompleteChild(e){return null}getChildAfterChild(e,n,t){return null}};class XH{constructor(e,n,t=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=t}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new i_(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return QH(this.writes_,e,t)}}getChildAfterChild(e,n,t){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:vb(this.viewCache_),s=function iwe(i,e,n,t,r,s){return function twe(i,e,n,t,r,s,o){let d;const m=r_(i.visibleWrites,e),f=bb(m,ni());if(null!=f)d=f;else{if(null==n)return[];d=sx(m,n)}if(d=d.withIndex(o),d.isEmpty()||d.isLeafNode())return[];{const b=[],w=o.getCompare(),I=s?d.getReverseIteratorFrom(t,o):d.getIteratorFrom(t,o);let S=I.getNext();for(;S&&b.length<r;)0!==w(S,t)&&b.push(S),S=I.getNext();return b}}(i.writeTree,i.treePath,e,n,t,r,s)}(this.writes_,r,n,1,t,e);return 0===s.length?null:s[0]}}function ZX(i,e,n,t,r,s){const o=e.eventCache;if(null!=cN(t,n))return e;{let d,m;if(Sn(n))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const f=vb(e),w=KH(t,f instanceof dn?f:dn.EMPTY_NODE);d=i.filter.updateFullNode(e.eventCache.getNode(),w,s)}else{const f=aN(t,vb(e));d=i.filter.updateFullNode(e.eventCache.getNode(),f,s)}else{const f=Tn(n);if(".priority"===f){(0,R.hu)(1===n_(n),"Can't have a priority with additional path components");const b=o.getNode();m=e.serverCache.getNode();const w=$X(t,n,b,m);d=null!=w?i.filter.updatePriority(b,w):o.getNode()}else{const b=Ri(n);let w;if(o.isCompleteForChild(f)){m=e.serverCache.getNode();const I=$X(t,n,o.getNode(),m);w=null!=I?o.getNode().getImmediateChild(f).updateChild(b,I):o.getNode().getImmediateChild(f)}else w=QH(t,f,e.serverCache);d=null!=w?i.filter.updateChild(o.getNode(),f,w,b,r,s):o.getNode()}}return Gk(e,d,o.isFullyInitialized()||Sn(n),i.filter.filtersNodes())}}function lN(i,e,n,t,r,s,o,d){const m=e.serverCache;let f;const b=o?i.filter:i.filter.getIndexedFilter();if(Sn(n))f=b.updateFullNode(m.getNode(),t,null);else if(b.filtersNodes()&&!m.isFiltered()){const S=m.getNode().updateChild(n,t);f=b.updateFullNode(m.getNode(),S,null)}else{const S=Tn(n);if(!m.isCompleteForPath(n)&&n_(n)>1)return e;const F=Ri(n),q=m.getNode().getImmediateChild(S).updateChild(F,t);f=".priority"===S?b.updatePriority(m.getNode(),q):b.updateChild(m.getNode(),S,q,F,YX,null)}const w=VX(e,f,m.isFullyInitialized()||Sn(n),b.filtersNodes());return ZX(i,w,n,r,new XH(r,w,s),d)}function JH(i,e,n,t,r,s,o){const d=e.eventCache;let m,f;const b=new XH(r,e,s);if(Sn(n))f=i.filter.updateFullNode(e.eventCache.getNode(),t,o),m=Gk(e,f,!0,i.filter.filtersNodes());else{const w=Tn(n);if(".priority"===w)f=i.filter.updatePriority(e.eventCache.getNode(),t),m=Gk(e,f,d.isFullyInitialized(),d.isFiltered());else{const I=Ri(n),S=d.getNode().getImmediateChild(w);let F;if(Sn(I))F=t;else{const z=b.getCompleteChild(w);F=null!=z?".priority"===AH(I)&&z.getChild(IX(I)).isEmpty()?z:z.updateChild(I,t):dn.EMPTY_NODE}m=S.equals(F)?e:Gk(e,i.filter.updateChild(d.getNode(),w,F,I,b,o),d.isFullyInitialized(),i.filter.filtersNodes())}}return m}function KX(i,e){return i.eventCache.isCompleteForChild(e)}function QX(i,e,n){return n.foreach((t,r)=>{e=e.updateChild(t,r)}),e}function ez(i,e,n,t,r,s,o,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f,m=e;f=Sn(n)?t:new Wi(null).setTree(n,t);const b=e.serverCache.getNode();return f.children.inorderTraversal((w,I)=>{if(b.hasChild(w)){const F=QX(0,e.serverCache.getNode().getImmediateChild(w),I);m=lN(i,m,new li(w),F,r,s,o,d)}}),f.children.inorderTraversal((w,I)=>{const S=!e.serverCache.isCompleteForChild(w)&&null===I.value;if(!b.hasChild(w)&&!S){const z=QX(0,e.serverCache.getNode().getImmediateChild(w),I);m=lN(i,m,new li(w),z,r,s,o,d)}}),m}class fwe{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const t=this.query_._queryParams,r=new BH(t.getIndex()),s=function T0e(i){return i.loadsAllData()?new BH(i.getIndex()):i.hasLimit()?new k0e(i):new Hk(i)}(t);this.processor_=function owe(i){return{filter:i}}(s);const o=n.serverCache,d=n.eventCache,m=r.updateFullNode(dn.EMPTY_NODE,o.getNode(),null),f=s.updateFullNode(dn.EMPTY_NODE,d.getNode(),null),b=new i_(m,o.isFullyInitialized(),r.filtersNodes()),w=new i_(f,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=rN(w,b),this.eventGenerator_=new V0e(this.query_)}get query(){return this.query_}}function gwe(i,e){const n=vb(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!Sn(e)&&!n.getImmediateChild(Tn(e)).isEmpty())?n.getChild(e):null}function XX(i){return 0===i.eventRegistrations_.length}function JX(i,e,n){const t=[];if(n){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const r=i.query._path;i.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,r);o&&t.push(o)})}if(e){let r=[];for(let s=0;s<i.eventRegistrations_.length;++s){const o=i.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){r=r.concat(i.eventRegistrations_.slice(s+1));break}}else r.push(o)}i.eventRegistrations_=r}else i.eventRegistrations_=[];return t}function eJ(i,e,n,t){e.type===nh.MERGE&&null!==e.source.queryId&&((0,R.hu)(vb(i.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(sN(i.viewCache_),"Missing event cache, even though we have a server cache"));const r=i.viewCache_,s=function cwe(i,e,n,t,r){const s=new rwe;let o,d;if(n.type===nh.OVERWRITE){const f=n;f.source.fromUser?o=JH(i,e,f.path,f.snap,t,r,s):((0,R.hu)(f.source.fromServer,"Unknown source."),d=f.source.tagged||e.serverCache.isFiltered()&&!Sn(f.path),o=lN(i,e,f.path,f.snap,t,r,d,s))}else if(n.type===nh.MERGE){const f=n;f.source.fromUser?o=function dwe(i,e,n,t,r,s,o){let d=e;return t.foreach((m,f)=>{const b=hr(n,m);KX(e,Tn(b))&&(d=JH(i,d,b,f,r,s,o))}),t.foreach((m,f)=>{const b=hr(n,m);KX(e,Tn(b))||(d=JH(i,d,b,f,r,s,o))}),d}(i,e,f.path,f.children,t,r,s):((0,R.hu)(f.source.fromServer,"Unknown source."),d=f.source.tagged||e.serverCache.isFiltered(),o=ez(i,e,f.path,f.children,t,r,d,s))}else if(n.type===nh.ACK_USER_WRITE){const f=n;o=f.revert?function mwe(i,e,n,t,r,s){let o;if(null!=cN(t,n))return e;{const d=new XH(t,e,r),m=e.eventCache.getNode();let f;if(Sn(n)||".priority"===Tn(n)){let b;if(e.serverCache.isFullyInitialized())b=aN(t,vb(e));else{const w=e.serverCache.getNode();(0,R.hu)(w instanceof dn,"serverChildren would be complete if leaf node"),b=KH(t,w)}f=i.filter.updateFullNode(m,b,s)}else{const b=Tn(n);let w=QH(t,b,e.serverCache);null==w&&e.serverCache.isCompleteForChild(b)&&(w=m.getImmediateChild(b)),f=null!=w?i.filter.updateChild(m,b,w,Ri(n),d,s):e.eventCache.getNode().hasChild(b)?i.filter.updateChild(m,b,dn.EMPTY_NODE,Ri(n),d,s):m,f.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=aN(t,vb(e)),o.isLeafNode()&&(f=i.filter.updateFullNode(f,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=cN(t,ni()),Gk(e,f,o,i.filter.filtersNodes())}}(i,e,f.path,t,r,s):function uwe(i,e,n,t,r,s,o){if(null!=cN(r,n))return e;const d=e.serverCache.isFiltered(),m=e.serverCache;if(null!=t.value){if(Sn(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return lN(i,e,n,m.getNode().getChild(n),r,s,d,o);if(Sn(n)){let f=new Wi(null);return m.getNode().forEachChild(th,(b,w)=>{f=f.set(new li(b),w)}),ez(i,e,n,f,r,s,d,o)}return e}{let f=new Wi(null);return t.foreach((b,w)=>{const I=hr(n,b);m.isCompleteForPath(I)&&(f=f.set(b,m.getNode().getChild(I)))}),ez(i,e,n,f,r,s,d,o)}}(i,e,f.path,f.affectedTree,t,r,s)}else{if(n.type!==nh.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+n.type);o=function hwe(i,e,n,t,r){const s=e.serverCache;return ZX(i,VX(e,s.getNode(),s.isFullyInitialized()||Sn(n),s.isFiltered()),n,t,YX,r)}(i,e,n.path,t,s)}const m=s.getChanges();return function lwe(i,e,n){const t=e.eventCache;if(t.isFullyInitialized()){const r=t.getNode().isLeafNode()||t.getNode().isEmpty(),s=sN(i);(n.length>0||!i.eventCache.isFullyInitialized()||r&&!t.getNode().equals(s)||!t.getNode().getPriority().equals(s.getPriority()))&&n.push(NX(sN(e)))}}(e,o,m),{viewCache:o,changes:m}}(i.processor_,r,e,n,t);return function awe(i,e){(0,R.hu)(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}(i.processor_,s.viewCache),(0,R.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,tJ(i,s.changes,s.viewCache.eventCache.getNode(),null)}function tJ(i,e,n,t){return function U0e(i,e,n,t){const r=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function D0e(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}(o.childName,o.snapshotNode))}),jk(i,r,"child_removed",e,t,n),jk(i,r,"child_added",e,t,n),jk(i,r,"child_moved",s,t,n),jk(i,r,"child_changed",e,t,n),jk(i,r,"value",e,t,n),r}(i.eventGenerator_,e,n,t?[t]:i.eventRegistrations_)}let dN,hN;class nJ{constructor(){this.views=new Map}}function tz(i,e,n,t){const r=e.source.queryId;if(null!==r){const s=i.views.get(r);return(0,R.hu)(null!=s,"SyncTree gave us an op for an invalid query."),eJ(s,e,n,t)}{let s=[];for(const o of i.views.values())s=s.concat(eJ(o,e,n,t));return s}}function iJ(i,e,n,t,r){const o=i.views.get(e._queryIdentifier);if(!o){let d=aN(n,r?t:null),m=!1;d?m=!0:t instanceof dn?(d=KH(n,t),m=!1):(d=dn.EMPTY_NODE,m=!1);const f=rN(new i_(d,m,!1),new i_(t,r,!1));return new fwe(e,f)}return o}function rJ(i){const e=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function s_(i,e){let n=null;for(const t of i.views.values())n=n||gwe(t,e);return n}function sJ(i,e){return e._queryParams.loadsAllData()?uN(i):i.views.get(e._queryIdentifier)}function oJ(i,e){return null!=sJ(i,e)}function o_(i){return null!=uN(i)}function uN(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let kwe=1;class aJ{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Wi(null),this.pendingWriteTree_=function nwe(){return{visibleWrites:Hd.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nz(i,e,n,t,r){return function G0e(i,e,n,t,r){(0,R.hu)(t>i.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),i.allWrites.push({path:e,snap:n,writeId:t,visible:r}),r&&(i.visibleWrites=$k(i.visibleWrites,e,n)),i.lastWriteId=t}(i.pendingWriteTree_,e,n,t,r),r?ox(i,new gb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function a_(i,e,n=!1){const t=function W0e(i,e){for(let n=0;n<i.allWrites.length;n++){const t=i.allWrites[n];if(t.writeId===e)return t}return null}(i.pendingWriteTree_,e);if(function q0e(i,e){const n=i.allWrites.findIndex(d=>d.writeId===e);(0,R.hu)(n>=0,"removeWrite called with nonexistent writeId.");const t=i.allWrites[n];i.allWrites.splice(n,1);let r=t.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){const d=i.allWrites[o];d.visible&&(o>=n&&Y0e(d,t.path)?r=!1:Rl(t.path,d.path)&&(s=!0)),o--}return!!r&&(s?(function Z0e(i){i.visibleWrites=jX(i.allWrites,K0e,ni()),i.lastWriteId=i.allWrites.length>0?i.allWrites[i.allWrites.length-1].writeId:-1}(i),!0):(t.snap?i.visibleWrites=UX(i.visibleWrites,t.path):Zs(t.children,m=>{i.visibleWrites=UX(i.visibleWrites,hr(t.path,m))}),!0))}(i.pendingWriteTree_,e)){let s=new Wi(null);return null!=t.snap?s=s.set(ni(),!0):Zs(t.children,o=>{s=s.set(new li(o),!0)}),ox(i,new iN(t.path,s,n))}return[]}function Wk(i,e,n){return ox(i,new gb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function mN(i,e,n,t,r=!1){const s=e._path,o=i.syncPointTree_.get(s);let d=[];if(o&&("default"===e._queryIdentifier||oJ(o,e))){const m=function Ewe(i,e,n,t){const r=e._queryIdentifier,s=[];let o=[];const d=o_(i);if("default"===r)for(const[m,f]of i.views.entries())o=o.concat(JX(f,n,t)),XX(f)&&(i.views.delete(m),f.query._queryParams.loadsAllData()||s.push(f.query));else{const m=i.views.get(r);m&&(o=o.concat(JX(m,n,t)),XX(m)&&(i.views.delete(r),m.query._queryParams.loadsAllData()||s.push(m.query)))}return d&&!o_(i)&&s.push(new(function wwe(){return(0,R.hu)(dN,"Reference.ts has not been loaded"),dN}())(e._repo,e._path)),{removed:s,events:o}}(o,e,n,t);(function xwe(i){return 0===i.views.size})(o)&&(i.syncPointTree_=i.syncPointTree_.remove(s));const f=m.removed;if(d=m.events,!r){const b=-1!==f.findIndex(I=>I._queryParams.loadsAllData()),w=i.syncPointTree_.findOnPath(s,(I,S)=>o_(S));if(b&&!w){const I=i.syncPointTree_.subtree(s);if(!I.isEmpty()){const S=function Owe(i){return i.fold((e,n,t)=>{if(n&&o_(n))return[uN(n)];{let r=[];return n&&(r=rJ(n)),Zs(t,(s,o)=>{r=r.concat(o)}),r}})}(I);for(let F=0;F<S.length;++F){const z=S[F],q=z.query,we=uJ(i,z);i.listenProvider_.startListening(Yk(q),qk(i,q),we.hashFn,we.onComplete)}}}!w&&f.length>0&&!t&&(b?i.listenProvider_.stopListening(Yk(e),null):f.forEach(I=>{const S=i.queryToTagMap.get(pN(I));i.listenProvider_.stopListening(Yk(I),S)}))}!function Nwe(i,e){for(let n=0;n<e.length;++n){const t=e[n];if(!t._queryParams.loadsAllData()){const r=pN(t),s=i.queryToTagMap.get(r);i.queryToTagMap.delete(r),i.tagToQueryMap.delete(s)}}}(i,f)}return d}function cJ(i,e,n,t){const r=rz(i,t);if(null!=r){const s=sz(r),o=s.path,d=s.queryId,m=wa(o,e);return oz(i,o,new gb($H(d),m,n))}return[]}function iz(i,e,n,t=!1){const r=e._path;let s=null,o=!1;i.syncPointTree_.foreachOnPath(r,(I,S)=>{const F=wa(I,r);s=s||s_(S,F),o=o||o_(S)});let m,d=i.syncPointTree_.get(r);d?(o=o||o_(d),s=s||s_(d,ni())):(d=new nJ,i.syncPointTree_=i.syncPointTree_.set(r,d)),null!=s?m=!0:(m=!1,s=dn.EMPTY_NODE,i.syncPointTree_.subtree(r).foreachChild((S,F)=>{const z=s_(F,ni());z&&(s=s.updateImmediateChild(S,z))}));const f=oJ(d,e);if(!f&&!e._queryParams.loadsAllData()){const I=pN(e);(0,R.hu)(!i.queryToTagMap.has(I),"View does not exist, but we have a tag");const S=function Fwe(){return kwe++}();i.queryToTagMap.set(I,S),i.tagToQueryMap.set(S,I)}let w=function Cwe(i,e,n,t,r,s){const o=iJ(i,e,t,r,s);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,o),function vwe(i,e){i.eventRegistrations_.push(e)}(o,n),function bwe(i,e){const n=i.viewCache_.eventCache,t=[];return n.getNode().isLeafNode()||n.getNode().forEachChild($i,(s,o)=>{t.push(nx(s,o))}),n.isFullyInitialized()&&t.push(NX(n.getNode())),tJ(i,t,n.getNode(),e)}(o,n)}(d,e,n,oN(i.pendingWriteTree_,r),s,m);if(!f&&!o&&!t){const I=sJ(d,e);w=w.concat(function Lwe(i,e,n){const t=e._path,r=qk(i,e),s=uJ(i,n),o=i.listenProvider_.startListening(Yk(e),r,s.hashFn,s.onComplete),d=i.syncPointTree_.subtree(t);if(r)(0,R.hu)(!o_(d.value),"If we're adding a query, it shouldn't be shadowed");else{const m=d.fold((f,b,w)=>{if(!Sn(f)&&b&&o_(b))return[uN(b).query];{let I=[];return b&&(I=I.concat(rJ(b).map(S=>S.query))),Zs(w,(S,F)=>{I=I.concat(F)}),I}});for(let f=0;f<m.length;++f){const b=m[f];i.listenProvider_.stopListening(Yk(b),qk(i,b))}}return o}(i,e,I))}return w}function fN(i,e,n){const r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(e,(o,d)=>{const f=s_(d,wa(o,e));if(f)return f});return GX(r,e,s,n,!0)}function ox(i,e){return lJ(e,i.syncPointTree_,null,oN(i.pendingWriteTree_,ni()))}function lJ(i,e,n,t){if(Sn(i.path))return dJ(i,e,n,t);{const r=e.get(ni());null==n&&null!=r&&(n=s_(r,ni()));let s=[];const o=Tn(i.path),d=i.operationForChild(o),m=e.children.get(o);if(m&&d){const f=n?n.getImmediateChild(o):null,b=WX(t,o);s=s.concat(lJ(d,m,f,b))}return r&&(s=s.concat(tz(r,i,t,n))),s}}function dJ(i,e,n,t){const r=e.get(ni());null==n&&null!=r&&(n=s_(r,ni()));let s=[];return e.children.inorderTraversal((o,d)=>{const m=n?n.getImmediateChild(o):null,f=WX(t,o),b=i.operationForChild(o);b&&(s=s.concat(dJ(b,d,m,f)))}),r&&(s=s.concat(tz(r,i,t,n))),s}function uJ(i,e){const n=e.query,t=qk(i,n);return{hashFn:()=>(function pwe(i){return i.viewCache_.serverCache.getNode()}(e)||dn.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return t?function Mwe(i,e,n){const t=rz(i,n);if(t){const r=sz(t),s=r.path,o=r.queryId,d=wa(s,e);return oz(i,s,new zk($H(o),d))}return[]}(i,n._path,t):function Awe(i,e){return ox(i,new zk({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(i,n._path);{const s=function Sye(i,e){let n="Unknown Error";"too_big"===i?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===i?n="Client doesn't have permission to access the desired data.":"unavailable"===i&&(n="The service is unavailable");const t=new Error(i+" at "+e._path.toString()+": "+n);return t.code=i.toUpperCase(),t}(r,n);return mN(i,n,null,s)}}}}function qk(i,e){const n=pN(e);return i.queryToTagMap.get(n)}function pN(i){return i._path.toString()+"$"+i._queryIdentifier}function rz(i,e){return i.tagToQueryMap.get(e)}function sz(i){const e=i.indexOf("$");return(0,R.hu)(-1!==e&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new li(i.substr(0,e))}}function oz(i,e,n){const t=i.syncPointTree_.get(e);return(0,R.hu)(t,"Missing sync point for query tag that we're tracking"),tz(t,n,oN(i.pendingWriteTree_,e),null)}function Yk(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(function Dwe(){return(0,R.hu)(hN,"Reference.ts has not been loaded"),hN}())(i._repo,i._path):i}class az{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new az(n)}node(){return this.node_}}class cz{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=hr(this.path_,e);return new cz(this.syncTree_,n)}node(){return fN(this.syncTree_,this.path_)}}const Bwe=function(i){return(i=i||{}).timestamp=i.timestamp||(new Date).getTime(),i},hJ=function(i,e,n){return i&&"object"==typeof i?((0,R.hu)(".sv"in i,"Unexpected leaf node or priority contents"),"string"==typeof i[".sv"]?Vwe(i[".sv"],e,n):"object"==typeof i[".sv"]?Uwe(i[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2))):i},Vwe=function(i,e,n){if("timestamp"===i)return n.timestamp;(0,R.hu)(!1,"Unexpected server value: "+i)},Uwe=function(i,e,n){i.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const t=i.increment;"number"!=typeof t&&(0,R.hu)(!1,"Unexpected increment value: "+t);const r=e.node();if((0,R.hu)(null!==r&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return t;const o=r.getValue();return"number"!=typeof o?t:o+t},mJ=function(i,e,n,t){return dz(e,new cz(n,i),t)},lz=function(i,e,n){return dz(i,new az(e),n)};function dz(i,e,n){const t=i.getPriority().val(),r=hJ(t,e.getImmediateChild(".priority"),n);let s;if(i.isLeafNode()){const o=i,d=hJ(o.getValue(),e,n);return d!==o.getValue()||r!==o.getPriority().val()?new ex(d,Cr(r)):i}{const o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new ex(r))),o.forEachChild($i,(d,m)=>{const f=dz(m,e.getImmediateChild(d),n);f!==m&&(s=s.updateImmediateChild(d,f))}),s}}class uz{constructor(e="",n=null,t={children:{},childCount:0}){this.name=e,this.parent=n,this.node=t}}function _N(i,e){let n=e instanceof li?e:new li(e),t=i,r=Tn(n);for(;null!==r;){const s=(0,R.DV)(t.node.children,r)||{children:{},childCount:0};t=new uz(r,t,s),n=Ri(n),r=Tn(n)}return t}function yb(i){return i.node.value}function hz(i,e){i.node.value=e,mz(i)}function fJ(i){return i.node.childCount>0}function gN(i,e){Zs(i.node.children,(n,t)=>{e(new uz(n,i,t))})}function pJ(i,e,n,t){n&&!t&&e(i),gN(i,r=>{pJ(r,e,!0,t)}),n&&t&&e(i)}function Zk(i){return new li(null===i.parent?i.name:Zk(i.parent)+"/"+i.name)}function mz(i){null!==i.parent&&function jwe(i,e,n){const t=function Hwe(i){return void 0===yb(i)&&!fJ(i)}(n),r=(0,R.r3)(i.node.children,e);t&&r?(delete i.node.children[e],i.node.childCount--,mz(i)):!t&&!r&&(i.node.children[e]=n.node,i.node.childCount++,mz(i))}(i.parent,i.name,i)}const Gwe=/[\[\].#$\/\u0000-\u001F\u007F]/,$we=/[\[\].#$\u0000-\u001F\u007F]/,fz=10485760,vN=function(i){return"string"==typeof i&&0!==i.length&&!Gwe.test(i)},_J=function(i){return"string"==typeof i&&0!==i.length&&!$we.test(i)},Kk=function(i){return null===i||"string"==typeof i||"number"==typeof i&&!$O(i)||i&&"object"==typeof i&&(0,R.r3)(i,".sv")},ih=function(i,e,n,t){t&&void 0===e||Qk((0,R.gK)(i,"value"),e,n)},Qk=function(i,e,n){const t=n instanceof li?new c0e(n,i):n;if(void 0===e)throw new Error(i+"contains undefined "+pb(t));if("function"==typeof e)throw new Error(i+"contains a function "+pb(t)+" with contents = "+e.toString());if($O(e))throw new Error(i+"contains "+e.toString()+" "+pb(t));if("string"==typeof e&&e.length>fz/3&&(0,R.ug)(e)>fz)throw new Error(i+"contains a string greater than "+fz+" utf8 bytes "+pb(t)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Zs(e,(o,d)=>{if(".value"===o)r=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!vN(o)))throw new Error(i+" contains an invalid key ("+o+") "+pb(t)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function l0e(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=(0,R.ug)(e),DX(i)})(t,o),Qk(i,d,t),function d0e(i){const e=i.parts_.pop();i.byteLength_-=(0,R.ug)(e),i.parts_.length>0&&(i.byteLength_-=1)}(t)}),r&&s)throw new Error(i+' contains ".value" child '+pb(t)+" in addition to actual children.")}},gJ=function(i,e,n,t){if(t&&void 0===e)return;const r=(0,R.gK)(i,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Zs(e,(o,d)=>{const m=new li(o);if(Qk(r,d,hr(n,m)),".priority"===AH(m)&&!Kk(d))throw new Error(r+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(m)}),function(i,e){let n,t;for(n=0;n<e.length;n++){t=e[n];const s=Nk(t);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!vN(s[o]))throw new Error(i+"contains an invalid key ("+s[o]+") in path "+t.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(a0e);let r=null;for(n=0;n<e.length;n++){if(t=e[n],null!==r&&Rl(r,t))throw new Error(i+"contains a path "+r.toString()+" that is ancestor of another path "+t.toString());r=t}}(r,s)},pz=function(i,e,n){if(!n||void 0!==e){if($O(e))throw new Error((0,R.gK)(i,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Kk(e))throw new Error((0,R.gK)(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Xk=function(i,e,n,t){if(!(t&&void 0===n||vN(n)))throw new Error((0,R.gK)(i,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Jk=function(i,e,n,t){if(!(t&&void 0===n||_J(n)))throw new Error((0,R.gK)(i,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Ywe=function(i,e,n,t){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Jk(i,e,n,t)},Pl=function(i,e){if(".info"===Tn(e))throw new Error(i+" failed = Can't modify data under /.info/")},vJ=function(i,e){const n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!vN(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),_J(i)}(n))throw new Error((0,R.gK)(i,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Zwe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function bN(i,e){let n=null;for(let t=0;t<e.length;t++){const r=e[t],s=r.getPath();null!==n&&!MH(s,n.path)&&(i.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(r)}n&&i.eventLists_.push(n)}function bJ(i,e,n){bN(i,n),yJ(i,t=>MH(t,e))}function Fc(i,e,n){bN(i,n),yJ(i,t=>Rl(t,e)||Rl(e,t))}function yJ(i,e){i.recursionDepth_++;let n=!0;for(let t=0;t<i.eventLists_.length;t++){const r=i.eventLists_[t];r&&(e(r.path)?(Kwe(i.eventLists_[t]),i.eventLists_[t]=null):n=!1)}n&&(i.eventLists_=[]),i.recursionDepth_--}function Kwe(i){for(let e=0;e<i.events.length;e++){const n=i.events[e];if(null!==n){i.events[e]=null;const t=n.getEventRunner();mb&&Ys("event: "+n.toString()),Xw(t)}}}const wJ="repo_interrupt",Qwe=25;class Xwe{constructor(e,n,t,r){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=t,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Zwe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=nN(),this.transactionQueueTree_=new uz,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function xJ(i){const n=i.infoData_.getNode(new li(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+n}function eT(i){return Bwe({timestamp:xJ(i)})}function CJ(i,e,n,t,r){i.dataUpdateCount++;const s=new li(e);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,n):n;let o=[];if(r)if(t){const m=(0,R.UI)(n,f=>Cr(f));o=function Rwe(i,e,n,t){const r=rz(i,t);if(r){const s=sz(r),o=s.path,d=s.queryId,m=wa(o,e),f=Wi.fromObject(n);return oz(i,o,new rx($H(d),m,f))}return[]}(i.serverSyncTree_,s,m,r)}else{const m=Cr(n);o=cJ(i.serverSyncTree_,s,m,r)}else if(t){const m=(0,R.UI)(n,f=>Cr(f));o=function Swe(i,e,n){const t=Wi.fromObject(n);return ox(i,new rx({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}(i.serverSyncTree_,s,m)}else{const m=Cr(n);o=Wk(i.serverSyncTree_,s,m)}let d=s;o.length>0&&(d=cx(i,s)),Fc(i.eventQueue_,d,o)}function EJ(i,e){_z(i,"connected",e),!1===e&&function ixe(i){ax(i,"onDisconnectEvents");const e=eT(i),n=nN();zH(i.onDisconnect_,ni(),(r,s)=>{const o=mJ(r,s,i.serverSyncTree_,e);ix(n,r,o)});let t=[];zH(n,ni(),(r,s)=>{t=t.concat(Wk(i.serverSyncTree_,r,s));const o=yz(i,r);cx(i,o)}),i.onDisconnect_=nN(),Fc(i.eventQueue_,ni(),t)}(i)}function _z(i,e,n){const t=new li("/.info/"+e),r=Cr(n);i.infoData_.updateSnapshot(t,r);const s=Wk(i.infoSyncTree_,t,r);Fc(i.eventQueue_,t,s)}function yN(i){return i.nextWriteId_++}function gz(i,e,n,t,r){ax(i,"set",{path:e.toString(),value:n,priority:t});const s=eT(i),o=Cr(n,t),d=fN(i.serverSyncTree_,e),m=lz(o,d,s),f=yN(i),b=nz(i.serverSyncTree_,e,m,f,!0);bN(i.eventQueue_,b),i.server_.put(e.toString(),o.val(!0),(I,S)=>{const F="ok"===I;F||Zo("set at "+e+" failed: "+I);const z=a_(i.serverSyncTree_,f,!F);Fc(i.eventQueue_,e,z),c_(0,r,I,S)});const w=yz(i,e);cx(i,w),Fc(i.eventQueue_,w,[])}function rxe(i,e,n){i.server_.onDisconnectCancel(e.toString(),(t,r)=>{"ok"===t&&HH(i.onDisconnect_,e),c_(0,n,t,r)})}function IJ(i,e,n,t){const r=Cr(n);i.server_.onDisconnectPut(e.toString(),r.val(!0),(s,o)=>{"ok"===s&&ix(i.onDisconnect_,e,r),c_(0,t,s,o)})}function vz(i,e,n){let t;t=".info"===Tn(e._path)?mN(i.infoSyncTree_,e,n):mN(i.serverSyncTree_,e,n),bJ(i.eventQueue_,e._path,t)}function DJ(i){i.persistentConnection_&&i.persistentConnection_.interrupt(wJ)}function ax(i,...e){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),Ys(n,...e)}function c_(i,e,n,t){e&&Xw(()=>{if("ok"===n)e(null);else{const r=(n||"error").toUpperCase();let s=r;t&&(s+=": "+t);const o=new Error(s);o.code=r,e(o)}})}function bz(i,e,n){return fN(i.serverSyncTree_,e,n)||dn.EMPTY_NODE}function wN(i,e=i.transactionQueueTree_){if(e||xN(i,e),yb(e)){const n=TJ(i,e);(0,R.hu)(n.length>0,"Sending zero length transaction queue"),n.every(r=>0===r.status)&&function dxe(i,e,n){const t=n.map(f=>f.currentWriteId),r=bz(i,e,t);let s=r;const o=r.hash();for(let f=0;f<n.length;f++){const b=n[f];(0,R.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const w=wa(e,b.path);s=s.updateChild(w,b.currentOutputSnapshotRaw)}const d=s.val(!0),m=e;i.server_.put(m.toString(),d,f=>{ax(i,"transaction put response",{path:m.toString(),status:f});let b=[];if("ok"===f){const w=[];for(let I=0;I<n.length;I++)n[I].status=2,b=b.concat(a_(i.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&w.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();xN(i,_N(i.transactionQueueTree_,e)),wN(i,i.transactionQueueTree_),Fc(i.eventQueue_,e,b);for(let I=0;I<w.length;I++)Xw(w[I])}else{if("datastale"===f)for(let w=0;w<n.length;w++)n[w].status=3===n[w].status?4:0;else{Zo("transaction at "+m.toString()+" failed: "+f);for(let w=0;w<n.length;w++)n[w].status=4,n[w].abortReason=f}cx(i,e)}},o)}(i,Zk(e),n)}else fJ(e)&&gN(e,n=>{wN(i,n)})}function cx(i,e){const n=kJ(i,e),t=Zk(n);return function uxe(i,e,n){if(0===e.length)return;const t=[];let r=[];const o=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const m=e[d],f=wa(n,m.path);let w,b=!1;if((0,R.hu)(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)b=!0,w=m.abortReason,r=r.concat(a_(i.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=Qwe)b=!0,w="maxretry",r=r.concat(a_(i.serverSyncTree_,m.currentWriteId,!0));else{const I=bz(i,m.path,o);m.currentInputSnapshot=I;const S=e[d].update(I.val());if(void 0!==S){Qk("transaction failed: Data returned ",S,m.path);let F=Cr(S);"object"==typeof S&&null!=S&&(0,R.r3)(S,".priority")||(F=F.updatePriority(I.getPriority()));const q=m.currentWriteId,we=eT(i),Ae=lz(F,I,we);m.currentOutputSnapshotRaw=F,m.currentOutputSnapshotResolved=Ae,m.currentWriteId=yN(i),o.splice(o.indexOf(q),1),r=r.concat(nz(i.serverSyncTree_,m.path,Ae,m.currentWriteId,m.applyLocally)),r=r.concat(a_(i.serverSyncTree_,q,!0))}else b=!0,w="nodata",r=r.concat(a_(i.serverSyncTree_,m.currentWriteId,!0))}Fc(i.eventQueue_,n,r),r=[],b&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&t.push("nodata"===w?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(w),!1,null)))}xN(i,i.transactionQueueTree_);for(let d=0;d<t.length;d++)Xw(t[d]);wN(i,i.transactionQueueTree_)}(i,TJ(i,n),t),t}function kJ(i,e){let n,t=i.transactionQueueTree_;for(n=Tn(e);null!==n&&void 0===yb(t);)t=_N(t,n),n=Tn(e=Ri(e));return t}function TJ(i,e){const n=[];return SJ(i,e,n),n.sort((t,r)=>t.order-r.order),n}function SJ(i,e,n){const t=yb(e);if(t)for(let r=0;r<t.length;r++)n.push(t[r]);gN(e,r=>{SJ(i,r,n)})}function xN(i,e){const n=yb(e);if(n){let t=0;for(let r=0;r<n.length;r++)2!==n[r].status&&(n[t]=n[r],t++);n.length=t,hz(e,n.length>0?n:void 0)}gN(e,t=>{xN(i,t)})}function yz(i,e){const n=Zk(kJ(i,e)),t=_N(i.transactionQueueTree_,e);return function zwe(i,e,n){let t=n?i:i.parent;for(;null!==t;){if(e(t))return!0;t=t.parent}}(t,r=>{wz(i,r)}),wz(i,t),pJ(t,r=>{wz(i,r)}),n}function wz(i,e){const n=yb(e);if(n){const t=[];let r=[],s=-1;for(let o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?((0,R.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):((0,R.hu)(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),r=r.concat(a_(i.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&t.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?hz(e,void 0):n.length=s+1,Fc(i.eventQueue_,Zk(e),r);for(let o=0;o<t.length;o++)Xw(t[o])}}const xz=function(i,e){const n=fxe(i),t=n.namespace;return"firebase.com"===n.domain&&eh(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!t||"undefined"===t)&&"localhost"!==n.domain&&eh("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Zo("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new EH(n.host,n.secure,t,"ws"===n.scheme||"wss"===n.scheme,e,"",t!==n.subdomain),path:new li(n.pathString)}},fxe=function(i){let e="",n="",t="",r="",s="",o=!0,d="https",m=443;if("string"==typeof i){let f=i.indexOf("//");f>=0&&(d=i.substring(0,f-1),i=i.substring(f+2));let b=i.indexOf("/");-1===b&&(b=i.length);let w=i.indexOf("?");-1===w&&(w=i.length),e=i.substring(0,Math.min(b,w)),b<w&&(r=function hxe(i){let e="";const n=i.split("/");for(let t=0;t<n.length;t++)if(n[t].length>0){let r=n[t];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}(i.substring(b,w)));const I=function mxe(i){const e={};"?"===i.charAt(0)&&(i=i.substring(1));for(const n of i.split("&")){if(0===n.length)continue;const t=n.split("=");2===t.length?e[decodeURIComponent(t[0])]=decodeURIComponent(t[1]):Zo(`Invalid query segment '${n}' in query '${i}'`)}return e}(i.substring(Math.min(i.length,w)));f=e.indexOf(":"),f>=0?(o="https"===d||"wss"===d,m=parseInt(e.substring(f+1),10)):f=e.length;const S=e.slice(0,f);if("localhost"===S.toLowerCase())n="localhost";else if(S.split(".").length<=2)n=S;else{const F=e.indexOf(".");t=e.substring(0,F).toLowerCase(),n=e.substring(F+1),s=t}"ns"in I&&(s=I.ns)}return{host:e,port:m,domain:n,subdomain:t,secure:o,scheme:d,pathString:r,namespace:s}},AJ="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",pxe=function(){let i=0;const e=[];return function(n){const t=n===i;let r;i=n;const s=new Array(8);for(r=7;r>=0;r--)s[r]=AJ.charAt(n%64),n=Math.floor(n/64);(0,R.hu)(0===n,"Cannot push at time == 0");let o=s.join("");if(t){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)o+=AJ.charAt(e[r]);return(0,R.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class MJ{constructor(e,n,t,r){this.eventType=e,this.eventRegistration=n,this.snapshot=t,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Wl)(this.snapshot.exportVal())}}class RJ{constructor(e,n,t){this.eventRegistration=e,this.error=n,this.path=t}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cz{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class PJ{constructor(e,n){this._repo=e,this._path=n}cancel(){const e=new R.BH;return rxe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Pl("OnDisconnect.remove",this._path);const e=new R.BH;return IJ(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Pl("OnDisconnect.set",this._path),ih("OnDisconnect.set",e,this._path,!1);const n=new R.BH;return IJ(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}setWithPriority(e,n){Pl("OnDisconnect.setWithPriority",this._path),ih("OnDisconnect.setWithPriority",e,this._path,!1),pz("OnDisconnect.setWithPriority",n,!1);const t=new R.BH;return function sxe(i,e,n,t,r){const s=Cr(n,t);i.server_.onDisconnectPut(e.toString(),s.val(!0),(o,d)=>{"ok"===o&&ix(i.onDisconnect_,e,s),c_(0,r,o,d)})}(this._repo,this._path,e,n,t.wrapCallback(()=>{})),t.promise}update(e){Pl("OnDisconnect.update",this._path),gJ("OnDisconnect.update",e,this._path,!1);const n=new R.BH;return function oxe(i,e,n,t){if((0,R.xb)(n))return Ys("onDisconnect().update() called with empty data.  Don't do anything."),void c_(0,t,"ok",void 0);i.server_.onDisconnectMerge(e.toString(),n,(r,s)=>{"ok"===r&&Zs(n,(o,d)=>{const m=Cr(d);ix(i.onDisconnect_,hr(e,o),m)}),c_(0,t,r,s)})}(this._repo,this._path,e,n.wrapCallback(()=>{})),n.promise}}class Za{constructor(e,n,t,r){this._repo=e,this._path=n,this._queryParams=t,this._orderByCalled=r}get key(){return Sn(this._path)?null:AH(this._path)}get ref(){return new Ol(this._repo,this._path)}get _queryIdentifier(){const e=LX(this._queryParams),n=xH(e);return"{}"===n?"default":n}get _queryObject(){return LX(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof Za))return!1;const n=this._repo===e._repo,t=MH(this._path,e._path);return n&&t&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function o0e(i){let e="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)""!==i.pieces_[n]&&(e+="/"+encodeURIComponent(String(i.pieces_[n])));return e||"/"}(this._path)}}function CN(i,e){if(!0===i._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function l_(i){let e=null,n=null;if(i.hasStart()&&(e=i.getIndexStartValue()),i.hasEnd()&&(n=i.getIndexEndValue()),i.getIndex()===th){const t="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==e_)throw new Error(t);if("string"!=typeof e)throw new Error(r)}if(i.hasEnd()){if(i.getIndexEndName()!==Vm)throw new Error(t);if("string"!=typeof n)throw new Error(r)}}else if(i.getIndex()===$i){if(null!=e&&!Kk(e)||null!=n&&!Kk(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,R.hu)(i.getIndex()instanceof FH||i.getIndex()===LH,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function EN(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ol extends Za{constructor(e,n){super(e,n,new JO,!1)}get parent(){const e=IX(this._path);return null===e?null:new Ol(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class wb{constructor(e,n,t){this._node=e,this.ref=n,this._index=t}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new li(e),t=xb(this.ref,e);return new wb(this._node.getChild(n),t,$i)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,r)=>e(new wb(r,xb(this.ref,t),$i)))}hasChild(e){const n=new li(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function OJ(i,e){return(i=(0,R.m9)(i))._checkNotDeleted("ref"),void 0!==e?xb(i._root,e):i._root}function NJ(i,e){(i=(0,R.m9)(i))._checkNotDeleted("refFromURL");const n=xz(e,i._repo.repoInfo_.nodeAdmin);vJ("refFromURL",n);const t=n.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&t.host!==i._repo.repoInfo_.host&&eh("refFromURL: Host name does not match the current database: (found "+t.host+" but expected "+i._repo.repoInfo_.host+")"),OJ(i,n.path.toString())}function xb(i,e){return null===Tn((i=(0,R.m9)(i))._path)?Ywe("child","path",e,!1):Jk("child","path",e,!1),new Ol(i._repo,hr(i._path,e))}function Ez(i,e){i=(0,R.m9)(i),Pl("set",i._path),ih("set",e,i._path,!1);const n=new R.BH;return gz(i._repo,i._path,e,null,n.wrapCallback(()=>{})),n.promise}function yxe(i,e){gJ("update",e,i._path,!1);const n=new R.BH;return function nxe(i,e,n,t){ax(i,"update",{path:e.toString(),value:n});let r=!0;const s=eT(i),o={};if(Zs(n,(d,m)=>{r=!1,o[d]=mJ(hr(e,d),Cr(m),i.serverSyncTree_,s)}),r)Ys("update() called with empty data.  Don't do anything."),c_(0,t,"ok",void 0);else{const d=yN(i),m=function Twe(i,e,n,t){!function $0e(i,e,n,t){(0,R.hu)(t>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:e,children:n,writeId:t,visible:!0}),i.visibleWrites=qH(i.visibleWrites,e,n),i.lastWriteId=t}(i.pendingWriteTree_,e,n,t);const r=Wi.fromObject(n);return ox(i,new rx({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(i.serverSyncTree_,e,o,d);bN(i.eventQueue_,m),i.server_.merge(e.toString(),n,(f,b)=>{const w="ok"===f;w||Zo("update at "+e+" failed: "+f);const I=a_(i.serverSyncTree_,d,!w),S=I.length>0?cx(i,e):e;Fc(i.eventQueue_,S,I),c_(0,t,f,b)}),Zs(n,f=>{const b=yz(i,hr(e,f));cx(i,b)}),Fc(i.eventQueue_,e,[])}}(i._repo,i._path,e,n.wrapCallback(()=>{})),n.promise}function wxe(i){i=(0,R.m9)(i);const e=new Cz(()=>{}),n=new tT(e);return function txe(i,e,n){const t=function Pwe(i,e){const n=e._path;let t=null;i.syncPointTree_.foreachOnPath(n,(f,b)=>{const w=wa(f,n);t=t||s_(b,w)});let r=i.syncPointTree_.get(n);r?t=t||s_(r,ni()):(r=new nJ,i.syncPointTree_=i.syncPointTree_.set(n,r));const s=null!=t,o=s?new i_(t,!0,!1):null;return function _we(i){return sN(i.viewCache_)}(iJ(r,e,oN(i.pendingWriteTree_,e._path),s?o.getNode():dn.EMPTY_NODE,s))}(i.serverSyncTree_,e);return null!=t?Promise.resolve(t):i.server_.get(e).then(r=>{const s=Cr(r).withIndex(e._queryParams.getIndex());let o;if(iz(i.serverSyncTree_,e,n,!0),e._queryParams.loadsAllData())o=Wk(i.serverSyncTree_,e._path,s);else{const d=qk(i.serverSyncTree_,e);o=cJ(i.serverSyncTree_,e._path,s,d)}return Fc(i.eventQueue_,e._path,o),mN(i.serverSyncTree_,e,n,null,!0),s},r=>(ax(i,"get for query "+(0,R.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(i._repo,i,n).then(t=>new wb(t,new Ol(i._repo,i._path),i._queryParams.getIndex()))}class tT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,n){const t=n._queryParams.getIndex();return new MJ("value",this,new wb(e.snapshotNode,new Ol(n._repo,n._path),t))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RJ(this,e,n):null}matches(e){return e instanceof tT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class IN{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n="children_added"===e?"child_added":e;return n="children_removed"===n?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RJ(this,e,n):null}createEvent(e,n){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const t=xb(new Ol(n._repo,n._path),e.childName),r=n._queryParams.getIndex();return new MJ(e.type,this,new wb(e.snapshotNode,t,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof IN&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function nT(i,e,n,t,r){let s;if("object"==typeof t&&(s=void 0,r=t),"function"==typeof t&&(s=t),r&&r.onlyOnce){const m=n,f=(b,w)=>{vz(i._repo,i,d),m(b,w)};f.userCallback=n.userCallback,f.context=n.context,n=f}const o=new Cz(n,s||void 0),d="value"===e?new tT(o):new IN(e,o);return function axe(i,e,n){let t;t=".info"===Tn(e._path)?iz(i.infoSyncTree_,e,n):iz(i.serverSyncTree_,e,n),bJ(i.eventQueue_,e._path,t)}(i._repo,i,d),()=>vz(i._repo,i,d)}function Iz(i,e,n,t){return nT(i,"value",e,n,t)}function FJ(i,e,n,t){return nT(i,"child_added",e,n,t)}function LJ(i,e,n,t){return nT(i,"child_changed",e,n,t)}function BJ(i,e,n,t){return nT(i,"child_moved",e,n,t)}function VJ(i,e,n,t){return nT(i,"child_removed",e,n,t)}function UJ(i,e,n){let t=null;const r=n?new Cz(n):null;"value"===e?t=new tT(r):e&&(t=new IN(e,r)),vz(i._repo,i,t)}class zd{}class HJ extends zd{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ih("endAt",this._value,e._path,!0);const n=UH(e._queryParams,this._value,this._key);if(EN(n),l_(n),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Za(e._repo,e._path,n,e._orderByCalled)}}class Cxe extends zd{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ih("endBefore",this._value,e._path,!1);const n=function R0e(i,e,n){let t;return t=UH(i,e,i.index_===th||n?n:e_),t.endBeforeSet_=!0,t}(e._queryParams,this._value,this._key);if(EN(n),l_(n),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Za(e._repo,e._path,n,e._orderByCalled)}}class zJ extends zd{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ih("startAt",this._value,e._path,!0);const n=VH(e._queryParams,this._value,this._key);if(EN(n),l_(n),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Za(e._repo,e._path,n,e._orderByCalled)}}class Dxe extends zd{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){ih("startAfter",this._value,e._path,!1);const n=function M0e(i,e,n){let t;return t=VH(i,e,i.index_===th||n?n:Vm),t.startAfterSet_=!0,t}(e._queryParams,this._value,this._key);if(EN(n),l_(n),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Za(e._repo,e._path,n,e._orderByCalled)}}class Txe extends zd{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Za(e._repo,e._path,function S0e(i,e){const n=i.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}class Axe extends zd{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Za(e._repo,e._path,function A0e(i,e){const n=i.copy();return n.limitSet_=!0,n.limit_=e,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}class Rxe extends zd{constructor(e){super(),this._path=e}_apply(e){CN(e,"orderByChild");const n=new li(this._path);if(Sn(n))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const t=new FH(n),r=eN(e._queryParams,t);return l_(r),new Za(e._repo,e._path,r,!0)}}class Oxe extends zd{_apply(e){CN(e,"orderByKey");const n=eN(e._queryParams,th);return l_(n),new Za(e._repo,e._path,n,!0)}}class Fxe extends zd{_apply(e){CN(e,"orderByPriority");const n=eN(e._queryParams,$i);return l_(n),new Za(e._repo,e._path,n,!0)}}class Bxe extends zd{_apply(e){CN(e,"orderByValue");const n=eN(e._queryParams,LH);return l_(n),new Za(e._repo,e._path,n,!0)}}class Uxe extends zd{constructor(e,n){super(),this._value=e,this._key=n}_apply(e){if(ih("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new HJ(this._value,this._key)._apply(new zJ(this._value,this._key)._apply(e))}}function jd(i,...e){let n=(0,R.m9)(i);for(const t of e)n=t._apply(n);return n}(function ywe(i){(0,R.hu)(!dN,"__referenceConstructor has already been defined"),dN=i})(Ol),function Iwe(i){(0,R.hu)(!hN,"__referenceConstructor has already been defined"),hN=i}(Ol);const Dz={};function GJ(i,e,n,t,r){let s=t||i.options.databaseURL;void 0===s&&(i.options.projectId||eh("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ys("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let m,f,o=xz(s,r),d=o.repoInfo;typeof process<"u"&&process.env&&(f=process.env.FIREBASE_DATABASE_EMULATOR_HOST),f?(m=!0,s=`http://${f}?ns=${d.namespace}`,o=xz(s,r),d=o.repoInfo):m=!o.repoInfo.secure;const b=r&&m?new Ok(Ok.OWNER):new Nye(i.name,i.options,e);vJ("Invalid Firebase Database URL",o),Sn(o.path)||eh("Database URL must point to the root of a Firebase Database (not including a child path).");const w=function $xe(i,e,n,t){let r=Dz[e.name];r||(r={},Dz[e.name]=r);let s=r[i.toURLString()];return s&&eh("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Xwe(i,false,n,t),r[i.toURLString()]=s,s}(d,i,b,new Oye(i.name,n));return new qxe(w,i)}class qxe{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Jwe(i,e,n){if(i.stats_=kH(i.repoInfo_),i.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)i.server_=new tN(i.repoInfo_,(t,r,s,o)=>{CJ(i,t,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>EJ(i,!0),0);else{if(typeof n<"u"&&null!==n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Wl)(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}i.persistentConnection_=new _b(i.repoInfo_,e,(t,r,s,o)=>{CJ(i,t,r,s,o)},t=>{EJ(i,t)},t=>{!function exe(i,e){Zs(e,(n,t)=>{_z(i,n,t)})}(i,t)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(t=>{i.server_.refreshAuthToken(t)}),i.appCheckProvider_.addTokenChangeListener(t=>{i.server_.refreshAppCheckToken(t.token)}),i.statsReporter_=function Bye(i,e){const n=i.toString();return DH[n]||(DH[n]=e()),DH[n]}(i.repoInfo_,()=>new B0e(i.stats_,i.server_)),i.infoData_=new P0e,i.infoSyncTree_=new aJ({startListening:(t,r,s,o)=>{let d=[];const m=i.infoData_.getNode(t._path);return m.isEmpty()||(d=Wk(i.infoSyncTree_,t._path,m),setTimeout(()=>{o("ok")},0)),d},stopListening:()=>{}}),_z(i,"connected",!1),i.serverSyncTree_=new aJ({startListening:(t,r,s,o)=>(i.server_.listen(t,s,r,(d,m)=>{const f=o(d,m);Fc(i.eventQueue_,t._path,f)}),[]),stopListening:(t,r)=>{i.server_.unlisten(t,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ol(this._repo,ni())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Gxe(i,e){const n=Dz[e];(!n||n[i.key]!==i)&&eh(`Database ${e}(${i.repoInfo_}) has already been deleted.`),DJ(i),delete n[i.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&eh("Cannot call "+e+" on a deleted database.")}}function $J(){mX.IS_TRANSPORT_INITIALIZED&&Zo("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Yxe(){$J(),t_.forceDisallow()}function Zxe(){$J(),Jw.forceDisallow(),t_.forceAllow()}function Xxe(i,e){qQ(i,e)}const eCe={".sv":"timestamp"};class iCe{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}_b.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)},_b.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)},function Jxe(i){zQ(xp.SDK_VERSION),(0,xp._registerComponent)(new cs.wA("database",(e,{instanceIdentifier:n})=>GJ(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n),"PUBLIC").setMultipleInstances(!0)),(0,xp.registerVersion)(UQ,"0.14.4",i),(0,xp.registerVersion)(UQ,"0.14.4","esm2017")}();const aCe=new Cs.Yd("@firebase/database-compat"),qJ=function(i){aCe.warn("FIREBASE WARNING: "+i)};class dCe{constructor(e){this._delegate=e}cancel(e){(0,R.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,R.Wj)("OnDisconnect.cancel","onComplete",e,!0);const n=this._delegate.cancel();return e&&n.then(()=>e(null),t=>e(t)),n}remove(e){(0,R.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,R.Wj)("OnDisconnect.remove","onComplete",e,!0);const n=this._delegate.remove();return e&&n.then(()=>e(null),t=>e(t)),n}set(e,n){(0,R.Dv)("OnDisconnect.set",1,2,arguments.length),(0,R.Wj)("OnDisconnect.set","onComplete",n,!0);const t=this._delegate.set(e);return n&&t.then(()=>n(null),r=>n(r)),t}setWithPriority(e,n,t){(0,R.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,R.Wj)("OnDisconnect.setWithPriority","onComplete",t,!0);const r=this._delegate.setWithPriority(e,n);return t&&r.then(()=>t(null),s=>t(s)),r}update(e,n){if((0,R.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,qJ("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,R.Wj)("OnDisconnect.update","onComplete",n,!0);const t=this._delegate.update(e);return n&&t.then(()=>n(null),r=>n(r)),t}}class uCe{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return(0,R.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class d_{constructor(e,n){this._database=e,this._delegate=n}val(){return(0,R.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,R.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,R.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,R.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,R.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Jk("DataSnapshot.child","path",e,!1),new d_(this._database,this._delegate.child(e))}hasChild(e){return(0,R.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Jk("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,R.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,R.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,R.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(n=>e(new d_(this._database,n)))}hasChildren(){return(0,R.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,R.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,R.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lc(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Co{constructor(e,n){this.database=e,this._delegate=n}on(e,n,t,r){var s;(0,R.Dv)("Query.on",2,4,arguments.length),(0,R.Wj)("Query.on","callback",n,!1);const o=Co.getCancelAndContextArgs_("Query.on",t,r),d=(f,b)=>{n.call(o.context,new d_(this.database,f),b)};d.userCallback=n,d.context=o.context;const m=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return Iz(this._delegate,d,m),n;case"child_added":return FJ(this._delegate,d,m),n;case"child_removed":return VJ(this._delegate,d,m),n;case"child_changed":return LJ(this._delegate,d,m),n;case"child_moved":return BJ(this._delegate,d,m),n;default:throw new Error((0,R.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,n,t){if((0,R.Dv)("Query.off",0,3,arguments.length),function(i,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,R.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,R.Wj)("Query.off","callback",n,!0),(0,R.lb)("Query.off","context",t,!0),n){const r=()=>{};r.userCallback=n,r.context=t,UJ(this._delegate,e,r)}else UJ(this._delegate,e)}get(){return wxe(this._delegate).then(e=>new d_(this.database,e))}once(e,n,t,r){(0,R.Dv)("Query.once",1,4,arguments.length),(0,R.Wj)("Query.once","callback",n,!0);const s=Co.getCancelAndContextArgs_("Query.once",t,r),o=new R.BH,d=(f,b)=>{const w=new d_(this.database,f);n&&n.call(s.context,w,b),o.resolve(w)};d.userCallback=n,d.context=s.context;const m=f=>{s.cancel&&s.cancel.call(s.context,f),o.reject(f)};switch(e){case"value":Iz(this._delegate,d,m,{onlyOnce:!0});break;case"child_added":FJ(this._delegate,d,m,{onlyOnce:!0});break;case"child_removed":VJ(this._delegate,d,m,{onlyOnce:!0});break;case"child_changed":LJ(this._delegate,d,m,{onlyOnce:!0});break;case"child_moved":BJ(this._delegate,d,m,{onlyOnce:!0});break;default:throw new Error((0,R.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,R.Dv)("Query.limitToFirst",1,1,arguments.length),new Co(this.database,jd(this._delegate,function Sxe(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Txe(i)}(e)))}limitToLast(e){return(0,R.Dv)("Query.limitToLast",1,1,arguments.length),new Co(this.database,jd(this._delegate,function Mxe(i){if("number"!=typeof i||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Axe(i)}(e)))}orderByChild(e){return(0,R.Dv)("Query.orderByChild",1,1,arguments.length),new Co(this.database,jd(this._delegate,function Pxe(i){if("$key"===i)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===i)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===i)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Jk("orderByChild","path",i,!1),new Rxe(i)}(e)))}orderByKey(){return(0,R.Dv)("Query.orderByKey",0,0,arguments.length),new Co(this.database,jd(this._delegate,function Nxe(){return new Oxe}()))}orderByPriority(){return(0,R.Dv)("Query.orderByPriority",0,0,arguments.length),new Co(this.database,jd(this._delegate,function Lxe(){return new Fxe}()))}orderByValue(){return(0,R.Dv)("Query.orderByValue",0,0,arguments.length),new Co(this.database,jd(this._delegate,function Vxe(){return new Bxe}()))}startAt(e=null,n){return(0,R.Dv)("Query.startAt",0,2,arguments.length),new Co(this.database,jd(this._delegate,function Ixe(i=null,e){return Xk("startAt","key",e,!0),new zJ(i,e)}(e,n)))}startAfter(e=null,n){return(0,R.Dv)("Query.startAfter",0,2,arguments.length),new Co(this.database,jd(this._delegate,function kxe(i,e){return Xk("startAfter","key",e,!0),new Dxe(i,e)}(e,n)))}endAt(e=null,n){return(0,R.Dv)("Query.endAt",0,2,arguments.length),new Co(this.database,jd(this._delegate,function xxe(i,e){return Xk("endAt","key",e,!0),new HJ(i,e)}(e,n)))}endBefore(e=null,n){return(0,R.Dv)("Query.endBefore",0,2,arguments.length),new Co(this.database,jd(this._delegate,function Exe(i,e){return Xk("endBefore","key",e,!0),new Cxe(i,e)}(e,n)))}equalTo(e,n){return(0,R.Dv)("Query.equalTo",1,2,arguments.length),new Co(this.database,jd(this._delegate,function Hxe(i,e){return Xk("equalTo","key",e,!0),new Uxe(i,e)}(e,n)))}toString(){return(0,R.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,R.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,R.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Co))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,n,t){const r={cancel:void 0,context:void 0};if(n&&t)r.cancel=n,(0,R.Wj)(e,"cancel",r.cancel,!0),r.context=t,(0,R.lb)(e,"context",r.context,!0);else if(n)if("object"==typeof n&&null!==n)r.context=n;else{if("function"!=typeof n)throw new Error((0,R.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=n}return r}get ref(){return new Lc(this.database,new Ol(this._delegate._repo,this._delegate._path))}}class Lc extends Co{constructor(e,n){super(e,new Za(n._repo,n._path,new JO,!1)),this.database=e,this._delegate=n}getKey(){return(0,R.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,R.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lc(this.database,xb(this._delegate,e))}getParent(){(0,R.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lc(this.database,e):null}getRoot(){return(0,R.Dv)("Reference.root",0,0,arguments.length),new Lc(this.database,this._delegate.root)}set(e,n){(0,R.Dv)("Reference.set",1,2,arguments.length),(0,R.Wj)("Reference.set","onComplete",n,!0);const t=Ez(this._delegate,e);return n&&t.then(()=>n(null),r=>n(r)),t}update(e,n){if((0,R.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,qJ("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Pl("Reference.update",this._delegate._path),(0,R.Wj)("Reference.update","onComplete",n,!0);const t=yxe(this._delegate,e);return n&&t.then(()=>n(null),r=>n(r)),t}setWithPriority(e,n,t){(0,R.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,R.Wj)("Reference.setWithPriority","onComplete",t,!0);const r=function bxe(i,e,n){if(Pl("setWithPriority",i._path),ih("setWithPriority",e,i._path,!1),pz("setWithPriority",n,!1),".length"===i.key||".keys"===i.key)throw"setWithPriority failed: "+i.key+" is a read-only object.";const t=new R.BH;return gz(i._repo,i._path,e,n,t.wrapCallback(()=>{})),t.promise}(this._delegate,e,n);return t&&r.then(()=>t(null),s=>t(s)),r}remove(e){(0,R.Dv)("Reference.remove",0,1,arguments.length),(0,R.Wj)("Reference.remove","onComplete",e,!0);const n=function gxe(i){return Pl("remove",i._path),Ez(i,null)}(this._delegate);return e&&n.then(()=>e(null),t=>e(t)),n}transaction(e,n,t){(0,R.Dv)("Reference.transaction",1,3,arguments.length),(0,R.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,R.Wj)("Reference.transaction","onComplete",n,!0),function(i,e,n,t){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,R.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,t);const r=function rCe(i,e,n){var t;if(i=(0,R.m9)(i),Pl("Reference.transaction",i._path),".length"===i.key||".keys"===i.key)throw"Reference.transaction failed: "+i.key+" is a read-only object.";const r=null===(t=n?.applyLocally)||void 0===t||t,s=new R.BH,d=Iz(i,()=>{});return function lxe(i,e,n,t,r,s){ax(i,"transaction on "+e);const o={path:e,update:n,onComplete:t,status:null,order:GQ(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=bz(i,e,void 0);o.currentInputSnapshot=d;const m=o.update(d.val());if(void 0===m)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{Qk("transaction failed: Data returned ",m,o.path),o.status=0;const f=_N(i.transactionQueueTree_,e),b=yb(f)||[];let w;b.push(o),hz(f,b),"object"==typeof m&&null!==m&&(0,R.r3)(m,".priority")?(w=(0,R.DV)(m,".priority"),(0,R.hu)(Kk(w),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):w=(fN(i.serverSyncTree_,e)||dn.EMPTY_NODE).getPriority().val();const I=eT(i),S=Cr(m,w),F=lz(S,d,I);o.currentOutputSnapshotRaw=S,o.currentOutputSnapshotResolved=F,o.currentWriteId=yN(i);const z=nz(i.serverSyncTree_,e,F,o.currentWriteId,o.applyLocally);Fc(i.eventQueue_,e,z),wN(i,i.transactionQueueTree_)}}(i._repo,i._path,e,(m,f,b)=>{let w=null;m?s.reject(m):(w=new wb(b,new Ol(i._repo,i._path),$i),s.resolve(new iCe(f,w)))},d,r),s.promise}(this._delegate,e,{applyLocally:t}).then(s=>new uCe(s.committed,new d_(this.database,s.snapshot)));return n&&r.then(s=>n(null,s.committed,s.snapshot),s=>n(s,!1,null)),r}setPriority(e,n){(0,R.Dv)("Reference.setPriority",1,2,arguments.length),(0,R.Wj)("Reference.setPriority","onComplete",n,!0);const t=function vxe(i,e){i=(0,R.m9)(i),Pl("setPriority",i._path),pz("setPriority",e,!1);const n=new R.BH;return gz(i._repo,hr(i._path,".priority"),e,null,n.wrapCallback(()=>{})),n.promise}(this._delegate,e);return n&&t.then(()=>n(null),r=>n(r)),t}push(e,n){(0,R.Dv)("Reference.push",0,2,arguments.length),(0,R.Wj)("Reference.push","onComplete",n,!0);const t=function _xe(i,e){i=(0,R.m9)(i),Pl("push",i._path),ih("push",e,i._path,!0);const n=xJ(i._repo),t=pxe(n),r=xb(i,t),s=xb(i,t);let o;return o=null!=e?Ez(s,e).then(()=>s):Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}(this._delegate,e),r=t.then(o=>new Lc(this.database,o));n&&r.then(()=>n(null),o=>n(o));const s=new Lc(this.database,t);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Pl("Reference.onDisconnect",this._delegate._path),new dCe(new PJ(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class iT{constructor(e,n){this._delegate=e,this.app=n,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Yxe,forceLongPolling:Zxe}}useEmulator(e,n,t={}){!function WJ(i,e,n,t={}){(i=(0,R.m9)(i))._checkNotDeleted("useEmulator"),i._instanceStarted&&eh("Cannot call useEmulator() after instance has already been initialized.");const r=i._repoInternal;let s;if(r.repoInfo_.nodeAdmin)t.mockUserToken&&eh('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ok(Ok.OWNER);else if(t.mockUserToken){const o="string"==typeof t.mockUserToken?t.mockUserToken:(0,R.Sg)(t.mockUserToken,i.app.options.projectId);s=new Ok(o)}!function jxe(i,e,n,t){i.repoInfo_=new EH(`${e}:${n}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),t&&(i.authTokenProvider_=t)}(r,e,n,s)}(this._delegate,e,n,t)}ref(e){if((0,R.Dv)("database.ref",0,1,arguments.length),e instanceof Lc){const n=NJ(this._delegate,e.toString());return new Lc(this,n)}{const n=OJ(this._delegate,e);return new Lc(this,n)}}refFromURL(e){(0,R.Dv)("database.refFromURL",1,1,arguments.length);const t=NJ(this._delegate,e);return new Lc(this,t)}goOffline(){return(0,R.Dv)("database.goOffline",0,0,arguments.length),function Kxe(i){(i=(0,R.m9)(i))._checkNotDeleted("goOffline"),DJ(i._repo)}(this._delegate)}goOnline(){return(0,R.Dv)("database.goOnline",0,0,arguments.length),function Qxe(i){(i=(0,R.m9)(i))._checkNotDeleted("goOnline"),function cxe(i){i.persistentConnection_&&i.persistentConnection_.resume(wJ)}(i._repo)}(this._delegate)}}iT.ServerValue={TIMESTAMP:function tCe(){return eCe}(),increment:i=>function nCe(i){return{".sv":{increment:i}}}(i)};var mCe=Object.freeze({__proto__:null,initStandalone:function hCe({app:i,url:e,version:n,customAuthImpl:t,namespace:r,nodeAdmin:s=!1}){zQ(n);const o=new cs.zt("auth-internal",new cs.H0("database-standalone"));return o.setComponent(new cs.wA("auth-internal",()=>t,"PRIVATE")),{instance:new iT(GJ(i,o,void 0,e,s),i),namespace:r}}});const fCe=iT.ServerValue;function YJ(i){return null==i}function ZJ(i){return"function"==typeof i.set}function KJ(i,e){return ZJ(e)?e:i.ref(e)}function QJ(i,e){if(function _Ce(i){return"string"==typeof i}(i))return e.stringCase();if(ZJ(i))return e.firebaseCase();if(function gCe(i){return"function"==typeof i.exportVal}(i))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof i)}function rT(i,e,n="on",t=Cv.z){return new Bi.y(r=>{let s=null;return s=i[n](e,(o,d)=>{t.schedule(()=>{r.next({snapshot:o,prevKey:d})}),"once"===n&&t.schedule(()=>r.complete())},o=>{t.schedule(()=>r.error(o))}),"on"===n?{unsubscribe(){null!=s&&i.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Ct.U)(r=>{const{snapshot:s,prevKey:o}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:o,key:d}}),(0,yU.B)())}function XJ(i,e){const n=i.length;for(let t=0;t<n;t++)if(i[t].payload.key===e)return t;return-1}function yCe(i,e){const{payload:n,prevKey:t,key:r}=e,s=XJ(i,r),o=function bCe(i,e){if(YJ(e))return 0;{const n=XJ(i,e);return-1===n?i.length:n+1}}(i,t);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(m=>{const f={payload:m,type:"value",prevKey:d,key:m.key};return d=m.key,i=[...i,f],!1})}return i;case"child_added":if(s>-1){const d=i[s-1];(d&&d.key||null)!==t&&(i=i.filter(m=>m.payload.key!==n.key)).splice(o,0,e)}else{if(null==t)return[e,...i];(i=i.slice()).splice(o,0,e)}return i;case"child_removed":return i.filter(d=>d.payload.key!==n.key);case"child_changed":return i.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=i.splice(s,1)[0];return(i=i.slice()).splice(o,0,d),i}return i;default:return i}}function JJ(i){return(YJ(i)||0===i.length)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function eee(i,e,n){return function vCe(i,e,n){return rT(i,"value","once",n).pipe((0,ri.w)(t=>{const r=[(0,ft.of)(t)];return e.forEach(s=>r.push(rT(i,s,"on",n))),(0,wo.T)(...r).pipe(oo(yCe,[]))}),(0,iB.x)())}(i,e=JJ(e),n)}function tee(i,e,n){const t=(e=JJ(e)).map(r=>rT(i,r,"on",n));return(0,wo.T)(...t)}function nee(i,e){return function(t,r){return QJ(t,{stringCase:()=>i.child(t)[e](r),firebaseCase:()=>t[e](r),snapshotCase:()=>t.ref[e](r)})}}function ECe(i){return function(n){return n?QJ(n,{stringCase:()=>i.child(n).remove(),firebaseCase:()=>n.remove(),snapshotCase:()=>n.ref.remove()}):i.remove()}}function iee(i,e){return function(){return rT(i,"value","on",e)}}!function pCe(i){i.INTERNAL.registerComponent(new cs.wA("database-compat",(e,{instanceIdentifier:n})=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:n});return new iT(r,t)},"PUBLIC").setServiceProps({Reference:Lc,Query:Co,Database:iT,DataSnapshot:d_,enableLogging:Xxe,INTERNAL:mCe,ServerValue:fCe}).setMultipleInstances(!0)),i.registerVersion("@firebase/database-compat","0.3.4")}(c6.Z);const kCe=new l.OlP("angularfire2.realtimeDatabaseURL"),TCe=new l.OlP("angularfire2.database.use-emulator");let SCe=(()=>{class i{constructor(n,t,r,s,o,d,m,f,b,w,I,S,F,z,q){this.schedulers=d;const we=m,Ae=(0,ks.on)(n,o,t);f&&HU(Ae,o,b,I,S,F,w,z),this.database=(0,ks.cc)(`${Ae.name}.database.${r}`,"AngularFireDatabase",Ae.name,()=>{const De=o.runOutsideAngular(()=>Ae.database(r||void 0));return we&&De.useEmulator(...we),De},[we])}list(n,t){const r=this.schedulers.ngZone.runOutsideAngular(()=>KJ(this.database,n));let s=r;return t&&(s=t(r)),function ICe(i,e){const n=e.schedulers.outsideAngular,t=e.schedulers.ngZone.run(()=>i.ref);return{query:i,update:nee(t,"update"),set:nee(t,"set"),push:r=>t.push(r),remove:ECe(t),snapshotChanges:r=>eee(i,r,n).pipe(ti.iC),stateChanges:r=>tee(i,r,n).pipe(ti.iC),auditTrail:r=>function wCe(i,e,n){return function CCe(i,e,n){return function xCe(i,e){return rT(i,"value","on",e).pipe((0,Ct.U)(n=>{let t;return n.payload.forEach(r=>(t=r.key,!1)),{data:n,lastKeyToLoad:t}}))}(i,n).pipe(function yye(...i){const e=(0,so.jO)(i);return(0,yr.e)((n,t)=>{const r=i.length,s=new Array(r);let o=i.map(()=>!1),d=!1;for(let m=0;m<r;m++)(0,sa.Xf)(i[m]).subscribe((0,Mi.x)(t,f=>{s[m]=f,!d&&!o[m]&&(o[m]=!0,(d=o.every(nd.y))&&(o=null))},ol.Z));n.subscribe((0,Mi.x)(t,m=>{if(d){const f=[m,...s];t.next(e?e(...f):f)}}))})}(e),(0,Ct.U)(([r,s])=>{const o=r.lastKeyToLoad,d=s.map(m=>m.key);return{actions:s,lastKeyToLoad:o,loadedKeys:d}}),function wye(i){return(0,yr.e)((e,n)=>{let t=!1,r=0;e.subscribe((0,Mi.x)(n,s=>(t||(t=!i(s,r++)))&&n.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,Ct.U)(r=>r.actions))}(i,tee(i,e).pipe(oo((r,s)=>[...r,s],[])),n)}(i,r,n).pipe(ti.iC),valueChanges:(r,s)=>eee(i,r,n).pipe((0,Ct.U)(d=>d.map(m=>s&&s.idField?Object.assign(Object.assign({},m.payload.val()),{[s.idField]:m.key}):m.payload.val())),ti.iC)}}(s,this)}object(n){return function DCe(i,e){return{query:i,snapshotChanges:()=>iee(i,e.schedulers.outsideAngular)().pipe(ti.iC),update:n=>i.ref.update(n),set:n=>i.ref.set(n),remove:()=>i.ref.remove(),valueChanges:()=>iee(i,e.schedulers.outsideAngular)().pipe(ti.iC,(0,Ct.U)(t=>t.payload.exists()?t.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>KJ(this.database,n)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return i.\u0275fac=function(n){return new(n||i)(l.LFG(ks.Dh),l.LFG(ks.xv,8),l.LFG(kCe,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(ti.HU),l.LFG(TCe,8),l.LFG(zD,8),l.LFG(NU,8),l.LFG(FU,8),l.LFG(LU,8),l.LFG(BU,8),l.LFG(VU,8),l.LFG(UU,8),l.LFG(HD,8))},i.\u0275prov=l.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})(),ACe=(()=>{class i{constructor(){vP.Z.registerVersion("angularfire",ti.q4.full,"rtdb-compat")}}return i.\u0275fac=function(n){return new(n||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({providers:[SCe]}),i})(),MCe=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({imports:[$t,ks.hO.initializeApp(JC_firebase),Woe,eae,bye,ACe]}),e})(),RCe=(()=>{var i;class e{}return(i=e).\u0275fac=function(t){return new(t||i)},i.\u0275mod=l.oAB({type:i,bootstrap:[aue]}),i.\u0275inj=l.cJS({imports:[Mh,oue,nme,xve,MCe,Kae,Qae]}),e})();lf().bootstrapModule(RCe).catch(i=>console.error(i))},5619:(yt,ke,V)=>{V.d(ke,{X:()=>ne});var l=V(8645);class ne extends l.x{constructor(te){super(),this._value=te}get value(){return this.getValue()}_subscribe(te){const ce=super._subscribe(te);return!ce.closed&&te.next(this._value),ce}getValue(){const{hasError:te,thrownError:ce,_value:re}=this;if(te)throw ce;return this._throwIfClosed(),re}next(te){super.next(this._value=te)}}},5592:(yt,ke,V)=>{V.d(ke,{y:()=>Oe});var l=V(305),ne=V(7394),U=V(4850),te=V(8407),ce=V(2653),re=V(4674),xe=V(1441);let Oe=(()=>{class oe{constructor(Me){Me&&(this._subscribe=Me)}lift(Me){const tt=new oe;return tt.source=this,tt.operator=Me,tt}subscribe(Me,tt,Ve){const et=function Z(oe){return oe&&oe instanceof l.Lv||function G(oe){return oe&&(0,re.m)(oe.next)&&(0,re.m)(oe.error)&&(0,re.m)(oe.complete)}(oe)&&(0,ne.Nn)(oe)}(Me)?Me:new l.Hp(Me,tt,Ve);return(0,xe.x)(()=>{const{operator:Le,source:Dt}=this;et.add(Le?Le.call(et,Dt):Dt?this._subscribe(et):this._trySubscribe(et))}),et}_trySubscribe(Me){try{return this._subscribe(Me)}catch(tt){Me.error(tt)}}forEach(Me,tt){return new(tt=ve(tt))((Ve,et)=>{const Le=new l.Hp({next:Dt=>{try{Me(Dt)}catch(bt){et(bt),Le.unsubscribe()}},error:et,complete:Ve});this.subscribe(Le)})}_subscribe(Me){var tt;return null===(tt=this.source)||void 0===tt?void 0:tt.subscribe(Me)}[U.L](){return this}pipe(...Me){return(0,te.U)(Me)(this)}toPromise(Me){return new(Me=ve(Me))((tt,Ve)=>{let et;this.subscribe(Le=>et=Le,Le=>Ve(Le),()=>tt(et))})}}return oe.create=Fe=>new oe(Fe),oe})();function ve(oe){var Fe;return null!==(Fe=oe??ce.config.Promise)&&void 0!==Fe?Fe:Promise}},8645:(yt,ke,V)=>{V.d(ke,{x:()=>xe});var l=V(5592),ne=V(7394);const te=(0,V(2306).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ce=V(9039),re=V(1441);let xe=(()=>{class ve extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(Z){const oe=new Oe(this,this);return oe.operator=Z,oe}_throwIfClosed(){if(this.closed)throw new te}next(Z){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const oe of this.currentObservers)oe.next(Z)}})}error(Z){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=Z;const{observers:oe}=this;for(;oe.length;)oe.shift().error(Z)}})}complete(){(0,re.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:Z}=this;for(;Z.length;)Z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var Z;return(null===(Z=this.observers)||void 0===Z?void 0:Z.length)>0}_trySubscribe(Z){return this._throwIfClosed(),super._trySubscribe(Z)}_subscribe(Z){return this._throwIfClosed(),this._checkFinalizedStatuses(Z),this._innerSubscribe(Z)}_innerSubscribe(Z){const{hasError:oe,isStopped:Fe,observers:Me}=this;return oe||Fe?ne.Lc:(this.currentObservers=null,Me.push(Z),new ne.w0(()=>{this.currentObservers=null,(0,ce.P)(Me,Z)}))}_checkFinalizedStatuses(Z){const{hasError:oe,thrownError:Fe,isStopped:Me}=this;oe?Z.error(Fe):Me&&Z.complete()}asObservable(){const Z=new l.y;return Z.source=this,Z}}return ve.create=(G,Z)=>new Oe(G,Z),ve})();class Oe extends xe{constructor(G,Z){super(),this.destination=G,this.source=Z}next(G){var Z,oe;null===(oe=null===(Z=this.destination)||void 0===Z?void 0:Z.next)||void 0===oe||oe.call(Z,G)}error(G){var Z,oe;null===(oe=null===(Z=this.destination)||void 0===Z?void 0:Z.error)||void 0===oe||oe.call(Z,G)}complete(){var G,Z;null===(Z=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===Z||Z.call(G)}_subscribe(G){var Z,oe;return null!==(oe=null===(Z=this.source)||void 0===Z?void 0:Z.subscribe(G))&&void 0!==oe?oe:ne.Lc}}},305:(yt,ke,V)=>{V.d(ke,{Hp:()=>Ve,Lv:()=>oe});var l=V(4674),ne=V(7394),U=V(2653),te=V(3894),ce=V(2420);const re=ve("C",void 0,void 0);function ve(le,Ue,ue){return{kind:le,value:Ue,error:ue}}var G=V(7599),Z=V(1441);class oe extends ne.w0{constructor(Ue){super(),this.isStopped=!1,Ue?(this.destination=Ue,(0,ne.Nn)(Ue)&&Ue.add(this)):this.destination=bt}static create(Ue,ue,Te){return new Ve(Ue,ue,Te)}next(Ue){this.isStopped?Dt(function Oe(le){return ve("N",le,void 0)}(Ue),this):this._next(Ue)}error(Ue){this.isStopped?Dt(function xe(le){return ve("E",void 0,le)}(Ue),this):(this.isStopped=!0,this._error(Ue))}complete(){this.isStopped?Dt(re,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ue){this.destination.next(Ue)}_error(Ue){try{this.destination.error(Ue)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Fe=Function.prototype.bind;function Me(le,Ue){return Fe.call(le,Ue)}class tt{constructor(Ue){this.partialObserver=Ue}next(Ue){const{partialObserver:ue}=this;if(ue.next)try{ue.next(Ue)}catch(Te){et(Te)}}error(Ue){const{partialObserver:ue}=this;if(ue.error)try{ue.error(Ue)}catch(Te){et(Te)}else et(Ue)}complete(){const{partialObserver:Ue}=this;if(Ue.complete)try{Ue.complete()}catch(ue){et(ue)}}}class Ve extends oe{constructor(Ue,ue,Te){let $e;if(super(),(0,l.m)(Ue)||!Ue)$e={next:Ue??void 0,error:ue??void 0,complete:Te??void 0};else{let he;this&&U.config.useDeprecatedNextContext?(he=Object.create(Ue),he.unsubscribe=()=>this.unsubscribe(),$e={next:Ue.next&&Me(Ue.next,he),error:Ue.error&&Me(Ue.error,he),complete:Ue.complete&&Me(Ue.complete,he)}):$e=Ue}this.destination=new tt($e)}}function et(le){U.config.useDeprecatedSynchronousErrorHandling?(0,Z.O)(le):(0,te.h)(le)}function Dt(le,Ue){const{onStoppedNotification:ue}=U.config;ue&&G.z.setTimeout(()=>ue(le,Ue))}const bt={closed:!0,next:ce.Z,error:function Le(le){throw le},complete:ce.Z}},7394:(yt,ke,V)=>{V.d(ke,{Lc:()=>re,w0:()=>ce,Nn:()=>xe});var l=V(4674);const U=(0,V(2306).d)(ve=>function(Z){ve(this),this.message=Z?`${Z.length} errors occurred during unsubscription:\n${Z.map((oe,Fe)=>`${Fe+1}) ${oe.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=Z});var te=V(9039);class ce{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:Z}=this;if(Z)if(this._parentage=null,Array.isArray(Z))for(const Me of Z)Me.remove(this);else Z.remove(this);const{initialTeardown:oe}=this;if((0,l.m)(oe))try{oe()}catch(Me){G=Me instanceof U?Me.errors:[Me]}const{_finalizers:Fe}=this;if(Fe){this._finalizers=null;for(const Me of Fe)try{Oe(Me)}catch(tt){G=G??[],tt instanceof U?G=[...G,...tt.errors]:G.push(tt)}}if(G)throw new U(G)}}add(G){var Z;if(G&&G!==this)if(this.closed)Oe(G);else{if(G instanceof ce){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(Z=this._finalizers)&&void 0!==Z?Z:[]).push(G)}}_hasParent(G){const{_parentage:Z}=this;return Z===G||Array.isArray(Z)&&Z.includes(G)}_addParent(G){const{_parentage:Z}=this;this._parentage=Array.isArray(Z)?(Z.push(G),Z):Z?[Z,G]:G}_removeParent(G){const{_parentage:Z}=this;Z===G?this._parentage=null:Array.isArray(Z)&&(0,te.P)(Z,G)}remove(G){const{_finalizers:Z}=this;Z&&(0,te.P)(Z,G),G instanceof ce&&G._removeParent(this)}}ce.EMPTY=(()=>{const ve=new ce;return ve.closed=!0,ve})();const re=ce.EMPTY;function xe(ve){return ve instanceof ce||ve&&"closed"in ve&&(0,l.m)(ve.remove)&&(0,l.m)(ve.add)&&(0,l.m)(ve.unsubscribe)}function Oe(ve){(0,l.m)(ve)?ve():ve.unsubscribe()}},2653:(yt,ke,V)=>{V.d(ke,{config:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},6232:(yt,ke,V)=>{V.d(ke,{E:()=>ne});const ne=new(V(5592).y)(ce=>ce.complete())},2459:(yt,ke,V)=>{V.d(ke,{D:()=>Ue});var l=V(4829),ne=V(3093),U=V(5137),re=V(5592),Oe=V(4971),ve=V(4674),G=V(7103);function oe(ue,Te){if(!ue)throw new Error("Iterable cannot be null");return new re.y($e=>{(0,G.f)($e,Te,()=>{const he=ue[Symbol.asyncIterator]();(0,G.f)($e,Te,()=>{he.next().then(je=>{je.done?$e.complete():$e.next(je.value)})},0,!0)})})}var Fe=V(8382),Me=V(4026),tt=V(4266),Ve=V(3664),et=V(5726),Le=V(9853),Dt=V(541);function Ue(ue,Te){return Te?function le(ue,Te){if(null!=ue){if((0,Fe.c)(ue))return function te(ue,Te){return(0,l.Xf)(ue).pipe((0,U.R)(Te),(0,ne.Q)(Te))}(ue,Te);if((0,tt.z)(ue))return function xe(ue,Te){return new re.y($e=>{let he=0;return Te.schedule(function(){he===ue.length?$e.complete():($e.next(ue[he++]),$e.closed||this.schedule())})})}(ue,Te);if((0,Me.t)(ue))return function ce(ue,Te){return(0,l.Xf)(ue).pipe((0,U.R)(Te),(0,ne.Q)(Te))}(ue,Te);if((0,et.D)(ue))return oe(ue,Te);if((0,Ve.T)(ue))return function Z(ue,Te){return new re.y($e=>{let he;return(0,G.f)($e,Te,()=>{he=ue[Oe.h](),(0,G.f)($e,Te,()=>{let je,it;try{({value:je,done:it}=he.next())}catch(Pt){return void $e.error(Pt)}it?$e.complete():$e.next(je)},0,!0)}),()=>(0,ve.m)(he?.return)&&he.return()})}(ue,Te);if((0,Dt.L)(ue))return function bt(ue,Te){return oe((0,Dt.Q)(ue),Te)}(ue,Te)}throw(0,Le.z)(ue)}(ue,Te):(0,l.Xf)(ue)}},4829:(yt,ke,V)=>{V.d(ke,{Xf:()=>Fe});var l=V(7582),ne=V(4266),U=V(4026),te=V(5592),ce=V(8382),re=V(5726),xe=V(9853),Oe=V(3664),ve=V(541),G=V(4674),Z=V(3894),oe=V(4850);function Fe(le){if(le instanceof te.y)return le;if(null!=le){if((0,ce.c)(le))return function Me(le){return new te.y(Ue=>{const ue=le[oe.L]();if((0,G.m)(ue.subscribe))return ue.subscribe(Ue);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(le);if((0,ne.z)(le))return function tt(le){return new te.y(Ue=>{for(let ue=0;ue<le.length&&!Ue.closed;ue++)Ue.next(le[ue]);Ue.complete()})}(le);if((0,U.t)(le))return function Ve(le){return new te.y(Ue=>{le.then(ue=>{Ue.closed||(Ue.next(ue),Ue.complete())},ue=>Ue.error(ue)).then(null,Z.h)})}(le);if((0,re.D)(le))return Le(le);if((0,Oe.T)(le))return function et(le){return new te.y(Ue=>{for(const ue of le)if(Ue.next(ue),Ue.closed)return;Ue.complete()})}(le);if((0,ve.L)(le))return function Dt(le){return Le((0,ve.Q)(le))}(le)}throw(0,xe.z)(le)}function Le(le){return new te.y(Ue=>{(function bt(le,Ue){var ue,Te,$e,he;return(0,l.mG)(this,void 0,void 0,function*(){try{for(ue=(0,l.KL)(le);!(Te=yield ue.next()).done;)if(Ue.next(Te.value),Ue.closed)return}catch(je){$e={error:je}}finally{try{Te&&!Te.done&&(he=ue.return)&&(yield he.call(ue))}finally{if($e)throw $e.error}}Ue.complete()})})(le,Ue).catch(ue=>Ue.error(ue))})}},3019:(yt,ke,V)=>{V.d(ke,{T:()=>re});var l=V(7537),ne=V(4829),U=V(6232),te=V(9940),ce=V(2459);function re(...xe){const Oe=(0,te.yG)(xe),ve=(0,te._6)(xe,1/0),G=xe;return G.length?1===G.length?(0,ne.Xf)(G[0]):(0,l.J)(ve)((0,ce.D)(G,Oe)):U.E}},2096:(yt,ke,V)=>{V.d(ke,{of:()=>U});var l=V(9940),ne=V(2459);function U(...te){const ce=(0,l.yG)(te);return(0,ne.D)(te,ce)}},8251:(yt,ke,V)=>{V.d(ke,{x:()=>ne});var l=V(305);function ne(te,ce,re,xe,Oe){return new U(te,ce,re,xe,Oe)}class U extends l.Lv{constructor(ce,re,xe,Oe,ve,G){super(ce),this.onFinalize=ve,this.shouldUnsubscribe=G,this._next=re?function(Z){try{re(Z)}catch(oe){ce.error(oe)}}:super._next,this._error=Oe?function(Z){try{Oe(Z)}catch(oe){ce.error(oe)}finally{this.unsubscribe()}}:super._error,this._complete=xe?function(){try{xe()}catch(Z){ce.error(Z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:re}=this;super.unsubscribe(),!re&&(null===(ce=this.onFinalize)||void 0===ce||ce.call(this))}}}},3997:(yt,ke,V)=>{V.d(ke,{x:()=>te});var l=V(2737),ne=V(9360),U=V(8251);function te(re,xe=l.y){return re=re??ce,(0,ne.e)((Oe,ve)=>{let G,Z=!0;Oe.subscribe((0,U.x)(ve,oe=>{const Fe=xe(oe);(Z||!re(G,Fe))&&(Z=!1,G=Fe,ve.next(oe))}))})}function ce(re,xe){return re===xe}},7398:(yt,ke,V)=>{V.d(ke,{U:()=>U});var l=V(9360),ne=V(8251);function U(te,ce){return(0,l.e)((re,xe)=>{let Oe=0;re.subscribe((0,ne.x)(xe,ve=>{xe.next(te.call(ce,ve,Oe++))}))})}},7537:(yt,ke,V)=>{V.d(ke,{J:()=>U});var l=V(1631),ne=V(2737);function U(te=1/0){return(0,l.z)(ne.y,te)}},1631:(yt,ke,V)=>{V.d(ke,{z:()=>Oe});var l=V(7398),ne=V(4829),U=V(9360),te=V(7103),ce=V(8251),xe=V(4674);function Oe(ve,G,Z=1/0){return(0,xe.m)(G)?Oe((oe,Fe)=>(0,l.U)((Me,tt)=>G(oe,Me,Fe,tt))((0,ne.Xf)(ve(oe,Fe))),Z):("number"==typeof G&&(Z=G),(0,U.e)((oe,Fe)=>function re(ve,G,Z,oe,Fe,Me,tt,Ve){const et=[];let Le=0,Dt=0,bt=!1;const le=()=>{bt&&!et.length&&!Le&&G.complete()},Ue=Te=>Le<oe?ue(Te):et.push(Te),ue=Te=>{Me&&G.next(Te),Le++;let $e=!1;(0,ne.Xf)(Z(Te,Dt++)).subscribe((0,ce.x)(G,he=>{Fe?.(he),Me?Ue(he):G.next(he)},()=>{$e=!0},void 0,()=>{if($e)try{for(Le--;et.length&&Le<oe;){const he=et.shift();tt?(0,te.f)(G,tt,()=>ue(he)):ue(he)}le()}catch(he){G.error(he)}}))};return ve.subscribe((0,ce.x)(G,Ue,()=>{bt=!0,le()})),()=>{Ve?.()}}(oe,Fe,ve,Z)))}},3093:(yt,ke,V)=>{V.d(ke,{Q:()=>te});var l=V(7103),ne=V(9360),U=V(8251);function te(ce,re=0){return(0,ne.e)((xe,Oe)=>{xe.subscribe((0,U.x)(Oe,ve=>(0,l.f)(Oe,ce,()=>Oe.next(ve),re),()=>(0,l.f)(Oe,ce,()=>Oe.complete(),re),ve=>(0,l.f)(Oe,ce,()=>Oe.error(ve),re)))})}},3020:(yt,ke,V)=>{V.d(ke,{B:()=>ce});var l=V(4829),ne=V(8645),U=V(305),te=V(9360);function ce(xe={}){const{connector:Oe=(()=>new ne.x),resetOnError:ve=!0,resetOnComplete:G=!0,resetOnRefCountZero:Z=!0}=xe;return oe=>{let Fe,Me,tt,Ve=0,et=!1,Le=!1;const Dt=()=>{Me?.unsubscribe(),Me=void 0},bt=()=>{Dt(),Fe=tt=void 0,et=Le=!1},le=()=>{const Ue=Fe;bt(),Ue?.unsubscribe()};return(0,te.e)((Ue,ue)=>{Ve++,!Le&&!et&&Dt();const Te=tt=tt??Oe();ue.add(()=>{Ve--,0===Ve&&!Le&&!et&&(Me=re(le,Z))}),Te.subscribe(ue),!Fe&&Ve>0&&(Fe=new U.Hp({next:$e=>Te.next($e),error:$e=>{Le=!0,Dt(),Me=re(bt,ve,$e),Te.error($e)},complete:()=>{et=!0,Dt(),Me=re(bt,G),Te.complete()}}),(0,l.Xf)(Ue).subscribe(Fe))})(oe)}}function re(xe,Oe,...ve){if(!0===Oe)return void xe();if(!1===Oe)return;const G=new U.Hp({next:()=>{G.unsubscribe(),xe()}});return(0,l.Xf)(Oe(...ve)).subscribe(G)}},5137:(yt,ke,V)=>{V.d(ke,{R:()=>ne});var l=V(9360);function ne(U,te=0){return(0,l.e)((ce,re)=>{re.add(U.schedule(()=>ce.subscribe(re),te))})}},4664:(yt,ke,V)=>{V.d(ke,{w:()=>te});var l=V(4829),ne=V(9360),U=V(8251);function te(ce,re){return(0,ne.e)((xe,Oe)=>{let ve=null,G=0,Z=!1;const oe=()=>Z&&!ve&&Oe.complete();xe.subscribe((0,U.x)(Oe,Fe=>{ve?.unsubscribe();let Me=0;const tt=G++;(0,l.Xf)(ce(Fe,tt)).subscribe(ve=(0,U.x)(Oe,Ve=>Oe.next(re?re(Fe,Ve,tt,Me++):Ve),()=>{ve=null,oe()}))},()=>{Z=!0,oe()}))})}},9397:(yt,ke,V)=>{V.d(ke,{b:()=>ce});var l=V(4674),ne=V(9360),U=V(8251),te=V(2737);function ce(re,xe,Oe){const ve=(0,l.m)(re)||xe||Oe?{next:re,error:xe,complete:Oe}:re;return ve?(0,ne.e)((G,Z)=>{var oe;null===(oe=ve.subscribe)||void 0===oe||oe.call(ve);let Fe=!0;G.subscribe((0,U.x)(Z,Me=>{var tt;null===(tt=ve.next)||void 0===tt||tt.call(ve,Me),Z.next(Me)},()=>{var Me;Fe=!1,null===(Me=ve.complete)||void 0===Me||Me.call(ve),Z.complete()},Me=>{var tt;Fe=!1,null===(tt=ve.error)||void 0===tt||tt.call(ve,Me),Z.error(Me)},()=>{var Me,tt;Fe&&(null===(Me=ve.unsubscribe)||void 0===Me||Me.call(ve)),null===(tt=ve.finalize)||void 0===tt||tt.call(ve)}))}):te.y}},1954:(yt,ke,V)=>{V.d(ke,{o:()=>ce});var l=V(7394);class ne extends l.w0{constructor(xe,Oe){super()}schedule(xe,Oe=0){return this}}const U={setInterval(re,xe,...Oe){const{delegate:ve}=U;return ve?.setInterval?ve.setInterval(re,xe,...Oe):setInterval(re,xe,...Oe)},clearInterval(re){const{delegate:xe}=U;return(xe?.clearInterval||clearInterval)(re)},delegate:void 0};var te=V(9039);class ce extends ne{constructor(xe,Oe){super(xe,Oe),this.scheduler=xe,this.work=Oe,this.pending=!1}schedule(xe,Oe=0){var ve;if(this.closed)return this;this.state=xe;const G=this.id,Z=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(Z,G,Oe)),this.pending=!0,this.delay=Oe,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(Z,this.id,Oe),this}requestAsyncId(xe,Oe,ve=0){return U.setInterval(xe.flush.bind(xe,this),ve)}recycleAsyncId(xe,Oe,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return Oe;null!=Oe&&U.clearInterval(Oe)}execute(xe,Oe){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(xe,Oe);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(xe,Oe){let G,ve=!1;try{this.work(xe)}catch(Z){ve=!0,G=Z||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:xe,scheduler:Oe}=this,{actions:ve}=Oe;this.work=this.state=this.scheduler=null,this.pending=!1,(0,te.P)(ve,this),null!=xe&&(this.id=this.recycleAsyncId(Oe,xe,null)),this.delay=null,super.unsubscribe()}}}},2631:(yt,ke,V)=>{V.d(ke,{v:()=>U});var l=V(4552);class ne{constructor(ce,re=ne.now){this.schedulerActionCtor=ce,this.now=re}schedule(ce,re=0,xe){return new this.schedulerActionCtor(this,ce).schedule(xe,re)}}ne.now=l.l.now;class U extends ne{constructor(ce,re=ne.now){super(ce,re),this.actions=[],this._active=!1}flush(ce){const{actions:re}=this;if(this._active)return void re.push(ce);let xe;this._active=!0;do{if(xe=ce.execute(ce.state,ce.delay))break}while(ce=re.shift());if(this._active=!1,xe){for(;ce=re.shift();)ce.unsubscribe();throw xe}}}},6321:(yt,ke,V)=>{V.d(ke,{P:()=>te,z:()=>U});var l=V(1954);const U=new(V(2631).v)(l.o),te=U},4552:(yt,ke,V)=>{V.d(ke,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},7599:(yt,ke,V)=>{V.d(ke,{z:()=>l});const l={setTimeout(ne,U,...te){const{delegate:ce}=l;return ce?.setTimeout?ce.setTimeout(ne,U,...te):setTimeout(ne,U,...te)},clearTimeout(ne){const{delegate:U}=l;return(U?.clearTimeout||clearTimeout)(ne)},delegate:void 0}},4971:(yt,ke,V)=>{V.d(ke,{h:()=>ne});const ne=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(yt,ke,V)=>{V.d(ke,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},9940:(yt,ke,V)=>{V.d(ke,{_6:()=>re,jO:()=>te,yG:()=>ce});var l=V(4674),ne=V(671);function U(xe){return xe[xe.length-1]}function te(xe){return(0,l.m)(U(xe))?xe.pop():void 0}function ce(xe){return(0,ne.K)(U(xe))?xe.pop():void 0}function re(xe,Oe){return"number"==typeof U(xe)?xe.pop():Oe}},9039:(yt,ke,V)=>{function l(ne,U){if(ne){const te=ne.indexOf(U);0<=te&&ne.splice(te,1)}}V.d(ke,{P:()=>l})},2306:(yt,ke,V)=>{function l(ne){const te=ne(ce=>{Error.call(ce),ce.stack=(new Error).stack});return te.prototype=Object.create(Error.prototype),te.prototype.constructor=te,te}V.d(ke,{d:()=>l})},1441:(yt,ke,V)=>{V.d(ke,{O:()=>te,x:()=>U});var l=V(2653);let ne=null;function U(ce){if(l.config.useDeprecatedSynchronousErrorHandling){const re=!ne;if(re&&(ne={errorThrown:!1,error:null}),ce(),re){const{errorThrown:xe,error:Oe}=ne;if(ne=null,xe)throw Oe}}else ce()}function te(ce){l.config.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=ce)}},7103:(yt,ke,V)=>{function l(ne,U,te,ce=0,re=!1){const xe=U.schedule(function(){te(),re?ne.add(this.schedule(null,ce)):this.unsubscribe()},ce);if(ne.add(xe),!re)return xe}V.d(ke,{f:()=>l})},2737:(yt,ke,V)=>{function l(ne){return ne}V.d(ke,{y:()=>l})},4266:(yt,ke,V)=>{V.d(ke,{z:()=>l});const l=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},5726:(yt,ke,V)=>{V.d(ke,{D:()=>ne});var l=V(4674);function ne(U){return Symbol.asyncIterator&&(0,l.m)(U?.[Symbol.asyncIterator])}},4674:(yt,ke,V)=>{function l(ne){return"function"==typeof ne}V.d(ke,{m:()=>l})},8382:(yt,ke,V)=>{V.d(ke,{c:()=>U});var l=V(4850),ne=V(4674);function U(te){return(0,ne.m)(te[l.L])}},3664:(yt,ke,V)=>{V.d(ke,{T:()=>U});var l=V(4971),ne=V(4674);function U(te){return(0,ne.m)(te?.[l.h])}},4026:(yt,ke,V)=>{V.d(ke,{t:()=>ne});var l=V(4674);function ne(U){return(0,l.m)(U?.then)}},541:(yt,ke,V)=>{V.d(ke,{L:()=>te,Q:()=>U});var l=V(7582),ne=V(4674);function U(ce){return(0,l.FC)(this,arguments,function*(){const xe=ce.getReader();try{for(;;){const{value:Oe,done:ve}=yield(0,l.qq)(xe.read());if(ve)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(Oe)}}finally{xe.releaseLock()}})}function te(ce){return(0,ne.m)(ce?.getReader)}},671:(yt,ke,V)=>{V.d(ke,{K:()=>ne});var l=V(4674);function ne(U){return U&&(0,l.m)(U.schedule)}},9360:(yt,ke,V)=>{V.d(ke,{A:()=>ne,e:()=>U});var l=V(4674);function ne(te){return(0,l.m)(te?.lift)}function U(te){return ce=>{if(ne(ce))return ce.lift(function(re){try{return te(re,this)}catch(xe){this.error(xe)}});throw new TypeError("Unable to lift unknown Observable type")}}},2420:(yt,ke,V)=>{function l(){}V.d(ke,{Z:()=>l})},8407:(yt,ke,V)=>{V.d(ke,{U:()=>U,z:()=>ne});var l=V(2737);function ne(...te){return U(te)}function U(te){return 0===te.length?l.y:1===te.length?te[0]:function(re){return te.reduce((xe,Oe)=>Oe(xe),re)}}},3894:(yt,ke,V)=>{V.d(ke,{h:()=>U});var l=V(2653),ne=V(7599);function U(te){ne.z.setTimeout(()=>{const{onUnhandledError:ce}=l.config;if(!ce)throw te;ce(te)})}},9853:(yt,ke,V)=>{function l(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(ke,{z:()=>l})},5879:(yt,ke,V)=>{V.d(ke,{$8M:()=>du,$WT:()=>Ja,$Z:()=>LS,AFp:()=>Gx,ALo:()=>c0,AaK:()=>oe,AsE:()=>KC,BQk:()=>Gy,CHM:()=>Vs,CRH:()=>hp,EJc:()=>E0,EiD:()=>$N,EpF:()=>xA,F$t:()=>$y,F4k:()=>CA,FYo:()=>Qx,FiY:()=>Hh,Gf:()=>vi,GfV:()=>Xx,GkF:()=>FC,Gpc:()=>tt,HDt:()=>l1,Hsn:()=>XF,Ikx:()=>Qy,JOm:()=>qh,JVY:()=>TT,JZr:()=>bt,KtG:()=>T_,L6k:()=>BN,LAX:()=>UN,LFG:()=>qt,LSH:()=>Ux,Lbi:()=>ry,Lck:()=>ZL,MAs:()=>bA,MMx:()=>Su,NdJ:()=>LC,O4$:()=>td,Ojb:()=>XT,OlP:()=>Gn,Oqu:()=>Ug,P3R:()=>qN,PXZ:()=>O2,Q6J:()=>PC,QGY:()=>Lg,QbO:()=>QT,Qsj:()=>mS,R0b:()=>Es,RDi:()=>xT,Rgc:()=>nv,SBq:()=>Nf,Sil:()=>eI,Suo:()=>ja,TTD:()=>Kl,TgZ:()=>OC,Udp:()=>$C,VuI:()=>Xj,W1O:()=>Ad,X6Q:()=>ua,XFs:()=>Ft,Xpm:()=>lh,Xq5:()=>Ly,Xts:()=>dg,Y36:()=>Uf,YKP:()=>tp,YNc:()=>MC,Yjl:()=>hh,Yz7:()=>Gt,Z0I:()=>Nn,ZZ4:()=>wI,_Bn:()=>Tu,_UZ:()=>wA,_Vd:()=>Of,_c5:()=>CI,_uU:()=>jA,aQg:()=>xI,c2e:()=>XE,cJS:()=>ui,cg1:()=>oE,dDg:()=>P2,dqk:()=>On,eBb:()=>VN,eFA:()=>x1,eJc:()=>HE,ekj:()=>WC,eoX:()=>aI,f3M:()=>Yt,g9A:()=>$x,h0i:()=>Dd,hGG:()=>Z2,hij:()=>ZC,iGM:()=>UM,ifc:()=>Os,ip1:()=>QE,jDz:()=>Xg,kL8:()=>JA,kcU:()=>Ct,lG2:()=>Wm,lqb:()=>gc,lri:()=>oI,mCW:()=>Xb,n5z:()=>Fa,n_E:()=>ap,oAB:()=>uh,oxw:()=>KF,pB0:()=>HN,q3G:()=>bu,q4F:()=>Jx,qFp:()=>tB,qLn:()=>Lf,qOj:()=>Oy,qZA:()=>NC,qzn:()=>hd,rWj:()=>v1,rg0:()=>Jd,s9C:()=>kA,sBO:()=>B2,s_b:()=>h0,soG:()=>Dc,tb:()=>hv,tp0:()=>cd,uIk:()=>lA,vHH:()=>le,vpe:()=>fd,wAp:()=>Ha,xi3:()=>op,xp6:()=>NS,ynx:()=>jy,z2F:()=>Pu,z3N:()=>_l,zSh:()=>R,zs3:()=>Ba});var l=V(8645),ne=V(7394),U=V(5592),te=V(3019),ce=V(5619),re=V(2096),xe=V(3020),Oe=V(4664),ve=V(3997);function G(a){for(let c in a)if(a[c]===G)return c;throw Error("Could not find renamed property on target object.")}function Z(a,c){for(const u in c)c.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=c[u])}function oe(a){if("string"==typeof a)return a;if(Array.isArray(a))return"["+a.map(oe).join(", ")+"]";if(null==a)return""+a;if(a.overriddenName)return`${a.overriddenName}`;if(a.name)return`${a.name}`;const c=a.toString();if(null==c)return""+c;const u=c.indexOf("\n");return-1===u?c:c.substring(0,u)}function Fe(a,c){return null==a||""===a?null===c?"":c:null==c||""===c?a:a+" "+c}const Me=G({__forward_ref__:G});function tt(a){return a.__forward_ref__=tt,a.toString=function(){return oe(this())},a}function Ve(a){return et(a)?a():a}function et(a){return"function"==typeof a&&a.hasOwnProperty(Me)&&a.__forward_ref__===tt}function Le(a){return a&&!!a.\u0275providers}const bt="https://g.co/ng/security#xss";class le extends Error{constructor(c,u){super(function Ue(a,c){return`NG0${Math.abs(a)}${c?": "+c:""}`}(c,u)),this.code=c}}function ue(a){return"string"==typeof a?a:null==a?"":String(a)}function it(a,c){throw new le(-201,!1)}function dt(a,c){null==a&&function Je(a,c,u,h){throw new Error(`ASSERTION ERROR: ${a}`+(null==h?"":` [Expected=> ${u} ${h} ${c} <=Actual]`))}(c,a,null,"!=")}function Gt(a){return{token:a.token,providedIn:a.providedIn||null,factory:a.factory,value:void 0}}function ui(a){return{providers:a.providers||[],imports:a.imports||[]}}function hn(a){return Oi(a,Ps)||Oi(a,er)}function Nn(a){return null!==hn(a)}function Oi(a,c){return a.hasOwnProperty(c)?a[c]:null}function Rs(a){return a&&(a.hasOwnProperty(Qs)||a.hasOwnProperty(xa))?a[Qs]:null}const Ps=G({\u0275prov:G}),Qs=G({\u0275inj:G}),er=G({ngInjectableDef:G}),xa=G({ngInjectorDef:G});var Ft=function(a){return a[a.Default=0]="Default",a[a.Host=1]="Host",a[a.Self=2]="Self",a[a.SkipSelf=4]="SkipSelf",a[a.Optional=8]="Optional",a}(Ft||{});let Ut;function Pn(a){const c=Ut;return Ut=a,c}function fr(a,c,u){const h=hn(a);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&Ft.Optional?null:void 0!==c?c:void it(oe(a))}const On=globalThis,Qe={},st="__NG_DI_FLAG__",_t="ngTempTokenPath",K=/\n/gm,J="__source";let Se;function ht(a){const c=Se;return Se=a,c}function Bt(a,c=Ft.Default){if(void 0===Se)throw new le(-203,!1);return null===Se?fr(a,void 0,c):Se.get(a,c&Ft.Optional?null:void 0,c)}function qt(a,c=Ft.Default){return(function en(){return Ut}()||Bt)(Ve(a),c)}function Yt(a,c=Ft.Default){return qt(a,Ir(c))}function Ir(a){return typeof a>"u"||"number"==typeof a?a:0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)}function Xt(a){const c=[];for(let u=0;u<a.length;u++){const h=Ve(a[u]);if(Array.isArray(h)){if(0===h.length)throw new le(900,!1);let p,_=Ft.Default;for(let y=0;y<h.length;y++){const C=h[y],E=Xo(C);"number"==typeof E?-1===E?p=C.token:_|=E:p=C}c.push(qt(p,_))}else c.push(qt(h))}return c}function pr(a,c){return a[st]=c,a.prototype[st]=c,a}function Xo(a){return a[st]}function Io(a){return{toString:a}.toString()}var Uc=function(a){return a[a.OnPush=0]="OnPush",a[a.Default=1]="Default",a}(Uc||{}),Os=function(a){return a[a.Emulated=0]="Emulated",a[a.None=2]="None",a[a.ShadowDom=3]="ShadowDom",a}(Os||{});const Do={},gn=[],hi=G({\u0275cmp:G}),mi=G({\u0275dir:G}),Fl=G({\u0275pipe:G}),Ca=G({\u0275mod:G}),ko=G({\u0275fac:G}),Ye=G({__NG_ELEMENT_ID__:G}),_s=G({__NG_ENV_ID__:G});function gs(a,c,u){let h=a.length;for(;;){const p=a.indexOf(c,u);if(-1===p)return p;if(0===p||a.charCodeAt(p-1)<=32){const _=c.length;if(p+_===h||a.charCodeAt(p+_)<=32)return p}u=p+1}}function Qa(a,c,u){let h=0;for(;h<u.length;){const p=u[h];if("number"==typeof p){if(0!==p)break;h++;const _=u[h++],y=u[h++],C=u[h++];a.setAttribute(c,y,C,_)}else{const _=p,y=u[++h];$d(_)?a.setProperty(c,_,y):a.setAttribute(c,_,y),h++}}return h}function Gd(a){return 3===a||4===a||6===a}function $d(a){return 64===a.charCodeAt(0)}function Ll(a,c){if(null!==c&&0!==c.length)if(null===a||0===a.length)a=c.slice();else{let u=-1;for(let h=0;h<c.length;h++){const p=c[h];"number"==typeof p?u=p:0===u||ah(a,u,p,null,-1===u||2===u?c[++h]:null)}}return a}function ah(a,c,u,h,p){let _=0,y=a.length;if(-1===c)y=-1;else for(;_<a.length;){const C=a[_++];if("number"==typeof C){if(C===c){y=-1;break}if(C>c){y=_-1;break}}}for(;_<a.length;){const C=a[_];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(a[_+1]=p));if(h===a[_+1])return void(a[_+2]=p)}_++,null!==h&&_++,null!==p&&_++}-1!==y&&(a.splice(y,0,c),_=y+1),a.splice(_++,0,u),null!==h&&a.splice(_++,0,h),null!==p&&a.splice(_++,0,p)}const Xa="ng-template";function zm(a,c,u){let h=0,p=!0;for(;h<a.length;){let _=a[h++];if("string"==typeof _&&p){const y=a[h++];if(u&&"class"===_&&-1!==gs(y.toLowerCase(),c,0))return!0}else{if(1===_){for(;h<a.length&&"string"==typeof(_=a[h++]);)if(_.toLowerCase()===c)return!0;return!1}"number"==typeof _&&(p=!1)}}return!1}function To(a){return 4===a.type&&a.value!==Xa}function Eb(a,c,u){return c===(4!==a.type||u?a.value:Xa)}function m_(a,c,u){let h=4;const p=a.attrs||[],_=function f_(a){for(let c=0;c<a.length;c++)if(Gd(a[c]))return c;return a.length}(p);let y=!1;for(let C=0;C<c.length;C++){const E=c[C];if("number"!=typeof E){if(!y)if(4&h){if(h=2|1&h,""!==E&&!Eb(a,E,u)||""===E&&1===c.length){if(vn(h))return!1;y=!0}}else{const P=8&h?E:c[++C];if(8&h&&null!==a.attrs){if(!zm(a.attrs,P,u)){if(vn(h))return!1;y=!0}continue}const j=Hn(8&h?"class":E,p,To(a),u);if(-1===j){if(vn(h))return!1;y=!0;continue}if(""!==P){let Q;Q=j>_?"":p[j+1].toLowerCase();const ie=8&h?Q:null;if(ie&&-1!==gs(ie,P,0)||2&h&&P!==Q){if(vn(h))return!1;y=!0}}}}else{if(!y&&!vn(h)&&!vn(E))return!1;if(y&&vn(E))continue;y=!1,h=E|1&h}}return vn(h)||y}function vn(a){return 0==(1&a)}function Hn(a,c,u,h){if(null===c)return-1;let p=0;if(h||!u){let _=!1;for(;p<c.length;){const y=c[p];if(y===a)return p;if(3===y||6===y)_=!0;else{if(1===y||2===y){let C=c[++p];for(;"string"==typeof C;)C=c[++p];continue}if(4===y)break;if(0===y){p+=4;continue}}p+=_?1:2}return-1}return function jm(a,c){let u=a.indexOf(4);if(u>-1)for(u++;u<a.length;){const h=a[u];if("number"==typeof h)return-1;if(h===c)return u;u++}return-1}(c,a)}function Hc(a,c,u=!1){for(let h=0;h<c.length;h++)if(m_(a,c[h],u))return!0;return!1}function Bl(a,c){e:for(let u=0;u<c.length;u++){const h=c[u];if(a.length===h.length){for(let p=0;p<a.length;p++)if(a[p]!==h[p])continue e;return!0}}return!1}function ch(a,c){return a?":not("+c.trim()+")":c}function Wd(a){let c=a[0],u=1,h=2,p="",_=!1;for(;u<a.length;){let y=a[u];if("string"==typeof y)if(2&h){const C=a[++u];p+="["+y+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+y:4&h&&(p+=" "+y);else""!==p&&!vn(y)&&(c+=ch(_,p),p=""),h=y,_=_||!vn(h);u++}return""!==p&&(c+=ch(_,p)),c}function lh(a){return Io(()=>{const c=zc(a),u={...c,decls:a.decls,vars:a.vars,template:a.template,consts:a.consts||null,ngContentSelectors:a.ngContentSelectors,onPush:a.changeDetection===Uc.OnPush,directiveDefs:null,pipeDefs:null,dependencies:c.standalone&&a.dependencies||null,getStandaloneInjector:null,signals:a.signals??!1,data:a.data||{},encapsulation:a.encapsulation||Os.Emulated,styles:a.styles||gn,_:null,schemas:a.schemas||null,tView:null,id:""};ea(u);const h=a.dependencies;return u.directiveDefs=ta(h,!1),u.pipeDefs=ta(h,!0),u.id=function Ns(a){let c=0;const u=[a.selectors,a.ngContentSelectors,a.hostVars,a.hostAttrs,a.consts,a.vars,a.decls,a.encapsulation,a.standalone,a.signals,a.exportAs,JSON.stringify(a.inputs),JSON.stringify(a.outputs),Object.getOwnPropertyNames(a.type.prototype),!!a.contentQueries,!!a.viewQuery].join("|");for(const p of u)c=Math.imul(31,c)+p.charCodeAt(0)<<0;return c+=2147483648,"c"+c}(u),u})}function dh(a){return sn(a)||_r(a)}function Vl(a){return null!==a}function uh(a){return Io(()=>({type:a.type,bootstrap:a.bootstrap||gn,declarations:a.declarations||gn,imports:a.imports||gn,exports:a.exports||gn,transitiveCompileScopes:null,schemas:a.schemas||null,id:a.id||null}))}function $m(a,c){if(null==a)return Do;const u={};for(const h in a)if(a.hasOwnProperty(h)){let p=a[h],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),u[p]=h,c&&(c[p]=_)}return u}function Wm(a){return Io(()=>{const c=zc(a);return ea(c),c})}function hh(a){return{type:a.type,name:a.name,factory:null,pure:!1!==a.pure,standalone:!0===a.standalone,onDestroy:a.type.prototype.ngOnDestroy||null}}function sn(a){return a[hi]||null}function _r(a){return a[mi]||null}function gr(a){return a[Fl]||null}function Ja(a){const c=sn(a)||_r(a)||gr(a);return null!==c&&c.standalone}function vs(a,c){const u=a[Ca]||null;if(!u&&!0===c)throw new Error(`Type ${oe(a)} does not have '\u0275mod' property.`);return u}function zc(a){const c={};return{type:a.type,providersResolver:null,factory:null,hostBindings:a.hostBindings||null,hostVars:a.hostVars||0,hostAttrs:a.hostAttrs||null,contentQueries:a.contentQueries||null,declaredInputs:c,inputTransforms:null,inputConfig:a.inputs||Do,exportAs:a.exportAs||null,standalone:!0===a.standalone,signals:!0===a.signals,selectors:a.selectors||gn,viewQuery:a.viewQuery||null,features:a.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$m(a.inputs,c),outputs:$m(a.outputs)}}function ea(a){a.features?.forEach(c=>c(a))}function ta(a,c){if(!a)return null;const u=c?gr:dh;return()=>("function"==typeof a?a():a).map(h=>u(h)).filter(Vl)}const Ti=0,nt=1,Ht=2,Vn=3,Xr=4,Ea=5,vr=6,jc=7,$t=8,bs=9,ec=10,jt=11,So=12,Ul=13,Vr=14,Fi=15,Hl=16,zl=17,eo=18,jl=19,mh=20,tc=21,Ao=22,Gl=23,Ia=24,on=25,fh=1,ph=2,Ur=7,Jr=9,br=11;function kr(a){return Array.isArray(a)&&"object"==typeof a[fh]}function Hr(a){return Array.isArray(a)&&!0===a[fh]}function _h(a){return 0!=(4&a.flags)}function Da(a){return a.componentOffset>-1}function Fs(a){return 1==(1&a.flags)}function Ls(a){return!!a.template}function $l(a){return 0!=(512&a[Ht])}function es(a,c){return a.hasOwnProperty(ko)?a[ko]:null}let Tr=null,Wl=!1;function Si(a){const c=Tr;return Tr=a,c}const no={version:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function xh(a){if(!Zc(a)||a.dirty){if(!a.producerMustRecompute(a)&&!Bs(a))return void(a.dirty=!1);a.producerRecomputeValue(a),a.dirty=!1}}function v_(a){a.dirty=!0,function Ch(a){if(void 0===a.liveConsumerNode)return;const c=Wl;Wl=!0;try{for(const u of a.liveConsumerNode)u.dirty||v_(u)}finally{Wl=c}}(a),a.consumerMarkedDirty?.(a)}function Ta(a){return a&&(a.nextProducerIndex=0),Si(a)}function qc(a,c){if(Si(c),a&&void 0!==a.producerNode&&void 0!==a.producerIndexOfThis&&void 0!==a.producerLastReadVersion){if(Zc(a))for(let u=a.nextProducerIndex;u<a.producerNode.length;u++)ts(a.producerNode[u],a.producerIndexOfThis[u]);for(let u=a.nextProducerIndex;u<a.producerNode.length;u++)a.producerNode.pop(),a.producerLastReadVersion.pop(),a.producerIndexOfThis.pop()}}function Bs(a){Kc(a);for(let c=0;c<a.producerNode.length;c++){const u=a.producerNode[c],h=a.producerLastReadVersion[c];if(h!==u.version||(xh(u),h!==u.version))return!0}return!1}function Qm(a){if(Kc(a),Zc(a))for(let c=0;c<a.producerNode.length;c++)ts(a.producerNode[c],a.producerIndexOfThis[c]);a.producerNode.length=a.producerLastReadVersion.length=a.producerIndexOfThis.length=0,a.liveConsumerNode&&(a.liveConsumerNode.length=a.liveConsumerIndexOfThis.length=0)}function ts(a,c){if(function Zd(a){a.liveConsumerNode??=[],a.liveConsumerIndexOfThis??=[]}(a),Kc(a),1===a.liveConsumerNode.length)for(let h=0;h<a.producerNode.length;h++)ts(a.producerNode[h],a.producerIndexOfThis[h]);const u=a.liveConsumerNode.length-1;if(a.liveConsumerNode[c]=a.liveConsumerNode[u],a.liveConsumerIndexOfThis[c]=a.liveConsumerIndexOfThis[u],a.liveConsumerNode.length--,a.liveConsumerIndexOfThis.length--,c<a.liveConsumerNode.length){const h=a.liveConsumerIndexOfThis[c],p=a.liveConsumerNode[c];Kc(p),p.producerIndexOfThis[h]=c}}function Zc(a){return a.consumerIsAlwaysLive||(a?.liveConsumerNode?.length??0)>0}function Kc(a){a.producerNode??=[],a.producerIndexOfThis??=[],a.producerLastReadVersion??=[]}let Qd=null;function Jd(a){const c=Si(null);try{return a()}finally{Si(c)}}const Xm=()=>{},Jm={...no,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:a=>{a.schedule(a.ref)},hasRun:!1,cleanupFn:Xm};class tf{constructor(c,u,h){this.previousValue=c,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function Kl(){return eu}function eu(a){return a.type.prototype.ngOnChanges&&(a.setInput=kh),nf}function nf(){const a=nu(this),c=a?.current;if(c){const u=a.previous;if(u===Do)a.previous=c;else for(let h in c)u[h]=c[h];a.current=null,this.ngOnChanges(c)}}function kh(a,c,u,h){const p=this.declaredInputs[u],_=nu(a)||function x_(a,c){return a[tu]=c}(a,{previous:Do,current:null}),y=_.current||(_.current={}),C=_.previous,E=C[p];y[p]=new tf(E&&E.currentValue,c,C===Do),a[h]=c}Kl.ngInherit=!0;const tu="__ngSimpleChanges__";function nu(a){return a[tu]||null}const io=function(a,c,u){},Th="svg";function In(a){for(;Array.isArray(a);)a=a[Ti];return a}function el(a,c){return In(c[a])}function ns(a,c){return In(c[a.index])}function iu(a,c){return a.data[c]}function tl(a,c){return a[c]}function is(a,c){const u=c[a];return kr(u)?u:u[Ti]}function rc(a,c){return null==c?null:a[c]}function Pb(a){a[zl]=0}function dx(a){1024&a[Ht]||(a[Ht]|=1024,hx(a,1))}function ux(a){1024&a[Ht]&&(a[Ht]&=-1025,hx(a,-1))}function hx(a,c){let u=a[Vn];if(null===u)return;u[Ea]+=c;let h=u;for(u=u[Vn];null!==u&&(1===c&&1===h[Ea]||-1===c&&0===h[Ea]);)u[Ea]+=c,h=u,u=u[Vn]}const Vt={lFrame:oc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function nl(){return Vt.bindingsEnabled}function Po(){return null!==Vt.skipHydrationRootTNode}function Re(){return Vt.lFrame.lView}function wn(){return Vt.lFrame.tView}function Vs(a){return Vt.lFrame.contextLView=a,a[$t]}function T_(a){return Vt.lFrame.contextLView=null,a}function ai(){let a=il();for(;null!==a&&64===a.type;)a=a.parent;return a}function il(){return Vt.lFrame.currentTNode}function ys(a,c){const u=Vt.lFrame;u.currentTNode=a,u.isParent=c}function Sr(){return Vt.lFrame.isParent}function Ai(){Vt.lFrame.isParent=!1}function Xl(){return Vt.lFrame.bindingIndex++}function ss(a){const c=Vt.lFrame,u=c.bindingIndex;return c.bindingIndex=c.bindingIndex+a,u}function Jl(a,c){const u=Vt.lFrame;u.bindingIndex=u.bindingRootIndex=a,ed(c)}function ed(a){Vt.lFrame.currentDirectiveIndex=a}function M_(){return Vt.lFrame.currentQueryIndex}function Oh(a){Vt.lFrame.currentQueryIndex=a}function R_(a){const c=a[nt];return 2===c.type?c.declTNode:1===c.type?a[vr]:null}function P_(a,c,u){if(u&Ft.SkipSelf){let p=c,_=a;for(;!(p=p.parent,null!==p||u&Ft.Host||(p=R_(_),null===p||(_=_[Vr],10&p.type))););if(null===p)return!1;c=p,a=_}const h=Vt.lFrame=nr();return h.currentTNode=c,h.lView=a,!0}function Bi(a){const c=nr(),u=a[nt];Vt.lFrame=c,c.currentTNode=u.firstChild,c.lView=a,c.tView=u,c.contextLView=a,c.bindingIndex=u.bindingStartIndex,c.inI18n=!1}function nr(){const a=Vt.lFrame,c=null===a?null:a.child;return null===c?oc(a):c}function oc(a){const c={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:a,child:null,inI18n:!1};return null!==a&&(a.child=c),c}function zn(){const a=Vt.lFrame;return Vt.lFrame=a.parent,a.currentTNode=null,a.lView=null,a}const ft=zn;function Ar(){const a=zn();a.isParent=!0,a.tView=null,a.selectedIndex=-1,a.contextLView=null,a.elementDepthCount=0,a.currentDirectiveIndex=-1,a.currentNamespace=null,a.bindingRootIndex=-1,a.bindingIndex=-1,a.currentQueryIndex=0}function jr(){return Vt.lFrame.selectedIndex}function ra(a){Vt.lFrame.selectedIndex=a}function ii(){const a=Vt.lFrame;return iu(a.tView,a.selectedIndex)}function td(){Vt.lFrame.currentNamespace=Th}function Ct(){!function N_(){Vt.lFrame.currentNamespace=null}()}let id=!0;function so(){return id}function Us(a){id=a}function rd(a,c){for(let u=c.directiveStart,h=c.directiveEnd;u<h;u++){const _=a.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:C,ngAfterViewInit:E,ngAfterViewChecked:P,ngOnDestroy:L}=_;y&&(a.contentHooks??=[]).push(-u,y),C&&((a.contentHooks??=[]).push(u,C),(a.contentCheckHooks??=[]).push(u,C)),E&&(a.viewHooks??=[]).push(-u,E),P&&((a.viewHooks??=[]).push(u,P),(a.viewCheckHooks??=[]).push(u,P)),null!=L&&(a.destroyHooks??=[]).push(u,L)}}function ir(a,c,u){pf(a,c,3,u)}function rl(a,c,u,h){(3&a[Ht])===u&&pf(a,c,u,h)}function Nh(a,c){let u=a[Ht];(3&u)===c&&(u&=8191,u+=1,a[Ht]=u)}function pf(a,c,u,h){const _=h??-1,y=c.length-1;let C=0;for(let E=void 0!==h?65535&a[zl]:0;E<y;E++)if("number"==typeof c[E+1]){if(C=c[E],null!=h&&C>=h)break}else c[E]<0&&(a[zl]+=65536),(C<_||-1==_)&&(ou(a,u,c,E),a[zl]=(4294901760&a[zl])+E+2),E++}function Ra(a,c){io(4,a,c);const u=Si(null);try{c.call(a)}finally{Si(u),io(5,a,c)}}function ou(a,c,u,h){const p=u[h]<0,_=u[h+1],C=a[p?-u[h]:u[h]];p?a[Ht]>>13<a[zl]>>16&&(3&a[Ht])===c&&(a[Ht]+=8192,Ra(C,_)):Ra(C,_)}const Oo=-1;class Gr{constructor(c,u,h){this.factory=c,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function sl(a){return a!==Oo}function Xe(a){return 32767&a}function Mn(a,c){let u=function ri(a){return a>>16}(a),h=c;for(;u>0;)h=h[Vr],u--;return h}let wr=!0;function Kn(a){const c=wr;return wr=a,c}const sd=255,cu=5;let gf=0;const or={};function si(a,c){const u=lu(a,c);if(-1!==u)return u;const h=c[nt];h.firstCreatePass&&(a.injectorIndex=c.length,No(h.data,a),No(c,null),No(h.blueprint,null));const p=oo(a,c),_=a.injectorIndex;if(sl(p)){const y=Xe(p),C=Mn(p,c),E=C[nt].data;for(let P=0;P<8;P++)c[_+P]=C[y+P]|E[y+P]}return c[_+8]=p,_}function No(a,c){a.push(0,0,0,0,0,0,0,0,c)}function lu(a,c){return-1===a.injectorIndex||a.parent&&a.parent.injectorIndex===a.injectorIndex||null===c[a.injectorIndex+8]?-1:a.injectorIndex}function oo(a,c){if(a.parent&&-1!==a.parent.injectorIndex)return a.parent.injectorIndex;let u=0,h=null,p=c;for(;null!==p;){if(h=Vh(p),null===h)return Oo;if(u++,p=p[Vr],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return Oo}function cc(a,c,u){!function ac(a,c,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(Ye)&&(h=u[Ye]),null==h&&(h=u[Ye]=gf++);const p=h&sd;c.data[a+(p>>cu)]|=1<<p}(a,c,u)}function Pa(a,c,u){if(u&Ft.Optional||void 0!==a)return a;it()}function Oa(a,c,u,h){if(u&Ft.Optional&&void 0===h&&(h=null),!(u&(Ft.Self|Ft.Host))){const p=a[bs],_=Pn(void 0);try{return p?p.get(c,h,u&Ft.Optional):fr(c,h,u&Ft.Optional)}finally{Pn(_)}}return Pa(h,0,u)}function ol(a,c,u,h=Ft.Default,p){if(null!==a){if(2048&c[Ht]&&!(h&Ft.Self)){const y=function L_(a,c,u,h,p){let _=a,y=c;for(;null!==_&&null!==y&&2048&y[Ht]&&!(512&y[Ht]);){const C=xn(_,y,u,h|Ft.Self,or);if(C!==or)return C;let E=_.parent;if(!E){const P=y[mh];if(P){const L=P.get(u,or,h);if(L!==or)return L}E=Vh(y),y=y[Vr]}_=E}return p}(a,c,u,h,or);if(y!==or)return y}const _=xn(a,c,u,h,or);if(_!==or)return _}return Oa(c,u,h,p)}function xn(a,c,u,h,p){const _=function dc(a){if("string"==typeof a)return a.charCodeAt(0)||0;const c=a.hasOwnProperty(Ye)?a[Ye]:void 0;return"number"==typeof c?c>=0?c&sd:aa:c}(u);if("function"==typeof _){if(!P_(c,a,h))return h&Ft.Host?Pa(p,0,h):Oa(c,u,h,p);try{let y;if(y=_(h),null!=y||h&Ft.Optional)return y;it()}finally{ft()}}else if("number"==typeof _){let y=null,C=lu(a,c),E=Oo,P=h&Ft.Host?c[Fi][vr]:null;for((-1===C||h&Ft.SkipSelf)&&(E=-1===C?oo(a,c):c[C+8],E!==Oo&&Bh(h,!1)?(y=c[nt],C=Xe(E),c=Mn(E,c)):C=-1);-1!==C;){const L=c[nt];if(uc(_,C,L.data)){const j=Jt(C,c,u,y,h,P);if(j!==or)return j}E=c[C+8],E!==Oo&&Bh(h,c[nt].data[C+8]===P)&&uc(_,C,c)?(y=L,C=Xe(E),c=Mn(E,c)):C=-1}}return p}function Jt(a,c,u,h,p,_){const y=c[nt],C=y.data[a+8],L=Na(C,y,u,null==h?Da(C)&&wr:h!=y&&0!=(3&C.type),p&Ft.Host&&_===C);return null!==L?lc(c,y,L,C):or}function Na(a,c,u,h,p){const _=a.providerIndexes,y=c.data,C=1048575&_,E=a.directiveStart,L=_>>20,Q=p?C+L:a.directiveEnd;for(let ie=h?C:C+L;ie<Q;ie++){const Ie=y[ie];if(ie<E&&u===Ie||ie>=E&&Ie.type===u)return ie}if(p){const ie=y[E];if(ie&&Ls(ie)&&ie.type===u)return E}return null}function lc(a,c,u,h){let p=a[u];const _=c.data;if(function sa(a){return a instanceof Gr}(p)){const y=p;y.resolving&&function $e(a,c){const u=c?`. Dependency path: ${c.join(" > ")} > ${a}`:"";throw new le(-200,`Circular dependency in DI detected for ${a}${u}`)}(function Te(a){return"function"==typeof a?a.name||a.toString():"object"==typeof a&&null!=a&&"function"==typeof a.type?a.type.name||a.type.toString():ue(a)}(_[u]));const C=Kn(y.canSeeViewProviders);y.resolving=!0;const P=y.injectImpl?Pn(y.injectImpl):null;P_(a,h,Ft.Default);try{p=a[u]=y.factory(void 0,_,a,h),c.firstCreatePass&&u>=h.directiveStart&&function Mi(a,c,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:_}=c.type.prototype;if(h){const y=eu(c);(u.preOrderHooks??=[]).push(a,y),(u.preOrderCheckHooks??=[]).push(a,y)}p&&(u.preOrderHooks??=[]).push(0-a,p),_&&((u.preOrderHooks??=[]).push(a,_),(u.preOrderCheckHooks??=[]).push(a,_))}(u,_[u],c)}finally{null!==P&&Pn(P),Kn(C),y.resolving=!1,ft()}}return p}function uc(a,c,u){return!!(u[c+(a>>cu)]&1<<a)}function Bh(a,c){return!(a&Ft.Self||a&Ft.Host&&c)}class Ii{constructor(c,u){this._tNode=c,this._lView=u}get(c,u,h){return ol(this._tNode,this._lView,c,Ir(h),u)}}function aa(){return new Ii(ai(),Re())}function Fa(a){return Io(()=>{const c=a.prototype.constructor,u=c[ko]||hc(c),h=Object.prototype;let p=Object.getPrototypeOf(a.prototype).constructor;for(;p&&p!==h;){const _=p[ko]||hc(p);if(_&&_!==u)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function hc(a){return et(a)?()=>{const c=hc(Ve(a));return c&&c()}:es(a)}function Vh(a){const c=a[nt],u=c.type;return 2===u?c.declTNode:1===u?a[vr]:null}function du(a){return function Lh(a,c){if("class"===c)return a.classes;if("style"===c)return a.styles;const u=a.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const _=u[p];if(Gd(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(_===c)return u[p+1];p+=2}}}return null}(ai(),a)}const cl="__parameters__";function B(a,c,u){return Io(()=>{const h=function O(a){return function(...u){if(a){const h=a(...u);for(const p in h)this[p]=h[p]}}}(c);function p(..._){if(this instanceof p)return h.apply(this,_),this;const y=new p(..._);return C.annotation=y,C;function C(E,P,L){const j=E.hasOwnProperty(cl)?E[cl]:Object.defineProperty(E,cl,{value:[]})[cl];for(;j.length<=L;)j.push(null);return(j[L]=j[L]||[]).push(y),E}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=a,p.annotationCls=p,p})}function $r(a,c){a.forEach(u=>Array.isArray(u)?$r(u,c):c(u))}function Nb(a,c,u){c>=a.length?a.push(u):a.splice(c,0,u)}function B_(a,c){return c>=a.length-1?a.pop():a.splice(c,1)[0]}function mc(a,c){const u=[];for(let h=0;h<a;h++)u.push(c);return u}function ao(a,c,u){let h=uu(a,c);return h>=0?a[1|h]=u:(h=~h,function Lb(a,c,u,h){let p=a.length;if(p==c)a.push(u,h);else if(1===p)a.push(h,a[0]),a[0]=u;else{for(p--,a.push(a[p-1],a[p]);p>c;)a[p]=a[p-2],p--;a[c]=u,a[c+1]=h}}(a,h,c,u)),h}function U_(a,c){const u=uu(a,c);if(u>=0)return a[1|u]}function uu(a,c){return function H_(a,c,u){let h=0,p=a.length>>u;for(;p!==h;){const _=h+(p-h>>1),y=a[_<<u];if(c===y)return _<<u;y>c?p=_:h=_+1}return~(p<<u)}(a,c,1)}const Hh=pr(B("Optional"),8),cd=pr(B("SkipSelf"),4);function Cf(a){return 128==(128&a.flags)}var qh=function(a){return a[a.Important=1]="Important",a[a.DashCase=2]="DashCase",a}(qh||{});const Ef=/^>|^->|<!--|-->|--!>|<!-$/g,zb=/(<|>)/g,La="\u200b$1\u200b";const Zh=new Map;let xx=0;const Kh="__ngContext__";function as(a,c){kr(c)?(a[Kh]=c[jl],function J_(a){Zh.set(a[jl],a)}(c)):a[Kh]=c}let H;function $(a,c){return H(a,c)}function be(a){const c=a[Vn];return Hr(c)?c[Vn]:c}function It(a){return jn(a[So])}function tn(a){return jn(a[Xr])}function jn(a){for(;null!==a&&!Hr(a);)a=a[Xr];return a}function Yi(a,c,u,h,p){if(null!=h){let _,y=!1;Hr(h)?_=h:kr(h)&&(y=!0,h=h[Ti]);const C=In(h);0===a&&null!==u?null==p?fT(c,u,C):Xh(c,u,C,p||null,!0):1===a&&null!==u?Xh(c,u,C,p||null,!0):2===a?function Zb(a,c,u){const h=Yb(a,c);h&&function AN(a,c,u,h){a.removeChild(c,u,h)}(a,h,c,u)}(c,C,y):3===a&&c.destroyNode(C),null!=_&&function RN(a,c,u,h,p){const _=u[Ur];_!==In(u)&&Yi(c,a,h,_,p);for(let C=br;C<u.length;C++){const E=u[C];sg(E[nt],E,a,c,h,_)}}(c,a,_,u,p)}}function fl(a,c){return a.createComment(function Yh(a){return a.replace(Ef,c=>c.replace(zb,La))}(c))}function gu(a,c,u){return a.createElement(c,u)}function Wb(a,c){const u=a[Jr],h=u.indexOf(c);ux(c),u.splice(h,1)}function qb(a,c){if(a.length<=br)return;const u=br+c,h=a[u];if(h){const p=h[Hl];null!==p&&p!==a&&Wb(p,h),c>0&&(a[u-1][Xr]=h[Xr]);const _=B_(a,br+c);!function Gb(a,c){sg(a,c,c[jt],2,null,null),c[Ti]=null,c[vr]=null}(h[nt],h);const y=_[eo];null!==y&&y.detachView(_[nt]),h[Vn]=null,h[Xr]=null,h[Ht]&=-129}return h}function Dx(a,c){if(!(256&c[Ht])){const u=c[jt];c[Gl]&&Qm(c[Gl]),c[Ia]&&Qm(c[Ia]),u.destroyNode&&sg(a,c,u,3,null,null),function $b(a){let c=a[So];if(!c)return hT(a[nt],a);for(;c;){let u=null;if(kr(c))u=c[So];else{const h=c[br];h&&(u=h)}if(!u){for(;c&&!c[Xr]&&c!==a;)kr(c)&&hT(c[nt],c),c=c[Vn];null===c&&(c=a),kr(c)&&hT(c[nt],c),u=c&&c[Xr]}c=u}}(c)}}function hT(a,c){if(!(256&c[Ht])){c[Ht]&=-129,c[Ht]|=256,function mT(a,c){let u;if(null!=a&&null!=(u=a.destroyHooks))for(let h=0;h<u.length;h+=2){const p=c[u[h]];if(!(p instanceof Gr)){const _=u[h+1];if(Array.isArray(_))for(let y=0;y<_.length;y+=2){const C=p[_[y]],E=_[y+1];io(4,C,E);try{E.call(C)}finally{io(5,C,E)}}else{io(4,p,_);try{_.call(p)}finally{io(5,p,_)}}}}}(a,c),function SN(a,c){const u=a.cleanup,h=c[jc];if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const y=u[_+3];y>=0?h[y]():h[-y].unsubscribe(),_+=2}else u[_].call(h[u[_+1]]);null!==h&&(c[jc]=null);const p=c[tc];if(null!==p){c[tc]=null;for(let _=0;_<p.length;_++)(0,p[_])()}}(a,c),1===c[nt].type&&c[jt].destroy();const u=c[Hl];if(null!==u&&Hr(c[Vn])){u!==c[Vn]&&Wb(u,c);const h=c[eo];null!==h&&h.detachView(a)}!function dd(a){Zh.delete(a[jl])}(c)}}function kf(a,c,u){return function Qh(a,c,u){let h=c;for(;null!==h&&40&h.type;)h=(c=h).parent;if(null===h)return u[Ti];{const{componentOffset:p}=h;if(p>-1){const{encapsulation:_}=a.data[h.directiveStart+p];if(_===Os.None||_===Os.Emulated)return null}return ns(h,u)}}(a,c.parent,u)}function Xh(a,c,u,h,p){a.insertBefore(c,u,h,p)}function fT(a,c,u){a.appendChild(c,u)}function pT(a,c,u,h,p){null!==h?Xh(a,c,u,h,p):fT(a,c,u)}function Yb(a,c){return a.parentNode(c)}function _T(a,c,u){return kx(a,c,u)}let Tx,Kb,wT,Qb,kx=function gT(a,c,u){return 40&a.type?ns(a,u):null};function ig(a,c,u,h){const p=kf(a,h,c),_=c[jt],C=_T(h.parent||c[vr],h,c);if(null!=p)if(Array.isArray(u))for(let E=0;E<u.length;E++)pT(_,p,u[E],C,!1);else pT(_,p,u,C,!1);void 0!==Tx&&Tx(_,h,c,u,p)}function pl(a,c){if(null!==c){const u=c.type;if(3&u)return ns(c,a);if(4&u)return Ax(-1,a[c.index]);if(8&u){const h=c.child;if(null!==h)return pl(a,h);{const p=a[c.index];return Hr(p)?Ax(-1,p):In(p)}}if(32&u)return $(c,a)()||In(a[c.index]);{const h=Sx(a,c);return null!==h?Array.isArray(h)?h[0]:pl(be(a[Fi]),h):pl(a,c.next)}}return null}function Sx(a,c){return null!==c?a[Fi][vr].projection[c.projection]:null}function Ax(a,c){const u=br+a+1;if(u<c.length){const h=c[u],p=h[nt].firstChild;if(null!==p)return pl(h,p)}return c[Ur]}function rg(a,c,u,h,p,_,y){for(;null!=u;){const C=h[u.index],E=u.type;if(y&&0===c&&(C&&as(In(C),h),u.flags|=2),32!=(32&u.flags))if(8&E)rg(a,c,u.child,h,p,_,!1),Yi(c,a,p,C,_);else if(32&E){const P=$(u,h);let L;for(;L=P();)Yi(c,a,p,L,_);Yi(c,a,p,C,_)}else 16&E?Rx(a,c,h,u,p,_):Yi(c,a,p,C,_);u=y?u.projectionNext:u.next}}function sg(a,c,u,h,p,_){rg(u,h,a.firstChild,c,p,_,!1)}function Rx(a,c,u,h,p,_){const y=u[Fi],E=y[vr].projection[h.projection];if(Array.isArray(E))for(let P=0;P<E.length;P++)Yi(c,a,p,E[P],_);else{let P=E;const L=y[Vn];Cf(h)&&(P.flags|=128),rg(a,c,P,L,p,_,!0)}}function bT(a,c,u){""===u?a.removeAttribute(c,"class"):a.setAttribute(c,"class",u)}function og(a,c,u){const{mergedAttrs:h,classes:p,styles:_}=u;null!==h&&Qa(a,c,h),null!==p&&bT(a,c,p),null!==_&&function ON(a,c,u){a.setAttribute(c,"style",u)}(a,c,_)}function Tf(a){return function Px(){if(void 0===Kb&&(Kb=null,On.trustedTypes))try{Kb=On.trustedTypes.createPolicy("angular",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Kb}()?.createHTML(a)||a}function xT(a){wT=a}function IT(a){return function Ox(){if(void 0===Qb&&(Qb=null,On.trustedTypes))try{Qb=On.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:a=>a,createScript:a=>a,createScriptURL:a=>a})}catch{}return Qb}()?.createScriptURL(a)||a}class em{constructor(c){this.changingThisBreaksApplicationSecurity=c}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${bt})`}}class DT extends em{getTypeName(){return"HTML"}}class Nx extends em{getTypeName(){return"Style"}}class Sf extends em{getTypeName(){return"Script"}}class Fx extends em{getTypeName(){return"URL"}}class LN extends em{getTypeName(){return"ResourceURL"}}function _l(a){return a instanceof em?a.changingThisBreaksApplicationSecurity:a}function hd(a,c){const u=function kT(a){return a instanceof em&&a.getTypeName()||null}(a);if(null!=u&&u!==c){if("ResourceURL"===u&&"URL"===c)return!0;throw new Error(`Required a safe ${c}, got a ${u} (see ${bt})`)}return u===c}function TT(a){return new DT(a)}function BN(a){return new Nx(a)}function VN(a){return new Sf(a)}function UN(a){return new Fx(a)}function HN(a){return new LN(a)}class zN{constructor(c){this.inertDocumentHelper=c}getInertBodyElement(c){c="<body><remove></remove>"+c;try{const u=(new window.DOMParser).parseFromString(Tf(c),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(c):(u.removeChild(u.firstChild),u)}catch{return null}}}class jN{constructor(c){this.defaultDoc=c,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(c){const u=this.inertDocument.createElement("template");return u.innerHTML=Tf(c),u}}const ST=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Xb(a){return(a=String(a)).match(ST)?a:"unsafe:"+a}function md(a){const c={};for(const u of a.split(","))c[u]=!0;return c}function lg(...a){const c={};for(const u of a)for(const h in u)u.hasOwnProperty(h)&&(c[h]=!0);return c}const AT=md("area,br,col,hr,img,wbr"),co=md("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),MT=md("rp,rt"),Lx=lg(AT,lg(co,md("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),lg(MT,md("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),lg(MT,co)),Jb=md("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),RT=lg(Jb,md("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),md("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Bx=md("script,style,template");class PT{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(c){let u=c.firstChild,h=!0;for(;u;)if(u.nodeType===Node.ELEMENT_NODE?h=this.startElement(u):u.nodeType===Node.TEXT_NODE?this.chars(u.nodeValue):this.sanitizedSomething=!0,h&&u.firstChild)u=u.firstChild;else for(;u;){u.nodeType===Node.ELEMENT_NODE&&this.endElement(u);let p=this.checkClobberedElement(u,u.nextSibling);if(p){u=p;break}u=this.checkClobberedElement(u,u.parentNode)}return this.buf.join("")}startElement(c){const u=c.nodeName.toLowerCase();if(!Lx.hasOwnProperty(u))return this.sanitizedSomething=!0,!Bx.hasOwnProperty(u);this.buf.push("<"),this.buf.push(u);const h=c.attributes;for(let p=0;p<h.length;p++){const _=h.item(p),y=_.name,C=y.toLowerCase();if(!RT.hasOwnProperty(C)){this.sanitizedSomething=!0;continue}let E=_.value;Jb[C]&&(E=Xb(E)),this.buf.push(" ",y,'="',gl(E),'"')}return this.buf.push(">"),!0}endElement(c){const u=c.nodeName.toLowerCase();Lx.hasOwnProperty(u)&&!AT.hasOwnProperty(u)&&(this.buf.push("</"),this.buf.push(u),this.buf.push(">"))}chars(c){this.buf.push(gl(c))}checkClobberedElement(c,u){if(u&&(c.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${c.outerHTML}`);return u}}const Mz=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,OT=/([^\#-~ |!])/g;function gl(a){return a.replace(/&/g,"&amp;").replace(Mz,function(c){return"&#"+(1024*(c.charCodeAt(0)-55296)+(c.charCodeAt(1)-56320)+65536)+";"}).replace(OT,function(c){return"&#"+c.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let ey;function $N(a,c){let u=null;try{ey=ey||function ag(a){const c=new jN(a);return function cg(){try{return!!(new window.DOMParser).parseFromString(Tf(""),"text/html")}catch{return!1}}()?new zN(c):c}(a);let h=c?String(c):"";u=ey.getInertBodyElement(h);let p=5,_=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=_,_=u.innerHTML,u=ey.getInertBodyElement(h)}while(h!==_);return Tf((new PT).sanitizeChildren(NT(u)||u))}finally{if(u){const h=NT(u)||u;for(;h.firstChild;)h.removeChild(h.firstChild)}}}function NT(a){return"content"in a&&function Rz(a){return a.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===a.nodeName}(a)?a.content:null}var bu=function(a){return a[a.NONE=0]="NONE",a[a.HTML=1]="HTML",a[a.STYLE=2]="STYLE",a[a.SCRIPT=3]="SCRIPT",a[a.URL=4]="URL",a[a.RESOURCE_URL=5]="RESOURCE_URL",a}(bu||{});function Ux(a){const c=ty();return c?c.sanitize(bu.URL,a)||"":hd(a,"URL")?_l(a):Xb(ue(a))}function LT(a){const c=ty();if(c)return IT(c.sanitize(bu.RESOURCE_URL,a)||"");if(hd(a,"ResourceURL"))return IT(_l(a));throw new le(904,!1)}function qN(a,c,u){return function Oz(a,c){return"src"===c&&("embed"===a||"frame"===a||"iframe"===a||"media"===a||"script"===a)||"href"===c&&("base"===a||"link"===a)?LT:Ux}(c,u)(a)}function ty(){const a=Re();return a&&a[ec].sanitizer}class Gn{constructor(c,u){this._desc=c,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Gt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const dg=new Gn("ENVIRONMENT_INITIALIZER"),VT=new Gn("INJECTOR",-1),Hx=new Gn("INJECTOR_DEF_TYPES");class zx{get(c,u=Qe){if(u===Qe){const h=new Error(`NullInjectorError: No provider for ${oe(c)}!`);throw h.name="NullInjectorError",h}return u}}function YN(...a){return{\u0275providers:HT(0,a),\u0275fromNgModule:!0}}function HT(a,...c){const u=[],h=new Set;let p;const _=y=>{u.push(y)};return $r(c,y=>{const C=y;ug(C,_,[],h)&&(p||=[],p.push(C))}),void 0!==p&&zT(p,_),u}function zT(a,c){for(let u=0;u<a.length;u++){const{ngModule:h,providers:p}=a[u];jT(p,_=>{c(_,h)})}}function ug(a,c,u,h){if(!(a=Ve(a)))return!1;let p=null,_=Rs(a);const y=!_&&sn(a);if(_||y){if(y&&!y.standalone)return!1;p=a}else{const E=a.ngModule;if(_=Rs(E),!_)return!1;p=E}const C=h.has(p);if(y){if(C)return!1;if(h.add(p),y.dependencies){const E="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const P of E)ug(P,c,u,h)}}else{if(!_)return!1;{if(null!=_.imports&&!C){let P;h.add(p);try{$r(_.imports,L=>{ug(L,c,u,h)&&(P||=[],P.push(L))})}finally{}void 0!==P&&zT(P,c)}if(!C){const P=es(p)||(()=>new p);c({provide:p,useFactory:P,deps:gn},p),c({provide:Hx,useValue:p,multi:!0},p),c({provide:dg,useValue:()=>qt(p),multi:!0},p)}const E=_.providers;if(null!=E&&!C){const P=a;jT(E,L=>{c(L,P)})}}}return p!==a&&void 0!==a.providers}function jT(a,c){for(let u of a)Le(u)&&(u=u.\u0275providers),Array.isArray(u)?jT(u,c):c(u)}const Lz=G({provide:String,useValue:G});function GT(a){return null!==a&&"object"==typeof a&&Lz in a}function Mf(a){return"function"==typeof a}const R=new Gn("Set Injector scope."),cn={},Cs={};let hg;function cs(){return void 0===hg&&(hg=new zx),hg}class gc{}class mg extends gc{get destroyed(){return this._destroyed}constructor(c,u,h,p){super(),this.parent=u,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,iy(c,y=>this.processProvider(y)),this.records.set(VT,tm(void 0,this)),p.has("environment")&&this.records.set(gc,tm(void 0,this));const _=this.records.get(R);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(Hx.multi,gn,Ft.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const u of this._ngOnDestroyHooks)u.ngOnDestroy();const c=this._onDestroyHooks;this._onDestroyHooks=[];for(const u of c)u()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(c){return this.assertNotDestroyed(),this._onDestroyHooks.push(c),()=>this.removeOnDestroy(c)}runInContext(c){this.assertNotDestroyed();const u=ht(this),h=Pn(void 0);try{return c()}finally{ht(u),Pn(h)}}get(c,u=Qe,h=Ft.Default){if(this.assertNotDestroyed(),c.hasOwnProperty(_s))return c[_s](this);h=Ir(h);const _=ht(this),y=Pn(void 0);try{if(!(h&Ft.SkipSelf)){let E=this.records.get(c);if(void 0===E){const P=function ZT(a){return"function"==typeof a||"object"==typeof a&&a instanceof Gn}(c)&&hn(c);E=P&&this.injectableDefInScope(P)?tm(ny(c),cn):null,this.records.set(c,E)}if(null!=E)return this.hydrate(c,E)}return(h&Ft.Self?cs():this.parent).get(c,u=h&Ft.Optional&&u===Qe?null:u)}catch(C){if("NullInjectorError"===C.name){if((C[_t]=C[_t]||[]).unshift(oe(c)),_)throw C;return function oh(a,c,u,h){const p=a[_t];throw c[J]&&p.unshift(c[J]),a.message=function h_(a,c,u,h=null){a=a&&"\n"===a.charAt(0)&&"\u0275"==a.charAt(1)?a.slice(2):a;let p=oe(c);if(Array.isArray(c))p=c.map(oe).join(" -> ");else if("object"==typeof c){let _=[];for(let y in c)if(c.hasOwnProperty(y)){let C=c[y];_.push(y+":"+("string"==typeof C?JSON.stringify(C):oe(C)))}p=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${a.replace(K,"\n  ")}`}("\n"+a.message,p,u,h),a.ngTokenPath=p,a[_t]=null,a}(C,c,"R3InjectorError",this.source)}throw C}finally{Pn(y),ht(_)}}resolveInjectorInitializers(){const c=ht(this),u=Pn(void 0);try{const p=this.get(dg.multi,gn,Ft.Self);for(const _ of p)_()}finally{ht(c),Pn(u)}}toString(){const c=[],u=this.records;for(const h of u.keys())c.push(oe(h));return`R3Injector[${c.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new le(205,!1)}processProvider(c){let u=Mf(c=Ve(c))?c:Ve(c&&c.provide);const h=function WT(a){return GT(a)?tm(void 0,a.useValue):tm(jx(a),cn)}(c);if(Mf(c)||!0!==c.multi)this.records.get(u);else{let p=this.records.get(u);p||(p=tm(void 0,cn,!0),p.factory=()=>Xt(p.multi),this.records.set(u,p)),u=c,p.multi.push(c)}this.records.set(u,h)}hydrate(c,u){return u.value===cn&&(u.value=Cs,u.value=u.factory()),"object"==typeof u.value&&u.value&&function YT(a){return null!==a&&"object"==typeof a&&"function"==typeof a.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(c){if(!c.providedIn)return!1;const u=Ve(c.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}removeOnDestroy(c){const u=this._onDestroyHooks.indexOf(c);-1!==u&&this._onDestroyHooks.splice(u,1)}}function ny(a){const c=hn(a),u=null!==c?c.factory:es(a);if(null!==u)return u;if(a instanceof Gn)throw new le(204,!1);if(a instanceof Function)return function $T(a){const c=a.length;if(c>0)throw mc(c,"?"),new le(204,!1);const u=function mr(a){return a&&(a[Ps]||a[er])||null}(a);return null!==u?()=>u.factory(a):()=>new a}(a);throw new le(204,!1)}function jx(a,c,u){let h;if(Mf(a)){const p=Ve(a);return es(p)||ny(p)}if(GT(a))h=()=>Ve(a.useValue);else if(function KN(a){return!(!a||!a.useFactory)}(a))h=()=>a.useFactory(...Xt(a.deps||[]));else if(function ZN(a){return!(!a||!a.useExisting)}(a))h=()=>qt(Ve(a.useExisting));else{const p=Ve(a&&(a.useClass||a.provide));if(!function qT(a){return!!a.deps}(a))return es(p)||ny(p);h=()=>new p(...Xt(a.deps))}return h}function tm(a,c,u=!1){return{factory:a,value:c,multi:u?[]:void 0}}function iy(a,c){for(const u of a)Array.isArray(u)?iy(u,c):u&&Le(u)?iy(u.\u0275providers,c):c(u)}const Gx=new Gn("AppId",{providedIn:"root",factory:()=>KT}),KT="ng",$x=new Gn("Platform Initializer"),ry=new Gn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),QT=new Gn("AnimationModuleType"),XT=new Gn("CSP nonce",{providedIn:"root",factory:()=>function Jh(){if(void 0!==wT)return wT;if(typeof document<"u")return document;throw new le(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Wx=(a,c,u)=>null;function hy(a,c,u=!1){return Wx(a,c,u)}class cS{}class Zx{}class dS{resolveComponentFactory(c){throw function lS(a){const c=Error(`No component factory found for ${oe(a)}.`);return c.ngComponent=a,c}(c)}}let Of=(()=>{class c{}return c.NULL=new dS,c})();function uS(){return rm(ai(),Re())}function rm(a,c){return new Nf(ns(a,c))}let Nf=(()=>{class c{constructor(h){this.nativeElement=h}}return c.__NG_ELEMENT_ID__=uS,c})();function hS(a){return a instanceof Nf?a.nativeElement:a}class Qx{}let mS=(()=>{class c{constructor(){this.destroyNode=null}}return c.__NG_ELEMENT_ID__=()=>function fS(){const a=Re(),u=is(ai().index,a);return(kr(u)?u:a)[jt]}(),c})(),pS=(()=>{var a;class c{}return(a=c).\u0275prov=Gt({token:a,providedIn:"root",factory:()=>null}),c})();class Xx{constructor(c){this.full=c,this.major=c.split(".")[0],this.minor=c.split(".")[1],this.patch=c.split(".").slice(2).join(".")}}const Jx=new Xx("16.2.4"),py={};function iC(a,c=null,u=null,h){const p=rC(a,c,u,h);return p.resolveInjectorInitializers(),p}function rC(a,c=null,u=null,h,p=new Set){const _=[u||gn,YN(a)];return h=h||("object"==typeof a?void 0:oe(a)),new mg(_,c||cs(),h||null,p)}let Ba=(()=>{var a;class c{static create(h,p){if(Array.isArray(h))return iC({name:""},p,h,"");{const _=h.name??"";return iC({name:_},h.parent,h.providers,_)}}}return(a=c).THROW_IF_NOT_FOUND=Qe,a.NULL=new zx,a.\u0275prov=Gt({token:a,providedIn:"any",factory:()=>qt(VT)}),a.__NG_ELEMENT_ID__=-1,c})();function wS(a){return c=>{setTimeout(a,void 0,c)}}const fd=class Vz extends l.x{constructor(c=!1){super(),this.__isAsync=c}emit(c){super.next(c)}subscribe(c,u,h){let p=c,_=u||(()=>null),y=h;if(c&&"object"==typeof c){const E=c;p=E.next?.bind(E),_=E.error?.bind(E),y=E.complete?.bind(E)}this.__isAsync&&(_=wS(_),p&&(p=wS(p)),y&&(y=wS(y)));const C=super.subscribe({next:p,error:_,complete:y});return c instanceof ne.w0&&c.add(C),C}};function sC(...a){}class Es{constructor({enableLongStackTrace:c=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new fd(!1),this.onMicrotaskEmpty=new fd(!1),this.onStable=new fd(!1),this.onError=new fd(!1),typeof Zone>"u")throw new le(908,!1);Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),c&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function xS(){const a="function"==typeof On.requestAnimationFrame;let c=On[a?"requestAnimationFrame":"setTimeout"],u=On[a?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&c&&u){const h=c[Zone.__symbol__("OriginalDelegate")];h&&(c=h);const p=u[Zone.__symbol__("OriginalDelegate")];p&&(u=p)}return{nativeRequestAnimationFrame:c,nativeCancelAnimationFrame:u}}().nativeRequestAnimationFrame,function IS(a){const c=()=>{!function oF(a){a.isCheckStableRunning||-1!==a.lastRequestAnimationFrameId||(a.lastRequestAnimationFrameId=a.nativeRequestAnimationFrame.call(On,()=>{a.fakeTopEventTask||(a.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{a.lastRequestAnimationFrameId=-1,DS(a),a.isCheckStableRunning=!0,ES(a),a.isCheckStableRunning=!1},void 0,()=>{},()=>{})),a.fakeTopEventTask.invoke()}),DS(a))}(a)};a._inner=a._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,_,y,C)=>{if(function TS(a){return!(!Array.isArray(a)||1!==a.length)&&!0===a[0].data?.__ignore_ng_zone__}(C))return u.invokeTask(p,_,y,C);try{return bg(a),u.invokeTask(p,_,y,C)}finally{(a.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||a.shouldCoalesceRunChangeDetection)&&c(),kS(a)}},onInvoke:(u,h,p,_,y,C,E)=>{try{return bg(a),u.invoke(p,_,y,C,E)}finally{a.shouldCoalesceRunChangeDetection&&c(),kS(a)}},onHasTask:(u,h,p,_)=>{u.hasTask(p,_),h===p&&("microTask"==_.change?(a._hasPendingMicrotasks=_.microTask,DS(a),ES(a)):"macroTask"==_.change&&(a.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,p,_)=>(u.handleError(p,_),a.runOutsideAngular(()=>a.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Es.isInAngularZone())throw new le(909,!1)}static assertNotInAngularZone(){if(Es.isInAngularZone())throw new le(909,!1)}run(c,u,h){return this._inner.run(c,u,h)}runTask(c,u,h,p){const _=this._inner,y=_.scheduleEventTask("NgZoneEvent: "+p,c,CS,sC,sC);try{return _.runTask(y,u,h)}finally{_.cancelTask(y)}}runGuarded(c,u,h){return this._inner.runGuarded(c,u,h)}runOutsideAngular(c){return this._outer.run(c)}}const CS={};function ES(a){if(0==a._nesting&&!a.hasPendingMicrotasks&&!a.isStable)try{a._nesting++,a.onMicrotaskEmpty.emit(null)}finally{if(a._nesting--,!a.hasPendingMicrotasks)try{a.runOutsideAngular(()=>a.onStable.emit(null))}finally{a.isStable=!0}}}function DS(a){a.hasPendingMicrotasks=!!(a._hasPendingMicrotasks||(a.shouldCoalesceEventChangeDetection||a.shouldCoalesceRunChangeDetection)&&-1!==a.lastRequestAnimationFrameId)}function bg(a){a._nesting++,a.isStable&&(a.isStable=!1,a.onUnstable.emit(null))}function kS(a){a._nesting--,ES(a)}class vy{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new fd,this.onMicrotaskEmpty=new fd,this.onStable=new fd,this.onError=new fd}run(c,u,h){return c.apply(u,h)}runGuarded(c,u,h){return c.apply(u,h)}runOutsideAngular(c){return c()}runTask(c,u,h,p){return c.apply(u,h)}}const lo=new Gn("",{providedIn:"root",factory:vc});function vc(){const a=Yt(Es);let c=!0;const u=new U.y(p=>{c=a.isStable&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks,a.runOutsideAngular(()=>{p.next(c),p.complete()})}),h=new U.y(p=>{let _;a.runOutsideAngular(()=>{_=a.onStable.subscribe(()=>{Es.assertNotInAngularZone(),queueMicrotask(()=>{!c&&!a.hasPendingMacrotasks&&!a.hasPendingMicrotasks&&(c=!0,p.next(!0))})})});const y=a.onUnstable.subscribe(()=>{Es.assertInAngularZone(),c&&(c=!1,a.runOutsideAngular(()=>{p.next(!1)}))});return()=>{_.unsubscribe(),y.unsubscribe()}});return(0,te.T)(u,h.pipe((0,xe.B)()))}function zs(a){return a instanceof Function?a():a}let cC=(()=>{var a;class c{constructor(){this.callbacks=new Set,this.deferredCallbacks=new Set,this.renderDepth=0,this.runningCallbacks=!1}begin(){if(this.runningCallbacks)throw new le(102,!1);this.renderDepth++}end(){if(this.renderDepth--,0===this.renderDepth)try{this.runningCallbacks=!0;for(const h of this.callbacks)h.invoke()}finally{this.runningCallbacks=!1;for(const h of this.deferredCallbacks)this.callbacks.add(h);this.deferredCallbacks.clear()}}register(h){(this.runningCallbacks?this.deferredCallbacks:this.callbacks).add(h)}unregister(h){this.callbacks.delete(h),this.deferredCallbacks.delete(h)}ngOnDestroy(){this.callbacks.clear(),this.deferredCallbacks.clear()}}return(a=c).\u0275prov=Gt({token:a,providedIn:"root",factory:()=>new a}),c})();function pd(a){for(;a;){a[Ht]|=64;const c=be(a);if($l(a)&&!c)return a;a=c}return null}function lC(a){return a.ngOriginalError}class Lf{constructor(){this._console=console}handleError(c){const u=this._findOriginalError(c);this._console.error("ERROR",c),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(c){let u=c&&lC(c);for(;u&&lC(u);)u=lC(u);return u||null}}const dC=new Gn("",{providedIn:"root",factory:()=>!1});let Vf=null;function PS(a,c){return a[c]??hC()}function bl(a,c){const u=hC();u.producerNode?.length&&(a[c]=Vf,u.lView=a,Vf=OS())}const hF={...no,consumerIsAlwaysLive:!0,consumerMarkedDirty:a=>{pd(a.lView)},lView:null};function OS(){return Object.create(hF)}function hC(){return Vf??=OS(),Vf}const Wt={};function NS(a){FS(wn(),Re(),jr()+a,!1)}function FS(a,c,u,h){if(!h)if(3==(3&c[Ht])){const _=a.preOrderCheckHooks;null!==_&&ir(c,_,u)}else{const _=a.preOrderHooks;null!==_&&rl(c,_,0,u)}ra(u)}function Uf(a,c=Ft.Default){const u=Re();return null===u?qt(a,c):ol(ai(),u,Ve(a),c)}function LS(){throw new Error("invalid")}function bc(a,c,u,h,p,_,y,C,E,P,L){const j=c.blueprint.slice();return j[Ti]=p,j[Ht]=140|h,(null!==P||a&&2048&a[Ht])&&(j[Ht]|=2048),Pb(j),j[Vn]=j[Vr]=a,j[$t]=u,j[ec]=y||a&&a[ec],j[jt]=C||a&&a[jt],j[bs]=E||a&&a[bs]||null,j[vr]=_,j[jl]=function If(){return xx++}(),j[Ao]=L,j[mh]=P,j[Fi]=2==c.type?a[Fi]:j,j}function Va(a,c,u,h,p){let _=a.data[c];if(null===_)_=function yy(a,c,u,h,p){const _=il(),y=Sr(),E=a.data[c]=function jz(a,c,u,h,p,_){let y=c?c.injectorIndex:-1,C=0;return Po()&&(C|=128),{type:u,index:h,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:C,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:c,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?_:_&&_.parent,u,c,h,p);return null===a.firstChild&&(a.firstChild=E),null!==_&&(y?null==_.child&&null!==E.parent&&(_.child=E):null===_.next&&(_.next=E,E.prev=_)),E}(a,c,u,h,p),function ff(){return Vt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=u,_.value=h,_.attrs=p;const y=function fi(){const a=Vt.lFrame,c=a.currentTNode;return a.isParent?c:c.parent}();_.injectorIndex=null===y?-1:y.injectorIndex}return ys(_,!0),_}function da(a,c,u,h){if(0===u)return-1;const p=c.length;for(let _=0;_<u;_++)c.push(h),a.blueprint.push(h),a.data.push(null);return p}function mF(a,c,u,h,p){const _=PS(c,Gl),y=jr(),C=2&h;try{ra(-1),C&&c.length>on&&FS(a,c,on,!1),io(C?2:0,p);const P=C?_:null,L=Ta(P);try{null!==P&&(P.dirty=!1),u(h,p)}finally{qc(P,L)}}finally{C&&null===c[Gl]&&bl(c,Gl),ra(y),io(C?3:1,p)}}function wy(a,c,u){if(_h(c)){const h=Si(null);try{const _=c.directiveEnd;for(let y=c.directiveStart;y<_;y++){const C=a.data[y];C.contentQueries&&C.contentQueries(1,u[y],y)}}finally{Si(h)}}}function Hf(a,c,u){nl()&&(function vF(a,c,u,h){const p=u.directiveStart,_=u.directiveEnd;Da(u)&&function xF(a,c,u){const h=ns(c,a),p=mC(u);let y=16;u.signals?y=4096:u.onPush&&(y=64);const C=xg(a,bc(a,p,null,y,h,c,null,a[ec].rendererFactory.createRenderer(h,u),null,null,null));a[c.index]=C}(c,u,a.data[p+u.componentOffset]),a.firstCreatePass||si(u,c),as(h,c);const y=u.initialInputs;for(let C=p;C<_;C++){const E=a.data[C],P=lc(c,a,C,u);as(P,c),null!==y&&qS(0,C-p,P,E,0,y),Ls(E)&&(is(u.index,c)[$t]=lc(c,a,C,u))}}(a,c,u,ns(u,c)),64==(64&u.flags)&&Ey(a,c,u))}function yu(a,c,u=ns){const h=c.localNames;if(null!==h){let p=c.index+1;for(let _=0;_<h.length;_+=2){const y=h[_+1],C=-1===y?u(c,a):a[y];a[p++]=C}}}function mC(a){const c=a.tView;return null===c||c.incompleteFirstPass?a.tView=xy(1,null,a.template,a.decls,a.vars,a.directiveDefs,a.pipeDefs,a.viewQuery,a.schemas,a.consts,a.id):c}function xy(a,c,u,h,p,_,y,C,E,P,L){const j=on+h,Q=j+p,ie=function fC(a,c){const u=[];for(let h=0;h<c;h++)u.push(h<a?null:Wt);return u}(j,Q),Ie="function"==typeof P?P():P;return ie[nt]={type:a,blueprint:ie,template:u,queries:null,viewQuery:C,declTNode:c,data:ie.slice().fill(null,j),bindingStartIndex:j,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:E,consts:Ie,incompleteFirstPass:!1,ssrId:L}}let pC=a=>null;function zS(a,c,u,h){for(let p in a)if(a.hasOwnProperty(p)){u=null===u?{}:u;const _=a[p];null===h?fF(u,c,p,_):h.hasOwnProperty(p)&&fF(u,c,h[p],_)}return u}function fF(a,c,u,h){a.hasOwnProperty(u)?a[u].push(c,h):a[u]=[c,h]}function Lo(a,c,u,h,p,_,y,C){const E=ns(c,u);let L,P=c.inputs;!C&&null!=P&&(L=P[h])?(Eg(a,u,L,h,p),Da(c)&&function _F(a,c){const u=is(c,a);16&u[Ht]||(u[Ht]|=64)}(u,c.index)):3&c.type&&(h=function Gz(a){return"class"===a?"className":"for"===a?"htmlFor":"formaction"===a?"formAction":"innerHtml"===a?"innerHTML":"readonly"===a?"readOnly":"tabindex"===a?"tabIndex":a}(h),p=null!=y?y(p,c.value||"",h):p,_.setProperty(E,h,p))}function _C(a,c,u,h){if(nl()){const p=null===h?null:{"":-1},_=function bF(a,c){const u=a.directiveRegistry;let h=null,p=null;if(u)for(let _=0;_<u.length;_++){const y=u[_];if(Hc(c,y.selectors,!1))if(h||(h=[]),Ls(y))if(null!==y.findHostDirectiveDefs){const C=[];p=p||new Map,y.findHostDirectiveDefs(y,C,p),h.unshift(...C,y),gC(a,c,C.length)}else h.unshift(y),gC(a,c,0);else p=p||new Map,y.findHostDirectiveDefs?.(y,h,p),h.push(y)}return null===h?null:[h,p]}(a,u);let y,C;null===_?y=C=null:[y,C]=_,null!==y&&jS(a,c,u,y,p,C),p&&function yF(a,c,u){if(c){const h=a.localNames=[];for(let p=0;p<c.length;p+=2){const _=u[c[p+1]];if(null==_)throw new le(-301,!1);h.push(c[p],_)}}}(u,h,p)}u.mergedAttrs=Ll(u.mergedAttrs,u.attrs)}function jS(a,c,u,h,p,_){for(let P=0;P<h.length;P++)cc(si(u,c),a,h[P].type);!function wu(a,c,u){a.flags|=1,a.directiveStart=c,a.directiveEnd=c+u,a.providerIndexes=c}(u,a.data.length,h.length);for(let P=0;P<h.length;P++){const L=h[P];L.providersResolver&&L.providersResolver(L)}let y=!1,C=!1,E=da(a,c,h.length,null);for(let P=0;P<h.length;P++){const L=h[P];u.mergedAttrs=Ll(u.mergedAttrs,L.hostAttrs),wF(a,u,c,E,L),WS(E,L,p),null!==L.contentQueries&&(u.flags|=4),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=64);const j=L.type.prototype;!y&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((a.preOrderHooks??=[]).push(u.index),y=!0),!C&&(j.ngOnChanges||j.ngDoCheck)&&((a.preOrderCheckHooks??=[]).push(u.index),C=!0),E++}!function pF(a,c,u){const p=c.directiveEnd,_=a.data,y=c.attrs,C=[];let E=null,P=null;for(let L=c.directiveStart;L<p;L++){const j=_[L],Q=u?u.get(j):null,Ie=Q?Q.outputs:null;E=zS(j.inputs,L,E,Q?Q.inputs:null),P=zS(j.outputs,L,P,Ie);const Ze=null===E||null===y||To(c)?null:ZS(E,L,y);C.push(Ze)}null!==E&&(E.hasOwnProperty("class")&&(c.flags|=8),E.hasOwnProperty("style")&&(c.flags|=16)),c.initialInputs=C,c.inputs=E,c.outputs=P}(a,u,_)}function Ey(a,c,u){const h=u.directiveStart,p=u.directiveEnd,_=u.index,y=function Ob(){return Vt.lFrame.currentDirectiveIndex}();try{ra(_);for(let C=h;C<p;C++){const E=a.data[C],P=c[C];ed(C),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&$S(E,P)}}finally{ra(-1),ed(y)}}function $S(a,c){null!==a.hostBindings&&a.hostBindings(1,c)}function gC(a,c,u){c.componentOffset=u,(a.components??=[]).push(c.index)}function WS(a,c,u){if(u){if(c.exportAs)for(let h=0;h<c.exportAs.length;h++)u[c.exportAs[h]]=a;Ls(c)&&(u[""]=a)}}function wF(a,c,u,h,p){a.data[h]=p;const _=p.factory||(p.factory=es(p.type)),y=new Gr(_,Ls(p),Uf);a.blueprint[h]=y,u[h]=y,function Rr(a,c,u,h,p){const _=p.hostBindings;if(_){let y=a.hostBindingOpCodes;null===y&&(y=a.hostBindingOpCodes=[]);const C=~c.index;(function GS(a){let c=a.length;for(;c>0;){const u=a[--c];if("number"==typeof u&&u<0)return u}return 0})(y)!=C&&y.push(C),y.push(u,h,_)}}(a,c,h,da(a,u,p.hostVars,Wt),p)}function yl(a,c,u,h,p,_){const y=ns(a,c);!function vC(a,c,u,h,p,_,y){if(null==_)a.removeAttribute(c,p,u);else{const C=null==y?ue(_):y(_,h||"",p);a.setAttribute(c,p,C,u)}}(c[jt],y,_,a.value,u,h,p)}function qS(a,c,u,h,p,_){const y=_[c];if(null!==y)for(let C=0;C<y.length;)YS(h,u,y[C++],y[C++],y[C++])}function YS(a,c,u,h,p){const _=Si(null);try{const y=a.inputTransforms;null!==y&&y.hasOwnProperty(h)&&(p=y[h].call(c,p)),null!==a.setInput?a.setInput(c,p,u,h):c[h]=p}finally{Si(_)}}function ZS(a,c,u){let h=null,p=0;for(;p<u.length;){const _=u[p];if(0!==_)if(5!==_){if("number"==typeof _)break;if(a.hasOwnProperty(_)){null===h&&(h=[]);const y=a[_];for(let C=0;C<y.length;C+=2)if(y[C]===c){h.push(_,y[C+1],u[p+1]);break}}p+=2}else p+=2;else p+=4}return h}function KS(a,c,u,h){return[a,!0,!1,c,null,0,h,u,null,null,null]}function QS(a,c){const u=a.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const _=u[h+1];if(-1!==_){const y=a.data[_];Oh(u[h]),y.contentQueries(2,c[_],_)}}}function xg(a,c){return a[So]?a[Ul][Xr]=c:a[So]=c,a[Ul]=c,c}function Iy(a,c,u){Oh(0);const h=Si(null);try{c(a,u)}finally{Si(h)}}function Dy(a){return a[jc]||(a[jc]=[])}function Cg(a){return a.cleanup||(a.cleanup=[])}function ky(a,c){const u=a[bs],h=u?u.get(Lf,null):null;h&&h.handleError(c)}function Eg(a,c,u,h,p){for(let _=0;_<u.length;){const y=u[_++],C=u[_++];YS(a.data[y],c[y],h,C,p)}}function gd(a,c,u){const h=el(c,a);!function Fo(a,c,u){a.setValue(c,u)}(a[jt],h,u)}function CF(a,c){const u=is(c,a),h=u[nt];!function EF(a,c){for(let u=c.length;u<a.blueprint.length;u++)c.push(a.blueprint[u])}(h,u);const p=u[Ti];null!==p&&null===u[Ao]&&(u[Ao]=hy(p,u[bs])),Ig(h,u,u[$t])}function Ig(a,c,u){Bi(c);try{const h=a.viewQuery;null!==h&&Iy(1,h,u);const p=a.template;null!==p&&mF(a,c,p,1,u),a.firstCreatePass&&(a.firstCreatePass=!1),a.staticContentQueries&&QS(a,c),a.staticViewQueries&&Iy(2,a.viewQuery,u);const _=a.components;null!==_&&function vd(a,c){for(let u=0;u<c.length;u++)CF(a,c[u])}(c,_)}catch(h){throw a.firstCreatePass&&(a.incompleteFirstPass=!0,a.firstCreatePass=!1),h}finally{c[Ht]&=-5,Ar()}}let JS=(()=>{var a;class c{constructor(){this.all=new Set,this.queue=new Map}create(h,p,_){const y=typeof Zone>"u"?null:Zone.current,C=function Dh(a,c,u){const h=Object.create(Jm);u&&(h.consumerAllowSignalWrites=!0),h.fn=a,h.schedule=c;const p=y=>{h.cleanupFn=y};return h.ref={notify:()=>v_(h),run:()=>{if(h.dirty=!1,h.hasRun&&!Bs(h))return;h.hasRun=!0;const y=Ta(h);try{h.cleanupFn(),h.cleanupFn=Xm,h.fn(p)}finally{qc(h,y)}},cleanup:()=>h.cleanupFn()},h.ref}(h,L=>{this.all.has(L)&&this.queue.set(L,y)},_);let E;this.all.add(C),C.notify();const P=()=>{C.cleanup(),E?.(),this.all.delete(C),this.queue.delete(C)};return E=p?.onDestroy(P),{destroy:P}}flush(){if(0!==this.queue.size)for(const[h,p]of this.queue)this.queue.delete(h),p?p.run(()=>h.run()):h.run()}get isQueueEmpty(){return 0===this.queue.size}}return(a=c).\u0275prov=Gt({token:a,providedIn:"root",factory:()=>new a}),c})();function Ty(a,c,u){let h=u?a.styles:null,p=u?a.classes:null,_=0;if(null!==c)for(let y=0;y<c.length;y++){const C=c[y];"number"==typeof C?_=C:1==_?p=Fe(p,C):2==_&&(h=Fe(h,C+": "+c[++y]+";"))}u?a.styles=h:a.stylesWithoutHost=h,u?a.classes=p:a.classesWithoutHost=p}function Dg(a,c,u,h,p=!1){for(;null!==u;){const _=c[u.index];null!==_&&h.push(In(_)),Hr(_)&&eA(_,h);const y=u.type;if(8&y)Dg(a,c,u.child,h);else if(32&y){const C=$(u,c);let E;for(;E=C();)h.push(E)}else if(16&y){const C=Sx(c,u);if(Array.isArray(C))h.push(...C);else{const E=be(c[Fi]);Dg(E[nt],E,C,h,!0)}}u=p?u.projectionNext:u.next}return h}function eA(a,c){for(let u=br;u<a.length;u++){const h=a[u],p=h[nt].firstChild;null!==p&&Dg(h[nt],h,p,c)}a[Ur]!==a[Ti]&&c.push(a[Ur])}function Sy(a,c,u,h=!0){const p=c[ec],_=p.rendererFactory,y=p.afterRenderEventManager;_.begin?.(),y?.begin();try{tA(a,c,a.template,u)}catch(E){throw h&&ky(c,E),E}finally{_.end?.(),p.effectManager?.flush(),y?.end()}}function tA(a,c,u,h){const p=c[Ht];if(256!=(256&p)){c[ec].effectManager?.flush(),Bi(c);try{Pb(c),function mf(a){return Vt.lFrame.bindingIndex=a}(a.bindingStartIndex),null!==u&&mF(a,c,u,2,h);const y=3==(3&p);if(y){const P=a.preOrderCheckHooks;null!==P&&ir(c,P,null)}else{const P=a.preOrderHooks;null!==P&&rl(c,P,0,null),Nh(c,0)}if(function Ay(a){for(let c=It(a);null!==c;c=tn(c)){if(!c[ph])continue;const u=c[Jr];for(let h=0;h<u.length;h++){dx(u[h])}}}(c),nA(c,2),null!==a.contentQueries&&QS(a,c),y){const P=a.contentCheckHooks;null!==P&&ir(c,P)}else{const P=a.contentHooks;null!==P&&rl(c,P,1),Nh(c,1)}!function wg(a,c){const u=a.hostBindingOpCodes;if(null===u)return;const h=PS(c,Ia);try{for(let p=0;p<u.length;p++){const _=u[p];if(_<0)ra(~_);else{const y=_,C=u[++p],E=u[++p];Jl(C,y),h.dirty=!1;const P=Ta(h);try{E(2,c[y])}finally{qc(h,P)}}}}finally{null===c[Ia]&&bl(c,Ia),ra(-1)}}(a,c);const C=a.components;null!==C&&bd(c,C,0);const E=a.viewQuery;if(null!==E&&Iy(2,E,h),y){const P=a.viewCheckHooks;null!==P&&ir(c,P)}else{const P=a.viewHooks;null!==P&&rl(c,P,2),Nh(c,2)}!0===a.firstUpdatePass&&(a.firstUpdatePass=!1),c[Ht]&=-73,ux(c)}finally{Ar()}}}function nA(a,c){for(let u=It(a);null!==u;u=tn(u))for(let h=br;h<u.length;h++)bC(u[h],c)}function Yz(a,c,u){bC(is(c,a),u)}function bC(a,c){if(!function sf(a){return 128==(128&a[Ht])}(a))return;const u=a[nt],h=a[Ht];if(80&h&&0===c||1024&h||2===c)tA(u,a,u.template,a[$t]);else if(a[Ea]>0){nA(a,1);const p=u.components;null!==p&&bd(a,p,1)}}function bd(a,c,u){for(let h=0;h<c.length;h++)Yz(a,c[h],u)}class jf{get rootNodes(){const c=this._lView,u=c[nt];return Dg(u,c,u.firstChild,[])}constructor(c,u){this._lView=c,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[$t]}set context(c){this._lView[$t]=c}get destroyed(){return 256==(256&this._lView[Ht])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const c=this._lView[Vn];if(Hr(c)){const u=c[8],h=u?u.indexOf(this):-1;h>-1&&(qb(c,h),B_(u,h))}this._attachedToViewContainer=!1}Dx(this._lView[nt],this._lView)}onDestroy(c){!function Ro(a,c){if(256==(256&a[Ht]))throw new le(911,!1);null===a[tc]&&(a[tc]=[]),a[tc].push(c)}(this._lView,c)}markForCheck(){pd(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ht]&=-129}reattach(){this._lView[Ht]|=128}detectChanges(){Sy(this._lView[nt],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new le(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ud(a,c){sg(a,c,c[jt],2,null,null)}(this._lView[nt],this._lView)}attachToAppRef(c){if(this._attachedToViewContainer)throw new le(902,!1);this._appRef=c}}class My extends jf{constructor(c){super(c),this._view=c}detectChanges(){const c=this._view;Sy(c[nt],c,c[$t],!1)}checkNoChanges(){}get context(){return null}}class IF extends Of{constructor(c){super(),this.ngModule=c}resolveComponentFactory(c){const u=sn(c);return new yd(u,this.ngModule)}}function iA(a){const c=[];for(let u in a)a.hasOwnProperty(u)&&c.push({propName:a[u],templateName:u});return c}class DF{constructor(c,u){this.injector=c,this.parentInjector=u}get(c,u,h){h=Ir(h);const p=this.injector.get(c,py,h);return p!==py||u===py?p:this.parentInjector.get(c,u,h)}}class yd extends Zx{get inputs(){const c=this.componentDef,u=c.inputTransforms,h=iA(c.inputs);if(null!==u)for(const p of h)u.hasOwnProperty(p.propName)&&(p.transform=u[p.propName]);return h}get outputs(){return iA(this.componentDef.outputs)}constructor(c,u){super(),this.componentDef=c,this.ngModule=u,this.componentType=c.type,this.selector=function p_(a){return a.map(Wd).join(",")}(c.selectors),this.ngContentSelectors=c.ngContentSelectors?c.ngContentSelectors:[],this.isBoundToModule=!!u}create(c,u,h,p){let _=(p=p||this.ngModule)instanceof gc?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const y=_?new DF(c,_):c,C=y.get(Qx,null);if(null===C)throw new le(407,!1);const j={rendererFactory:C,sanitizer:y.get(pS,null),effectManager:y.get(JS,null),afterRenderEventManager:y.get(cC,null)},Q=C.createRenderer(null,this.componentDef),ie=this.componentDef.selectors[0][0]||"div",Ie=h?function BS(a,c,u,h){const _=h.get(dC,!1)||u===Os.ShadowDom,y=a.selectRootElement(c,_);return function VS(a){pC(a)}(y),y}(Q,h,this.componentDef.encapsulation,y):gu(Q,ie,function Zz(a){const c=a.toLowerCase();return"svg"===c?Th:"math"===c?"math":null}(ie)),Mt=this.componentDef.signals?4608:this.componentDef.onPush?576:528;let ze=null;null!==Ie&&(ze=hy(Ie,y,!0));const Kt=xy(0,null,null,1,0,null,null,null,null,null,null),ln=bc(null,Kt,null,Mt,null,null,j,Q,y,null,ze);let ci,ma;Bi(ln);try{const Il=this.componentDef;let wp,O1=null;Il.findHostDirectiveDefs?(wp=[],O1=new Map,Il.findHostDirectiveDefs(Il,wp,O1),wp.push(Il)):wp=[Il];const n6=function yC(a,c){const u=a[nt],h=on;return a[h]=c,Va(u,h,2,"#host",null)}(ln,Ie),r6=function Kz(a,c,u,h,p,_,y){const C=p[nt];!function Ry(a,c,u,h){for(const p of a)c.mergedAttrs=Ll(c.mergedAttrs,p.hostAttrs);null!==c.mergedAttrs&&(Ty(c,c.mergedAttrs,!0),null!==u&&og(h,u,c))}(h,a,c,y);let E=null;null!==c&&(E=hy(c,p[bs]));const P=_.rendererFactory.createRenderer(c,u);let L=16;u.signals?L=4096:u.onPush&&(L=64);const j=bc(p,mC(u),null,L,p[a.index],a,_,P,null,null,E);return C.firstCreatePass&&gC(C,a,h.length-1),xg(p,j),p[a.index]=j}(n6,Ie,Il,wp,ln,j,Q);ma=iu(Kt,on),Ie&&function rA(a,c,u,h){if(h)Qa(a,u,["ng-version",Jx.full]);else{const{attrs:p,classes:_}=function Dr(a){const c=[],u=[];let h=1,p=2;for(;h<a.length;){let _=a[h];if("string"==typeof _)2===p?""!==_&&c.push(_,a[++h]):8===p&&u.push(_);else{if(!vn(p))break;p=_}h++}return{attrs:c,classes:u}}(c.selectors[0]);p&&Qa(a,u,p),_&&_.length>0&&bT(a,u,_.join(" "))}}(Q,Il,Ie,h),void 0!==u&&function Qz(a,c,u){const h=a.projection=[];for(let p=0;p<c.length;p++){const _=u[p];h.push(null!=_?Array.from(_):null)}}(ma,this.ngContentSelectors,u),ci=function Ua(a,c,u,h,p,_){const y=ai(),C=p[nt],E=ns(y,p);jS(C,p,y,u,null,h);for(let L=0;L<u.length;L++)as(lc(p,C,y.directiveStart+L,y),p);Ey(C,p,y),E&&as(E,p);const P=lc(p,C,y.directiveStart+y.componentOffset,y);if(a[$t]=p[$t]=P,null!==_)for(const L of _)L(P,c);return wy(C,y,a),P}(r6,Il,wp,O1,ln,[Py]),Ig(Kt,ln,null)}finally{Ar()}return new kF(this.componentType,ci,rm(ma,ln),ln,ma)}}class kF extends cS{constructor(c,u,h,p,_){super(),this.location=h,this._rootLView=p,this._tNode=_,this.previousInputValues=null,this.instance=u,this.hostView=this.changeDetectorRef=new My(p),this.componentType=c}setInput(c,u){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[c])){if(this.previousInputValues??=new Map,this.previousInputValues.has(c)&&Object.is(this.previousInputValues.get(c),u))return;const _=this._rootLView;Eg(_[nt],_,p,c,u),this.previousInputValues.set(c,u),pd(is(this._tNode.index,_))}}get injector(){return new Ii(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(c){this.hostView.onDestroy(c)}}function Py(){const a=ai();rd(Re()[nt],a)}function Oy(a){let c=function wC(a){return Object.getPrototypeOf(a.prototype).constructor}(a.type),u=!0;const h=[a];for(;c;){let p;if(Ls(a))p=c.\u0275cmp||c.\u0275dir;else{if(c.\u0275cmp)throw new le(903,!1);p=c.\u0275dir}if(p){if(u){h.push(p);const y=a;y.inputs=Gf(a.inputs),y.inputTransforms=Gf(a.inputTransforms),y.declaredInputs=Gf(a.declaredInputs),y.outputs=Gf(a.outputs);const C=p.hostBindings;C&&oA(a,C);const E=p.viewQuery,P=p.contentQueries;if(E&&Ny(a,E),P&&sA(a,P),Z(a.inputs,p.inputs),Z(a.declaredInputs,p.declaredInputs),Z(a.outputs,p.outputs),null!==p.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),Z(y.inputTransforms,p.inputTransforms)),Ls(p)&&p.data.animation){const L=a.data;L.animation=(L.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let y=0;y<_.length;y++){const C=_[y];C&&C.ngInherit&&C(a),C===Oy&&(u=!1)}}c=Object.getPrototypeOf(c)}!function Xz(a){let c=0,u=null;for(let h=a.length-1;h>=0;h--){const p=a[h];p.hostVars=c+=p.hostVars,p.hostAttrs=Ll(p.hostAttrs,u=Ll(u,p.hostAttrs))}}(h)}function Gf(a){return a===Do?{}:a===gn?[]:a}function Ny(a,c){const u=a.viewQuery;a.viewQuery=u?(h,p)=>{c(h,p),u(h,p)}:c}function sA(a,c){const u=a.contentQueries;a.contentQueries=u?(h,p,_)=>{c(h,p,_),u(h,p,_)}:c}function oA(a,c){const u=a.hostBindings;a.hostBindings=u?(h,p)=>{c(h,p),u(h,p)}:c}function Ly(a){const c=a.inputConfig,u={};for(const h in c)if(c.hasOwnProperty(h)){const p=c[h];Array.isArray(p)&&p[2]&&(u[h]=p[2])}a.inputTransforms=u}function EC(a){return!!cA(a)&&(Array.isArray(a)||!(a instanceof Map)&&Symbol.iterator in a)}function cA(a){return null!==a&&("function"==typeof a||"object"==typeof a)}function ho(a,c,u){return!Object.is(a[c],u)&&(a[c]=u,!0)}function $f(a,c,u,h){const p=ho(a,c,u);return ho(a,c+1,h)||p}function lA(a,c,u,h){const p=Re();return ho(p,Xl(),c)&&(wn(),yl(ii(),p,a,c,u,h)),lA}function Wf(a,c,u,h){return ho(a,Xl(),u)?c+ue(u)+h:Wt}function Sg(a,c,u,h,p,_){const C=$f(a,function Ma(){return Vt.lFrame.bindingIndex}(),u,p);return ss(2),C?c+ue(u)+h+ue(p)+_:Wt}function MC(a,c,u,h,p,_,y,C){const E=Re(),P=wn(),L=a+on,j=P.firstCreatePass?function uj(a,c,u,h,p,_,y,C,E){const P=c.consts,L=Va(c,a,4,y||null,rc(P,C));_C(c,u,L,rc(P,E)),rd(c,L);const j=L.tView=xy(2,L,h,p,_,c.directiveRegistry,c.pipeRegistry,null,c.schemas,P,null);return null!==c.queries&&(c.queries.template(c,L),j.queries=c.queries.embeddedTView(L)),L}(L,P,E,c,u,h,p,_,y):P.data[L];ys(j,!1);const Q=gA(P,E,j,a);so()&&ig(P,E,Q,j),as(Q,E),xg(E,E[L]=KS(Q,E,Q,j)),Fs(j)&&Hf(P,E,j),null!=y&&yu(E,j,C)}let gA=function Ng(a,c,u,h){return Us(!0),c[jt].createComment("")};function bA(a){return tl(function hf(){return Vt.lFrame.contextLView}(),on+a)}function PC(a,c,u){const h=Re();return ho(h,Xl(),c)&&Lo(wn(),ii(),h,a,c,h[jt],u,!1),PC}function yA(a,c,u,h,p){const y=p?"class":"style";Eg(a,u,c.inputs[y],y,h)}function OC(a,c,u,h){const p=Re(),_=wn(),y=on+a,C=p[jt],E=_.firstCreatePass?function hj(a,c,u,h,p,_){const y=c.consts,E=Va(c,a,2,h,rc(y,p));return _C(c,u,E,rc(y,_)),null!==E.attrs&&Ty(E,E.attrs,!1),null!==E.mergedAttrs&&Ty(E,E.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,E),E}(y,_,p,c,u,h):_.data[y],P=jF(_,p,E,C,c,a);p[y]=P;const L=Fs(E);return ys(E,!0),og(C,P,E),32!=(32&E.flags)&&so()&&ig(_,p,P,E),0===function cf(){return Vt.lFrame.elementDepthCount}()&&as(P,p),function lf(){Vt.lFrame.elementDepthCount++}(),L&&(Hf(_,p,E),wy(_,E,p)),null!==h&&yu(p,E),OC}function NC(){let a=ai();Sr()?Ai():(a=a.parent,ys(a,!1));const c=a;(function Mh(a){return Vt.skipHydrationRootTNode===a})(c)&&function uf(){Vt.skipHydrationRootTNode=null}(),function df(){Vt.lFrame.elementDepthCount--}();const u=wn();return u.firstCreatePass&&(rd(u,a),_h(a)&&u.queries.elementEnd(a)),null!=c.classesWithoutHost&&function oa(a){return 0!=(8&a.flags)}(c)&&yA(u,c,Re(),c.classesWithoutHost,!0),null!=c.stylesWithoutHost&&function rr(a){return 0!=(16&a.flags)}(c)&&yA(u,c,Re(),c.stylesWithoutHost,!1),NC}function wA(a,c,u,h){return OC(a,c,u,h),NC(),wA}let jF=(a,c,u,h,p,_)=>(Us(!0),gu(h,p,function ro(){return Vt.lFrame.currentNamespace}()));function jy(a,c,u){const h=Re(),p=wn(),_=a+on,y=p.firstCreatePass?function WF(a,c,u,h,p){const _=c.consts,y=rc(_,h),C=Va(c,a,8,"ng-container",y);return null!==y&&Ty(C,y,!0),_C(c,u,C,rc(_,p)),null!==c.queries&&c.queries.elementStart(c,C),C}(_,p,h,c,u):p.data[_];ys(y,!0);const C=Fg(p,h,y,a);return h[_]=C,so()&&ig(p,h,C,y),as(C,h),Fs(y)&&(Hf(p,h,y),wy(p,y,h)),null!=u&&yu(h,y),jy}function Gy(){let a=ai();const c=wn();return Sr()?Ai():(a=a.parent,ys(a,!1)),c.firstCreatePass&&(rd(c,a),_h(a)&&c.queries.elementEnd(a)),Gy}function FC(a,c,u){return jy(a,c,u),Gy(),FC}let Fg=(a,c,u,h)=>(Us(!0),fl(c[jt],""));function xA(){return Re()}function Lg(a){return!!a&&"function"==typeof a.then}function CA(a){return!!a&&"function"==typeof a.subscribe}function LC(a,c,u,h){const p=Re(),_=wn(),y=ai();return function IA(a,c,u,h,p,_,y){const C=Fs(h),P=a.firstCreatePass&&Cg(a),L=c[$t],j=Dy(c);let Q=!0;if(3&h.type||y){const Ze=ns(h,c),ct=y?y(Ze):Ze,Mt=j.length,ze=y?ln=>y(In(ln[h.index])):h.index;let Kt=null;if(!y&&C&&(Kt=function ZF(a,c,u,h){const p=a.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const y=p[_];if(y===u&&p[_+1]===h){const C=c[jc],E=p[_+2];return C.length>E?C[E]:null}"string"==typeof y&&(_+=2)}return null}(a,c,p,h.index)),null!==Kt)(Kt.__ngLastListenerFn__||Kt).__ngNextListenerFn__=_,Kt.__ngLastListenerFn__=_,Q=!1;else{_=DA(h,c,L,_,!1);const ln=u.listen(ct,p,_);j.push(_,ln),P&&P.push(p,ze,Mt,Mt+1)}}else _=DA(h,c,L,_,!1);const ie=h.outputs;let Ie;if(Q&&null!==ie&&(Ie=ie[p])){const Ze=Ie.length;if(Ze)for(let ct=0;ct<Ze;ct+=2){const ci=c[Ie[ct]][Ie[ct+1]].subscribe(_),ma=j.length;j.push(_,ci),P&&P.push(p,h.index,ma,-(ma+1))}}}(_,p,p[jt],y,a,c,h),LC}function BC(a,c,u,h){try{return io(6,c,u),!1!==u(h)}catch(p){return ky(a,p),!1}finally{io(7,c,u)}}function DA(a,c,u,h,p){return function _(y){if(y===Function)return h;pd(a.componentOffset>-1?is(a.index,c):c);let E=BC(c,u,h,y),P=_.__ngNextListenerFn__;for(;P;)E=BC(c,u,P,y)&&E,P=P.__ngNextListenerFn__;return p&&!1===E&&y.preventDefault(),E}}function KF(a=1){return function O_(a){return(Vt.lFrame.contextLView=function su(a,c){for(;a>0;)c=c[Vr],a--;return c}(a,Vt.lFrame.contextLView))[$t]}(a)}function QF(a,c){let u=null;const h=function Jo(a){const c=a.attrs;if(null!=c){const u=c.indexOf(5);if(!(1&u))return c[u+1]}return null}(a);for(let p=0;p<c.length;p++){const _=c[p];if("*"!==_){if(null===h?Hc(a,_,!0):Bl(h,_))return p}else u=p}return u}function $y(a){const c=Re()[Fi][vr];if(!c.projection){const h=c.projection=mc(a?a.length:1,null),p=h.slice();let _=c.child;for(;null!==_;){const y=a?QF(_,a):0;null!==y&&(p[y]?p[y].projectionNext=_:h[y]=_,p[y]=_),_=_.next}}}function XF(a,c=0,u){const h=Re(),p=wn(),_=Va(p,on+a,16,null,u||null);null===_.projection&&(_.projection=c),Ai(),(!h[Ao]||Po())&&32!=(32&_.flags)&&function Mx(a,c,u){Rx(c[jt],0,c,u,kf(a,u,c),_T(u.parent||c[vr],u,c))}(p,h,_)}function kA(a,c,u){return TA(a,"",c,"",u),kA}function TA(a,c,u,h,p){const _=Re(),y=Wf(_,c,u,h);return y!==Wt&&Lo(wn(),ii(),_,a,y,_[jt],p,!1),TA}function VC(a,c){return a<<17|c<<2}function am(a){return a>>17&32767}function RA(a){return 2|a}function xd(a){return(131068&a)>>2}function UC(a,c){return-131069&a|c<<2}function HC(a){return 1|a}function zC(a,c,u,h,p){const _=a[u+1],y=null===c;let C=h?am(_):xd(_),E=!1;for(;0!==C&&(!1===E||y);){const L=a[C+1];OA(a[C],c)&&(E=!0,a[C+1]=h?HC(L):RA(L)),C=h?am(L):xd(L)}E&&(a[u+1]=h?RA(_):HC(_))}function OA(a,c){return null===a||null==c||(Array.isArray(a)?a[1]:a)===c||!(!Array.isArray(a)||"string"!=typeof c)&&uu(a,c)>=0}function $C(a,c,u){return xc(a,c,u,!1),$C}function WC(a,c){return xc(a,c,null,!0),WC}function xc(a,c,u,h){const p=Re(),_=wn(),y=ss(2);_.firstUpdatePass&&function VA(a,c,u,h){const p=a.data;if(null===p[u+1]){const _=p[jr()],y=function BA(a,c){return c>=a.expandoStartIndex}(a,u);(function zA(a,c){return 0!=(a.flags&(c?8:16))})(_,h)&&null===c&&!y&&(c=!1),c=function dL(a,c,u,h){const p=function Ph(a){const c=Vt.lFrame.currentDirectiveIndex;return-1===c?null:a[c]}(a);let _=h?c.residualClasses:c.residualStyles;if(null===p)0===(h?c.classBindings:c.styleBindings)&&(u=Vg(u=qC(null,a,c,u,h),c.attrs,h),_=null);else{const y=c.directiveStylingLast;if(-1===y||a[y]!==p)if(u=qC(p,a,c,u,h),null===_){let E=function uL(a,c,u){const h=u?c.classBindings:c.styleBindings;if(0!==xd(h))return a[am(h)]}(a,c,h);void 0!==E&&Array.isArray(E)&&(E=qC(null,a,c,E[1],h),E=Vg(E,c.attrs,h),function hL(a,c,u,h){a[am(u?c.classBindings:c.styleBindings)]=h}(a,c,h,E))}else _=function mL(a,c,u){let h;const p=c.directiveEnd;for(let _=1+c.directiveStylingLast;_<p;_++)h=Vg(h,a[_].hostAttrs,u);return Vg(h,c.attrs,u)}(a,c,h)}return void 0!==_&&(h?c.residualClasses=_:c.residualStyles=_),u}(p,_,c,h),function _j(a,c,u,h,p,_){let y=_?c.classBindings:c.styleBindings,C=am(y),E=xd(y);a[h]=u;let L,P=!1;if(Array.isArray(u)?(L=u[1],(null===L||uu(u,L)>0)&&(P=!0)):L=u,p)if(0!==E){const Q=am(a[C+1]);a[h+1]=VC(Q,C),0!==Q&&(a[Q+1]=UC(a[Q+1],h)),a[C+1]=function fj(a,c){return 131071&a|c<<17}(a[C+1],h)}else a[h+1]=VC(C,0),0!==C&&(a[C+1]=UC(a[C+1],h)),C=h;else a[h+1]=VC(E,0),0===C?C=h:a[E+1]=UC(a[E+1],h),E=h;P&&(a[h+1]=RA(a[h+1])),zC(a,L,h,!0),zC(a,L,h,!1),function tL(a,c,u,h,p){const _=p?a.residualClasses:a.residualStyles;null!=_&&"string"==typeof c&&uu(_,c)>=0&&(u[h+1]=HC(u[h+1]))}(c,L,a,h,_),y=VC(C,E),_?c.classBindings=y:c.styleBindings=y}(p,_,c,u,y,h)}}(_,a,y,h),c!==Wt&&ho(p,y,c)&&function HA(a,c,u,h,p,_,y,C){if(!(3&c.type))return;const E=a.data,P=E[C+1],L=function Bg(a){return 1==(1&a)}(P)?YC(E,c,u,p,xd(P),y):void 0;Yy(L)||(Yy(_)||function mj(a){return 2==(2&a)}(P)&&(_=YC(E,null,u,p,C,y)),function PN(a,c,u,h,p){if(c)p?a.addClass(u,h):a.removeClass(u,h);else{let _=-1===h.indexOf("-")?void 0:qh.DashCase;null==p?a.removeStyle(u,h,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=qh.Important),a.setStyle(u,h,p,_))}}(h,y,el(jr(),u),p,_))}(_,_.data[jr()],p,p[jt],a,p[y+1]=function gL(a,c){return null==a||""===a||("string"==typeof c?a+=c:"object"==typeof a&&(a=oe(_l(a)))),a}(c,u),h,y)}function qC(a,c,u,h,p){let _=null;const y=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<y&&(_=c[C],h=Vg(h,_.hostAttrs,p),_!==a);)C++;return null!==a&&(u.directiveStylingLast=C),h}function Vg(a,c,u){const h=u?1:2;let p=-1;if(null!==c)for(let _=0;_<c.length;_++){const y=c[_];"number"==typeof y?p=y:p===h&&(Array.isArray(a)||(a=void 0===a?[]:["",a]),ao(a,y,!!u||c[++_]))}return void 0===a?null:a}function YC(a,c,u,h,p,_){const y=null===c;let C;for(;p>0;){const E=a[p],P=Array.isArray(E),L=P?E[1]:E,j=null===L;let Q=u[p+1];Q===Wt&&(Q=j?gn:void 0);let ie=j?U_(Q,h):L===h?Q:void 0;if(P&&!Yy(ie)&&(ie=U_(E,h)),Yy(ie)&&(C=ie,y))return C;const Ie=a[p+1];p=y?am(Ie):xd(Ie)}if(null!==c){let E=_?c.residualClasses:c.residualStyles;null!=E&&(C=U_(E,h))}return C}function Yy(a){return void 0!==a}function jA(a,c=""){const u=Re(),h=wn(),p=a+on,_=h.firstCreatePass?Va(h,p,1,c,null):h.data[p],y=GA(h,u,_,c,a);u[p]=y,so()&&ig(h,u,y,_),ys(_,!1)}let GA=(a,c,u,h,p)=>(Us(!0),function Wr(a,c){return a.createText(c)}(c[jt],h));function Ug(a){return ZC("",a,""),Ug}function ZC(a,c,u){const h=Re(),p=Wf(h,a,c,u);return p!==Wt&&gd(h,jr(),p),ZC}function KC(a,c,u,h,p){const _=Re(),y=Sg(_,a,c,u,h,p);return y!==Wt&&gd(_,jr(),y),KC}function Qy(a,c,u){const h=Re();return ho(h,Xl(),c)&&Lo(wn(),ii(),h,a,c,h[jt],u,!0),Qy}const Hi=void 0;var sE=["en",[["a","p"],["AM","PM"],Hi],[["AM","PM"],Hi,Hi],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Hi,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Hi,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Hi,"{1} 'at' {0}",Hi],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function zg(a){const u=Math.floor(Math.abs(a)),h=a.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let mo={};function oE(a){const c=function ML(a){return a.toLowerCase().replace(/_/g,"-")}(a);let u=Cd(c);if(u)return u;const h=c.split("-")[0];if(u=Cd(h),u)return u;if("en"===h)return sE;throw new le(701,!1)}function JA(a){return oE(a)[Ha.PluralCase]}function Cd(a){return a in mo||(mo[a]=On.ng&&On.ng.common&&On.ng.common.locales&&On.ng.common.locales[a]),mo[a]}var Ha=function(a){return a[a.LocaleId=0]="LocaleId",a[a.DayPeriodsFormat=1]="DayPeriodsFormat",a[a.DayPeriodsStandalone=2]="DayPeriodsStandalone",a[a.DaysFormat=3]="DaysFormat",a[a.DaysStandalone=4]="DaysStandalone",a[a.MonthsFormat=5]="MonthsFormat",a[a.MonthsStandalone=6]="MonthsStandalone",a[a.Eras=7]="Eras",a[a.FirstDayOfWeek=8]="FirstDayOfWeek",a[a.WeekendRange=9]="WeekendRange",a[a.DateFormat=10]="DateFormat",a[a.TimeFormat=11]="TimeFormat",a[a.DateTimeFormat=12]="DateTimeFormat",a[a.NumberSymbols=13]="NumberSymbols",a[a.NumberFormats=14]="NumberFormats",a[a.CurrencyCode=15]="CurrencyCode",a[a.CurrencySymbol=16]="CurrencySymbol",a[a.CurrencyName=17]="CurrencyName",a[a.Currencies=18]="Currencies",a[a.Directionality=19]="Directionality",a[a.PluralCase=20]="PluralCase",a[a.ExtraData=21]="ExtraData",a}(Ha||{});const dm="en-US";let eM=dm;function Is(a,c,u,h,p){if(a=Ve(a),Array.isArray(a))for(let _=0;_<a.length;_++)Is(a[_],c,u,h,p);else{const _=wn(),y=Re(),C=ai();let E=Mf(a)?a:Ve(a.provide);const P=jx(a),L=1048575&C.providerIndexes,j=C.directiveStart,Q=C.providerIndexes>>20;if(Mf(a)||!a.multi){const ie=new Gr(P,p,Uf),Ie=Uo(E,c,p?L:L+Q,j);-1===Ie?(cc(si(C,y),_,E),yE(_,a,c.length),c.push(E),C.directiveStart++,C.directiveEnd++,p&&(C.providerIndexes+=1048576),u.push(ie),y.push(ie)):(u[Ie]=ie,y[Ie]=ie)}else{const ie=Uo(E,c,L+Q,j),Ie=Uo(E,c,L,L+Q),ct=Ie>=0&&u[Ie];if(p&&!ct||!p&&!(ie>=0&&u[ie])){cc(si(C,y),_,E);const Mt=function SM(a,c,u,h,p){const _=new Gr(a,u,Uf);return _.multi=[],_.index=c,_.componentProviders=0,s0(_,p,h&&!u),_}(p?YL:qL,u.length,p,h,P);!p&&ct&&(u[Ie].providerFactory=Mt),yE(_,a,c.length,0),c.push(E),C.directiveStart++,C.directiveEnd++,p&&(C.providerIndexes+=1048576),u.push(Mt),y.push(Mt)}else yE(_,a,ie>-1?ie:Ie,s0(u[p?Ie:ie],P,!p&&h));!p&&h&&ct&&u[Ie].componentProviders++}}}function yE(a,c,u,h){const p=Mf(c),_=function ee(a){return!!a.useClass}(c);if(p||_){const E=(_?Ve(c.useClass):c).prototype.ngOnDestroy;if(E){const P=a.destroyHooks||(a.destroyHooks=[]);if(!p&&c.multi){const L=P.indexOf(u);-1===L?P.push(u,[h,E]):P[L+1].push(h,E)}else P.push(u,E)}}}function s0(a,c,u){return u&&a.componentProviders++,a.multi.push(c)-1}function Uo(a,c,u,h){for(let p=u;p<h;p++)if(c[p]===a)return p;return-1}function qL(a,c,u,h){return wE(this.multi,[])}function YL(a,c,u,h){const p=this.multi;let _;if(this.providerFactory){const y=this.providerFactory.componentProviders,C=lc(u,u[nt],this.providerFactory.index,h);_=C.slice(0,y),wE(p,_);for(let E=y;E<C.length;E++)_.push(C[E])}else _=[],wE(p,_);return _}function wE(a,c){for(let u=0;u<a.length;u++)c.push((0,a[u])());return c}function Tu(a,c=[]){return u=>{u.providersResolver=(h,p)=>function bn(a,c,u){const h=wn();if(h.firstCreatePass){const p=Ls(a);Is(u,h.data,h.blueprint,p,!0),Is(c,h.data,h.blueprint,p,!1)}}(h,p?p(a):a,c)}}class Dd{}class tp{}function ZL(a,c){return new xE(a,c??null,[])}class xE extends Dd{constructor(c,u,h){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new IF(this);const p=vs(c);this._bootstrapComponents=zs(p.bootstrap),this._r3Injector=rC(c,u,[{provide:Dd,useValue:this},{provide:Of,useValue:this.componentFactoryResolver},...h],oe(c),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(c)}get injector(){return this._r3Injector}destroy(){const c=this._r3Injector;!c.destroyed&&c.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(c){this.destroyCbs.push(c)}}class CE extends tp{constructor(c){super(),this.moduleType=c}create(c){return new xE(this.moduleType,c,[])}}class EE extends Dd{constructor(c){super(),this.componentFactoryResolver=new IF(this),this.instance=null;const u=new mg([...c.providers,{provide:Dd,useValue:this},{provide:Of,useValue:this.componentFactoryResolver}],c.parent||cs(),c.debugName,new Set(["environment"]));this.injector=u,c.runEnvironmentInitializers&&u.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(c){this.injector.onDestroy(c)}}function Su(a,c,u=null){return new EE({providers:a,parent:c,debugName:u,runEnvironmentInitializers:!0}).injector}let Cn=(()=>{var a;class c{constructor(h){this._injector=h,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(h){if(!h.standalone)return null;if(!this.cachedInjectors.has(h)){const p=HT(0,h.type),_=p.length>0?Su([p],this._injector,`Standalone[${h.type.name}]`):null;this.cachedInjectors.set(h,_)}return this.cachedInjectors.get(h)}ngOnDestroy(){try{for(const h of this.cachedInjectors.values())null!==h&&h.destroy()}finally{this.cachedInjectors.clear()}}}return(a=c).\u0275prov=Gt({token:a,providedIn:"environment",factory:()=>new a(qt(gc))}),c})();function Xg(a){a.getStandaloneInjector=c=>c.get(Cn).getOrCreateStandaloneInjector(a)}function OM(a,c,u,h,p,_,y){const C=c+u;return $f(a,C,p,_)?function wd(a,c,u){return a[c]=u}(a,C+2,y?h.call(y,p,_):h(p,_)):function Td(a,c){const u=a[c];return u===Wt?void 0:u}(a,C+2)}function c0(a,c){const u=wn();let h;const p=a+on;u.firstCreatePass?(h=function o2(a,c){if(c)for(let u=c.length-1;u>=0;u--){const h=c[u];if(a===h.name)return h}}(c,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks??=[]).push(p,h.onDestroy)):h=u.data[p];const _=h.factory||(h.factory=es(h.type)),C=Pn(Uf);try{const E=Kn(!1),P=_();return Kn(E),function RC(a,c,u,h){u>=a.data.length&&(a.data[u]=null,a.blueprint[u]=null),c[u]=h}(u,Re(),p,P),P}finally{Pn(C)}}function op(a,c,u,h){const p=a+on,_=Re(),y=tl(_,p);return function Sd(a,c){return a[nt].data[c].pure}(_,p)?OM(_,function rs(){const a=Vt.lFrame;let c=a.bindingRootIndex;return-1===c&&(c=a.bindingRootIndex=a.tView.bindingStartIndex),c}(),c,y.transform,u,h,y):y.transform(u,h)}function l2(){return this._results[Symbol.iterator]()}class ap{get changes(){return this._changes||(this._changes=new fd)}constructor(c=!1){this._emitDistinctChangesOnly=c,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ap.prototype;u[Symbol.iterator]||(u[Symbol.iterator]=l2)}get(c){return this._results[c]}map(c){return this._results.map(c)}filter(c){return this._results.filter(c)}find(c){return this._results.find(c)}reduce(c,u){return this._results.reduce(c,u)}forEach(c){this._results.forEach(c)}some(c){return this._results.some(c)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(c,u){const h=this;h.dirty=!1;const p=function qi(a){return a.flat(Number.POSITIVE_INFINITY)}(c);(this._changesDetected=!function ws(a,c,u){if(a.length!==c.length)return!1;for(let h=0;h<a.length;h++){let p=a[h],_=c[h];if(u&&(p=u(p),_=u(_)),_!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}function u2(a,c,u,h=!0){const p=c[nt];if(function Ix(a,c,u,h){const p=br+h,_=u.length;h>0&&(u[p-1][Xr]=c),h<_-br?(c[Xr]=u[p],Nb(u,br+h,c)):(u.push(c),c[Xr]=null),c[Vn]=u;const y=c[Hl];null!==y&&u!==y&&function tg(a,c){const u=a[Jr];c[Fi]!==c[Vn][Vn][Fi]&&(a[ph]=!0),null===u?a[Jr]=[c]:u.push(c)}(y,c);const C=c[eo];null!==C&&C.insertView(a),c[Ht]|=128}(p,c,a,u),h){const _=Ax(u,a),y=c[jt],C=Yb(y,a[Ur]);null!==C&&function vu(a,c,u,h,p,_){h[Ti]=p,h[vr]=c,sg(a,h,u,1,p,_)}(p,a[vr],y,c,C,_)}}let nv=(()=>{class c{}return c.__NG_ELEMENT_ID__=l0,c})();const AE=nv,h2=class extends AE{constructor(c,u,h){super(),this._declarationLView=c,this._declarationTContainer=u,this.elementRef=h}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(c,u){return this.createEmbeddedViewImpl(c,u)}createEmbeddedViewImpl(c,u,h){const p=function d2(a,c,u,h){const p=c.tView,C=bc(a,p,u,4096&a[Ht]?4096:16,null,c,null,null,null,h?.injector??null,h?.hydrationInfo??null);C[Hl]=a[c.index];const P=a[eo];return null!==P&&(C[eo]=P.createEmbeddedView(p)),Ig(p,C,u),C}(this._declarationLView,this._declarationTContainer,c,{injector:u,hydrationInfo:h});return new jf(p)}};function l0(){return iv(ai(),Re())}function iv(a,c){return 4&a.type?new h2(c,a,rm(a,c)):null}let h0=(()=>{class c{}return c.__NG_ELEMENT_ID__=p2,c})();function p2(){return f0(ai(),Re())}const _2=h0,Ec=class extends _2{constructor(c,u,h){super(),this._lContainer=c,this._hostTNode=u,this._hostLView=h}get element(){return rm(this._hostTNode,this._hostLView)}get injector(){return new Ii(this._hostTNode,this._hostLView)}get parentInjector(){const c=oo(this._hostTNode,this._hostLView);if(sl(c)){const u=Mn(c,this._hostLView),h=Xe(c);return new Ii(u[nt].data[h+8],u)}return new Ii(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(c){const u=m0(this._lContainer);return null!==u&&u[c]||null}get length(){return this._lContainer.length-br}createEmbeddedView(c,u,h){let p,_;"number"==typeof h?p=h:null!=h&&(p=h.index,_=h.injector);const C=c.createEmbeddedViewImpl(u||{},_,null);return this.insertImpl(C,p,false),C}createComponent(c,u,h,p,_){const y=c&&!function Lt(a){return"function"==typeof a}(c);let C;if(y)C=u;else{const Ze=u||{};C=Ze.index,h=Ze.injector,p=Ze.projectableNodes,_=Ze.environmentInjector||Ze.ngModuleRef}const E=y?c:new yd(sn(c)),P=h||this.parentInjector;if(!_&&null==E.ngModule){const ct=(y?P:this.parentInjector).get(gc,null);ct&&(_=ct)}sn(E.componentType??{});const ie=E.create(P,p,null,_);return this.insertImpl(ie.hostView,C,false),ie}insert(c,u){return this.insertImpl(c,u,!1)}insertImpl(c,u,h){const p=c._lView;if(function af(a){return Hr(a[Vn])}(p)){const E=this.indexOf(c);if(-1!==E)this.detach(E);else{const P=p[Vn],L=new Ec(P,P[vr],P[Vn]);L.detach(L.indexOf(c))}}const y=this._adjustIndex(u),C=this._lContainer;return u2(C,p,y,!h),c.attachToViewContainerRef(),Nb(rv(C),y,c),c}move(c,u){return this.insert(c,u)}indexOf(c){const u=m0(this._lContainer);return null!==u?u.indexOf(c):-1}remove(c){const u=this._adjustIndex(c,-1),h=qb(this._lContainer,u);h&&(B_(rv(this._lContainer),u),Dx(h[nt],h))}detach(c){const u=this._adjustIndex(c,-1),h=qb(this._lContainer,u);return h&&null!=B_(rv(this._lContainer),u)?new jf(h):null}_adjustIndex(c,u=0){return c??this.length+u}};function m0(a){return a[8]}function rv(a){return a[8]||(a[8]=[])}function f0(a,c){let u;const h=c[a.index];return Hr(h)?u=h:(u=KS(h,c,null,a),c[a.index]=u,xg(c,u)),lp(u,c,a,h),new Ec(u,a,c)}let lp=function Au(a,c,u,h){if(a[Ur])return;let p;p=8&u.type?In(h):function p0(a,c){const u=a[jt],h=u.createComment(""),p=ns(c,a);return Xh(u,Yb(u,p),h,function MN(a,c){return a.nextSibling(c)}(u,p),!1),h}(c,u),a[Ur]=p};class OE{constructor(c){this.queryList=c,this.matches=null}clone(){return new OE(this.queryList)}setDirty(){this.queryList.setDirty()}}class NE{constructor(c=[]){this.queries=c}createEmbeddedView(c){const u=c.queries;if(null!==u){const h=null!==c.contentQueries?c.contentQueries[0]:u.length,p=[];for(let _=0;_<h;_++){const y=u.getByIndex(_);p.push(this.queries[y.indexInDeclarationView].clone())}return new NE(p)}return null}insertView(c){this.dirtyQueriesWithMatches(c)}detachView(c){this.dirtyQueriesWithMatches(c)}dirtyQueriesWithMatches(c){for(let u=0;u<this.queries.length;u++)null!==UE(c,u).matches&&this.queries[u].setDirty()}}class up{constructor(c,u,h=null){this.predicate=c,this.flags=u,this.read=h}}class FE{constructor(c=[]){this.queries=c}elementStart(c,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(c,u)}elementEnd(c){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(c)}embeddedTView(c){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(c,p);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new FE(u):null}template(c,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(c,u)}getByIndex(c){return this.queries[c]}get length(){return this.queries.length}track(c){this.queries.push(c)}}class LE{constructor(c,u=-1){this.metadata=c,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(c,u){this.isApplyingToNode(u)&&this.matchTNode(c,u)}elementEnd(c){this._declarationNodeIndex===c.index&&(this._appliesToNextNode=!1)}template(c,u){this.elementStart(c,u)}embeddedTView(c,u){return this.isApplyingToNode(c)?(this.crossesNgTemplate=!0,this.addMatch(-c.index,u),new LE(this.metadata)):null}isApplyingToNode(c){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=c.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(c,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const _=h[p];this.matchTNodeWithReadOption(c,u,_0(u,_)),this.matchTNodeWithReadOption(c,u,Na(u,c,_,!1,!1))}else h===nv?4&u.type&&this.matchTNodeWithReadOption(c,u,-1):this.matchTNodeWithReadOption(c,u,Na(u,c,h,!1,!1))}matchTNodeWithReadOption(c,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Nf||p===h0||p===nv&&4&u.type)this.addMatch(u.index,-2);else{const _=Na(u,c,p,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(c,u){null===this.matches?this.matches=[c,u]:this.matches.push(c,u)}}function _0(a,c){const u=a.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===c)return u[h+1];return null}function VM(a,c,u,h){return-1===u?function sv(a,c){return 11&a.type?rm(a,c):4&a.type?iv(a,c):null}(c,a):-2===u?function g0(a,c,u){return u===Nf?rm(c,a):u===nv?iv(c,a):u===h0?f0(c,a):void 0}(a,c,h):lc(a,a[nt],u,c)}function Ru(a,c,u,h){const p=c[eo].queries[h];if(null===p.matches){const _=a.data,y=u.matches,C=[];for(let E=0;E<y.length;E+=2){const P=y[E];C.push(P<0?null:VM(c,_[P],y[E+1],u.metadata.read))}p.matches=C}return p.matches}function ov(a,c,u,h){const p=a.queries.getByIndex(u),_=p.matches;if(null!==_){const y=Ru(a,c,p,u);for(let C=0;C<_.length;C+=2){const E=_[C];if(E>0)h.push(y[C/2]);else{const P=_[C+1],L=c[-E];for(let j=br;j<L.length;j++){const Q=L[j];Q[Hl]===Q[Vn]&&ov(Q[nt],Q,P,h)}if(null!==L[Jr]){const j=L[Jr];for(let Q=0;Q<j.length;Q++){const ie=j[Q];ov(ie[nt],ie,P,h)}}}}}return h}function UM(a){const c=Re(),u=wn(),h=M_();Oh(h+1);const p=UE(u,h);if(a.dirty&&function I_(a){return 4==(4&a[Ht])}(c)===(2==(2&p.metadata.flags))){if(null===p.matches)a.reset([]);else{const _=p.crossesNgTemplate?ov(u,c,h,[]):Ru(u,c,p,h);a.reset(_,hS),a.notifyOnChanges()}return!0}return!1}function vi(a,c,u){const h=wn();h.firstCreatePass&&(v0(h,new up(a,c,u),-1),2==(2&c)&&(h.staticViewQueries=!0)),VE(h,Re(),c)}function ja(a,c,u,h){const p=wn();if(p.firstCreatePass){const _=ai();v0(p,new up(c,u,h),_.index),function fm(a,c){const u=a.contentQueries||(a.contentQueries=[]);c!==(u.length?u[u.length-1]:-1)&&u.push(a.queries.length-1,c)}(p,a),2==(2&u)&&(p.staticContentQueries=!0)}VE(p,Re(),u)}function hp(){return function BE(a,c){return a[eo].queries[c].queryList}(Re(),M_())}function VE(a,c,u){const h=new ap(4==(4&u));(function Cy(a,c,u,h){const p=Dy(c);p.push(u),a.firstCreatePass&&Cg(a).push(h,p.length-1)})(a,c,h,h.destroy),null===c[eo]&&(c[eo]=new NE),c[eo].queries.push(new OE(h))}function v0(a,c,u){null===a.queries&&(a.queries=new FE),a.queries.track(new LE(c,u))}function UE(a,c){return a.queries.getByIndex(c)}function Ad(a,c){return iv(a,c)}function HE(a){return!!vs(a)}const QE=new Gn("Application Initializer");let xl=(()=>{var a;class c{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p}),this.appInits=Yt(QE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const h=[];for(const _ of this.appInits){const y=_();if(Lg(y))h.push(y);else if(CA(y)){const C=new Promise((E,P)=>{y.subscribe({complete:E,error:P})});h.push(C)}}const p=()=>{this.done=!0,this.resolve()};Promise.all(h).then(()=>{p()}).catch(_=>{this.reject(_)}),0===h.length&&p(),this.initialized=!0}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"root"}),c})(),XE=(()=>{var a;class c{log(h){console.log(h)}warn(h){console.warn(h)}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"platform"}),c})();const Dc=new Gn("LocaleId",{providedIn:"root",factory:()=>Yt(Dc,Ft.Optional|Ft.SkipSelf)||function c1(){return typeof $localize<"u"&&$localize.locale||dm}()}),E0=new Gn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let l1=(()=>{var a;class c{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ce.X(!1)}add(){this.hasPendingTasks.next(!0);const h=this.taskId++;return this.pendingTasks.add(h),h}remove(h){this.pendingTasks.delete(h),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"root"}),c})();class d1{constructor(c,u){this.ngModuleFactory=c,this.componentFactories=u}}let eI=(()=>{var a;class c{compileModuleSync(h){return new CE(h)}compileModuleAsync(h){return Promise.resolve(this.compileModuleSync(h))}compileModuleAndAllComponentsSync(h){const p=this.compileModuleSync(h),y=zs(vs(h).declarations).reduce((C,E)=>{const P=sn(E);return P&&C.push(new yd(P)),C},[]);return new d1(p,y)}compileModuleAndAllComponentsAsync(h){return Promise.resolve(this.compileModuleAndAllComponentsSync(h))}clearCache(){}clearCacheFor(h){}getModuleId(h){}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"root"}),c})();const oI=new Gn(""),v1=new Gn("");let dv,P2=(()=>{var a;class c{constructor(h,p,_){this._ngZone=h,this.registry=p,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,dv||(function cI(a){dv=a}(_),_.addToWindow(p)),this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Es.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(p=>!p.updateCb||!p.updateCb(h)||(clearTimeout(p.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,p,_){let y=-1;p&&p>0&&(y=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==y),h(this._didWork,this.getPendingTasks())},p)),this._callbacks.push({doneCb:h,timeoutId:y,updateCb:_})}whenStable(h,p,_){if(_&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,p,_),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(h){this.registry.registerApplication(h,this)}unregisterApplication(h){this.registry.unregisterApplication(h)}findProviders(h,p,_){return[]}}return(a=c).\u0275fac=function(h){return new(h||a)(qt(Es),qt(aI),qt(v1))},a.\u0275prov=Gt({token:a,factory:a.\u0275fac}),c})(),aI=(()=>{var a;class c{constructor(){this._applications=new Map}registerApplication(h,p){this._applications.set(h,p)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,p=!0){return dv?.findTestabilityInTree(this,h,p)??null}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"platform"}),c})(),Cl=null;const uv=new Gn("AllowMultipleToken"),Md=new Gn("PlatformDestroyListeners"),hv=new Gn("appBootstrapListener");class O2{constructor(c,u){this.name=c,this.token=u}}function x1(a,c,u=[]){const h=`Platform: ${c}`,p=new Gn(h);return(_=[])=>{let y=uI();if(!y||y.injector.get(uv,!1)){const C=[...u,..._,{provide:p,useValue:!0}];a?a(C):function fv(a){if(Cl&&!Cl.get(uv,!1))throw new le(400,!1);(function mv(){!function Eh(a){Qd=a}(()=>{throw new le(600,!1)})})(),Cl=a;const c=a.get(gp);(function w1(a){a.get($x,null)?.forEach(u=>u())})(a)}(function pv(a=[],c){return Ba.create({name:c,providers:[{provide:R,useValue:"platform"},{provide:Md,useValue:new Set([()=>Cl=null])},...a]})}(C,h))}return function dI(a){const c=uI();if(!c)throw new le(401,!1);return c}()}}function uI(){return Cl?.get(gp)??null}let gp=(()=>{var a;class c{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,p){const _=function _v(a="zone.js",c){return"noop"===a?new vy:"zone.js"===a?new Es(c):a}(p?.ngZone,function kc(a){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:a?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:a?.runCoalescing??!1}}({eventCoalescing:p?.ngZoneEventCoalescing,runCoalescing:p?.ngZoneRunCoalescing}));return _.run(()=>{const y=function QL(a,c,u){return new xE(a,c,u)}(h.moduleType,this.injector,function gv(a){return[{provide:Es,useFactory:a},{provide:dg,multi:!0,useFactory:()=>{const c=Yt(I1,{optional:!0});return()=>c.initialize()}},{provide:E1,useFactory:El},{provide:lo,useFactory:vc}]}(()=>_)),C=y.injector.get(Lf,null);return _.runOutsideAngular(()=>{const E=_.onError.subscribe({next:P=>{C.handleError(P)}});y.onDestroy(()=>{Ou(this._modules,y),E.unsubscribe()})}),function C1(a,c,u){try{const h=u();return Lg(h)?h.catch(p=>{throw c.runOutsideAngular(()=>a.handleError(p)),p}):h}catch(h){throw c.runOutsideAngular(()=>a.handleError(h)),h}}(C,_,()=>{const E=y.injector.get(xl);return E.runInitializers(),E.donePromise.then(()=>(function tM(a){dt(a,"Expected localeId to be defined"),"string"==typeof a&&(eM=a.toLowerCase().replace(/_/g,"-"))}(y.injector.get(Dc,dm)||dm),this._moduleDoBootstrap(y),y))})})}bootstrapModule(h,p=[]){const _=hI({},p);return function b1(a,c,u){const h=new CE(u);return Promise.resolve(h)}(0,0,h).then(y=>this.bootstrapModuleFactory(y,_))}_moduleDoBootstrap(h){const p=h.injector.get(Pu);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(_=>p.bootstrap(_));else{if(!h.instance.ngDoBootstrap)throw new le(-403,!1);h.instance.ngDoBootstrap(p)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new le(404,!1);this._modules.slice().forEach(p=>p.destroy()),this._destroyListeners.forEach(p=>p());const h=this._injector.get(Md,null);h&&(h.forEach(p=>p()),h.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(a=c).\u0275fac=function(h){return new(h||a)(qt(Ba))},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"platform"}),c})();function hI(a,c){return Array.isArray(c)?c.reduce(hI,a):{...a,...c}}let Pu=(()=>{var a;class c{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Yt(E1),this.zoneIsStable=Yt(lo),this.componentTypes=[],this.components=[],this.isStable=Yt(l1).hasPendingTasks.pipe((0,Oe.w)(h=>h?(0,re.of)(!1):this.zoneIsStable),(0,ve.x)(),(0,xe.B)()),this._injector=Yt(gc)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(h,p){const _=h instanceof Zx;if(!this._injector.get(xl).done)throw!_&&Ja(h),new le(405,!1);let C;C=_?h:this._injector.get(Of).resolveComponentFactory(h),this.componentTypes.push(C.componentType);const E=function y1(a){return a.isBoundToModule}(C)?void 0:this._injector.get(Dd),L=C.create(Ba.NULL,[],p||C.selector,E),j=L.location.nativeElement,Q=L.injector.get(oI,null);return Q?.registerApplication(j),L.onDestroy(()=>{this.detachView(L.hostView),Ou(this.components,L),Q?.unregisterApplication(j)}),this._loadComponent(L),L}tick(){if(this._runningTick)throw new le(101,!1);try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this.internalErrorHandler(h)}finally{this._runningTick=!1}}attachView(h){const p=h;this._views.push(p),p.attachToAppRef(this)}detachView(h){const p=h;Ou(this._views,p),p.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h);const p=this._injector.get(hv,[]);p.push(...this._bootstrapListeners),p.forEach(_=>_(h))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(h=>h()),this._views.slice().forEach(h=>h.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(h){return this._destroyListeners.push(h),()=>Ou(this._destroyListeners,h)}destroy(){if(this._destroyed)throw new le(406,!1);const h=this._injector;h.destroy&&!h.destroyed&&h.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"root"}),c})();function Ou(a,c){const u=a.indexOf(c);u>-1&&a.splice(u,1)}const E1=new Gn("",{providedIn:"root",factory:()=>Yt(Lf).handleError.bind(void 0)});function El(){const a=Yt(Es),c=Yt(Lf);return u=>a.runOutsideAngular(()=>c.handleError(u))}let I1=(()=>{var a;class c{constructor(){this.zone=Yt(Es),this.applicationRef=Yt(Pu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return(a=c).\u0275fac=function(h){return new(h||a)},a.\u0275prov=Gt({token:a,factory:a.\u0275fac,providedIn:"root"}),c})();function ua(){return!1}let B2=(()=>{class c{}return c.__NG_ELEMENT_ID__=V2,c})();function V2(a){return function T1(a,c,u){if(Da(a)&&!u){const h=is(a.index,c);return new jf(h,h)}return 47&a.type?new jf(c[Fi],c):null}(ai(),Re(),16==(16&a))}class F0{constructor(){}supports(c){return EC(c)}create(c){return new G2(c)}}const L0=(a,c)=>c;class G2{constructor(c){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=c||L0}forEachItem(c){let u;for(u=this._itHead;null!==u;u=u._next)c(u)}forEachOperation(c){let u=this._itHead,h=this._removalsHead,p=0,_=null;for(;u||h;){const y=!h||u&&u.currentIndex<vI(h,p,_)?u:h,C=vI(y,p,_),E=y.currentIndex;if(y===h)p--,h=h._nextRemoved;else if(u=u._next,null==y.previousIndex)p++;else{_||(_=[]);const P=C-p,L=E-p;if(P!=L){for(let Q=0;Q<P;Q++){const ie=Q<_.length?_[Q]:_[Q]=0,Ie=ie+Q;L<=Ie&&Ie<P&&(_[Q]=ie+1)}_[y.previousIndex]=L-P}}C!==E&&c(y,C,E)}}forEachPreviousItem(c){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachMovedItem(c){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}forEachIdentityChange(c){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)c(u)}diff(c){if(null==c&&(c=[]),!EC(c))throw new le(900,!1);return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let p,_,y,u=this._itHead,h=!1;if(Array.isArray(c)){this.length=c.length;for(let C=0;C<this.length;C++)_=c[C],y=this._trackByFn(C,_),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,_,y,C)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,y,C),h=!0),u=u._next}else p=0,function RF(a,c){if(Array.isArray(a))for(let u=0;u<a.length;u++)c(a[u]);else{const u=a[Symbol.iterator]();let h;for(;!(h=u.next()).done;)c(h.value)}}(c,C=>{y=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,y)?(h&&(u=this._verifyReinsertion(u,C,y,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,y,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=c,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let c;for(c=this._previousItHead=this._itHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._additionsHead;null!==c;c=c._nextAdded)c.previousIndex=c.currentIndex;for(this._additionsHead=this._additionsTail=null,c=this._movesHead;null!==c;c=c._nextMoved)c.previousIndex=c.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(c,u,h,p){let _;return null===c?_=this._itTail:(_=c._prev,this._remove(c)),null!==(c=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._reinsertAfter(c,_,p)):null!==(c=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(c.item,u)||this._addIdentityChange(c,u),this._moveAfter(c,_,p)):c=this._addAfter(new vp(u,h),_,p),c}_verifyReinsertion(c,u,h,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?c=this._reinsertAfter(_,c._prev,p):c.currentIndex!=p&&(c.currentIndex=p,this._addToMoves(c,p)),c}_truncate(c){for(;null!==c;){const u=c._next;this._addToRemovals(this._unlink(c)),c=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(c,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(c);const p=c._prevRemoved,_=c._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(c,u,h),this._addToMoves(c,h),c}_moveAfter(c,u,h){return this._unlink(c),this._insertAfter(c,u,h),this._addToMoves(c,h),c}_addAfter(c,u,h){return this._insertAfter(c,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=c:this._additionsTail._nextAdded=c,c}_insertAfter(c,u,h){const p=null===u?this._itHead:u._next;return c._next=p,c._prev=u,null===p?this._itTail=c:p._prev=c,null===u?this._itHead=c:u._next=c,null===this._linkedRecords&&(this._linkedRecords=new gI),this._linkedRecords.put(c),c.currentIndex=h,c}_remove(c){return this._addToRemovals(this._unlink(c))}_unlink(c){null!==this._linkedRecords&&this._linkedRecords.remove(c);const u=c._prev,h=c._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,c}_addToMoves(c,u){return c.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=c:this._movesTail._nextMoved=c),c}_addToRemovals(c){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gI),this._unlinkedRecords.put(c),c.currentIndex=null,c._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=c,c._prevRemoved=null):(c._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=c),c}_addIdentityChange(c,u){return c.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=c:this._identityChangesTail._nextIdentityChange=c,c}}class vp{constructor(c,u){this.item=c,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $2{constructor(){this._head=null,this._tail=null}add(c){null===this._head?(this._head=this._tail=c,c._nextDup=null,c._prevDup=null):(this._tail._nextDup=c,c._prevDup=this._tail,c._nextDup=null,this._tail=c)}get(c,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,c))return h;return null}remove(c){const u=c._prevDup,h=c._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class gI{constructor(){this.map=new Map}put(c){const u=c.trackById;let h=this.map.get(u);h||(h=new $2,this.map.set(u,h)),h.add(c)}get(c,u){const p=this.map.get(c);return p?p.get(c,u):null}remove(c){const u=c.trackById;return this.map.get(u).remove(c)&&this.map.delete(u),c}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function vI(a,c,u){const h=a.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+c+p}class bI{constructor(){}supports(c){return c instanceof Map||cA(c)}create(){return new B0}}class B0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(c){let u;for(u=this._mapHead;null!==u;u=u._next)c(u)}forEachPreviousItem(c){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)c(u)}forEachChangedItem(c){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)c(u)}forEachAddedItem(c){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)c(u)}forEachRemovedItem(c){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)c(u)}diff(c){if(c){if(!(c instanceof Map||cA(c)))throw new le(900,!1)}else c=new Map;return this.check(c)?this:null}onDestroy(){}check(c){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(c,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(c,u){if(c){const h=c._prev;return u._next=c,u._prev=h,c._prev=u,h&&(h._next=u),c===this._mapHead&&(this._mapHead=u),this._appendAfter=c,c}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(c,u){if(this._records.has(c)){const p=this._records.get(c);this._maybeAddToChanges(p,u);const _=p._prev,y=p._next;return _&&(_._next=y),y&&(y._prev=_),p._next=null,p._prev=null,p}const h=new yI(c);return this._records.set(c,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let c;for(this._previousMapHead=this._mapHead,c=this._previousMapHead;null!==c;c=c._next)c._nextPrevious=c._next;for(c=this._changesHead;null!==c;c=c._nextChanged)c.previousValue=c.currentValue;for(c=this._additionsHead;null!=c;c=c._nextAdded)c.previousValue=c.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(c,u){Object.is(u,c.currentValue)||(c.previousValue=c.currentValue,c.currentValue=u,this._addToChanges(c))}_addToAdditions(c){null===this._additionsHead?this._additionsHead=this._additionsTail=c:(this._additionsTail._nextAdded=c,this._additionsTail=c)}_addToChanges(c){null===this._changesHead?this._changesHead=this._changesTail=c:(this._changesTail._nextChanged=c,this._changesTail=c)}_forEach(c,u){c instanceof Map?c.forEach(u):Object.keys(c).forEach(h=>u(c[h],h))}}class yI{constructor(c){this.key=c,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function V0(){return new wI([new F0])}let wI=(()=>{var a;class c{constructor(h){this.factories=h}static create(h,p){if(null!=p){const _=p.factories.slice();h=h.concat(_)}return new c(h)}static extend(h){return{provide:c,useFactory:p=>c.create(h,p||V0()),deps:[[c,new cd,new Hh]]}}find(h){const p=this.factories.find(_=>_.supports(h));if(null!=p)return p;throw new le(901,!1)}}return(a=c).\u0275prov=Gt({token:a,providedIn:"root",factory:V0}),c})();function U0(){return new xI([new bI])}let xI=(()=>{var a;class c{constructor(h){this.factories=h}static create(h,p){if(p){const _=p.factories.slice();h=h.concat(_)}return new c(h)}static extend(h){return{provide:c,useFactory:p=>c.create(h,p||U0()),deps:[[c,new cd,new Hh]]}}find(h){const p=this.factories.find(_=>_.supports(h));if(p)return p;throw new le(901,!1)}}return(a=c).\u0275prov=Gt({token:a,providedIn:"root",factory:U0}),c})();const CI=x1(null,"core",[]);let Z2=(()=>{var a;class c{constructor(h){}}return(a=c).\u0275fac=function(h){return new(h||a)(qt(Pu))},a.\u0275mod=uh({type:a}),a.\u0275inj=ui({}),c})();function Xj(a){return"boolean"==typeof a?a:null!=a&&"false"!==a}function tB(a){const c=sn(a);if(!c)return null;const u=new yd(c);return{get selector(){return u.selector},get type(){return u.componentType},get inputs(){return u.inputs},get outputs(){return u.outputs},get ngContentSelectors(){return u.ngContentSelectors},get isStandalone(){return c.standalone},get isSignal(){return c.signals}}}},3399:(yt,ke,V)=>{V.d(ke,{Z:()=>tt});var l=V(9058),ne=V(4537),U=V(7592),te=V(7879);class ce{constructor(et,Le){this._delegate=et,this.firebase=Le,(0,U._addComponent)(et,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=et.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(et){this._delegate.automaticDataCollectionEnabled=et}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(et=>{this._delegate.checkDestroyed(),et()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(et,Le=U._DEFAULT_ENTRY_NAME){var Dt;this._delegate.checkDestroyed();const bt=this._delegate.container.getProvider(et);return!bt.isInitialized()&&"EXPLICIT"===(null===(Dt=bt.getComponent())||void 0===Dt?void 0:Dt.instantiationMode)&&bt.initialize(),bt.getImmediate({identifier:Le})}_removeServiceInstance(et,Le=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(et).clearInstance(Le)}_addComponent(et){(0,U._addComponent)(this._delegate,et)}_addOrOverwriteComponent(et){(0,U._addOrOverwriteComponent)(this._delegate,et)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const xe=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function ve(){const Ve=function Oe(Ve){const et={},Le={__esModule:!0,initializeApp:function le($e,he={}){const je=U.initializeApp($e,he);if((0,l.r3)(et,je.name))return et[je.name];const it=new Ve(je,Le);return et[je.name]=it,it},app:bt,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function ue($e){const he=$e.name,je=he.replace("-compat","");if(U._registerComponent($e)&&"PUBLIC"===$e.type){const it=(Pt=bt())=>{if("function"!=typeof Pt[je])throw xe.create("invalid-app-argument",{appName:he});return Pt[je]()};void 0!==$e.serviceProps&&(0,l.ZB)(it,$e.serviceProps),Le[je]=it,Ve.prototype[je]=function(...Pt){return this._getService.bind(this,he).apply(this,$e.multipleInstances?Pt:[])}}return"PUBLIC"===$e.type?Le[je]:null},removeApp:function Dt($e){delete et[$e]},useAsService:function Te($e,he){return"serverAuth"===he?null:he},modularAPIs:U}};function bt($e){if(!(0,l.r3)(et,$e=$e||U._DEFAULT_ENTRY_NAME))throw xe.create("no-app",{appName:$e});return et[$e]}return Le.default=Le,Object.defineProperty(Le,"apps",{get:function Ue(){return Object.keys(et).map($e=>et[$e])}}),bt.App=Ve,Le}(ce);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function et(Le){(0,l.ZB)(Ve,Le)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),Ve}(),Z=new te.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){Z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&Z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const tt=G;!function Me(Ve){(0,U.registerVersion)("@firebase/app-compat","0.2.13",Ve)}()},7592:(yt,ke,V)=>{V.r(ke),V.d(ke,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>ye,_addComponent:()=>Je,_addOrOverwriteComponent:()=>xi,_apps:()=>He,_clearComponents:()=>Zn,_components:()=>dt,_getProvider:()=>_n,_registerComponent:()=>St,_removeServiceInstance:()=>Gt,deleteApp:()=>Qs,getApp:()=>Rs,getApps:()=>Ps,initializeApp:()=>mr,onLog:()=>xa,registerVersion:()=>er,setLogLevel:()=>Ft});var re,xe,Oe,l=V(5861),ne=V(4537),U=V(7879),te=V(9058),ce=V(1878);class ve{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function G(Be){const X=Be.getComponent();return"VERSION"===X?.type}(Ce)){const Qe=Ce.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Ce=>Ce).join(" ")}}const Z="@firebase/app",Fe=new U.Yd("@firebase/app"),ye="[DEFAULT]",We={[Z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},He=new Map,dt=new Map;function Je(Be,X){try{Be.container.addComponent(X)}catch(Ce){Fe.debug(`Component ${X.name} failed to register with FirebaseApp ${Be.name}`,Ce)}}function xi(Be,X){Be.container.addOrOverwriteComponent(X)}function St(Be){const X=Be.name;if(dt.has(X))return Fe.debug(`There were multiple attempts to register component ${X}.`),!1;dt.set(X,Be);for(const Ce of He.values())Je(Ce,Be);return!0}function _n(Be,X){const Ce=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),Be.container.getProvider(X)}function Gt(Be,X,Ce=ye){_n(Be,X).clearInstance(Ce)}function Zn(){dt.clear()}const hn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nn{constructor(X,Ce,Qe){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const Oi="9.23.0";function mr(Be,X={}){let Ce=Be;"object"!=typeof X&&(X={name:X});const Qe=Object.assign({name:ye,automaticDataCollectionEnabled:!1},X),st=Qe.name;if("string"!=typeof st||!st)throw hn.create("bad-app-name",{appName:String(st)});if(Ce||(Ce=(0,te.aH)()),!Ce)throw hn.create("no-options");const _t=He.get(st);if(_t){if((0,te.vZ)(Ce,_t.options)&&(0,te.vZ)(Qe,_t.config))return _t;throw hn.create("duplicate-app",{appName:st})}const Bn=new ne.H0(st);for(const Y of dt.values())Bn.addComponent(Y);const K=new Nn(Ce,Qe,Bn);return He.set(st,K),K}function Rs(Be=ye){const X=He.get(Be);if(!X&&Be===ye&&(0,te.aH)())return mr();if(!X)throw hn.create("no-app",{appName:Be});return X}function Ps(){return Array.from(He.values())}function Qs(Be){return(re=re||(0,l.Z)(function*(X){const Ce=X.name;He.has(Ce)&&(He.delete(Ce),yield Promise.all(X.container.getProviders().map(Qe=>Qe.delete())),X.isDeleted=!0)})).apply(this,arguments)}function er(Be,X,Ce){var Qe;let st=null!==(Qe=We[Be])&&void 0!==Qe?Qe:Be;Ce&&(st+=`-${Ce}`);const _t=st.match(/\s|\//),Bn=X.match(/\s|\//);if(_t||Bn){const K=[`Unable to register library "${st}" with version "${X}":`];return _t&&K.push(`library name "${st}" contains illegal characters (whitespace or "/")`),_t&&Bn&&K.push("and"),Bn&&K.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void Fe.warn(K.join(" "))}St(new ne.wA(`${st}-version`,()=>({library:st,version:X}),"VERSION"))}function xa(Be,X){if(null!==Be&&"function"!=typeof Be)throw hn.create("invalid-log-argument");(0,U.Am)(Be,X)}function Ft(Be){(0,U.Ub)(Be)}const Ut="firebase-heartbeat-database",en=1,Pn="firebase-heartbeat-store";let fr=null;function tr(){return fr||(fr=(0,ce.X3)(Ut,en,{upgrade:(Be,X)=>{0===X&&Be.createObjectStore(Pn)}}).catch(Be=>{throw hn.create("idb-open",{originalErrorMessage:Be.message})})),fr}function Ci(Be,X){return(Oe=Oe||(0,l.Z)(function*(Ce,Qe){try{const _t=(yield tr()).transaction(Pn,"readwrite");yield _t.objectStore(Pn).put(Qe,Xs(Ce)),yield _t.done}catch(st){if(st instanceof te.ZR)Fe.warn(st.message);else{const _t=hn.create("idb-set",{originalErrorMessage:st?.message});Fe.warn(_t.message)}}})).apply(this,arguments)}function Xs(Be){return`${Be.name}!${Be.options.appId}`}class yn{constructor(X){this.container=X,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new Eo(Ce),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var X=this;return(0,l.Z)(function*(){const Qe=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),st=fs();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==st&&!X._heartbeatsCache.heartbeats.some(_t=>_t.date===st))return X._heartbeatsCache.heartbeats.push({date:st,agent:Qe}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(_t=>{const Bn=new Date(_t.date).valueOf();return Date.now()-Bn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,l.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ce=fs(),{heartbeatsToSend:Qe,unsentEntries:st}=function Js(Be,X=1024){const Ce=[];let Qe=Be.slice();for(const st of Be){const _t=Ce.find(Bn=>Bn.agent===st.agent);if(_t){if(_t.dates.push(st.date),ps(Ce)>X){_t.dates.pop();break}}else if(Ce.push({agent:st.agent,dates:[st.date]}),ps(Ce)>X){Ce.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:Qe}}(X._heartbeatsCache.heartbeats),_t=(0,te.L)(JSON.stringify({version:2,heartbeats:Qe}));return X._heartbeatsCache.lastSentHeartbeatDate=Ce,st.length>0?(X._heartbeatsCache.heartbeats=st,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),_t})()}}function fs(){return(new Date).toISOString().substring(0,10)}class Eo{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,l.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function On(Be){return(xe=xe||(0,l.Z)(function*(X){try{return yield(yield tr()).transaction(Pn).objectStore(Pn).get(Xs(X))}catch(Ce){if(Ce instanceof te.ZR)Fe.warn(Ce.message);else{const Qe=hn.create("idb-get",{originalErrorMessage:Ce?.message});Fe.warn(Qe.message)}}})).apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ce=this;return(0,l.Z)(function*(){var Qe;if(yield Ce._canUseIndexedDBPromise){const _t=yield Ce.read();return Ci(Ce.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ce=this;return(0,l.Z)(function*(){var Qe;if(yield Ce._canUseIndexedDBPromise){const _t=yield Ce.read();return Ci(Ce.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...X.heartbeats]})}})()}}function ps(Be){return(0,te.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function Ka(Be){St(new ne.wA("platform-logger",X=>new ve(X),"PRIVATE")),St(new ne.wA("heartbeat",X=>new yn(X),"PRIVATE")),er(Z,"0.9.13",Be),er(Z,"0.9.13","esm2017"),er("fire-js","")}("")},4097:(yt,ke,V)=>{V.d(ke,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=V(7592);(0,l.registerVersion)("firebase","9.23.0","app")},120:(yt,ke,V)=>{V.d(ke,{Z:()=>l.Z});var l=V(3399);l.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(yt,ke,V)=>{V.r(ke);var Oe,ve,G,Z,oe,Fe,Me,tt,Ve,et,Le,Dt,bt,le,Ue,ue,Te,$e,he,je,it,Pt,Un,Xn,Yn,Pi,wi,Qr,fe,pe,Ee,ye,We,He,dt,Je,xi,St,_n,Gt,Zn,ui,hn,Nn,Oi,mr,Rs,Ps,Qs,er,xa,Ft,Ut,en,Pn,fr,tr,Ci,Xs,An,Qo,yn,fs,Js,Eo,ps,Ka,Be,X,Ce,Qe,st,_t,Bn,K,Y,J,Se,me,ht,Bt,l=V(5861),ne=V(3399),U=V(9058),te=V(7592),ce=V(7582),re=V(7879),xe=V(4537);const Ni={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const oh=function pr(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},h_=function Xo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Io=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Os=new re.Yd("@firebase/auth");function gn(D,...g){Os.logLevel<=re.in.ERROR&&Os.error(`Auth (${te.SDK_VERSION}): ${D}`,...g)}function hi(D,...g){throw ko(D,...g)}function mi(D,...g){return ko(D,...g)}function Fl(D,g,v){const x=Object.assign(Object.assign({},h_()),{[g]:v});return new U.LL("auth","Firebase",x).create(g,{appName:D.name})}function Ca(D,g,v){if(!(g instanceof v))throw v.name!==g.constructor.name&&hi(D,"argument-error"),Fl(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ko(D,...g){if("string"!=typeof D){const v=g[0],x=[...g.slice(1)];return x[0]&&(x[0].appName=D.name),D._errorFactory.create(v,...x)}return Io.create(D,...g)}function Ye(D,g,...v){if(!D)throw ko(g,...v)}function _s(D){const g="INTERNAL ASSERTION FAILED: "+D;throw gn(g),new Error(g)}function gs(D,g){D||_s(g)}function Qa(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function Gd(){return"http:"===$d()||"https:"===$d()}function $d(){var D;return typeof self<"u"&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Xa{constructor(g,v){this.shortDelay=g,this.longDelay=v,gs(v>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function Ll(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gd()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function zm(D,g){gs(D.emulator,"Emulator should always be set here");const{url:v}=D.emulator;return g?`${v}${g.startsWith("/")?g.slice(1):g}`:v}class To{static initialize(g,v,x){this.fetchImpl=g,v&&(this.headersImpl=v),x&&(this.responseImpl=x)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _s("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _s("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _s("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Eb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},m_=new Xa(3e4,6e4);function vn(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function Hn(D,g,v,x){return(Oe=Oe||(0,l.Z)(function*(M,N,H,$,ae={}){return Hc(M,ae,(0,l.Z)(function*(){let be={},pt={};$&&("GET"===N?pt=$:be={body:JSON.stringify($)});const ot=(0,U.xO)(Object.assign({key:M.config.apiKey},pt)).slice(1),It=yield M._getAdditionalHeaders();return It["Content-Type"]="application/json",M.languageCode&&(It["X-Firebase-Locale"]=M.languageCode),To.fetch()(f_(M,M.config.apiHost,H,ot),Object.assign({method:N,headers:It,referrerPolicy:"no-referrer"},be))}))})).apply(this,arguments)}function Hc(D,g,v){return(ve=ve||(0,l.Z)(function*(x,M,N){x._canInitEmulator=!1;const H=Object.assign(Object.assign({},Eb),M);try{const $=new jm(x),ae=yield Promise.race([N(),$.promise]);$.clearNetworkTimeout();const be=yield ae.json();if("needConfirmation"in be)throw Bl(x,"account-exists-with-different-credential",be);if(ae.ok&&!("errorMessage"in be))return be;{const pt=ae.ok?be.errorMessage:be.error.message,[ot,It]=pt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ot)throw Bl(x,"credential-already-in-use",be);if("EMAIL_EXISTS"===ot)throw Bl(x,"email-already-in-use",be);if("USER_DISABLED"===ot)throw Bl(x,"user-disabled",be);const tn=H[ot]||ot.toLowerCase().replace(/[_\s]+/g,"-");if(It)throw Fl(x,tn,It);hi(x,tn)}}catch($){if($ instanceof U.ZR)throw $;hi(x,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function Jo(D,g,v,x){return(G=G||(0,l.Z)(function*(M,N,H,$,ae={}){const be=yield Hn(M,N,H,$,ae);return"mfaPendingCredential"in be&&hi(M,"multi-factor-auth-required",{_serverResponse:be}),be})).apply(this,arguments)}function f_(D,g,v,x){const M=`${g}${v}?${x}`;return D.config.emulator?zm(D.config,M):`${D.config.apiScheme}://${M}`}class jm{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((v,x)=>{this.timer=setTimeout(()=>x(mi(this.auth,"network-request-failed")),m_.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bl(D,g,v){const x={appName:D.name};v.email&&(x.email=v.email),v.phoneNumber&&(x.phoneNumber=v.phoneNumber);const M=mi(D,g,x);return M.customData._tokenResponse=v,M}function Dr(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch{}}function dh(D){return 1e3*Number(D)}function Vl(D){const[g,v,x]=D.split(".");if(void 0===g||void 0===v||void 0===x)return gn("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,U.tV)(v);return M?JSON.parse(M):(gn("Failed to decode base64 JWT payload"),null)}catch(M){return gn("Caught error parsing JWT payload as JSON",M?.toString()),null}}function Ei(D,g){return(tt=tt||(0,l.Z)(function*(v,x,M=!1){if(M)return x;try{return yield x}catch(N){throw N instanceof U.ZR&&function $m({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}(N)&&v.auth.currentUser===v&&(yield v.auth.signOut()),N}})).apply(this,arguments)}class Wm{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var v;if(g){const x=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),x}{this.errorBackoff=3e4;const M=(null!==(v=this.user.stsTokenManager.expirationTime)&&void 0!==v?v:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var v=this;if(!this.isRunning)return;const x=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield v.iteration()}),x)}iteration(){var g=this;return(0,l.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(v){return void("auth/network-request-failed"===v?.code&&g.schedule(!0))}g.schedule()})()}}class hh{constructor(g,v){this.createdAt=g,this.lastLoginAt=v,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dr(this.lastLoginAt),this.creationTime=Dr(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function sn(D){return(Ve=Ve||(0,l.Z)(function*(g){var v;const x=g.auth,M=yield g.getIdToken(),N=yield Ei(g,function p_(D,g){return(Fe=Fe||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:lookup",x)})).apply(this,arguments)}(x,{idToken:M}));Ye(N?.users.length,x,"internal-error");const H=N.users[0];g._notifyReloadListener(H);const $=null!==(v=H.providerUserInfo)&&void 0!==v&&v.length?function Ja(D){return D.map(g=>{var{providerId:v}=g,x=(0,ce._T)(g,["providerId"]);return{providerId:v,uid:x.rawId||"",displayName:x.displayName||null,email:x.email||null,phoneNumber:x.phoneNumber||null,photoURL:x.photoUrl||null}})}(H.providerUserInfo):[],ae=function gr(D,g){return[...D.filter(x=>!g.some(M=>M.providerId===x.providerId)),...g]}(g.providerData,$),ot=!!g.isAnonymous&&!(g.email&&H.passwordHash||ae?.length),It={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:ae,metadata:new hh(H.createdAt,H.lastLoginAt),isAnonymous:ot};Object.assign(g,It)})).apply(this,arguments)}class zc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){Ye(g.idToken,"internal-error"),Ye(typeof g.idToken<"u","internal-error"),Ye(typeof g.refreshToken<"u","internal-error");const v="expiresIn"in g&&typeof g.expiresIn<"u"?Number(g.expiresIn):function uh(D){const g=Vl(D);return Ye(g,"internal-error"),Ye(typeof g.exp<"u","internal-error"),Ye(typeof g.iat<"u","internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,v)}getToken(g,v=!1){var x=this;return(0,l.Z)(function*(){return Ye(!x.accessToken||x.refreshToken,g,"user-token-expired"),v||!x.accessToken||x.isExpired?x.refreshToken?(yield x.refresh(g,x.refreshToken),x.accessToken):null:x.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,v){var x=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:N,expiresIn:H}=yield function vs(D,g){return(Le=Le||(0,l.Z)(function*(v,x){const M=yield Hc(v,{},(0,l.Z)(function*(){const N=(0,U.xO)({grant_type:"refresh_token",refresh_token:x}).slice(1),{tokenApiHost:H,apiKey:$}=v.config,ae=f_(v,H,"/v1/token",`key=${$}`),be=yield v._getAdditionalHeaders();return be["Content-Type"]="application/x-www-form-urlencoded",To.fetch()(ae,{method:"POST",headers:be,body:N})}));return{accessToken:M.access_token,expiresIn:M.expires_in,refreshToken:M.refresh_token}})).apply(this,arguments)}(g,v);x.updateTokensAndExpiration(M,N,Number(H))})()}updateTokensAndExpiration(g,v,x){this.refreshToken=v||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*x}static fromJSON(g,v){const{refreshToken:x,accessToken:M,expirationTime:N}=v,H=new zc;return x&&(Ye("string"==typeof x,"internal-error",{appName:g}),H.refreshToken=x),M&&(Ye("string"==typeof M,"internal-error",{appName:g}),H.accessToken=M),N&&(Ye("number"==typeof N,"internal-error",{appName:g}),H.expirationTime=N),H}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new zc,this.toJSON())}_performRefresh(){return _s("not implemented")}}function ea(D,g){Ye("string"==typeof D||typeof D>"u","internal-error",{appName:g})}class ta{constructor(g){var{uid:v,auth:x,stsTokenManager:M}=g,N=(0,ce._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Wm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=v,this.auth=x,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new hh(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(g){var v=this;return(0,l.Z)(function*(){const x=yield Ei(v,v.stsTokenManager.getToken(v.auth,g));return Ye(x,v.auth,"internal-error"),v.accessToken!==x&&(v.accessToken=x,yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)),x})()}getIdTokenResult(g){return function Gm(D){return(Me=Me||(0,l.Z)(function*(g,v=!1){const x=(0,U.m9)(g),M=yield x.getIdToken(v),N=Vl(M);Ye(N&&N.exp&&N.auth_time&&N.iat,x.auth,"internal-error");const H="object"==typeof N.firebase?N.firebase:void 0,$=H?.sign_in_provider;return{claims:N,token:M,authTime:Dr(dh(N.auth_time)),issuedAtTime:Dr(dh(N.iat)),expirationTime:Dr(dh(N.exp)),signInProvider:$||null,signInSecondFactor:H?.sign_in_second_factor||null}})).apply(this,arguments)}(this,g)}reload(){return function _r(D){return(et=et||(0,l.Z)(function*(g){const v=(0,U.m9)(g);yield sn(v),yield v.auth._persistUserIfCurrent(v),v.auth._notifyListenersIfCurrent(v)})).apply(this,arguments)}(this)}_assign(g){this!==g&&(Ye(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(v=>Object.assign({},v)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){const v=new ta(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}));return v.metadata._copy(this.metadata),v}_onReload(g){Ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,v=!1){var x=this;return(0,l.Z)(function*(){let M=!1;g.idToken&&g.idToken!==x.stsTokenManager.accessToken&&(x.stsTokenManager.updateFromServerResponse(g),M=!0),v&&(yield sn(x)),yield x.auth._persistUserIfCurrent(x),M&&x.auth._notifyListenersIfCurrent(x)})()}delete(){var g=this;return(0,l.Z)(function*(){const v=yield g.getIdToken();return yield Ei(g,function ch(D,g){return(Z=Z||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:delete",x)})).apply(this,arguments)}(g.auth,{idToken:v})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,v){var x,M,N,H,$,ae,be,pt;const ot=null!==(x=v.displayName)&&void 0!==x?x:void 0,It=null!==(M=v.email)&&void 0!==M?M:void 0,tn=null!==(N=v.phoneNumber)&&void 0!==N?N:void 0,jn=null!==(H=v.photoURL)&&void 0!==H?H:void 0,Yi=null!==($=v.tenantId)&&void 0!==$?$:void 0,Wr=null!==(ae=v._redirectEventId)&&void 0!==ae?ae:void 0,Fo=null!==(be=v.createdAt)&&void 0!==be?be:void 0,fl=null!==(pt=v.lastLoginAt)&&void 0!==pt?pt:void 0,{uid:gu,emailVerified:Gb,isAnonymous:vu,providerData:ud,stsTokenManager:$b}=v;Ye(gu&&$b,g,"internal-error");const Ix=zc.fromJSON(this.name,$b);Ye("string"==typeof gu,g,"internal-error"),ea(ot,g.name),ea(It,g.name),Ye("boolean"==typeof Gb,g,"internal-error"),Ye("boolean"==typeof vu,g,"internal-error"),ea(tn,g.name),ea(jn,g.name),ea(Yi,g.name),ea(Wr,g.name),ea(Fo,g.name),ea(fl,g.name);const tg=new ta({uid:gu,auth:g,email:It,emailVerified:Gb,displayName:ot,isAnonymous:vu,photoURL:jn,phoneNumber:tn,tenantId:Yi,stsTokenManager:Ix,createdAt:Fo,lastLoginAt:fl});return ud&&Array.isArray(ud)&&(tg.providerData=ud.map(Wb=>Object.assign({},Wb))),Wr&&(tg._redirectEventId=Wr),tg}static _fromIdTokenResponse(g,v,x=!1){return(0,l.Z)(function*(){const M=new zc;M.updateFromServerResponse(v);const N=new ta({uid:v.localId,auth:g,stsTokenManager:M,isAnonymous:x});return yield sn(N),N})()}}const __=new Map;function Ns(D){gs(D instanceof Function,"Expected a class definition");let g=__.get(D);return g?(gs(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,__.set(D,g),g)}const nt=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(v,x){var M=this;return(0,l.Z)(function*(){M.storage[v]=x})()}_get(v){var x=this;return(0,l.Z)(function*(){const M=x.storage[v];return void 0===M?null:M})()}_remove(v){var x=this;return(0,l.Z)(function*(){delete x.storage[v]})()}_addListener(v,x){}_removeListener(v,x){}}return D.type="NONE",D})();function Ht(D,g,v){return`firebase:${D}:${g}:${v}`}class Vn{constructor(g,v,x){this.persistence=g,this.auth=v,this.userKey=x;const{config:M,name:N}=this.auth;this.fullUserKey=Ht(this.userKey,M.apiKey,N),this.fullPersistenceKey=Ht("persistence",M.apiKey,N),this.boundEventHandler=v._onStorageEvent.bind(v),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const v=yield g.persistence._get(g.fullUserKey);return v?ta._fromJSON(g.auth,v):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var v=this;return(0,l.Z)(function*(){if(v.persistence===g)return;const x=yield v.getCurrentUser();return yield v.removeCurrentUser(),v.persistence=g,x?v.setCurrentUser(x):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,v,x="authUser"){return(0,l.Z)(function*(){var M,N;if(!v.length)return new Vn(Ns(nt),g,x);const H=(yield Promise.all(v.map(function(ot){return(M=M||(0,l.Z)(function*(It){if(yield It._isAvailable())return It})).apply(this,arguments)}))).filter(ot=>ot);let $=H[0]||Ns(nt);const ae=Ht(x,g.config.apiKey,g.name);let be=null;for(const ot of v)try{const It=yield ot._get(ae);if(It){const tn=ta._fromJSON(g,It);ot!==$&&(be=tn),$=ot;break}}catch{}const pt=H.filter(ot=>ot._shouldAllowMigration);return $._shouldAllowMigration&&pt.length?($=pt[0],be&&(yield $._set(ae,be.toJSON())),yield Promise.all(v.map(function(ot){return(N=N||(0,l.Z)(function*(It){if(It!==$)try{yield It._remove(ae)}catch{}})).apply(this,arguments)})),new Vn($,g,x)):new Vn($,g,x)})()}}function Xr(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if($t(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Ea(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(ec(g))return"Blackberry";if(jt(g))return"Webos";if(vr(g))return"Safari";if((g.includes("chrome/")||jc(g))&&!g.includes("edge/"))return"Chrome";if(bs(g))return"Android";{const x=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===x?.length)return x[1]}return"Other"}function Ea(D=(0,U.z$)()){return/firefox\//i.test(D)}function vr(D=(0,U.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function jc(D=(0,U.z$)()){return/crios\//i.test(D)}function $t(D=(0,U.z$)()){return/iemobile/i.test(D)}function bs(D=(0,U.z$)()){return/android/i.test(D)}function ec(D=(0,U.z$)()){return/blackberry/i.test(D)}function jt(D=(0,U.z$)()){return/webos/i.test(D)}function So(D=(0,U.z$)()){return/iphone|ipad|ipod/i.test(D)||/macintosh/i.test(D)&&/mobile/i.test(D)}function Hl(D=(0,U.z$)()){return So(D)||bs(D)||jt(D)||ec(D)||/windows phone/i.test(D)||$t(D)}function eo(D,g=[]){let v;switch(D){case"Browser":v=Xr((0,U.z$)());break;case"Worker":v=`${Xr((0,U.z$)())}-${D}`;break;default:v=D}const x=g.length?g.join(","):"FirebaseCore-web";return`${v}/JsCore/${te.SDK_VERSION}/${x}`}function mh(D,g){return(bt=bt||(0,l.Z)(function*(v,x){return Hn(v,"GET","/v2/recaptchaConfig",vn(v,x))})).apply(this,arguments)}function tc(D){return void 0!==D&&void 0!==D.getResponse}function Ao(D){return void 0!==D&&void 0!==D.enterprise}class Gl{constructor(g){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===g.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=g.recaptchaKey.split("/")[3],this.emailPasswordEnabled=g.recaptchaEnforcementState.some(v=>"EMAIL_PASSWORD_PROVIDER"===v.provider&&"OFF"!==v.enforcementState)}}function on(D){return new Promise((g,v)=>{const x=document.createElement("script");x.setAttribute("src",D),x.onload=g,x.onerror=M=>{const N=mi("internal-error");N.customData=M,v(N)},x.type="text/javascript",x.charset="UTF-8",function Ia(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(x)})}function g_(D){return`__${D}${Math.floor(1e6*Math.random())}`}class Gc{constructor(g){this.type="recaptcha-enterprise",this.auth=Li(g)}verify(g="verify",v=!1){var x=this;return(0,l.Z)(function*(){var M;function H($,ae,be){const pt=window.grecaptcha;Ao(pt)?pt.enterprise.ready(()=>{pt.enterprise.execute($,{action:g}).then(ot=>{ae(ot)}).catch(()=>{ae("NO_RECAPTCHA")})}):be(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(($,ae)=>{(function N($){return(M=M||(0,l.Z)(function*(ae){var be;if(!v){if(null==ae.tenantId&&null!=ae._agentRecaptchaConfig)return ae._agentRecaptchaConfig.siteKey;if(null!=ae.tenantId&&void 0!==ae._tenantRecaptchaConfigs[ae.tenantId])return ae._tenantRecaptchaConfigs[ae.tenantId].siteKey}return new Promise(function(pt,ot){return(be=be||(0,l.Z)(function*(It,tn){mh(ae,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(jn=>{if(void 0!==jn.recaptchaKey){const Yi=new Gl(jn);return null==ae.tenantId?ae._agentRecaptchaConfig=Yi:ae._tenantRecaptchaConfigs[ae.tenantId]=Yi,It(Yi.siteKey)}tn(new Error("recaptcha Enterprise site key undefined"))}).catch(jn=>{tn(jn)})})).apply(this,arguments)})})).apply(this,arguments)})(x.auth).then(be=>{if(!v&&Ao(window.grecaptcha))H(be,$,ae);else{if(typeof window>"u")return void ae(new Error("RecaptchaVerifier is only supported in browser"));on("https://www.google.com/recaptcha/enterprise.js?render="+be).then(()=>{H(be,$,ae)}).catch(pt=>{ae(pt)})}}).catch(be=>{ae(be)})})})()}}function Jr(D,g,v){return(le=le||(0,l.Z)(function*(x,M,N,H=!1){const $=new Gc(x);let ae;try{ae=yield $.verify(N)}catch{ae=yield $.verify(N,!0)}const be=Object.assign({},M);return Object.assign(be,H?{captchaResp:ae}:{captchaResponse:ae}),Object.assign(be,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(be,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),be})).apply(this,arguments)}class nc{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,v){const x=N=>new Promise((H,$)=>{try{H(g(N))}catch(ae){$(ae)}});x.onAbort=v,this.queue.push(x);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var v=this;return(0,l.Z)(function*(){if(v.auth.currentUser===g)return;const x=[];try{for(const M of v.queue)yield M(g),M.onAbort&&x.push(M.onAbort)}catch(M){x.reverse();for(const N of x)try{N()}catch{}throw v.auth._errorFactory.create("login-blocked",{originalMessage:M?.message})}})()}}class br{constructor(g,v,x,M){this.app=g,this.heartbeatServiceProvider=v,this.appCheckServiceProvider=x,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kr(this),this.idTokenSubscription=new kr(this),this.beforeStateQueue=new nc(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Io,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,v){var x=this;return v&&(this._popupRedirectResolver=Ns(v)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,N;if(!x._deleted&&(x.persistenceManager=yield Vn.create(x,g),!x._deleted)){if(null!==(M=x._popupRedirectResolver)&&void 0!==M&&M._shouldInitProactively)try{yield x._popupRedirectResolver._initialize(x)}catch{}yield x.initializeCurrentUser(v),x.lastNotifiedUid=(null===(N=x.currentUser)||void 0===N?void 0:N.uid)||null,!x._deleted&&(x._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const v=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||v){if(g.currentUser&&v&&g.currentUser.uid===v.uid)return g._currentUser._assign(v),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(v,!0)}})()}initializeCurrentUser(g){var v=this;return(0,l.Z)(function*(){var x;const M=yield v.assertedPersistence.getCurrentUser();let N=M,H=!1;if(g&&v.config.authDomain){yield v.getOrInitRedirectPersistenceManager();const $=null===(x=v.redirectUser)||void 0===x?void 0:x._redirectEventId,ae=N?._redirectEventId,be=yield v.tryRedirectSignIn(g);(!$||$===ae)&&be?.user&&(N=be.user,H=!0)}if(!N)return v.directlySetCurrentUser(null);if(!N._redirectEventId){if(H)try{yield v.beforeStateQueue.runMiddleware(N)}catch($){N=M,v._popupRedirectResolver._overrideRedirectResult(v,()=>Promise.reject($))}return N?v.reloadAndSetCurrentUserOrClear(N):v.directlySetCurrentUser(null)}return Ye(v._popupRedirectResolver,v,"argument-error"),yield v.getOrInitRedirectPersistenceManager(),v.redirectUser&&v.redirectUser._redirectEventId===N._redirectEventId?v.directlySetCurrentUser(N):v.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(g){var v=this;return(0,l.Z)(function*(){let x=null;try{x=yield v._popupRedirectResolver._completeRedirectFn(v,g,!0)}catch{yield v._setRedirectUser(null)}return x})()}reloadAndSetCurrentUserOrClear(g){var v=this;return(0,l.Z)(function*(){try{yield sn(g)}catch(x){if("auth/network-request-failed"!==x?.code)return v.directlySetCurrentUser(null)}return v.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ah(){if(typeof navigator>"u")return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var v=this;return(0,l.Z)(function*(){const x=g?(0,U.m9)(g):null;return x&&Ye(x.auth.config.apiKey===v.config.apiKey,v,"invalid-user-token"),v._updateCurrentUser(x&&x._clone(v))})()}_updateCurrentUser(g,v=!1){var x=this;return(0,l.Z)(function*(){if(!x._deleted)return g&&Ye(x.tenantId===g.tenantId,x,"tenant-id-mismatch"),v||(yield x.beforeStateQueue.runMiddleware(g)),x.queue((0,l.Z)(function*(){yield x.directlySetCurrentUser(g),x.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var v=this;return this.queue((0,l.Z)(function*(){yield v.assertedPersistence.setPersistence(Ns(g))}))}initializeRecaptchaConfig(){var g=this;return(0,l.Z)(function*(){const v=yield mh(g,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),x=new Gl(v);null==g.tenantId?g._agentRecaptchaConfig=x:g._tenantRecaptchaConfigs[g.tenantId]=x,x.emailPasswordEnabled&&new Gc(g).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,v,x){return this.registerStateListener(this.authStateSubscription,g,v,x)}beforeAuthStateChanged(g,v){return this.beforeStateQueue.pushCallback(g,v)}onIdTokenChanged(g,v,x){return this.registerStateListener(this.idTokenSubscription,g,v,x)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,v){var x=this;return(0,l.Z)(function*(){const M=yield x.getOrInitRedirectPersistenceManager(v);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var v=this;return(0,l.Z)(function*(){if(!v.redirectPersistenceManager){const x=g&&Ns(g)||v._popupRedirectResolver;Ye(x,v,"argument-error"),v.redirectPersistenceManager=yield Vn.create(v,[Ns(x._redirectPersistence)],"redirectUser"),v.redirectUser=yield v.redirectPersistenceManager.getCurrentUser()}return v.redirectPersistenceManager})()}_redirectUserForId(g){var v=this;return(0,l.Z)(function*(){var x,M;return v._isInitialized&&(yield v.queue((0,l.Z)(function*(){}))),(null===(x=v._currentUser)||void 0===x?void 0:x._redirectEventId)===g?v._currentUser:(null===(M=v.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?v.redirectUser:null})()}_persistUserIfCurrent(g){var v=this;return(0,l.Z)(function*(){if(g===v.currentUser)return v.queue((0,l.Z)(function*(){return v.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,v;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const x=null!==(v=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==v?v:null;this.lastNotifiedUid!==x&&(this.lastNotifiedUid=x,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,v,x,M){if(this._deleted)return()=>{};const N="function"==typeof v?v:v.next.bind(v),H=this._isInitialized?Promise.resolve():this._initializationPromise;return Ye(H,this,"internal-error"),H.then(()=>N(this.currentUser)),"function"==typeof v?g.addObserver(v,x,M):g.addObserver(v)}directlySetCurrentUser(g){var v=this;return(0,l.Z)(function*(){v.currentUser&&v.currentUser!==g&&v._currentUser._stopProactiveRefresh(),g&&v.isProactiveRefreshEnabled&&g._startProactiveRefresh(),v.currentUser=g,g?yield v.assertedPersistence.setCurrentUser(g):yield v.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return Ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=eo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var v;const x={"X-Client-Version":g.clientVersion};g.app.options.appId&&(x["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(v=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getHeartbeatsHeader();M&&(x["X-Firebase-Client"]=M);const N=yield g._getAppCheckToken();return N&&(x["X-Firebase-AppCheck"]=N),x})()}_getAppCheckToken(){var g=this;return(0,l.Z)(function*(){var v;const x=yield null===(v=g.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===v?void 0:v.getToken();return x?.error&&function Do(D,...g){Os.logLevel<=re.in.WARN&&Os.warn(`Auth (${te.SDK_VERSION}): ${D}`,...g)}(`Error while retrieving App Check token: ${x.error}`),x?.token})()}}function Li(D){return(0,U.m9)(D)}class kr{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(v=>this.observer=v)}get next(){return Ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Fs(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function $l(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class $c{constructor(g,v){this.providerId=g,this.signInMethod=v}toJSON(){return _s("not implemented")}_getIdTokenResponse(g){return _s("not implemented")}_linkToIdToken(g,v){return _s("not implemented")}_getReauthenticationResolver(g){return _s("not implemented")}}function Ib(D,g){return(Ue=Ue||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:resetPassword",vn(v,x))})).apply(this,arguments)}function vh(D,g){return(ue=ue||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:update",x)})).apply(this,arguments)}function bh(D,g){return($e=$e||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithPassword",vn(v,x))})).apply(this,arguments)}function qd(D,g){return(he=he||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:sendOobCode",vn(v,x))})).apply(this,arguments)}function Ym(D,g){return(it=it||(0,l.Z)(function*(v,x){return qd(v,x)})).apply(this,arguments)}function oi(D,g){return(Pt=Pt||(0,l.Z)(function*(v,x){return qd(v,x)})).apply(this,arguments)}class Yd extends $c{constructor(g,v,x,M=null){super("password",x),this._email=g,this._password=v,this._tenantId=M}static _fromEmailAndPassword(g,v){return new Yd(g,v,"password")}static _fromEmailAndCode(g,v,x=null){return new Yd(g,v,"emailLink",x)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g;if(v?.email&&v?.password){if("password"===v.signInMethod)return this._fromEmailAndPassword(v.email,v.password);if("emailLink"===v.signInMethod)return this._fromEmailAndCode(v.email,v.password,v.tenantId)}return null}_getIdTokenResponse(g){var v=this;return(0,l.Z)(function*(){var x;switch(v.signInMethod){case"password":const N={returnSecureToken:!0,email:v._email,password:v._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(x=g._getRecaptchaConfig())&&void 0!==x&&x.emailPasswordEnabled){const H=yield Jr(g,N,"signInWithPassword");return bh(g,H)}var M;return bh(g,N).catch(function(H){return(M=M||(0,l.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ae=yield Jr(g,N,"signInWithPassword");return bh(g,ae)}return Promise.reject($)})).apply(this,arguments)});case"emailLink":return function Tb(D,g){return(Xn=Xn||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithEmailLink",vn(v,x))})).apply(this,arguments)}(g,{email:v._email,oobCode:v._password});default:hi(g,"internal-error")}})()}_linkToIdToken(g,v){var x=this;return(0,l.Z)(function*(){switch(x.signInMethod){case"password":return vh(g,{idToken:v,returnSecureToken:!0,email:x._email,password:x._password});case"emailLink":return function Sb(D,g){return(Yn=Yn||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithEmailLink",vn(v,x))})).apply(this,arguments)}(g,{idToken:v,email:x._email,oobCode:x._password});default:hi(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ka(D,g){return(Pi=Pi||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithIdp",vn(v,x))})).apply(this,arguments)}class na extends $c{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const v=new na(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(v.idToken=g.idToken),g.accessToken&&(v.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(v.nonce=g.nonce),g.pendingToken&&(v.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(v.accessToken=g.oauthToken,v.secret=g.oauthTokenSecret):hi("argument-error"),v}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:x,signInMethod:M}=v,N=(0,ce._T)(v,["providerId","signInMethod"]);if(!x||!M)return null;const H=new na(x,M);return H.idToken=N.idToken||void 0,H.accessToken=N.accessToken||void 0,H.secret=N.secret,H.nonce=N.nonce,H.pendingToken=N.pendingToken||null,H}_getIdTokenResponse(g){return ka(g,this.buildRequest())}_linkToIdToken(g,v){const x=this.buildRequest();return x.idToken=v,ka(g,x)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ka(g,v)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const v={};this.idToken&&(v.id_token=this.idToken),this.accessToken&&(v.access_token=this.accessToken),this.secret&&(v.oauth_token_secret=this.secret),v.providerId=this.providerId,this.nonce&&!this.pendingToken&&(v.nonce=this.nonce),g.postBody=(0,U.xO)(v)}return g}}const Rb={USER_NOT_FOUND:"user-not-found"};class es extends $c{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,v){return new es({verificationId:g,verificationCode:v})}static _fromTokenResponse(g,v){return new es({phoneNumber:g,temporaryProof:v})}_getIdTokenResponse(g){return function Zm(D,g){return(Qr=Qr||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithPhoneNumber",vn(v,x))})).apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,v){return function Mb(D,g){return(fe=fe||(0,l.Z)(function*(v,x){const M=yield Jo(v,"POST","/v1/accounts:signInWithPhoneNumber",vn(v,x));if(M.temporaryProof)throw Bl(v,"account-exists-with-different-credential",M);return M})).apply(this,arguments)}(g,Object.assign({idToken:v},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Km(D,g){return(pe=pe||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithPhoneNumber",vn(v,Object.assign(Object.assign({},x),{operation:"REAUTH"})),Rb)})).apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:v,verificationId:x,verificationCode:M}=this.params;return g&&v?{temporaryProof:g,phoneNumber:v}:{sessionInfo:x,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:v,verificationCode:x,phoneNumber:M,temporaryProof:N}=g;return x||v||M||N?new es({verificationId:v,verificationCode:x,phoneNumber:M,temporaryProof:N}):null}}class to{constructor(g){var v,x,M,N,H,$;const ae=(0,U.zd)((0,U.pd)(g)),be=null!==(v=ae.apiKey)&&void 0!==v?v:null,pt=null!==(x=ae.oobCode)&&void 0!==x?x:null,ot=function ia(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=ae.mode)&&void 0!==M?M:null);Ye(be&&pt&&ot,"argument-error"),this.apiKey=be,this.operation=ot,this.code=pt,this.continueUrl=null!==(N=ae.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(H=ae.languageCode)&&void 0!==H?H:null,this.tenantId=null!==($=ae.tenantId)&&void 0!==$?$:null}static parseLink(g){const v=function wh(D){const g=(0,U.zd)((0,U.pd)(D)).link,v=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,x=(0,U.zd)((0,U.pd)(D)).deep_link_id;return(x?(0,U.zd)((0,U.pd)(x)).link:null)||x||v||g||D}(g);try{return new to(v)}catch{return null}}}let Wl=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(v,x){return Yd._fromEmailAndPassword(v,x)}static credentialWithLink(v,x){const M=to.parseLink(x);return Ye(M,"argument-error"),Yd._fromEmailAndCode(v,M.code,M.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Si{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class no extends Si{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Wc extends no{static credentialFromJSON(g){const v="string"==typeof g?JSON.parse(g):g;return Ye("providerId"in v&&"signInMethod"in v,"argument-error"),na._fromParams(v)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return Ye(g.idToken||g.accessToken,"argument-error"),na._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Wc.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Wc.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:v,oauthAccessToken:x,oauthTokenSecret:M,pendingToken:N,nonce:H,providerId:$}=g;if(!x&&!M&&!v&&!N||!$)return null;try{return new Wc($)._credential({idToken:v,accessToken:x,nonce:H,pendingToken:N})}catch{return null}}}let xh=(()=>{class D extends no{constructor(){super("facebook.com")}static credential(v){return na._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),Ch=(()=>{class D extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(v,x){return na._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:v,accessToken:x})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthIdToken:x,oauthAccessToken:M}=v;if(!x&&!M)return null;try{return D.credential(x,M)}catch{return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),ql=(()=>{class D extends no{constructor(){super("github.com")}static credential(v){return na._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:v})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v||!("oauthAccessToken"in v)||!v.oauthAccessToken)return null;try{return D.credential(v.oauthAccessToken)}catch{return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Ta extends $c{constructor(g,v){super(g,g),this.pendingToken=v}_getIdTokenResponse(g){return ka(g,this.buildRequest())}_linkToIdToken(g,v){const x=this.buildRequest();return x.idToken=v,ka(g,x)}_getReauthenticationResolver(g){const v=this.buildRequest();return v.autoCreate=!1,ka(g,v)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const v="string"==typeof g?JSON.parse(g):g,{providerId:x,signInMethod:M,pendingToken:N}=v;return x&&M&&N&&x===M?new Ta(x,N):null}static _create(g,v){return new Ta(g,v)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Bs extends Si{constructor(g){Ye(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Bs.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Bs.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const v=Ta.fromJSON(g);return Ye(v,"argument-error"),v}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:v,providerId:x}=g;if(!v||!x)return null;try{return Ta._create(x,v)}catch{return null}}}let Qm=(()=>{class D extends no{constructor(){super("twitter.com")}static credential(v,x){return na._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:v,oauthTokenSecret:x})}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{oauthAccessToken:x,oauthTokenSecret:M}=v;if(!x||!M)return null;try{return D.credential(x,M)}catch{return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function Yc(D,g){return(Ee=Ee||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signUp",vn(v,x))})).apply(this,arguments)}class ts{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,v,x,M=!1){return(0,l.Z)(function*(){const N=yield ta._fromIdTokenResponse(g,x,M),H=Zc(x);return new ts({user:N,providerId:H,_tokenResponse:x,operationType:v})})()}static _forOperation(g,v,x){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(x,!0);const M=Zc(x);return new ts({user:g,providerId:M,_tokenResponse:x,operationType:v})})()}}function Zc(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}class Zd extends U.ZR{constructor(g,v,x,M){var N;super(v.code,v.message),this.operationType=x,this.user=M,Object.setPrototypeOf(this,Zd.prototype),this.customData={appName:g.name,tenantId:null!==(N=g.tenantId)&&void 0!==N?N:void 0,_serverResponse:v.customData._serverResponse,operationType:x}}static _fromErrorAndOperation(g,v,x,M){return new Zd(g,v,x,M)}}function b_(D,g,v,x){return("reauthenticate"===g?v._getReauthenticationResolver(D):v._getIdTokenResponse(D)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Zd._fromErrorAndOperation(D,N,g,x):N})}function Kd(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function ic(D,g){return(He=He||(0,l.Z)(function*(v,x,M=!1){const N=yield Ei(v,x._linkToIdToken(v.auth,yield v.getIdToken()),M);return ts._forOperation(v,"link",N)})).apply(this,arguments)}function Yl(D,g,v){return(dt=dt||(0,l.Z)(function*(x,M,N){yield sn(M);const $=!1===x?"provider-already-linked":"no-such-provider";Ye(Kd(M.providerData).has(N)===x,M.auth,$)})).apply(this,arguments)}function y_(D,g){return(Je=Je||(0,l.Z)(function*(v,x,M=!1){const{auth:N}=v,H="reauthenticate";try{const $=yield Ei(v,b_(N,H,x,v),M);Ye($.idToken,N,"internal-error");const ae=Vl($.idToken);Ye(ae,N,"internal-error");const{sub:be}=ae;return Ye(v.uid===be,N,"user-mismatch"),ts._forOperation(v,H,$)}catch($){throw"auth/user-not-found"===$?.code&&hi(N,"user-mismatch"),$}})).apply(this,arguments)}function Qd(D,g){return(xi=xi||(0,l.Z)(function*(v,x,M=!1){const N="signIn",H=yield b_(v,N,x),$=yield ts._fromIdTokenResponse(v,N,H);return M||(yield v._updateCurrentUser($.user)),$})).apply(this,arguments)}function Zl(D,g){return(St=St||(0,l.Z)(function*(v,x){return Qd(Li(v),x)})).apply(this,arguments)}function Eh(D,g){return(_n=_n||(0,l.Z)(function*(v,x){const M=(0,U.m9)(v);return yield Yl(!1,M,x.providerId),ic(M,x)})).apply(this,arguments)}function Ih(D,g){return(Gt=Gt||(0,l.Z)(function*(v,x){return y_((0,U.m9)(v),x)})).apply(this,arguments)}class Aa{constructor(g,v){this.factorId=g,this.uid=v.mfaEnrollmentId,this.enrollmentTime=new Date(v.enrolledAt).toUTCString(),this.displayName=v.displayName}static _fromServerResponse(g,v){return"phoneInfo"in v?Xd._fromServerResponse(g,v):"totpInfo"in v?Qc._fromServerResponse(g,v):hi(g,"internal-error")}}class Xd extends Aa{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,v){return new Xd(v)}}class Qc extends Aa{constructor(g){super("totp",g)}static _fromServerResponse(g,v){return new Qc(v)}}function Mo(D,g,v){var x;Ye((null===(x=v.url)||void 0===x?void 0:x.length)>0,D,"invalid-continue-uri"),Ye(typeof v.dynamicLinkDomain>"u"||v.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=v.url,g.dynamicLinkDomain=v.dynamicLinkDomain,g.canHandleCodeInApp=v.handleCodeInApp,v.iOS&&(Ye(v.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=v.iOS.bundleId),v.android&&(Ye(v.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=v.android.installApp,g.androidMinimumVersionCode=v.android.minimumVersion,g.androidPackageName=v.android.packageName)}function Dh(D,g){return(mr=mr||(0,l.Z)(function*(v,x){const M=(0,U.m9)(v),N=yield Ib(M,{oobCode:x}),H=N.requestType;switch(Ye(H,M,"internal-error"),H){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Ye(N.newEmail,M,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Ye(N.mfaInfo,M,"internal-error");default:Ye(N.email,M,"internal-error")}let $=null;return N.mfaInfo&&($=Aa._fromServerResponse(Li(M),N.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.newEmail:N.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===N.requestType?N.email:N.newEmail)||null,multiFactorInfo:$},operation:H}})).apply(this,arguments)}function Th(D,g,v){return(tr=tr||(0,l.Z)(function*(x,M,N){const{auth:H}=x,ae={idToken:yield x.getIdToken(),returnSecureToken:!0};M&&(ae.email=M),N&&(ae.password=N);const be=yield Ei(x,vh(H,ae));yield x._updateTokensIfNecessary(be,!0)})).apply(this,arguments)}class In{constructor(g,v,x={}){this.isNewUser=g,this.providerId=v,this.profile=x}}class Jc extends In{constructor(g,v,x,M){super(g,v,x),this.username=M}}class el extends In{constructor(g,v){super(g,"facebook.com",v)}}class ns extends Jc{constructor(g,v){super(g,"github.com",v,"string"==typeof v?.login?v?.login:null)}}class E_ extends In{constructor(g,v){super(g,"google.com",v)}}class iu extends Jc{constructor(g,v,x){super(g,"twitter.com",v,x)}}function tl(D){const{user:g,_tokenResponse:v}=D;return g.isAnonymous&&!v?{providerId:null,isNewUser:!1,profile:null}:function rf(D){var g,v;if(!D)return null;const{providerId:x}=D,M=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},N=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!x&&D?.idToken){const H=null===(v=null===(g=Vl(D.idToken))||void 0===g?void 0:g.firebase)||void 0===v?void 0:v.sign_in_provider;if(H)return new In(N,"anonymous"!==H&&"custom"!==H?H:null)}if(!x)return null;switch(x){case"facebook.com":return new el(N,M);case"github.com":return new ns(N,M);case"google.com":return new E_(N,M);case"twitter.com":return new iu(N,M,D.screenName||null);case"custom":case"anonymous":return new In(N,null);default:return new In(N,x,M)}}(v)}class Ro{constructor(g,v,x){this.type=g,this.credential=v,this.auth=x}static _fromIdtoken(g,v){return new Ro("enroll",g,v)}static _fromMfaPendingCredential(g){return new Ro("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var v,x;if(g?.multiFactorSession){if(null!==(v=g.multiFactorSession)&&void 0!==v&&v.pendingCredential)return Ro._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null!==(x=g.multiFactorSession)&&void 0!==x&&x.idToken)return Ro._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Sh{constructor(g,v,x){this.session=g,this.hints=v,this.signInResolver=x}static _fromError(g,v){var x;const M=Li(g),N=v.customData._serverResponse,H=(N.mfaInfo||[]).map(ae=>Aa._fromServerResponse(M,ae));Ye(N.mfaPendingCredential,M,"internal-error");const $=Ro._fromMfaPendingCredential(N.mfaPendingCredential);return new Sh($,H,function(ae){return(x=x||(0,l.Z)(function*(be){const pt=yield be._process(M,$);delete N.mfaInfo,delete N.mfaPendingCredential;const ot=Object.assign(Object.assign({},N),{idToken:pt.idToken,refreshToken:pt.refreshToken});switch(v.operationType){case"signIn":const It=yield ts._fromIdTokenResponse(M,v.operationType,ot);return yield M._updateCurrentUser(It.user),It;case"reauthenticate":return Ye(v.user,M,"internal-error"),ts._forOperation(v.user,v.operationType,ot);default:hi(M,"internal-error")}})).apply(this,arguments)})}resolveSignIn(g){var v=this;return(0,l.Z)(function*(){return v.signInResolver(g)})()}}class nl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(v=>{v.mfaInfo&&(this.enrolledFactors=v.mfaInfo.map(x=>Aa._fromServerResponse(g.auth,x)))})}static _fromUser(g){return new nl(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Ro._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,v){var x=this;return(0,l.Z)(function*(){const M=g,N=yield x.getSession(),H=yield Ei(x.user,M._process(x.user.auth,N,v));return yield x.user._updateTokensIfNecessary(H),x.user.reload()})()}unenroll(g){var v=this;return(0,l.Z)(function*(){const x="string"==typeof g?g:g.uid,M=yield v.user.getIdToken();try{const N=yield Ei(v.user,function df(D,g){return Hn(D,"POST","/v2/accounts/mfaEnrollment:withdraw",vn(D,g))}(v.user.auth,{idToken:M,mfaEnrollmentId:x}));v.enrolledFactors=v.enrolledFactors.filter(({uid:H})=>H!==x),yield v.user._updateTokensIfNecessary(N),yield v.user.reload()}catch(N){throw N}})()}}const Po=new WeakMap,ru="__sak";class Rh{constructor(g,v){this.storageRetriever=g,this.type=v}_isAvailable(){try{return this.storage?(this.storage.setItem(ru,"1"),this.storage.removeItem(ru),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(g,v){return this.storage.setItem(g,JSON.stringify(v)),Promise.resolve()}_get(g){const v=this.storage.getItem(g);return Promise.resolve(v?JSON.parse(v):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vs=(()=>{class D extends Rh{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(v,x)=>this.onStorageEvent(v,x),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function k_(){const D=(0,U.z$)();return vr(D)||So(D)}()&&function zl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Hl(),this._shouldAllowMigration=!0}forAllChangedKeys(v){for(const x of Object.keys(this.listeners)){const M=this.storage.getItem(x),N=this.localCache[x];M!==N&&v(x,N,M)}}onStorageEvent(v,x=!1){if(!v.key)return void this.forAllChangedKeys(($,ae,be)=>{this.notifyListeners($,be)});const M=v.key;if(x?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const $=this.storage.getItem(M);if(v.newValue!==$)null!==v.newValue?this.storage.setItem(M,v.newValue):this.storage.removeItem(M);else if(this.localCache[M]===v.newValue&&!x)return}const N=()=>{const $=this.storage.getItem(M);!x&&this.localCache[M]===$||this.notifyListeners(M,$)},H=this.storage.getItem(M);!function Fi(){return(0,U.w1)()&&10===document.documentMode}()||H===v.newValue||v.newValue===v.oldValue?N():setTimeout(N,10)}notifyListeners(v,x){this.localCache[v]=x;const M=this.listeners[v];if(M)for(const N of Array.from(M))N(x&&JSON.parse(x))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((v,x,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:v,oldValue:x,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(v,x){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[v]||(this.listeners[v]=new Set,this.localCache[v]=this.storage.getItem(v)),this.listeners[v].add(x)}_removeListener(v,x){this.listeners[v]&&(this.listeners[v].delete(x),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(v,x){var M=()=>super._set,N=this;return(0,l.Z)(function*(){yield M().call(N,v,x),N.localCache[v]=JSON.stringify(x)})()}_get(v){var x=()=>super._get,M=this;return(0,l.Z)(function*(){const N=yield x().call(M,v);return M.localCache[v]=JSON.stringify(N),N})()}_remove(v){var x=()=>super._remove,M=this;return(0,l.Z)(function*(){yield x().call(M,v),delete M.localCache[v]})()}}return D.type="LOCAL",D})(),ai=(()=>{class D extends Rh{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(v,x){}_removeListener(v,x){}}return D.type="SESSION",D})();let fi=(()=>{class D{constructor(v){this.eventTarget=v,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(v){const x=this.receivers.find(N=>N.isListeningto(v));if(x)return x;const M=new D(v);return this.receivers.push(M),M}isListeningto(v){return this.eventTarget===v}handleEvent(v){var x=this;return(0,l.Z)(function*(){var M;const N=v,{eventId:H,eventType:$,data:ae}=N.data,be=x.handlersMap[$];if(!be?.size)return;N.ports[0].postMessage({status:"ack",eventId:H,eventType:$});const pt=Array.from(be).map(function(It){return(M=M||(0,l.Z)(function*(tn){return tn(N.origin,ae)})).apply(this,arguments)}),ot=yield function il(D){var g;return Promise.all(D.map(function(v){return(g=g||(0,l.Z)(function*(x){try{return{fulfilled:!0,value:yield x}}catch(M){return{fulfilled:!1,reason:M}}})).apply(this,arguments)}))}(pt);N.ports[0].postMessage({status:"done",eventId:H,eventType:$,response:ot})})()}_subscribe(v,x){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[v]||(this.handlersMap[v]=new Set),this.handlersMap[v].add(x)}_unsubscribe(v,x){this.handlersMap[v]&&x&&this.handlersMap[v].delete(x),(!x||0===this.handlersMap[v].size)&&delete this.handlersMap[v],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function ys(D="",g=10){let v="";for(let x=0;x<g;x++)v+=Math.floor(10*Math.random());return D+v}class Sr{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,v,x=50){var M=this;return(0,l.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let H,$;return new Promise((ae,be)=>{const pt=ys("",20);N.port1.start();const ot=setTimeout(()=>{be(new Error("unsupported_event"))},x);$={messageChannel:N,onMessage(It){const tn=It;if(tn.data.eventId===pt)switch(tn.data.status){case"ack":clearTimeout(ot),H=setTimeout(()=>{be(new Error("timeout"))},3e3);break;case"done":clearTimeout(H),ae(tn.data.response);break;default:clearTimeout(ot),clearTimeout(H),be(new Error("invalid_response"))}}},M.handlers.add($),N.port1.addEventListener("message",$.onMessage),M.target.postMessage({eventType:g,eventId:pt,data:v},[N.port2])}).finally(()=>{$&&M.removeMessageHandler($)})})()}}function Ai(){return window}function S_(){return typeof Ai().WorkerGlobalScope<"u"&&"function"==typeof Ai().importScripts}const mf="firebaseLocalStorageDb",ss="firebaseLocalStorage",ff="fbase_key";class sc{constructor(g){this.request=g}toPromise(){return new Promise((g,v)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{v(this.request.error)})})}}function Jl(D,g){return D.transaction([ss],g?"readwrite":"readonly").objectStore(ss)}function ed(){const D=indexedDB.open(mf,1);return new Promise((g,v)=>{D.addEventListener("error",()=>{v(D.error)}),D.addEventListener("upgradeneeded",()=>{const x=D.result;try{x.createObjectStore(ss,{keyPath:ff})}catch(M){v(M)}}),D.addEventListener("success",(0,l.Z)(function*(){const x=D.result;x.objectStoreNames.contains(ss)?g(x):(x.close(),yield function Ob(){const D=indexedDB.deleteDatabase(mf);return new sc(D).toPromise()}(),g(yield ed()))}))})}function Ph(D,g,v){return(Xs=Xs||(0,l.Z)(function*(x,M,N){const H=Jl(x,!0).put({[ff]:M,value:N});return new sc(H).toPromise()})).apply(this,arguments)}function Oh(D,g){const v=Jl(D,!0).delete(g);return new sc(v).toPromise()}const nr=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var v=this;return(0,l.Z)(function*(){return v.db||(v.db=yield ed()),v.db})()}_withRetries(v){var x=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const N=yield x._openDb();return yield v(N)}catch(N){if(M++>3)throw N;x.db&&(x.db.close(),x.db=void 0)}})()}initializeServiceWorkerMessaging(){var v=this;return(0,l.Z)(function*(){return S_()?v.initializeReceiver():v.initializeSender()})()}initializeReceiver(){var v=this;return(0,l.Z)(function*(){var x,M;v.receiver=fi._getInstance(function Ma(){return S_()?self:null}()),v.receiver._subscribe("keyChanged",function(N,H){return(x=x||(0,l.Z)(function*($,ae){return{keyProcessed:(yield v._poll()).includes(ae.key)}})).apply(this,arguments)}),v.receiver._subscribe("ping",function(N,H){return(M=M||(0,l.Z)(function*($,ae){return["keyChanged"]})).apply(this,arguments)})})()}initializeSender(){var v=this;return(0,l.Z)(function*(){var x,M;if(v.activeServiceWorker=yield function A_(){return(Ci=Ci||(0,l.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}(),!v.activeServiceWorker)return;v.sender=new Sr(v.activeServiceWorker);const N=yield v.sender._send("ping",{},800);N&&null!==(x=N[0])&&void 0!==x&&x.fulfilled&&null!==(M=N[0])&&void 0!==M&&M.value.includes("keyChanged")&&(v.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(v){var x=this;return(0,l.Z)(function*(){if(x.sender&&x.activeServiceWorker&&function rs(){var D;return(null===(D=navigator?.serviceWorker)||void 0===D?void 0:D.controller)||null}()===x.activeServiceWorker)try{yield x.sender._send("keyChanged",{key:v},x.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const v=yield ed();return yield Ph(v,ru,"1"),yield Oh(v,ru),!0}catch{}return!1})()}_withPendingWrite(v){var x=this;return(0,l.Z)(function*(){x.pendingWrites++;try{yield v()}finally{x.pendingWrites--}})()}_set(v,x){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(N=>Ph(N,v,x)),M.localCache[v]=x,M.notifyServiceWorker(v)}))})()}_get(v){var x=this;return(0,l.Z)(function*(){const M=yield x._withRetries(N=>function M_(D,g){return(An=An||(0,l.Z)(function*(v,x){const M=Jl(v,!1).get(x),N=yield new sc(M).toPromise();return void 0===N?null:N.value})).apply(this,arguments)}(N,v));return x.localCache[v]=M,M})()}_remove(v){var x=this;return(0,l.Z)(function*(){return x._withPendingWrite((0,l.Z)(function*(){return yield x._withRetries(M=>Oh(M,v)),delete x.localCache[v],x.notifyServiceWorker(v)}))})()}_poll(){var v=this;return(0,l.Z)(function*(){const x=yield v._withRetries(H=>{const $=Jl(H,!1).getAll();return new sc($).toPromise()});if(!x)return[];if(0!==v.pendingWrites)return[];const M=[],N=new Set;for(const{fbase_key:H,value:$}of x)N.add(H),JSON.stringify(v.localCache[H])!==JSON.stringify($)&&(v.notifyListeners(H,$),M.push(H));for(const H of Object.keys(v.localCache))v.localCache[H]&&!N.has(H)&&(v.notifyListeners(H,null),M.push(H));return M})()}notifyListeners(v,x){this.localCache[v]=x;const M=this.listeners[v];if(M)for(const N of Array.from(M))N(x)}startPolling(){var v=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return v._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(v,x){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[v]||(this.listeners[v]=new Set,this._get(v)),this.listeners[v].add(x)}_removeListener(v,x){this.listeners[v]&&(this.listeners[v].delete(x),0===this.listeners[v].size&&delete this.listeners[v]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})(),su=1e12;class jr{constructor(g){this.auth=g,this.counter=su,this._widgets=new Map}render(g,v){const x=this.counter;return this._widgets.set(x,new ra(g,this.auth.name,v||{})),this.counter++,x}reset(g){var v;const x=g||su;null===(v=this._widgets.get(x))||void 0===v||v.delete(),this._widgets.delete(x)}getResponse(g){var v;return(null===(v=this._widgets.get(g||su))||void 0===v?void 0:v.getResponse())||""}execute(g){var v=this;return(0,l.Z)(function*(){var x;return null===(x=v._widgets.get(g||su))||void 0===x||x.execute(),""})()}}class ra{constructor(g,v,x){this.params=x,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;Ye(M,"argument-error",{appName:v}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ii(D){const g=[],v="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let x=0;x<D;x++)g.push(v.charAt(Math.floor(62*Math.random())));return g.join("")}(50);const{callback:g,"expired-callback":v}=this.params;if(g)try{g(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,v)try{v()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const td=g_("rcb"),nd=new Xa(3e4,6e4);class N_{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(g=Ai().grecaptcha)||void 0===g||!g.render)}load(g,v=""){return Ye(function ro(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(v),g,"argument-error"),this.shouldResolveImmediately(v)&&tc(Ai().grecaptcha)?Promise.resolve(Ai().grecaptcha):new Promise((x,M)=>{const N=Ai().setTimeout(()=>{M(mi(g,"network-request-failed"))},nd.get());Ai()[td]=()=>{Ai().clearTimeout(N),delete Ai()[td];const $=Ai().grecaptcha;if(!$||!tc($))return void M(mi(g,"internal-error"));const ae=$.render;$.render=(be,pt)=>{const ot=ae(be,pt);return this.counter++,ot},this.hostLanguage=v,x($)},on(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:td,render:"explicit",hl:v})}`).catch(()=>{clearTimeout(N),M(mi(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var v;return!(null===(v=Ai().grecaptcha)||void 0===v||!v.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class id{load(g){return(0,l.Z)(function*(){return new jr(g)})()}clearedOneInstance(){}}const so="recaptcha",Us={theme:"light",type:"image"};class Mi{constructor(g,v=Object.assign({},Us),x){this.parameters=v,this.type=so,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Li(x),this.isInvisible="invisible"===this.parameters.size,Ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;Ye(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new id:new N_,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const v=yield g.render(),x=g.getAssertedRecaptcha();return x.getResponse(v)||new Promise(N=>{const H=$=>{$&&(g.tokenChangeListeners.delete(H),N($))};g.tokenChangeListeners.add(H),g.isInvisible&&x.execute(v)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){Ye(!this.parameters.sitekey,this.auth,"argument-error"),Ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Ye(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return v=>{if(this.tokenChangeListeners.forEach(x=>x(v)),"function"==typeof g)g(v);else if("string"==typeof g){const x=Ai()[g];"function"==typeof x&&x(v)}}}assertNotDestroyed(){Ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let v=g.container;if(!g.isInvisible){const x=document.createElement("div");v.appendChild(x),v=x}g.widgetId=g.getAssertedRecaptcha().render(v,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){Ye(Gd()&&!S_(),g.auth,"internal-error"),yield function rd(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const v=yield function jl(D){return(Dt=Dt||(0,l.Z)(function*(g){return(yield Hn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}(g.auth);Ye(v,g.auth,"internal-error"),g.parameters.sitekey=v})()}getAssertedRecaptcha(){return Ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ir{constructor(g,v){this.verificationId=g,this.onConfirmation=v}confirm(g){const v=es._fromVerification(this.verificationId,g);return this.onConfirmation(v)}}function Ra(D,g,v){return(Js=Js||(0,l.Z)(function*(x,M,N){var H;const $=yield N.verify();try{let ae;if(Ye("string"==typeof $,x,"argument-error"),Ye(N.type===so,x,"argument-error"),ae="string"==typeof M?{phoneNumber:M}:M,"session"in ae){const be=ae.session;if("phoneNumber"in ae)return Ye("enroll"===be.type,x,"internal-error"),(yield function Ah(D,g){return Hn(D,"POST","/v2/accounts/mfaEnrollment:start",vn(D,g))}(x,{idToken:be.credential,phoneEnrollmentInfo:{phoneNumber:ae.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{Ye("signin"===be.type,x,"internal-error");const pt=(null===(H=ae.multiFactorHint)||void 0===H?void 0:H.uid)||ae.multiFactorUid;return Ye(pt,x,"missing-multi-factor-info"),(yield function oc(D,g){return Hn(D,"POST","/v2/accounts/mfaSignIn:start",vn(D,g))}(x,{mfaPendingCredential:be.credential,mfaEnrollmentId:pt,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:be}=yield function yh(D,g){return(wi=wi||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:sendVerificationCode",vn(v,x))})).apply(this,arguments)}(x,{phoneNumber:ae.phoneNumber,recaptchaToken:$});return be}}finally{N._reset()}})).apply(this,arguments)}let Oo=(()=>{class D{constructor(v){this.providerId=D.PROVIDER_ID,this.auth=Li(v)}verifyPhoneNumber(v,x){return Ra(this.auth,v,(0,U.m9)(x))}static credential(v,x){return es._fromVerification(v,x)}static credentialFromResult(v){return D.credentialFromTaggedObject(v)}static credentialFromError(v){return D.credentialFromTaggedObject(v.customData||{})}static credentialFromTaggedObject({_tokenResponse:v}){if(!v)return null;const{phoneNumber:x,temporaryProof:M}=v;return x&&M?es._fromTokenResponse(x,M):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function Gr(D,g){return g?Ns(g):(Ye(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class sa extends $c{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ka(g,this._buildIdpRequest())}_linkToIdToken(g,v){return ka(g,this._buildIdpRequest(v))}_getReauthenticationResolver(g){return ka(g,this._buildIdpRequest())}_buildIdpRequest(g){const v={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(v.idToken=g),v}}function Fh(D){return Qd(D.auth,new sa(D),D.bypassAuthState)}function _f(D){const{auth:g,user:v}=D;return Ye(v,g,"internal-error"),y_(v,new sa(D),D.bypassAuthState)}function au(D){return(ps=ps||(0,l.Z)(function*(g){const{auth:v,user:x}=g;return Ye(x,v,"internal-error"),ic(x,new sa(g),g.bypassAuthState)})).apply(this,arguments)}class oa{constructor(g,v,x,M,N=!1){this.auth=g,this.resolver=x,this.user=M,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(v)?v:[v]}execute(){var v,g=this;return new Promise(function(x,M){return(v=v||(0,l.Z)(function*(N,H){g.pendingPromise={resolve:N,reject:H};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch($){g.reject($)}})).apply(this,arguments)})}onAuthEvent(g){var v=this;return(0,l.Z)(function*(){const{urlResponse:x,sessionId:M,postBody:N,tenantId:H,error:$,type:ae}=g;if($)return void v.reject($);const be={auth:v.auth,requestUri:x,sessionId:M,tenantId:H||void 0,postBody:N||void 0,user:v.user,bypassAuthState:v.bypassAuthState};try{v.resolve(yield v.getIdpTask(ae)(be))}catch(pt){v.reject(pt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Fh;case"linkViaPopup":case"linkViaRedirect":return au;case"reauthViaPopup":case"reauthViaRedirect":return _f;default:hi(this.auth,"internal-error")}}resolve(g){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){gs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const rr=new Xa(2e3,1e4);let Xe=(()=>{class D extends oa{constructor(v,x,M,N,H){super(v,x,N,H),this.provider=M,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var v=this;return(0,l.Z)(function*(){const x=yield v.execute();return Ye(x,v.auth,"internal-error"),x})()}onExecution(){var v=this;return(0,l.Z)(function*(){gs(1===v.filter.length,"Popup operations only handle one event");const x=ys();v.authWindow=yield v.resolver._openPopup(v.auth,v.provider,v.filter[0],x),v.authWindow.associatedEvent=x,v.resolver._originValidation(v.auth).catch(M=>{v.reject(M)}),v.resolver._isIframeWebStorageSupported(v.auth,M=>{M||v.reject(mi(v.auth,"web-storage-unsupported"))}),v.pollUserCancellation()})()}get eventId(){var v;return(null===(v=this.authWindow)||void 0===v?void 0:v.associatedEvent)||null}cancel(){this.reject(mi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const v=()=>{var x,M;this.pollId=null!==(M=null===(x=this.authWindow)||void 0===x?void 0:x.window)&&void 0!==M&&M.closed?window.setTimeout(()=>{this.pollId=null,this.reject(mi(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(v,rr.get())};v()}}return D.currentPopupAction=null,D})();const ri="pendingRedirect",Mn=new Map;class wr extends oa{constructor(g,v,x=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],v,void 0,x),this.eventId=null}execute(){var g=()=>super.execute,v=this;return(0,l.Z)(function*(){let x=Mn.get(v.auth._key());if(!x){try{const N=(yield function Kn(D,g){return(Ce=Ce||(0,l.Z)(function*(v,x){const M=or(x),N=gf(v);if(!(yield N._isAvailable()))return!1;const H="true"===(yield N._get(M));return yield N._remove(M),H})).apply(this,arguments)}(v.resolver,v.auth))?yield g().call(v):null;x=()=>Promise.resolve(N)}catch(M){x=()=>Promise.reject(M)}Mn.set(v.auth._key(),x)}return v.bypassAuthState||Mn.set(v.auth._key(),()=>Promise.resolve(null)),x()})()}onAuthEvent(g){var v=()=>super.onAuthEvent,x=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return v().call(x,g);if("unknown"!==g.type){if(g.eventId){const M=yield x.auth._redirectUserForId(g.eventId);if(M)return x.user=M,v().call(x,g);x.resolve(null)}}else x.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function sr(D,g){return(Qe=Qe||(0,l.Z)(function*(v,x){return gf(v)._set(or(x),"true")})).apply(this,arguments)}function cu(D,g){Mn.set(D._key(),g)}function gf(D){return Ns(D._redirectPersistence)}function or(D){return Ht(ri,D.config.apiKey,D.name)}function Pa(D,g){return(Y=Y||(0,l.Z)(function*(v,x,M=!1){const N=Li(v),H=Gr(N,x),ae=yield new wr(N,H,M).execute();return ae&&!M&&(delete ae.user._redirectEventId,yield N._persistUserIfCurrent(ae.user),yield N._setRedirectUser(null,x)),ae})).apply(this,arguments)}function Oa(D){return(J=J||(0,l.Z)(function*(g){const v=ys(`${g.uid}:::`);return g._redirectEventId=v,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),v})).apply(this,arguments)}class xn{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let v=!1;return this.consumers.forEach(x=>{this.isEventForConsumer(g,x)&&(v=!0,this.sendToConsumer(g,x),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function lc(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Na(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,v||(this.queuedRedirectEvent=g,v=!0)),v}sendToConsumer(g,v){var x;if(g.error&&!Na(g)){const M=(null===(x=g.error.code)||void 0===x?void 0:x.split("auth/")[1])||"internal-error";v.onError(mi(this.auth,M))}else v.onAuthEvent(g)}isEventForConsumer(g,v){const x=null===v.eventId||!!g.eventId&&g.eventId===v.eventId;return v.filter.includes(g.type)&&x}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Jt(g))}saveEventToCache(g){this.cachedEventUids.add(Jt(g)),this.lastProcessedEventTime=Date.now()}}function Jt(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function Na({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===g?.code}function dc(D){return(Se=Se||(0,l.Z)(function*(g,v={}){return Hn(g,"GET","/v1/projects",v)})).apply(this,arguments)}const uc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bh=/^https?/;function vf(D){const g=Qa(),{protocol:v,hostname:x}=new URL(g);if(D.startsWith("chrome-extension://")){const H=new URL(D);return""===H.hostname&&""===x?"chrome-extension:"===v&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===v&&H.hostname===x}if(!Bh.test(v))return!1;if(uc.test(D))return x===D;const M=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(x)}const Ii=new Xa(3e4,6e4);function aa(){const D=Ai().___jsl;if(D?.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let v=0;v<D.CP.length;v++)D.CP[v]=null}let hc=null;const Vh=new Xa(5e3,15e3),cl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},k=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function T(D){const g=D.config;Ye(g.authDomain,D,"auth-domain-config-required");const v=g.emulator?zm(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,x={apiKey:g.apiKey,appName:D.name,v:te.SDK_VERSION},M=k.get(D.config.apiHost);M&&(x.eid=M);const N=D._getFrameworks();return N.length&&(x.fw=N.join(",")),`${v}?${(0,U.xO)(x).slice(1)}`}const B={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qe{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const kt="__/auth/handler",Zt="emulator/auth/handler",pi=encodeURIComponent("fac");function Jn(D,g,v,x,M,N){return(Bt=Bt||(0,l.Z)(function*(H,$,ae,be,pt,ot){Ye(H.config.authDomain,H,"auth-domain-config-required"),Ye(H.config.apiKey,H,"invalid-api-key");const It={apiKey:H.config.apiKey,appName:H.name,authType:ae,redirectUrl:be,v:te.SDK_VERSION,eventId:pt};if($ instanceof Si){$.setDefaultLanguage(H.languageCode),It.providerId=$.providerId||"",(0,U.xb)($.getCustomParameters())||(It.customParameters=JSON.stringify($.getCustomParameters()));for(const[Wr,Fo]of Object.entries(ot||{}))It[Wr]=Fo}if($ instanceof no){const Wr=$.getScopes().filter(Fo=>""!==Fo);Wr.length>0&&(It.scopes=Wr.join(","))}H.tenantId&&(It.tid=H.tenantId);const tn=It;for(const Wr of Object.keys(tn))void 0===tn[Wr]&&delete tn[Wr];const jn=yield H._getAppCheckToken(),Yi=jn?`#${pi}=${encodeURIComponent(jn)}`:"";return`${function Dn({config:D}){return D.emulator?zm(D,Zt):`https://${D.authDomain}/${kt}`}(H)}?${(0,U.xO)(tn).slice(1)}${Yi}`})).apply(this,arguments)}const ar="webStorageSupport",ws=class Lt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ai,this._completeRedirectFn=Pa,this._overrideRedirectResult=cu}_openPopup(g,v,x,M){var N=this;return(0,l.Z)(function*(){var H;gs(null===(H=N.eventManagers[g._key()])||void 0===H?void 0:H.manager,"_initialize() not called before _openPopup()");const $=yield Jn(g,v,x,Qa(),M);return function at(D,g,v,x=500,M=600){const N=Math.max((window.screen.availHeight-M)/2,0).toString(),H=Math.max((window.screen.availWidth-x)/2,0).toString();let $="";const ae=Object.assign(Object.assign({},B),{width:x.toString(),height:M.toString(),top:N,left:H}),be=(0,U.z$)().toLowerCase();v&&($=jc(be)?"_blank":v),Ea(be)&&(g=g||"http://localhost",ae.scrollbars="yes");const pt=Object.entries(ae).reduce((It,[tn,jn])=>`${It}${tn}=${jn},`,"");if(function Vr(D=(0,U.z$)()){var g;return So(D)&&!(null===(g=window.navigator)||void 0===g||!g.standalone)}(be)&&"_self"!==$)return function wt(D,g){const v=document.createElement("a");v.href=D,v.target=g;const x=document.createEvent("MouseEvent");x.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),v.dispatchEvent(x)}(g||"",$),new qe(null);const ot=window.open(g||"",$,pt);Ye(ot,D,"popup-blocked");try{ot.focus()}catch{}return new qe(ot)}(g,$,ys())})()}_openRedirect(g,v,x,M){var N=this;return(0,l.Z)(function*(){return yield N._originValidation(g),function hf(D){Ai().location.href=D}(yield Jn(g,v,x,Qa(),M)),new Promise(()=>{})})()}_initialize(g){const v=g._key();if(this.eventManagers[v]){const{manager:M,promise:N}=this.eventManagers[v];return M?Promise.resolve(M):(gs(N,"If manager is not set, promise should be"),N)}const x=this.initAndGetManager(g);return this.eventManagers[v]={promise:x},x.catch(()=>{delete this.eventManagers[v]}),x}initAndGetManager(g){var v=this;return(0,l.Z)(function*(){const x=yield function O(D){return(ht=ht||(0,l.Z)(function*(g){const v=yield function L_(D){return hc=hc||function Fa(D){return new Promise((g,v)=>{var x,M,N;function H(){aa(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{aa(),v(mi(D,"network-request-failed"))},timeout:Ii.get()})}if(null!==(M=null===(x=Ai().gapi)||void 0===x?void 0:x.iframes)&&void 0!==M&&M.Iframe)g(gapi.iframes.getContext());else{if(null===(N=Ai().gapi)||void 0===N||!N.load){const $=g_("iframefcb");return Ai()[$]=()=>{gapi.load?H():v(mi(D,"network-request-failed"))},on(`https://apis.google.com/js/api.js?onload=${$}`).catch(ae=>v(ae))}H()}}).catch(g=>{throw hc=null,g})}(D),hc}(g),x=Ai().gapi;return Ye(x,g,"internal-error"),v.open({where:document.body,url:T(g),messageHandlersFilter:x.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cl,dontclear:!0},M=>{var N;return new Promise(function(H,$){return(N=N||(0,l.Z)(function*(ae,be){yield M.restyle({setHideOnLeave:!1});const pt=mi(g,"network-request-failed"),ot=Ai().setTimeout(()=>{be(pt)},Vh.get());function It(){Ai().clearTimeout(ot),ae(M)}M.ping(It).then(It,()=>{be(pt)})})).apply(this,arguments)})})})).apply(this,arguments)}(g),M=new xn(g);return x.register("authEvent",N=>(Ye(N?.authEvent,g,"invalid-auth-event"),{status:M.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),v.eventManagers[g._key()]={manager:M},v.iframes[g._key()]=x,M})()}_isIframeWebStorageSupported(g,v){this.iframes[g._key()].send(ar,{type:ar},M=>{var N;const H=null===(N=M?.[0])||void 0===N?void 0:N[ar];void 0!==H&&v(!!H),hi(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function os(D){return(me=me||(0,l.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:v}=yield dc(g);for(const x of v)try{if(vf(x))return}catch{}hi(g,"unauthorized-domain")})).apply(this,arguments)}(g)),this.originValidationPromises[v]}get _shouldInitProactively(){return Hl()||vr()||So()}};class qi{constructor(g){this.factorId=g}_process(g,v,x){switch(v.type){case"enroll":return this._finalizeEnroll(g,v.credential,x);case"signin":return this._finalizeSignIn(g,v.credential);default:return _s("unexpected MultiFactorSessionType")}}}class $r extends qi{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new $r(g)}_finalizeEnroll(g,v,x){return function D_(D,g){return Hn(D,"POST","/v2/accounts/mfaEnrollment:finalize",vn(D,g))}(g,{idToken:v,displayName:x,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,v){return function zn(D,g){return Hn(D,"POST","/v2/accounts/mfaSignIn:finalize",vn(D,g))}(g,{mfaPendingCredential:v,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Nb=(()=>{class D{constructor(){}static assertion(v){return $r._fromCredential(v)}}return D.FACTOR_ID="phone",D})();var z_,j_,Uh,ll,ad,Lb="@firebase/auth";class ao{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var v=this;return(0,l.Z)(function*(){return v.assertAuthConfigured(),yield v.auth._initializationPromise,v.auth.currentUser?{accessToken:yield v.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const v=this.auth.onIdTokenChanged(x=>{g(x?.stsTokenManager.accessToken||null)});this.internalListeners.set(g,v),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const v=this.internalListeners.get(g);v&&(this.internalListeners.delete(g),v(),this.updateProactiveRefresh())}assertAuthConfigured(){Ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function dl(){return window}(0,U.Pz)("authIdTokenMaxAge"),function uu(D){(0,te._registerComponent)(new xe.wA("auth",(g,{options:v})=>{const x=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),N=g.getProvider("app-check-internal"),{apiKey:H,authDomain:$}=x.options;Ye(H&&!H.includes(":"),"invalid-api-key",{appName:x.name});const ae={apiKey:H,authDomain:$,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:eo(D)},be=new br(x,M,N,ae);return function _h(D,g){const v=g?.persistence||[],x=(Array.isArray(v)?v:[v]).map(Ns);g?.errorMap&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(x,g?.popupRedirectResolver)}(be,v),be},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,v,x)=>{g.getProvider("auth-internal").initialize()})),(0,te._registerComponent)(new xe.wA("auth-internal",g=>{const v=Li(g.getProvider("auth").getImmediate());return new ao(v)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,te.registerVersion)(Lb,"0.23.2",function U_(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,te.registerVersion)(Lb,"0.23.2","esm2017")}("Browser");class $_ extends xn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(v=>v(g)),super.onEvent(g)}initialized(){var g=this;return(0,l.Z)(function*(){yield g.initPromise})()}}function W_(D){return(ad=ad||(0,l.Z)(function*(g){const v=yield pu()._get(fc(g));return v&&(yield pu()._remove(fc(g))),v})).apply(this,arguments)}function ca(){const D=[];for(let v=0;v<20;v++){const x=Math.floor(62*Math.random());D.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(x))}return D.join("")}function pu(){return Ns(Vs)}function fc(D){return Ht("authEvent",D.config.apiKey,D.name)}function ld(D){if(!D?.includes("?"))return{};const[g,...v]=D.split("?");return(0,U.zd)(v.join("?"))}const vx=class Ub{constructor(){this._redirectPersistence=ai,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pa,this._overrideRedirectResult=cu}_initialize(g){var v=this;return(0,l.Z)(function*(){const x=g._key();let M=v.eventManagers.get(x);return M||(M=new $_(g),v.eventManagers.set(x,M),v.attachCallbackListeners(g,M)),M})()}_openPopup(g){hi(g,"operation-not-supported-in-this-environment")}_openRedirect(g,v,x,M){var N=this;return(0,l.Z)(function*(){!function G_(D){var g,v,x,M,N,H,$,ae,be,pt;const ot=dl();Ye("function"==typeof(null===(g=ot?.universalLinks)||void 0===g?void 0:g.subscribe),D,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Ye(typeof(null===(v=ot?.BuildInfo)||void 0===v?void 0:v.packageName)<"u",D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Ye("function"==typeof(null===(N=null===(M=null===(x=ot?.cordova)||void 0===x?void 0:x.plugins)||void 0===M?void 0:M.browsertab)||void 0===N?void 0:N.openUrl),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ye("function"==typeof(null===(ae=null===($=null===(H=ot?.cordova)||void 0===H?void 0:H.plugins)||void 0===$?void 0:$.browsertab)||void 0===ae?void 0:ae.isAvailable),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Ye("function"==typeof(null===(pt=null===(be=ot?.cordova)||void 0===be?void 0:be.InAppBrowser)||void 0===pt?void 0:pt.open),D,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const H=yield N._initialize(g);yield H.initialized(),H.resetRedirect(),function sd(){Mn.clear()}(),yield N._originValidation(g);const $=function mu(D,g,v=null){return{type:g,eventId:v,urlResponse:null,sessionId:ca(),postBody:null,tenantId:D.tenantId,error:mi(D,"no-auth-event")}}(g,x,M);yield function fu(D,g){return pu()._set(fc(D),g)}(g,$);const ae=yield function px(D,g,v){return(z_=z_||(0,l.Z)(function*(x,M,N){var H;const{BuildInfo:$}=dl();gs(M.sessionId,"AuthEvent did not contain a session ID");const ae=yield function zh(D){return(ll=ll||(0,l.Z)(function*(g){const v=function hu(D){if(gs(/[0-9a-zA-Z]+/.test(D),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(D);const g=new ArrayBuffer(D.length),v=new Uint8Array(g);for(let x=0;x<D.length;x++)v[x]=D.charCodeAt(x);return v}(g),x=yield crypto.subtle.digest("SHA-256",v);return Array.from(new Uint8Array(x)).map(N=>N.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}(M.sessionId),be={};return So()?be.ibi=$.packageName:bs()?be.apn=$.packageName:hi(x,"operation-not-supported-in-this-environment"),$.displayName&&(be.appDisplayName=$.displayName),be.sessionId=ae,Jn(x,N,M.type,void 0,null!==(H=M.eventId)&&void 0!==H?H:void 0,be)})).apply(this,arguments)}(g,$,v),be=yield function _x(D){const{cordova:g}=dl();return new Promise(v=>{g.plugins.browsertab.isAvailable(x=>{let M=null;x?g.plugins.browsertab.openUrl(D):M=g.InAppBrowser.open(D,function Ul(D=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}()?"_blank":"_system","location=yes"),v(M)})})}(ae);return function Vb(D,g,v){return(Uh=Uh||(0,l.Z)(function*(x,M,N){const{cordova:H}=dl();let $=()=>{};try{yield new Promise((ae,be)=>{let pt=null;function ot(){var jn;ae();const Yi=null===(jn=H.plugins.browsertab)||void 0===jn?void 0:jn.close;"function"==typeof Yi&&Yi(),"function"==typeof N?.close&&N.close()}function It(){pt||(pt=window.setTimeout(()=>{be(mi(x,"redirect-cancelled-by-user"))},2e3))}function tn(){"visible"===document?.visibilityState&&It()}M.addPassiveListener(ot),document.addEventListener("resume",It,!1),bs()&&document.addEventListener("visibilitychange",tn,!1),$=()=>{M.removePassiveListener(ot),document.removeEventListener("resume",It,!1),document.removeEventListener("visibilitychange",tn,!1),pt&&window.clearTimeout(pt)}})}finally{$()}})).apply(this,arguments)}(g,H,be)})()}_isIframeWebStorageSupported(g,v){throw new Error("Method not implemented.")}_originValidation(g){const v=g._key();return this.originValidationPromises[v]||(this.originValidationPromises[v]=function cd(D){return(j_=j_||(0,l.Z)(function*(g){const{BuildInfo:v}=dl(),x={};So()?x.iosBundleId=v.packageName:bs()?x.androidPackageName=v.packageName:hi(g,"operation-not-supported-in-this-environment"),yield dc(g,x)})).apply(this,arguments)}(g)),this.originValidationPromises[v]}attachCallbackListeners(g,v){var x,M;const{universalLinks:N,handleOpenURL:H,BuildInfo:$}=dl(),ae=setTimeout((0,l.Z)(function*(){yield W_(g),v.onEvent(q_())}),500),be=function(tn){return(x=x||(0,l.Z)(function*(jn){clearTimeout(ae);const Yi=yield W_(g);let Wr=null;Yi&&jn?.url&&(Wr=function bf(D,g){var v,x;const M=function _u(D){const g=ld(D),v=g.link?decodeURIComponent(g.link):void 0,x=ld(v).link,M=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return ld(M).link||M||x||v||D}(g);if(M.includes("/__/auth/callback")){const N=ld(M),H=N.firebaseError?function jh(D){try{return JSON.parse(D)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,$=null===(x=null===(v=H?.code)||void 0===v?void 0:v.split("auth/"))||void 0===x?void 0:x[1],ae=$?mi($):null;return ae?{type:D.type,eventId:D.eventId,tenantId:D.tenantId,error:ae,urlResponse:null,sessionId:null,postBody:null}:{type:D.type,eventId:D.eventId,tenantId:D.tenantId,sessionId:D.sessionId,urlResponse:M,postBody:null}}return null}(Yi,jn.url)),v.onEvent(Wr||q_())})).apply(this,arguments)};typeof N<"u"&&"function"==typeof N.subscribe&&N.subscribe(null,be);const pt=H,ot=`${$.packageName.toLowerCase()}://`;dl().handleOpenURL=function(It){return(M=M||(0,l.Z)(function*(tn){if(tn.toLowerCase().startsWith(ot)&&be({url:tn}),"function"==typeof pt)try{pt(tn)}catch(jn){console.error(jn)}})).apply(this,arguments)}}};function q_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mi("no-auth-event")}}var Y_,bx,Hb;function $h(){var D;return(null===(D=self?.location)||void 0===D?void 0:D.protocol)||null}function K_(D=(0,U.z$)()){return!("file:"!==$h()&&"ionic:"!==$h()&&"capacitor:"!==$h()||!D.toLowerCase().match(/iphone|ipad|ipod|android/))}function wf(){try{const D=self.localStorage,g=ys();if(D)return D.setItem(g,"1"),D.removeItem(g),!function wx(D=(0,U.z$)()){return function dT(){return(0,U.w1)()&&11===document?.documentMode}()||function yf(D=(0,U.z$)()){return/Edge\/\d+/.test(D)}(D)}()||(0,U.hl)()}catch{return ul()&&(0,U.hl)()}return!1}function ul(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Hs(){return(function Wh(){return"http:"===$h()||"https:"===$h()}()||(0,U.ru)()||K_())&&!function TN(){return(0,U.b$)()||(0,U.UG)()}()&&wf()&&!ul()}function hl(){return K_()&&typeof document<"u"}const Mr={LOCAL:"local",NONE:"none",SESSION:"session"},la=Ye,xf="persistence";function pc(D){return(bx=bx||(0,l.Z)(function*(g){yield g._initializationPromise;const v=Ef(),x=Ht(xf,g.config.apiKey,g.name);v&&v.setItem(x,g._getPersistence())})).apply(this,arguments)}function Ef(){var D;try{return(null===(D=function X_(){return typeof window<"u"?window:null}())||void 0===D?void 0:D.sessionStorage)||null}catch{return null}}const zb=Ye;class La{constructor(){this.browserResolver=Ns(ws),this.cordovaResolver=Ns(vx),this.underlyingResolver=null,this._redirectPersistence=ai,this._completeRedirectFn=Pa,this._overrideRedirectResult=cu}_initialize(g){var v=this;return(0,l.Z)(function*(){return yield v.selectUnderlyingResolver(),v.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,v,x,M){var N=this;return(0,l.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(g,v,x,M)})()}_openRedirect(g,v,x,M){var N=this;return(0,l.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(g,v,x,M)})()}_isIframeWebStorageSupported(g,v){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,v)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return hl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return zb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,l.Z)(function*(){if(g.underlyingResolver)return;const v=yield function Q_(){return(Y_=Y_||(0,l.Z)(function*(){return!!hl()&&new Promise(D=>{const g=setTimeout(()=>{D(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),D(!0)})})})).apply(this,arguments)}();g.underlyingResolver=v?g.cordovaResolver:g.browserResolver})()}}function Yh(D){return D.unwrap()}function xx(D){return J_(D)}function J_(D){const{_tokenResponse:g}=D instanceof U.ZR?D.customData:D;if(!g)return null;if(!(D instanceof U.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return Oo.credentialFromResult(D);const v=g.providerId;if(!v||v===Ni.PASSWORD)return null;let x;switch(v){case Ni.GOOGLE:x=Ch;break;case Ni.FACEBOOK:x=xh;break;case Ni.GITHUB:x=ql;break;case Ni.TWITTER:x=Qm;break;default:const{oauthIdToken:M,oauthAccessToken:N,oauthTokenSecret:H,pendingToken:$,nonce:ae}=g;return N||H||M||$?$?v.startsWith("saml.")?Ta._create(v,$):na._fromParams({providerId:v,signInMethod:v,pendingToken:$,idToken:M,accessToken:N}):new Wc(v).credential({idToken:M,accessToken:N,rawNonce:ae}):null}return D instanceof U.ZR?x.credentialFromError(D):x.credentialFromResult(D)}function xs(D,g){return g.catch(v=>{throw v instanceof U.ZR&&function If(D,g){var v;const x=null===(v=g.customData)||void 0===v?void 0:v._tokenResponse;if("auth/multi-factor-auth-required"===g?.code)g.resolver=new Cx(D,function Vt(D,g){var v;const x=(0,U.m9)(D),M=g;return Ye(g.customData.operationType,x,"argument-error"),Ye(null===(v=M.customData._serverResponse)||void 0===v?void 0:v.mfaPendingCredential,x,"argument-error"),Sh._fromError(x,M)}(D,g));else if(x){const M=J_(g),N=g;M&&(N.credential=M,N.tenantId=x.tenantId||void 0,N.email=x.email||void 0,N.phoneNumber=x.phoneNumber||void 0)}}(D,v),v}).then(v=>{const M=v.user;return{operationType:v.operationType,credential:xx(v),additionalUserInfo:tl(v),user:Vi.getOrCreate(M)}})}function dd(D,g){return(Hb=Hb||(0,l.Z)(function*(v,x){const M=yield x;return{verificationId:M.verificationId,confirm:N=>xs(v,M.confirm(N))}})).apply(this,arguments)}class Cx{constructor(g,v){this.resolver=v,this.auth=function Zh(D){return D.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return xs(Yh(this.auth),this.resolver.resolveSignIn(g))}}class Vi{constructor(g){this._delegate=g,this.multiFactor=function Mh(D){const g=(0,U.m9)(D);return Po.has(g)||Po.set(g,nl._fromUser(g)),Po.get(g)}(g)}static getOrCreate(g){return Vi.USER_MAP.has(g)||Vi.USER_MAP.set(g,new Vi(g)),Vi.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var v=this;return(0,l.Z)(function*(){return xs(v.auth,Eh(v._delegate,g))})()}linkWithPhoneNumber(g,v){var x=this;return(0,l.Z)(function*(){return dd(x.auth,function Nh(D,g,v){return(yn=yn||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x);yield Yl(!1,H,"phone");const $=yield Ra(H.auth,M,(0,U.m9)(N));return new ir($,ae=>Eh(H,ae))})).apply(this,arguments)}(x._delegate,g,v))})()}linkWithPopup(g){var v=this;return(0,l.Z)(function*(){return xs(v.auth,function sl(D,g,v){return(X=X||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x);Ca(H.auth,M,Si);const $=Gr(H.auth,N);return new Xe(H.auth,"linkViaPopup",M,$,H).executeNotNull()})).apply(this,arguments)}(v._delegate,g,La))})()}linkWithRedirect(g){var v=this;return(0,l.Z)(function*(){return yield pc(Li(v.auth)),function oo(D,g,v){return function cc(D,g,v){return(Bn=Bn||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x);Ca(H.auth,M,Si),yield H.auth._initializationPromise;const $=Gr(H.auth,N);yield Yl(!1,H,M.providerId),yield sr($,H.auth);const ae=yield Oa(H);return $._openRedirect(H.auth,M,"linkViaRedirect",ae)})).apply(this,arguments)}(D,g,v)}(v._delegate,g,La)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var v=this;return(0,l.Z)(function*(){return xs(v.auth,Ih(v._delegate,g))})()}reauthenticateWithPhoneNumber(g,v){return dd(this.auth,function pf(D,g,v){return(fs=fs||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x),$=yield Ra(H.auth,M,(0,U.m9)(N));return new ir($,ae=>Ih(H,ae))})).apply(this,arguments)}(this._delegate,g,v))}reauthenticateWithPopup(g){return xs(this.auth,function F_(D,g,v){return(Be=Be||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x);Ca(H.auth,M,Si);const $=Gr(H.auth,N);return new Xe(H.auth,"reauthViaPopup",M,$,H).executeNotNull()})).apply(this,arguments)}(this._delegate,g,La))}reauthenticateWithRedirect(g){var v=this;return(0,l.Z)(function*(){return yield pc(Li(v.auth)),function No(D,g,v){return function lu(D,g,v){return(_t=_t||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x);Ca(H.auth,M,Si),yield H.auth._initializationPromise;const $=Gr(H.auth,N);yield sr($,H.auth);const ae=yield Oa(H);return $._openRedirect(H.auth,M,"reauthViaRedirect",ae)})).apply(this,arguments)}(D,g,v)}(v._delegate,g,La)})()}sendEmailVerification(g){return function tu(D,g){return(Ut=Ut||(0,l.Z)(function*(v,x){const M=(0,U.m9)(v),H={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};x&&Mo(M.auth,H,x);const{email:$}=yield function Db(D,g){return(je=je||(0,l.Z)(function*(v,x){return qd(v,x)})).apply(this,arguments)}(M.auth,H);$!==v.email&&(yield v.reload())})).apply(this,arguments)}(this._delegate,g)}unlink(g){var v=this;return(0,l.Z)(function*(){return yield function Sa(D,g){return(We=We||(0,l.Z)(function*(v,x){const M=(0,U.m9)(v);yield Yl(!0,M,x);const{providerUserInfo:N}=yield function Wd(D,g){return(oe=oe||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:update",x)})).apply(this,arguments)}(M.auth,{idToken:yield M.getIdToken(),deleteProvider:[x]}),H=Kd(N||[]);return M.providerData=M.providerData.filter($=>H.has($.providerId)),H.has("phone")||(M.phoneNumber=null),yield M.auth._persistUserIfCurrent(M),M})).apply(this,arguments)}(v._delegate,g),v})()}updateEmail(g){return function C_(D,g){return Th((0,U.m9)(D),g,null)}(this._delegate,g)}updatePassword(g){return function io(D,g){return Th((0,U.m9)(D),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function ou(D,g){return(Eo=Eo||(0,l.Z)(function*(v,x){yield ic((0,U.m9)(v),x)})).apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Ql(D,g){return(fr=fr||(0,l.Z)(function*(v,{displayName:x,photoURL:M}){if(void 0===x&&void 0===M)return;const N=(0,U.m9)(v),$={idToken:yield N.getIdToken(),displayName:x,photoUrl:M,returnSecureToken:!0},ae=yield Ei(N,function x_(D,g){return(Pn=Pn||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:update",x)})).apply(this,arguments)}(N.auth,$));N.displayName=ae.displayName||null,N.photoURL=ae.photoUrl||null;const be=N.providerData.find(({providerId:pt})=>"password"===pt);be&&(be.displayName=N.displayName,be.photoURL=N.photoURL),yield N._updateTokensIfNecessary(ae)})).apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,v){return function nu(D,g,v){return(en=en||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x),ae={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield x.getIdToken(),newEmail:M};N&&Mo(H.auth,ae,N);const{email:be}=yield function kb(D,g){return(Un=Un||(0,l.Z)(function*(v,x){return qd(v,x)})).apply(this,arguments)}(H.auth,ae);be!==x.email&&(yield x.reload())})).apply(this,arguments)}(this._delegate,g,v)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Vi.USER_MAP=new WeakMap;const _c=Ye;let Df=(()=>{class D{constructor(v,x){if(this.app=v,x.isInitialized())return this._delegate=x.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=v.options;_c(M,"invalid-api-key",{appName:v.name}),_c(M,"invalid-api-key",{appName:v.name});const N=typeof window<"u"?La:void 0;this._delegate=x.initialize({options:{persistence:as(M,v.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(oh),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Vi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(v){this._delegate.languageCode=v}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(v){this._delegate.tenantId=v}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(v,x){!function Da(D,g,v){const x=Li(D);Ye(x._canInitEmulator,x,"emulator-config-failed"),Ye(/^https?:\/\//.test(g),x,"invalid-emulator-scheme");const M=!!v?.disableWarnings,N=Fs(g),{host:H,port:$}=function Ls(D){const g=Fs(D),v=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!v)return{host:"",port:null};const x=v[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(x);if(M){const N=M[1];return{host:N,port:$l(x.substr(N.length+1))}}{const[N,H]=x.split(":");return{host:N,port:$l(H)}}}(g);x.config.emulator={url:`${N}//${H}${null===$?"":`:${$}`}/`},x.settings.appVerificationDisabledForTesting=!0,x.emulatorConfig=Object.freeze({host:H,port:$,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function gh(){function D(){const g=document.createElement("p"),v=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",v.position="fixed",v.width="100%",v.backgroundColor="#ffffff",v.border=".1em solid #000000",v.color="#b50000",v.bottom="0px",v.left="0px",v.margin="0px",v.zIndex="10000",v.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}(this._delegate,v,x)}applyActionCode(v){return function Jd(D,g){return(Oi=Oi||(0,l.Z)(function*(v,x){yield function qm(D,g){return(Te=Te||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:update",vn(v,x))})).apply(this,arguments)}((0,U.m9)(v),{oobCode:x})})).apply(this,arguments)}(this._delegate,v)}checkActionCode(v){return Dh(this._delegate,v)}confirmPasswordReset(v,x){return function w_(D,g,v){return(Nn=Nn||(0,l.Z)(function*(x,M,N){yield Ib((0,U.m9)(x),{oobCode:M,newPassword:N})})).apply(this,arguments)}(this._delegate,v,x)}createUserWithEmailAndPassword(v,x){var M=this;return(0,l.Z)(function*(){return xs(M._delegate,function Jm(D,g,v){return(Ps=Ps||(0,l.Z)(function*(x,M,N){var H;const $=Li(x),ae={returnSecureToken:!0,email:M,password:N,clientType:"CLIENT_TYPE_WEB"};let be;if(null!==(H=$._getRecaptchaConfig())&&void 0!==H&&H.emailPasswordEnabled){const tn=yield Jr($,ae,"signUpPassword");be=Yc($,tn)}else{var pt;be=Yc($,ae).catch(function(tn){return(pt=pt||(0,l.Z)(function*(jn){if("auth/missing-recaptcha-token"===jn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Yi=yield Jr($,ae,"signUpPassword");return Yc($,Yi)}return Promise.reject(jn)})).apply(this,arguments)})}const ot=yield be.catch(tn=>Promise.reject(tn)),It=yield ts._fromIdTokenResponse($,"signIn",ot);return yield $._updateCurrentUser(It.user),It})).apply(this,arguments)}(M._delegate,v,x))})()}fetchProvidersForEmail(v){return this.fetchSignInMethodsForEmail(v)}fetchSignInMethodsForEmail(v){return function kh(D,g){return(Ft=Ft||(0,l.Z)(function*(v,x){const N={identifier:x,continueUri:Gd()?Qa():"http://localhost"},{signinMethods:H}=yield function nf(D,g){return(xa=xa||(0,l.Z)(function*(v,x){return Hn(v,"POST","/v1/accounts:createAuthUri",vn(v,x))})).apply(this,arguments)}((0,U.m9)(v),N);return H||[]})).apply(this,arguments)}(this._delegate,v)}isSignInWithEmailLink(v){return function Kl(D,g){const v=to.parseLink(g);return"EMAIL_SIGNIN"===v?.operation}(0,v)}getRedirectResult(){var v=this;return(0,l.Z)(function*(){_c(Hs(),v._delegate,"operation-not-supported-in-this-environment");const x=yield function Lh(D,g){return(K=K||(0,l.Z)(function*(v,x){return yield Li(v)._initializationPromise,Pa(v,x,!1)})).apply(this,arguments)}(v._delegate,La);return x?xs(v._delegate,Promise.resolve(x)):{credential:null,user:null}})()}addFrameworkForLogging(v){!function cT(D,g){Li(D)._logFramework(g)}(this._delegate,v)}onAuthStateChanged(v,x,M){const{next:N,error:H,complete:$}=Kh(v,x,M);return this._delegate.onAuthStateChanged(N,H,$)}onIdTokenChanged(v,x,M){const{next:N,error:H,complete:$}=Kh(v,x,M);return this._delegate.onIdTokenChanged(N,H,$)}sendSignInLinkToEmail(v,x){return function tf(D,g,v){return(Qs=Qs||(0,l.Z)(function*(x,M,N){var H;const $=Li(x),ae={requestType:"EMAIL_SIGNIN",email:M,clientType:"CLIENT_TYPE_WEB"};function be(ot,It){Ye(It.handleCodeInApp,$,"argument-error"),It&&Mo($,ot,It)}if(null!==(H=$._getRecaptchaConfig())&&void 0!==H&&H.emailPasswordEnabled){const ot=yield Jr($,ae,"getOobCode",!0);be(ot,N),yield oi($,ot)}else{var pt;be(ae,N),yield oi($,ae).catch(function(ot){return(pt=pt||(0,l.Z)(function*(It){if("auth/missing-recaptcha-token"!==It.code)return Promise.reject(It);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const tn=yield Jr($,ae,"getOobCode",!0);be(tn,N),yield oi($,tn)}})).apply(this,arguments)})}})).apply(this,arguments)}(this._delegate,v,x)}sendPasswordResetEmail(v,x){return function Xc(D,g,v){return(hn=hn||(0,l.Z)(function*(x,M,N){var H;const $=Li(x),ae={requestType:"PASSWORD_RESET",email:M,clientType:"CLIENT_TYPE_WEB"};if(null!==(H=$._getRecaptchaConfig())&&void 0!==H&&H.emailPasswordEnabled){const pt=yield Jr($,ae,"getOobCode",!0);N&&Mo($,pt,N),yield Ym($,pt)}else{var be;N&&Mo($,ae,N),yield Ym($,ae).catch(function(pt){return(be=be||(0,l.Z)(function*(ot){if("auth/missing-recaptcha-token"!==ot.code)return Promise.reject(ot);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const It=yield Jr($,ae,"getOobCode",!0);N&&Mo($,It,N),yield Ym($,It)}})).apply(this,arguments)})}})).apply(this,arguments)}(this._delegate,v,x||void 0)}setPersistence(v){var x=this;return(0,l.Z)(function*(){let M;switch(function Cf(D,g){la(Object.values(Mr).includes(g),D,"invalid-persistence-type"),(0,U.b$)()?la(g!==Mr.SESSION,D,"unsupported-persistence-type"):(0,U.UG)()?la(g===Mr.NONE,D,"unsupported-persistence-type"):ul()?la(g===Mr.NONE||g===Mr.LOCAL&&(0,U.hl)(),D,"unsupported-persistence-type"):la(g===Mr.NONE||wf(),D,"unsupported-persistence-type")}(x._delegate,v),v){case Mr.SESSION:M=ai;break;case Mr.LOCAL:M=(yield Ns(nr)._isAvailable())?nr:Vs;break;case Mr.NONE:M=nt;break;default:return hi("argument-error",{appName:x._delegate.name})}return x._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(v){return this.signInWithCredential(v)}signInAnonymously(){return xs(this._delegate,function Kc(D){return(ye=ye||(0,l.Z)(function*(g){var v;const x=Li(g);if(yield x._initializationPromise,null!==(v=x.currentUser)&&void 0!==v&&v.isAnonymous)return new ts({user:x.currentUser,providerId:null,operationType:"signIn"});const M=yield Yc(x,{returnSecureToken:!0}),N=yield ts._fromIdTokenResponse(x,"signIn",M,!0);return yield x._updateCurrentUser(N.user),N})).apply(this,arguments)}(this._delegate))}signInWithCredential(v){return xs(this._delegate,Zl(this._delegate,v))}signInWithCustomToken(v){return xs(this._delegate,function lx(D,g){return(ui=ui||(0,l.Z)(function*(v,x){const M=Li(v),N=yield function zr(D,g){return(Zn=Zn||(0,l.Z)(function*(v,x){return Jo(v,"POST","/v1/accounts:signInWithCustomToken",vn(v,x))})).apply(this,arguments)}(M,{token:x,returnSecureToken:!0}),H=yield ts._fromIdTokenResponse(M,"signIn",N);return yield M._updateCurrentUser(H.user),H})).apply(this,arguments)}(this._delegate,v))}signInWithEmailAndPassword(v,x){return xs(this._delegate,function ef(D,g,v){return Zl((0,U.m9)(D),Wl.credential(g,v))}(this._delegate,v,x))}signInWithEmailLink(v,x){return xs(this._delegate,function eu(D,g,v){return(er=er||(0,l.Z)(function*(x,M,N){const H=(0,U.m9)(x),$=Wl.credentialWithLink(M,N||Qa());return Ye($._tenantId===(H.tenantId||null),H,"tenant-id-mismatch"),Zl(H,$)})).apply(this,arguments)}(this._delegate,v,x))}signInWithPhoneNumber(v,x){return dd(this._delegate,function rl(D,g,v){return(Qo=Qo||(0,l.Z)(function*(x,M,N){const H=Li(x),$=yield Ra(H,M,(0,U.m9)(N));return new ir($,ae=>Zl(H,ae))})).apply(this,arguments)}(this._delegate,v,x))}signInWithPopup(v){var x=this;return(0,l.Z)(function*(){return _c(Hs(),x._delegate,"operation-not-supported-in-this-environment"),xs(x._delegate,function yr(D,g,v){return(Ka=Ka||(0,l.Z)(function*(x,M,N){const H=Li(x);Ca(x,M,Si);const $=Gr(H,N);return new Xe(H,"signInViaPopup",M,$).executeNotNull()})).apply(this,arguments)}(x._delegate,v,La))})()}signInWithRedirect(v){var x=this;return(0,l.Z)(function*(){return _c(Hs(),x._delegate,"operation-not-supported-in-this-environment"),yield pc(x._delegate),function ac(D,g,v){return function si(D,g,v){return(st=st||(0,l.Z)(function*(x,M,N){const H=Li(x);Ca(x,M,Si),yield H._initializationPromise;const $=Gr(H,N);return yield sr($,H),$._openRedirect(H,M,"signInViaRedirect")})).apply(this,arguments)}(D,g,v)}(x._delegate,v,La)})()}updateCurrentUser(v){return this._delegate.updateCurrentUser(v)}verifyPasswordResetCode(v){return function Xm(D,g){return(Rs=Rs||(0,l.Z)(function*(v,x){const{data:M}=yield Dh((0,U.m9)(v),x);return M.email})).apply(this,arguments)}(this._delegate,v)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return D.Persistence=Mr,D})();function Kh(D,g,v){let x=D;"function"!=typeof D&&({next:x,error:g,complete:v}=D);const M=x;return{next:H=>M(H&&Vi.getOrCreate(H)),error:g,complete:v}}function as(D,g){const v=function qh(D,g){const v=Ef();if(!v)return[];const x=Ht(xf,D,g);switch(v.getItem(x)){case Mr.NONE:return[nt];case Mr.LOCAL:return[nr,ai];case Mr.SESSION:return[ai];default:return[]}}(D,g);if(typeof self<"u"&&!v.includes(nr)&&v.push(nr),typeof window<"u")for(const x of[Vs,ai])v.includes(x)||v.push(x);return v.includes(nt)||v.push(nt),v}class ml{constructor(){this.providerId="phone",this._delegate=new Oo(Yh(ne.Z.auth()))}static credential(g,v){return Oo.credential(g,v)}verifyPhoneNumber(g,v){return this._delegate.verifyPhoneNumber(g,v)}unwrap(){return this._delegate}}ml.PHONE_SIGN_IN_METHOD=Oo.PHONE_SIGN_IN_METHOD,ml.PROVIDER_ID=Oo.PROVIDER_ID;const eg=Ye;class jb{constructor(g,v,x=ne.Z.app()){var M;eg(null===(M=x.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:x.name}),this._delegate=new Mi(g,v,x.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ex(D){D.INTERNAL.registerComponent(new xe.wA("auth-compat",g=>{const v=g.getProvider("app-compat").getImmediate(),x=g.getProvider("auth");return new Df(v,x)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Wl,FacebookAuthProvider:xh,GithubAuthProvider:ql,GoogleAuthProvider:Ch,OAuthProvider:Wc,SAMLAuthProvider:Bs,PhoneAuthProvider:ml,PhoneMultiFactorGenerator:Nb,RecaptchaVerifier:jb,TwitterAuthProvider:Qm,Auth:Df,AuthCredential:$c,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),D.registerVersion("@firebase/auth-compat","0.4.2")}(ne.Z)},4303:(yt,ke,V)=>{V.r(ke),V.d(ke,{FirebaseError:()=>te.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>ye,_addComponent:()=>Je,_addOrOverwriteComponent:()=>xi,_apps:()=>He,_clearComponents:()=>Zn,_components:()=>dt,_getProvider:()=>_n,_registerComponent:()=>St,_removeServiceInstance:()=>Gt,deleteApp:()=>Qs,getApp:()=>Rs,getApps:()=>Ps,initializeApp:()=>mr,onLog:()=>xa,registerVersion:()=>er,setLogLevel:()=>Ft});var re,xe,Oe,l=V(5861),ne=V(4537),U=V(7879),te=V(9058),ce=V(1878);class ve{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Ce=>{if(function G(Be){const X=Be.getComponent();return"VERSION"===X?.type}(Ce)){const Qe=Ce.getImmediate();return`${Qe.library}/${Qe.version}`}return null}).filter(Ce=>Ce).join(" ")}}const Z="@firebase/app",Fe=new U.Yd("@firebase/app"),ye="[DEFAULT]",We={[Z]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},He=new Map,dt=new Map;function Je(Be,X){try{Be.container.addComponent(X)}catch(Ce){Fe.debug(`Component ${X.name} failed to register with FirebaseApp ${Be.name}`,Ce)}}function xi(Be,X){Be.container.addOrOverwriteComponent(X)}function St(Be){const X=Be.name;if(dt.has(X))return Fe.debug(`There were multiple attempts to register component ${X}.`),!1;dt.set(X,Be);for(const Ce of He.values())Je(Ce,Be);return!0}function _n(Be,X){const Ce=Be.container.getProvider("heartbeat").getImmediate({optional:!0});return Ce&&Ce.triggerHeartbeat(),Be.container.getProvider(X)}function Gt(Be,X,Ce=ye){_n(Be,X).clearInstance(Ce)}function Zn(){dt.clear()}const hn=new te.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Nn{constructor(X,Ce,Qe){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Ce),this._name=Ce.name,this._automaticDataCollectionEnabled=Ce.automaticDataCollectionEnabled,this._container=Qe,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw hn.create("app-deleted",{appName:this._name})}}const Oi="10.3.1";function mr(Be,X={}){let Ce=Be;"object"!=typeof X&&(X={name:X});const Qe=Object.assign({name:ye,automaticDataCollectionEnabled:!1},X),st=Qe.name;if("string"!=typeof st||!st)throw hn.create("bad-app-name",{appName:String(st)});if(Ce||(Ce=(0,te.aH)()),!Ce)throw hn.create("no-options");const _t=He.get(st);if(_t){if((0,te.vZ)(Ce,_t.options)&&(0,te.vZ)(Qe,_t.config))return _t;throw hn.create("duplicate-app",{appName:st})}const Bn=new ne.H0(st);for(const Y of dt.values())Bn.addComponent(Y);const K=new Nn(Ce,Qe,Bn);return He.set(st,K),K}function Rs(Be=ye){const X=He.get(Be);if(!X&&Be===ye&&(0,te.aH)())return mr();if(!X)throw hn.create("no-app",{appName:Be});return X}function Ps(){return Array.from(He.values())}function Qs(Be){return(re=re||(0,l.Z)(function*(X){const Ce=X.name;He.has(Ce)&&(He.delete(Ce),yield Promise.all(X.container.getProviders().map(Qe=>Qe.delete())),X.isDeleted=!0)})).apply(this,arguments)}function er(Be,X,Ce){var Qe;let st=null!==(Qe=We[Be])&&void 0!==Qe?Qe:Be;Ce&&(st+=`-${Ce}`);const _t=st.match(/\s|\//),Bn=X.match(/\s|\//);if(_t||Bn){const K=[`Unable to register library "${st}" with version "${X}":`];return _t&&K.push(`library name "${st}" contains illegal characters (whitespace or "/")`),_t&&Bn&&K.push("and"),Bn&&K.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void Fe.warn(K.join(" "))}St(new ne.wA(`${st}-version`,()=>({library:st,version:X}),"VERSION"))}function xa(Be,X){if(null!==Be&&"function"!=typeof Be)throw hn.create("invalid-log-argument");(0,U.Am)(Be,X)}function Ft(Be){(0,U.Ub)(Be)}const Ut="firebase-heartbeat-database",en=1,Pn="firebase-heartbeat-store";let fr=null;function tr(){return fr||(fr=(0,ce.X3)(Ut,en,{upgrade:(Be,X)=>{0===X&&Be.createObjectStore(Pn)}}).catch(Be=>{throw hn.create("idb-open",{originalErrorMessage:Be.message})})),fr}function Ci(Be,X){return(Oe=Oe||(0,l.Z)(function*(Ce,Qe){try{const _t=(yield tr()).transaction(Pn,"readwrite");yield _t.objectStore(Pn).put(Qe,Xs(Ce)),yield _t.done}catch(st){if(st instanceof te.ZR)Fe.warn(st.message);else{const _t=hn.create("idb-set",{originalErrorMessage:st?.message});Fe.warn(_t.message)}}})).apply(this,arguments)}function Xs(Be){return`${Be.name}!${Be.options.appId}`}class yn{constructor(X){this.container=X,this._heartbeatsCache=null;const Ce=this.container.getProvider("app").getImmediate();this._storage=new Eo(Ce),this._heartbeatsCachePromise=this._storage.read().then(Qe=>(this._heartbeatsCache=Qe,Qe))}triggerHeartbeat(){var X=this;return(0,l.Z)(function*(){const Qe=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),st=fs();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==st&&!X._heartbeatsCache.heartbeats.some(_t=>_t.date===st))return X._heartbeatsCache.heartbeats.push({date:st,agent:Qe}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(_t=>{const Bn=new Date(_t.date).valueOf();return Date.now()-Bn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,l.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Ce=fs(),{heartbeatsToSend:Qe,unsentEntries:st}=function Js(Be,X=1024){const Ce=[];let Qe=Be.slice();for(const st of Be){const _t=Ce.find(Bn=>Bn.agent===st.agent);if(_t){if(_t.dates.push(st.date),ps(Ce)>X){_t.dates.pop();break}}else if(Ce.push({agent:st.agent,dates:[st.date]}),ps(Ce)>X){Ce.pop();break}Qe=Qe.slice(1)}return{heartbeatsToSend:Ce,unsentEntries:Qe}}(X._heartbeatsCache.heartbeats),_t=(0,te.L)(JSON.stringify({version:2,heartbeats:Qe}));return X._heartbeatsCache.lastSentHeartbeatDate=Ce,st.length>0?(X._heartbeatsCache.heartbeats=st,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),_t})()}}function fs(){return(new Date).toISOString().substring(0,10)}class Eo{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,te.hl)()&&(0,te.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,l.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function On(Be){return(xe=xe||(0,l.Z)(function*(X){try{return yield(yield tr()).transaction(Pn).objectStore(Pn).get(Xs(X))}catch(Ce){if(Ce instanceof te.ZR)Fe.warn(Ce.message);else{const Qe=hn.create("idb-get",{originalErrorMessage:Ce?.message});Fe.warn(Qe.message)}}})).apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Ce=this;return(0,l.Z)(function*(){var Qe;if(yield Ce._canUseIndexedDBPromise){const _t=yield Ce.read();return Ci(Ce.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Ce=this;return(0,l.Z)(function*(){var Qe;if(yield Ce._canUseIndexedDBPromise){const _t=yield Ce.read();return Ci(Ce.app,{lastSentHeartbeatDate:null!==(Qe=X.lastSentHeartbeatDate)&&void 0!==Qe?Qe:_t.lastSentHeartbeatDate,heartbeats:[..._t.heartbeats,...X.heartbeats]})}})()}}function ps(Be){return(0,te.L)(JSON.stringify({version:2,heartbeats:Be})).length}!function Ka(Be){St(new ne.wA("platform-logger",X=>new ve(X),"PRIVATE")),St(new ne.wA("heartbeat",X=>new yn(X),"PRIVATE")),er(Z,"0.9.18",Be),er(Z,"0.9.18","esm2017"),er("fire-js","")}("")},4537:(yt,ke,V)=>{V.d(ke,{H0:()=>Oe,wA:()=>U,zt:()=>ce});var l=V(5861),ne=V(9058);class U{constructor(G,Z,oe){this.name=G,this.instanceFactory=Z,this.type=oe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const te="[DEFAULT]";class ce{constructor(G,Z){this.name=G,this.container=Z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const Z=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(Z)){const oe=new ne.BH;if(this.instancesDeferred.set(Z,oe),this.isInitialized(Z)||this.shouldAutoInitialize())try{const Fe=this.getOrInitializeService({instanceIdentifier:Z});Fe&&oe.resolve(Fe)}catch{}}return this.instancesDeferred.get(Z).promise}getImmediate(G){var Z;const oe=this.normalizeInstanceIdentifier(G?.identifier),Fe=null!==(Z=G?.optional)&&void 0!==Z&&Z;if(!this.isInitialized(oe)&&!this.shouldAutoInitialize()){if(Fe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:oe})}catch(Me){if(Fe)return null;throw Me}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function xe(ve){return"EAGER"===ve.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:te})}catch{}for(const[Z,oe]of this.instancesDeferred.entries()){const Fe=this.normalizeInstanceIdentifier(Z);try{const Me=this.getOrInitializeService({instanceIdentifier:Fe});oe.resolve(Me)}catch{}}}}clearInstance(G=te){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,l.Z)(function*(){const Z=Array.from(G.instances.values());yield Promise.all([...Z.filter(oe=>"INTERNAL"in oe).map(oe=>oe.INTERNAL.delete()),...Z.filter(oe=>"_delete"in oe).map(oe=>oe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=te){return this.instances.has(G)}getOptions(G=te){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:Z={}}=G,oe=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(oe))throw Error(`${this.name}(${oe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Fe=this.getOrInitializeService({instanceIdentifier:oe,options:Z});for(const[Me,tt]of this.instancesDeferred.entries())oe===this.normalizeInstanceIdentifier(Me)&&tt.resolve(Fe);return Fe}onInit(G,Z){var oe;const Fe=this.normalizeInstanceIdentifier(Z),Me=null!==(oe=this.onInitCallbacks.get(Fe))&&void 0!==oe?oe:new Set;Me.add(G),this.onInitCallbacks.set(Fe,Me);const tt=this.instances.get(Fe);return tt&&G(tt,Fe),()=>{Me.delete(G)}}invokeOnInitCallbacks(G,Z){const oe=this.onInitCallbacks.get(Z);if(oe)for(const Fe of oe)try{Fe(G,Z)}catch{}}getOrInitializeService({instanceIdentifier:G,options:Z={}}){let oe=this.instances.get(G);if(!oe&&this.component&&(oe=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=G,ve===te?void 0:ve),options:Z}),this.instances.set(G,oe),this.instancesOptions.set(G,Z),this.invokeOnInitCallbacks(oe,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,oe)}catch{}var ve;return oe||null}normalizeInstanceIdentifier(G=te){return this.component?this.component.multipleInstances?G:te:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Oe{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const Z=this.getProvider(G.name);if(Z.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);Z.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const Z=new ce(G,this);return this.providers.set(G,Z),Z}getProviders(){return Array.from(this.providers.values())}}},7879:(yt,ke,V)=>{V.d(ke,{Am:()=>ve,Ub:()=>Oe,Yd:()=>xe,in:()=>ne});const l=[];var ne=function(G){return G[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",G}(ne||{});const U={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},te=ne.INFO,ce={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},re=(G,Z,...oe)=>{if(Z<G.logLevel)return;const Fe=(new Date).toISOString(),Me=ce[Z];if(!Me)throw new Error(`Attempted to log a message with an invalid logType (value: ${Z})`);console[Me](`[${Fe}]  ${G.name}:`,...oe)};class xe{constructor(Z){this.name=Z,this._logLevel=te,this._logHandler=re,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(Z){if(!(Z in ne))throw new TypeError(`Invalid value "${Z}" assigned to \`logLevel\``);this._logLevel=Z}setLogLevel(Z){this._logLevel="string"==typeof Z?U[Z]:Z}get logHandler(){return this._logHandler}set logHandler(Z){if("function"!=typeof Z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=Z}get userLogHandler(){return this._userLogHandler}set userLogHandler(Z){this._userLogHandler=Z}debug(...Z){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...Z),this._logHandler(this,ne.DEBUG,...Z)}log(...Z){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...Z),this._logHandler(this,ne.VERBOSE,...Z)}info(...Z){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...Z),this._logHandler(this,ne.INFO,...Z)}warn(...Z){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...Z),this._logHandler(this,ne.WARN,...Z)}error(...Z){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...Z),this._logHandler(this,ne.ERROR,...Z)}}function Oe(G){l.forEach(Z=>{Z.setLogLevel(G)})}function ve(G,Z){for(const oe of l){let Fe=null;Z&&Z.level&&(Fe=U[Z.level]),oe.userLogHandler=null===G?null:(Me,tt,...Ve)=>{const et=Ve.map(Le=>{if(null==Le)return null;if("string"==typeof Le)return Le;if("number"==typeof Le||"boolean"==typeof Le)return Le.toString();if(Le instanceof Error)return Le.message;try{return JSON.stringify(Le)}catch{return null}}).filter(Le=>Le).join(" ");tt>=(Fe??Me.logLevel)&&G({level:ne[tt].toLowerCase(),message:et,args:Ve,type:Me.name})}}}},1878:(yt,ke,V)=>{V.d(ke,{X3:()=>bt});var l=V(5861);const ne=(he,je)=>je.some(it=>he instanceof it);let U,te;const xe=new WeakMap,Oe=new WeakMap,ve=new WeakMap,G=new WeakMap,Z=new WeakMap;let Me={get(he,je,it){if(he instanceof IDBTransaction){if("done"===je)return Oe.get(he);if("objectStoreNames"===je)return he.objectStoreNames||ve.get(he);if("store"===je)return it.objectStoreNames[1]?void 0:it.objectStore(it.objectStoreNames[0])}return Le(he[je])},set:(he,je,it)=>(he[je]=it,!0),has:(he,je)=>he instanceof IDBTransaction&&("done"===je||"store"===je)||je in he};function et(he){return"function"==typeof he?function Ve(he){return he!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function re(){return te||(te=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(he)?function(...je){return he.apply(Dt(this),je),Le(xe.get(this))}:function(...je){return Le(he.apply(Dt(this),je))}:function(je,...it){const Pt=he.call(Dt(this),je,...it);return ve.set(Pt,je.sort?je.sort():[je]),Le(Pt)}}(he):(he instanceof IDBTransaction&&function Fe(he){if(Oe.has(he))return;const je=new Promise((it,Pt)=>{const Un=()=>{he.removeEventListener("complete",Xn),he.removeEventListener("error",Yn),he.removeEventListener("abort",Yn)},Xn=()=>{it(),Un()},Yn=()=>{Pt(he.error||new DOMException("AbortError","AbortError")),Un()};he.addEventListener("complete",Xn),he.addEventListener("error",Yn),he.addEventListener("abort",Yn)});Oe.set(he,je)}(he),ne(he,function ce(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(he,Me):he)}function Le(he){if(he instanceof IDBRequest)return function oe(he){const je=new Promise((it,Pt)=>{const Un=()=>{he.removeEventListener("success",Xn),he.removeEventListener("error",Yn)},Xn=()=>{it(Le(he.result)),Un()},Yn=()=>{Pt(he.error),Un()};he.addEventListener("success",Xn),he.addEventListener("error",Yn)});return je.then(it=>{it instanceof IDBCursor&&xe.set(it,he)}).catch(()=>{}),Z.set(je,he),je}(he);if(G.has(he))return G.get(he);const je=et(he);return je!==he&&(G.set(he,je),Z.set(je,he)),je}const Dt=he=>Z.get(he);function bt(he,je,{blocked:it,upgrade:Pt,blocking:Un,terminated:Xn}={}){const Yn=indexedDB.open(he,je),Pi=Le(Yn);return Pt&&Yn.addEventListener("upgradeneeded",wi=>{Pt(Le(Yn.result),wi.oldVersion,wi.newVersion,Le(Yn.transaction),wi)}),it&&Yn.addEventListener("blocked",wi=>it(wi.oldVersion,wi.newVersion,wi)),Pi.then(wi=>{Xn&&wi.addEventListener("close",()=>Xn()),Un&&wi.addEventListener("versionchange",Qr=>Un(Qr.oldVersion,Qr.newVersion,Qr))}).catch(()=>{}),Pi}const Ue=["get","getKey","getAll","getAllKeys","count"],ue=["put","add","delete","clear"],Te=new Map;function $e(he,je){var it;if(!(he instanceof IDBDatabase)||je in he||"string"!=typeof je)return;if(Te.get(je))return Te.get(je);const Pt=je.replace(/FromIndex$/,""),Un=je!==Pt,Xn=ue.includes(Pt);if(!(Pt in(Un?IDBIndex:IDBObjectStore).prototype)||!Xn&&!Ue.includes(Pt))return;const Yn=function(wi){return(it=it||(0,l.Z)(function*(Qr,...fe){const pe=this.transaction(Qr,Xn?"readwrite":"readonly");let Ee=pe.store;return Un&&(Ee=Ee.index(fe.shift())),(yield Promise.all([Ee[Pt](...fe),Xn&&pe.done]))[0]})).apply(this,arguments)};return Te.set(je,Yn),Yn}!function tt(he){Me=he(Me)}(he=>({...he,get:(je,it,Pt)=>$e(je,it)||he.get(je,it,Pt),has:(je,it)=>!!$e(je,it)||he.has(je,it)}))},5861:(yt,ke,V)=>{function l(U,te,ce,re,xe,Oe,ve){try{var G=U[Oe](ve),Z=G.value}catch(oe){return void ce(oe)}G.done?te(Z):Promise.resolve(Z).then(re,xe)}function ne(U){return function(){var te=this,ce=arguments;return new Promise(function(re,xe){var Oe=U.apply(te,ce);function ve(Z){l(Oe,re,xe,ve,G,"next",Z)}function G(Z){l(Oe,re,xe,ve,G,"throw",Z)}ve(void 0)})}}V.d(ke,{Z:()=>ne})},7582:(yt,ke,V)=>{function te(fe,pe){var Ee={};for(var ye in fe)Object.prototype.hasOwnProperty.call(fe,ye)&&pe.indexOf(ye)<0&&(Ee[ye]=fe[ye]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(ye=Object.getOwnPropertySymbols(fe);We<ye.length;We++)pe.indexOf(ye[We])<0&&Object.prototype.propertyIsEnumerable.call(fe,ye[We])&&(Ee[ye[We]]=fe[ye[We]])}return Ee}function oe(fe,pe,Ee,ye){return new(Ee||(Ee=Promise))(function(He,dt){function Je(_n){try{St(ye.next(_n))}catch(Gt){dt(Gt)}}function xi(_n){try{St(ye.throw(_n))}catch(Gt){dt(Gt)}}function St(_n){_n.done?He(_n.value):function We(He){return He instanceof Ee?He:new Ee(function(dt){dt(He)})}(_n.value).then(Je,xi)}St((ye=ye.apply(fe,pe||[])).next())})}function le(fe){return this instanceof le?(this.v=fe,this):new le(fe)}function Ue(fe,pe,Ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,ye=Ee.apply(fe,pe||[]),He=[];return We={},dt("next"),dt("throw"),dt("return"),We[Symbol.asyncIterator]=function(){return this},We;function dt(Zn){ye[Zn]&&(We[Zn]=function(ui){return new Promise(function(hn,Nn){He.push([Zn,ui,hn,Nn])>1||Je(Zn,ui)})})}function Je(Zn,ui){try{!function xi(Zn){Zn.value instanceof le?Promise.resolve(Zn.value.v).then(St,_n):Gt(He[0][2],Zn)}(ye[Zn](ui))}catch(hn){Gt(He[0][3],hn)}}function St(Zn){Je("next",Zn)}function _n(Zn){Je("throw",Zn)}function Gt(Zn,ui){Zn(ui),He.shift(),He.length&&Je(He[0][0],He[0][1])}}function Te(fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ee,pe=fe[Symbol.asyncIterator];return pe?pe.call(fe):(fe=function Ve(fe){var pe="function"==typeof Symbol&&Symbol.iterator,Ee=pe&&fe[pe],ye=0;if(Ee)return Ee.call(fe);if(fe&&"number"==typeof fe.length)return{next:function(){return fe&&ye>=fe.length&&(fe=void 0),{value:fe&&fe[ye++],done:!fe}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(fe),Ee={},ye("next"),ye("throw"),ye("return"),Ee[Symbol.asyncIterator]=function(){return this},Ee);function ye(He){Ee[He]=fe[He]&&function(dt){return new Promise(function(Je,xi){!function We(He,dt,Je,xi){Promise.resolve(xi).then(function(St){He({value:St,done:Je})},dt)}(Je,xi,(dt=fe[He](dt)).done,dt.value)})}}}V.d(ke,{FC:()=>Ue,KL:()=>Te,_T:()=>te,mG:()=>oe,qq:()=>le}),"function"==typeof SuppressedError&&SuppressedError}},yt=>{yt(yt.s=1183)}]);